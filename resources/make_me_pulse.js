webpackJsonp([0, 1], [function(e, t, n) {
    e.exports = n(1)
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }
    var r = n(2),
        o = (i(r), n(12)),
        a = i(o),
        s = null;
    document.addEventListener("DOMContentLoaded", function() {
        console.log("Make Me Pulse wishes you all the best for 2016 !"), window.addEventListener("touchstart", function(e) {
            e.preventDefault()
        }, !1), window.addEventListener("touchmove", function(e) {
            e.preventDefault()
        }, !1), s = new a["default"]
    })
}, function(e, t, n) {
    "use strict";
    n(3), window.TweenMax = n(4), window.THREE = n(6), window.Stats = n(7), window.Matter = n(8), n(9), n(10), n(11)
}, function(e, t) {
    var n, i, r = function(e, t) {
        return function() {
            return e.apply(t, arguments)
        }
    };
    window.Device = function() {
        function e() {
            this._handleOrientation = r(this._handleOrientation, this), this._handleResize = r(this._handleResize, this), this.onDOMloaded = r(this.onDOMloaded, this), this.previousDevice = window.device, window.device = {}, this._doc_element = null, this._user_agent = window.navigator.userAgent.toLowerCase()
        }
        return e.prototype.osx = function() {
            return this._find("mac os x")
        }, e.prototype.ios = function() {
            return this.iphone() || this.ipod() || this.ipad()
        }, e.prototype.iphone = function() {
            return this._find("iphone")
        }, e.prototype.ipod = function() {
            return this._find("ipod")
        }, e.prototype.ipad = function() {
            return this._find("ipad")
        }, e.prototype.android = function() {
            return this._find("android")
        }, e.prototype.chrome = function() {
            return this._find("chrome")
        }, e.prototype.firefox = function() {
            return this._find("firefox")
        }, e.prototype.ie = function() {
            return null !== new RegExp("trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(this._user_agent) || null !== new RegExp("msie").exec(this._user_agent)
        }, e.prototype.ie12 = function() {
            return this._find("msie 12.0")
        }, e.prototype.ie11 = function() {
            return this._find("msie 11.0")
        }, e.prototype.ie10 = function() {
            return this._find("msie 10.0")
        }, e.prototype.ie9 = function() {
            return this._find("msie 9.0")
        }, e.prototype.ie8 = function() {
            return this._find("msie 8.0")
        }, e.prototype.ie7 = function() {
            return this._find("msie 7.0")
        }, e.prototype.ie6 = function() {
            return this._find("msie 6.0")
        }, e.prototype.safari = function() {
            return this._find("safari")
        }, e.prototype.androidPhone = function() {
            return this.android() && this._find("mobile")
        }, e.prototype.androidTablet = function() {
            return window.innerWidth > 768, this.android() && !this._find("mobile")
        }, e.prototype.blackberry = function() {
            return this._find("blackberry") || this._find("bb10") || this._find("rim")
        }, e.prototype.blackberryPhone = function() {
            return this.blackberry() && !this._find("tablet")
        }, e.prototype.blackberryTablet = function() {
            return this.blackberry() && this._find("tablet")
        }, e.prototype.windows = function() {
            return this._find("windows")
        }, e.prototype.windowsPhone = function() {
            return this.windows() && this._find("phone")
        }, e.prototype.windowsTablet = function() {
            return this.windows() && this._find("touch") && !this.windowsPhone()
        }, e.prototype.fxos = function() {
            return (this._find("(mobile;") || this._find("(tablet;")) && this._find("; rv:")
        }, e.prototype.fxosPhone = function() {
            return this.fxos() && this._find("mobile")
        }, e.prototype.fxosTablet = function() {
            return this.fxos() && this._find("tablet")
        }, e.prototype.meego = function() {
            return this._find("meego")
        }, e.prototype.cordova = function() {
            return window.cordova && "file:" === location.protocol
        }, e.prototype.nodeWebkit = function() {
            return "object" == typeof window.process
        }, e.prototype.mobile = function() {
            return this.androidPhone() || this.iphone() || this.ipod() || this.windowsPhone() || this.blackberryPhone() || this.fxosPhone() || this.meego()
        }, e.prototype.tablet = function() {
            return this.ipad() || this.androidTablet() || this.blackberryTablet() || this.windowsTablet() || this.fxosTablet()
        }, e.prototype.desktop = function() {
            return !this.tablet() && !this.mobile()
        }, e.prototype.nexus5 = function() {
            return this._find("nexus 5")
        }, e.prototype.portrait = function() {
            return window.innerHeight / window.innerWidth > 1
        }, e.prototype.landscape = function() {
            return window.innerHeight / window.innerWidth < 1
        }, e.prototype.noConflict = function() {
            return window.device = this.previousDevice, this
        }, e.prototype.browserVersion = function() {
            var e, t, n;
            return n = navigator.userAgent, t = void 0, e = n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [], /trident/i.test(e[1]) ? (t = /\brv[ :]+(\d+)/g.exec(n) || [], {
                name: "IE ",
                version: t[1] || ""
            }) : "Chrome" === e[1] && (t = n.match(/\bOPR\/(\d+)/), null !== t) ? {
                name: "Opera",
                version: t[1]
            } : (e = e[2] ? [e[1], e[2]] : [navigator.appName, navigator.appVersion, "-?"], null !== (t = n.match(/version\/(\d+)/i)) && e.splice(1, 1, t[1]), {
                name: e[0],
                version: e[1]
            })
        }, e.prototype._find = function(e) {
            return -1 !== this._user_agent.indexOf(e)
        }, e.prototype._hasClass = function(e) {
            var t;
            return t = new RegExp(e, "i"), this._doc_element.className.match(t)
        }, e.prototype._addClass = function(e) {
            return this._hasClass(e) ? void 0 : this._doc_element.className += " " + e
        }, e.prototype._removeClass = function(e) {
            return this._hasClass(e) ? this._doc_element.className = this._doc_element.className.replace(e, "") : void 0
        }, e.prototype.onDOMloaded = function() {
            return this._doc_element = window.document.body, this.ios() ? this.ipad() ? this._addClass("ios ipad tablet") : this.iphone() ? this._addClass("ios iphone mobile") : this.ipod() && this._addClass("ios ipod mobile") : this.android() ? this.desktop() ? this._addClass("android desktop error-android-resolution") : this.androidTablet() ? this._addClass("android tablet") : this._addClass("android mobile") : this.blackberry() ? this.blackberryTablet() ? this._addClass("blackberry tablet") : this._addClass("blackberry mobile") : this.windows() ? this.windowsTablet() ? this._addClass("windows tablet") : this.windowsPhone() ? this._addClass("windows mobile") : this.windows() && this._addClass("windows desktop") : this.fxos() ? this.fxosTablet() ? this._addClass("fxos tablet") : this._addClass("fxos mobile") : this.meego() ? this._addClass("meego mobile") : this.nodeWebkit() ? this._addClass("node-webkit") : this.osx() ? this._addClass("osx desktop") : this._addClass("desktop"), this.desktop() && this._addClass("desktop"), this.cordova() && this._addClass("cordova"), this.chrome() && this._addClass("chrome"), this.firefox() && this._addClass("firefox"), this.ie() && (this._addClass("ie"), this.ie6() ? this._addClass("ie6") : this.ie7() ? this._addClass("ie7") : this.ie8() ? this._addClass("ie8") : this.ie9() ? this._addClass("ie9") : this.ie10() ? this._addClass("ie10") : this._addClass("ie11")), this._supports_orientation = "onorientationchange" in window, this._orientation_event = (this._supports_orientation, "orientationchange"), window.addEventListener ? window.addEventListener("resize", this._handleResize, !1) : document.attachEvent("resize", this._handleResize), this._handleResize()
        }, e.prototype.orientationCallback = null, e.prototype._handleResize = function() {
            var e;
            e = "portrait", this.landscape() ? (this._removeClass("portrait"), this._addClass("landscape"), e = "landscape") : (this._removeClass("landscape"), this._addClass("portrait")), "function" == typeof this.orientationCallback && this.orientationCallback(e)
        }, e.prototype._handleOrientation = function(e) {
            var t;
            t = "portrait", this.landscape() ? (this._removeClass("portrait"), this._addClass("landscape"), t = "landscape") : (this._removeClass("landscape"), this._addClass("portrait")), "function" == typeof this.orientationCallback && this.orientationCallback(t)
        }, e
    }(), n = function() {
        function e() {}
        var t, n;
        return n = null, e.get = function() {
            return null != n ? n : n = new t
        }, t = function() {
            function e() {
                this.onChangeOrientation = r(this.onChangeOrientation, this), this.device = new window.Device, this.browserVersion = this.device.browserVersion(), this.isOSX = this.device.osx(), this.isIpad = this.device.ios() && this.device.ipad(), this.isIphone = this.device.ios() && (this.device.iphone() || this.device.ipod), this.isIos = this.device.ios(), this.isAndroidTablet = this.device.android() && this.device.androidTablet(), this.device.android() && !this.device.androidTablet() && (this.isAndroidPhone = !0), this.isAndroid = this.device.android(), this.isTablet = this.device.tablet(), this.isMobile = this.device.mobile(), this.isDesktop = this.device.desktop(), this.isNexus5 = this.device.nexus5(), this.isWindow = this.device.windows(), this.isWindowsPhone = this.device.windowsPhone(), this.isWindowsTablet = this.device.windowsTablet(), this.isChrome = this.device.chrome(), this.isFirefox = this.device.firefox(), this.isIE = this.device.ie(), this.isIE6 = this.device.ie6(), this.isIE7 = this.device.ie7(), this.isIE8 = this.device.ie8(), this.isIE9 = this.device.ie9(), this.isIE10 = this.device.ie10(), this.isIE11 = this.device.ie11(), this.isIE12 = this.device.ie12(), this.isIEDesktop = this.device.ie() && !this.device.windowsPhone() && !this.device.windowsTablet(), this.isltIE10 = this.device.ie9() || this.device.ie8() || this.device.ie7() || this.device.ie6(), this.islteIE10 = this.device.ie10() || this.device.ie9() || this.device.ie8() || this.device.ie7() || this.device.ie6(), this.isltIE9 = this.device.ie8() || this.device.ie7() || this.device.ie6(), this.islteIE9 = this.device.ie9() || this.device.ie8() || this.device.ie7() || this.device.ie6(), this.isSafari = !this.device.chrome() && this.device.safari(), this.isLandscape = this.device.landscape(), this.isPortrait = this.device.portrait(), this.isGalaxyTab10inches = this.device.android() && i("(min-device-width: 1280px) and (max-device-width: 1281px) and (orientation: landscape), (min-device-width: 800px) and (max-device-width: 801px) and (orientation: portrait)"), this.isGalaxyTab7inches = this.device.android() && i("(min-device-width: 1024px) and (max-device-width: 1025px) and (orientation: landscape), (min-device-width: 600px) and (max-device-width: 601px) and (orientation: portrait)"), this.isGalaxyTab = this.isGalaxyTab7inches || this.isGalaxyTab10inches, this.isAndroid && this.isGalaxyTab && this.forceGalaxyTab()
            }
            return e.prototype.forceGalaxyTab = function() {
                return this.device.desktop = function() {
                    return !0
                }, this.device.tablet = function() {
                    return !1
                }, this.device.mobile = function() {
                    return !1
                }, this.isDesktop = this.device.desktop(), this.isTablet = this.device.tablet(), this.isMobile = this.device.mobile()
            }, e.prototype.bindEvents = function() {
                return this.device.onDOMloaded()
            }, e.prototype.onChangeOrientation = function(e) {
                return null == e && (e = null), null != e ? this.device.orientationCallback = e : void 0
            }, e
        }(), e
    }(), i = function(e) {
        var t, n, i;
        if (null != window.matchMedia) switch (t = "(min-device-width: 1024px)", i = "(min-device-width: 768px) and (max-device-width: 1023px)", n = "(min-device-width: 320px) and (max-device-width: 767px)", e) {
            case "mobile":
                return window.matchMedia(n).matches;
            case "tablet":
                return window.matchMedia(i).matches;
            case "desktop":
                return window.matchMedia(t).matches;
            default:
                return window.matchMedia(e).matches
        }
    }, window.BrowserDetect = n.get(), BrowserDetect.bindEvents()
}, function(e, t, n) {
    var i, r;
    (function(o) {
        var a = "undefined" != typeof e && e.exports && "undefined" != typeof o ? o : this || window;
        (a._gsQueue || (a._gsQueue = [])).push(function() {
                "use strict";
                a._gsDefine("TweenMax", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(e, t, n) {
                        var i = function(e) {
                                var t, n = [],
                                    i = e.length;
                                for (t = 0; t !== i; n.push(e[t++]));
                                return n
                            },
                            r = function(e, t, n) {
                                var i, r, o = e.cycle;
                                for (i in o) r = o[i], e[i] = "function" == typeof r ? r.call(t[n], n) : r[n % r.length];
                                delete e.cycle
                            },
                            o = function(e, t, i) {
                                n.call(this, e, t, i), this._cycle = 0, this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._dirty = !0, this.render = o.prototype.render
                            },
                            a = 1e-10,
                            s = n._internals,
                            u = s.isSelector,
                            l = s.isArray,
                            c = o.prototype = n.to({}, .1, {}),
                            h = [];
                        o.version = "1.18.0", c.constructor = o, c.kill()._gc = !1, o.killTweensOf = o.killDelayedCallsTo = n.killTweensOf, o.getTweensOf = n.getTweensOf, o.lagSmoothing = n.lagSmoothing, o.ticker = n.ticker, o.render = n.render, c.invalidate = function() {
                            return this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), n.prototype.invalidate.call(this)
                        }, c.updateTo = function(e, t) {
                            var i, r = this.ratio,
                                o = this.vars.immediateRender || e.immediateRender;
                            t && this._startTime < this._timeline._time && (this._startTime = this._timeline._time, this._uncache(!1), this._gc ? this._enabled(!0, !1) : this._timeline.insert(this, this._startTime - this._delay));
                            for (i in e) this.vars[i] = e[i];
                            if (this._initted || o)
                                if (t) this._initted = !1, o && this.render(0, !0, !0);
                                else if (this._gc && this._enabled(!0, !1), this._notifyPluginsOfEnabled && this._firstPT && n._onPluginEvent("_onDisable", this), this._time / this._duration > .998) {
                                var a = this._time;
                                this.render(0, !0, !1), this._initted = !1, this.render(a, !0, !1)
                            } else if (this._time > 0 || o) {
                                this._initted = !1, this._init();
                                for (var s, u = 1 / (1 - r), l = this._firstPT; l;) s = l.s + l.c, l.c *= u, l.s = s - l.c, l = l._next
                            }
                            return this
                        }, c.render = function(e, t, n) {
                            this._initted || 0 === this._duration && this.vars.repeat && this.invalidate();
                            var i, r, o, u, l, c, h, d, f = this._dirty ? this.totalDuration() : this._totalDuration,
                                p = this._time,
                                m = this._totalTime,
                                v = this._cycle,
                                g = this._duration,
                                y = this._rawPrevTime;
                            if (e >= f ? (this._totalTime = f, this._cycle = this._repeat, this._yoyo && 0 !== (1 & this._cycle) ? (this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0) : (this._time = g, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1), this._reversed || (i = !0, r = "onComplete", n = n || this._timeline.autoRemoveChildren), 0 === g && (this._initted || !this.vars.lazy || n) && (this._startTime === this._timeline._duration && (e = 0), (0 === e || 0 > y || y === a) && y !== e && (n = !0, y > a && (r = "onReverseComplete")), this._rawPrevTime = d = !t || e || y === e ? e : a)) : 1e-7 > e ? (this._totalTime = this._time = this._cycle = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== m || 0 === g && y > 0) && (r = "onReverseComplete", i = this._reversed), 0 > e && (this._active = !1, 0 === g && (this._initted || !this.vars.lazy || n) && (y >= 0 && (n = !0), this._rawPrevTime = d = !t || e || y === e ? e : a)), this._initted || (n = !0)) : (this._totalTime = this._time = e, 0 !== this._repeat && (u = g + this._repeatDelay, this._cycle = this._totalTime / u >> 0, 0 !== this._cycle && this._cycle === this._totalTime / u && this._cycle--, this._time = this._totalTime - this._cycle * u, this._yoyo && 0 !== (1 & this._cycle) && (this._time = g - this._time), this._time > g ? this._time = g : 0 > this._time && (this._time = 0)), this._easeType ? (l = this._time / g, c = this._easeType, h = this._easePower, (1 === c || 3 === c && l >= .5) && (l = 1 - l), 3 === c && (l *= 2), 1 === h ? l *= l : 2 === h ? l *= l * l : 3 === h ? l *= l * l * l : 4 === h && (l *= l * l * l * l), this.ratio = 1 === c ? 1 - l : 2 === c ? l : .5 > this._time / g ? l / 2 : 1 - l / 2) : this.ratio = this._ease.getRatio(this._time / g)), p === this._time && !n && v === this._cycle) return void(m !== this._totalTime && this._onUpdate && (t || this._callback("onUpdate")));
                            if (!this._initted) {
                                if (this._init(), !this._initted || this._gc) return;
                                if (!n && this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration)) return this._time = p, this._totalTime = m, this._rawPrevTime = y, this._cycle = v, s.lazyTweens.push(this), void(this._lazy = [e, t]);
                                this._time && !i ? this.ratio = this._ease.getRatio(this._time / g) : i && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
                            }
                            for (this._lazy !== !1 && (this._lazy = !1), this._active || !this._paused && this._time !== p && e >= 0 && (this._active = !0), 0 === m && (2 === this._initted && e > 0 && this._init(), this._startAt && (e >= 0 ? this._startAt.render(e, t, n) : r || (r = "_dummyGS")), this.vars.onStart && (0 !== this._totalTime || 0 === g) && (t || this._callback("onStart"))), o = this._firstPT; o;) o.f ? o.t[o.p](o.c * this.ratio + o.s) : o.t[o.p] = o.c * this.ratio + o.s, o = o._next;
                            this._onUpdate && (0 > e && this._startAt && this._startTime && this._startAt.render(e, t, n), t || (this._totalTime !== m || i) && this._callback("onUpdate")), this._cycle !== v && (t || this._gc || this.vars.onRepeat && this._callback("onRepeat")), r && (!this._gc || n) && (0 > e && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(e, t, n), i && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !t && this.vars[r] && this._callback(r), 0 === g && this._rawPrevTime === a && d !== a && (this._rawPrevTime = 0))
                        }, o.to = function(e, t, n) {
                            return new o(e, t, n)
                        }, o.from = function(e, t, n) {
                            return n.runBackwards = !0, n.immediateRender = 0 != n.immediateRender, new o(e, t, n)
                        }, o.fromTo = function(e, t, n, i) {
                            return i.startAt = n, i.immediateRender = 0 != i.immediateRender && 0 != n.immediateRender, new o(e, t, i)
                        }, o.staggerTo = o.allTo = function(e, t, a, s, c, d, f) {
                            s = s || 0;
                            var p, m, v, g, y = a.delay || 0,
                                _ = [],
                                x = function() {
                                    a.onComplete && a.onComplete.apply(a.onCompleteScope || this, arguments), c.apply(f || a.callbackScope || this, d || h)
                                },
                                b = a.cycle,
                                w = a.startAt && a.startAt.cycle;
                            for (l(e) || ("string" == typeof e && (e = n.selector(e) || e), u(e) && (e = i(e))), e = e || [], 0 > s && (e = i(e), e.reverse(), s *= -1), p = e.length - 1, v = 0; p >= v; v++) {
                                m = {};
                                for (g in a) m[g] = a[g];
                                if (b && r(m, e, v), w) {
                                    w = m.startAt = {};
                                    for (g in a.startAt) w[g] = a.startAt[g];
                                    r(m.startAt, e, v)
                                }
                                m.delay = y, v === p && c && (m.onComplete = x), _[v] = new o(e[v], t, m), y += s
                            }
                            return _
                        }, o.staggerFrom = o.allFrom = function(e, t, n, i, r, a, s) {
                            return n.runBackwards = !0, n.immediateRender = 0 != n.immediateRender, o.staggerTo(e, t, n, i, r, a, s)
                        }, o.staggerFromTo = o.allFromTo = function(e, t, n, i, r, a, s, u) {
                            return i.startAt = n, i.immediateRender = 0 != i.immediateRender && 0 != n.immediateRender, o.staggerTo(e, t, i, r, a, s, u)
                        }, o.delayedCall = function(e, t, n, i, r) {
                            return new o(t, 0, {
                                delay: e,
                                onComplete: t,
                                onCompleteParams: n,
                                callbackScope: i,
                                onReverseComplete: t,
                                onReverseCompleteParams: n,
                                immediateRender: !1,
                                useFrames: r,
                                overwrite: 0
                            })
                        }, o.set = function(e, t) {
                            return new o(e, 0, t)
                        }, o.isTweening = function(e) {
                            return n.getTweensOf(e, !0).length > 0
                        };
                        var d = function(e, t) {
                                for (var i = [], r = 0, o = e._first; o;) o instanceof n ? i[r++] = o : (t && (i[r++] = o), i = i.concat(d(o, t)), r = i.length), o = o._next;
                                return i
                            },
                            f = o.getAllTweens = function(t) {
                                return d(e._rootTimeline, t).concat(d(e._rootFramesTimeline, t))
                            };
                        o.killAll = function(e, n, i, r) {
                            null == n && (n = !0), null == i && (i = !0);
                            var o, a, s, u = f(0 != r),
                                l = u.length,
                                c = n && i && r;
                            for (s = 0; l > s; s++) a = u[s], (c || a instanceof t || (o = a.target === a.vars.onComplete) && i || n && !o) && (e ? a.totalTime(a._reversed ? 0 : a.totalDuration()) : a._enabled(!1, !1))
                        }, o.killChildTweensOf = function(e, t) {
                            if (null != e) {
                                var r, a, c, h, d, f = s.tweenLookup;
                                if ("string" == typeof e && (e = n.selector(e) || e), u(e) && (e = i(e)), l(e))
                                    for (h = e.length; --h > -1;) o.killChildTweensOf(e[h], t);
                                else {
                                    r = [];
                                    for (c in f)
                                        for (a = f[c].target.parentNode; a;) a === e && (r = r.concat(f[c].tweens)), a = a.parentNode;
                                    for (d = r.length, h = 0; d > h; h++) t && r[h].totalTime(r[h].totalDuration()), r[h]._enabled(!1, !1)
                                }
                            }
                        };
                        var p = function(e, n, i, r) {
                            n = n !== !1, i = i !== !1, r = r !== !1;
                            for (var o, a, s = f(r), u = n && i && r, l = s.length; --l > -1;) a = s[l], (u || a instanceof t || (o = a.target === a.vars.onComplete) && i || n && !o) && a.paused(e)
                        };
                        return o.pauseAll = function(e, t, n) {
                            p(!0, e, t, n)
                        }, o.resumeAll = function(e, t, n) {
                            p(!1, e, t, n)
                        }, o.globalTimeScale = function(t) {
                            var i = e._rootTimeline,
                                r = n.ticker.time;
                            return arguments.length ? (t = t || a, i._startTime = r - (r - i._startTime) * i._timeScale / t, i = e._rootFramesTimeline, r = n.ticker.frame, i._startTime = r - (r - i._startTime) * i._timeScale / t, i._timeScale = e._rootTimeline._timeScale = t, t) : i._timeScale
                        }, c.progress = function(e) {
                            return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - e : e) + this._cycle * (this._duration + this._repeatDelay), !1) : this._time / this.duration()
                        }, c.totalProgress = function(e) {
                            return arguments.length ? this.totalTime(this.totalDuration() * e, !1) : this._totalTime / this.totalDuration()
                        }, c.time = function(e, t) {
                            return arguments.length ? (this._dirty && this.totalDuration(), e > this._duration && (e = this._duration), this._yoyo && 0 !== (1 & this._cycle) ? e = this._duration - e + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (e += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(e, t)) : this._time
                        }, c.duration = function(t) {
                            return arguments.length ? e.prototype.duration.call(this, t) : this._duration
                        }, c.totalDuration = function(e) {
                            return arguments.length ? -1 === this._repeat ? this : this.duration((e - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat, this._dirty = !1), this._totalDuration)
                        }, c.repeat = function(e) {
                            return arguments.length ? (this._repeat = e, this._uncache(!0)) : this._repeat
                        }, c.repeatDelay = function(e) {
                            return arguments.length ? (this._repeatDelay = e, this._uncache(!0)) : this._repeatDelay
                        }, c.yoyo = function(e) {
                            return arguments.length ? (this._yoyo = e, this) : this._yoyo
                        }, o
                    }, !0), a._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(e, t, n) {
                        var i = function(e) {
                                t.call(this, e), this._labels = {}, this.autoRemoveChildren = this.vars.autoRemoveChildren === !0, this.smoothChildTiming = this.vars.smoothChildTiming === !0, this._sortChildren = !0, this._onUpdate = this.vars.onUpdate;
                                var n, i, r = this.vars;
                                for (i in r) n = r[i], l(n) && -1 !== n.join("").indexOf("{self}") && (r[i] = this._swapSelfInParams(n));
                                l(r.tweens) && this.add(r.tweens, 0, r.align, r.stagger)
                            },
                            r = 1e-10,
                            o = n._internals,
                            s = i._internals = {},
                            u = o.isSelector,
                            l = o.isArray,
                            c = o.lazyTweens,
                            h = o.lazyRender,
                            d = a._gsDefine.globals,
                            f = function(e) {
                                var t, n = {};
                                for (t in e) n[t] = e[t];
                                return n
                            },
                            p = function(e, t, n) {
                                var i, r, o = e.cycle;
                                for (i in o) r = o[i], e[i] = "function" == typeof r ? r.call(t[n], n) : r[n % r.length];
                                delete e.cycle
                            },
                            m = s.pauseCallback = function() {},
                            v = function(e) {
                                var t, n = [],
                                    i = e.length;
                                for (t = 0; t !== i; n.push(e[t++]));
                                return n
                            },
                            g = i.prototype = new t;
                        return i.version = "1.18.0", g.constructor = i, g.kill()._gc = g._forcingPlayhead = g._hasPause = !1, g.to = function(e, t, i, r) {
                            var o = i.repeat && d.TweenMax || n;
                            return t ? this.add(new o(e, t, i), r) : this.set(e, i, r)
                        }, g.from = function(e, t, i, r) {
                            return this.add((i.repeat && d.TweenMax || n).from(e, t, i), r)
                        }, g.fromTo = function(e, t, i, r, o) {
                            var a = r.repeat && d.TweenMax || n;
                            return t ? this.add(a.fromTo(e, t, i, r), o) : this.set(e, r, o)
                        }, g.staggerTo = function(e, t, r, o, a, s, l, c) {
                            var h, d, m = new i({
                                    onComplete: s,
                                    onCompleteParams: l,
                                    callbackScope: c,
                                    smoothChildTiming: this.smoothChildTiming
                                }),
                                g = r.cycle;
                            for ("string" == typeof e && (e = n.selector(e) || e), e = e || [], u(e) && (e = v(e)), o = o || 0, 0 > o && (e = v(e), e.reverse(), o *= -1), d = 0; e.length > d; d++) h = f(r), h.startAt && (h.startAt = f(h.startAt), h.startAt.cycle && p(h.startAt, e, d)), g && p(h, e, d), m.to(e[d], t, h, d * o);
                            return this.add(m, a)
                        }, g.staggerFrom = function(e, t, n, i, r, o, a, s) {
                            return n.immediateRender = 0 != n.immediateRender, n.runBackwards = !0, this.staggerTo(e, t, n, i, r, o, a, s)
                        }, g.staggerFromTo = function(e, t, n, i, r, o, a, s, u) {
                            return i.startAt = n, i.immediateRender = 0 != i.immediateRender && 0 != n.immediateRender, this.staggerTo(e, t, i, r, o, a, s, u)
                        }, g.call = function(e, t, i, r) {
                            return this.add(n.delayedCall(0, e, t, i), r)
                        }, g.set = function(e, t, i) {
                            return i = this._parseTimeOrLabel(i, 0, !0), null == t.immediateRender && (t.immediateRender = i === this._time && !this._paused), this.add(new n(e, 0, t), i)
                        }, i.exportRoot = function(e, t) {
                            e = e || {}, null == e.smoothChildTiming && (e.smoothChildTiming = !0);
                            var r, o, a = new i(e),
                                s = a._timeline;
                            for (null == t && (t = !0), s._remove(a, !0), a._startTime = 0, a._rawPrevTime = a._time = a._totalTime = s._time, r = s._first; r;) o = r._next, t && r instanceof n && r.target === r.vars.onComplete || a.add(r, r._startTime - r._delay), r = o;
                            return s.add(a, 0), a
                        }, g.add = function(r, o, a, s) {
                            var u, c, h, d, f, p;
                            if ("number" != typeof o && (o = this._parseTimeOrLabel(o, 0, !0, r)), !(r instanceof e)) {
                                if (r instanceof Array || r && r.push && l(r)) {
                                    for (a = a || "normal", s = s || 0, u = o, c = r.length, h = 0; c > h; h++) l(d = r[h]) && (d = new i({
                                        tweens: d
                                    })), this.add(d, u), "string" != typeof d && "function" != typeof d && ("sequence" === a ? u = d._startTime + d.totalDuration() / d._timeScale : "start" === a && (d._startTime -= d.delay())), u += s;
                                    return this._uncache(!0)
                                }
                                if ("string" == typeof r) return this.addLabel(r, o);
                                if ("function" != typeof r) throw "Cannot add " + r + " into the timeline; it is not a tween, timeline, function, or string.";
                                r = n.delayedCall(0, r)
                            }
                            if (t.prototype.add.call(this, r, o), (this._gc || this._time === this._duration) && !this._paused && this._duration < this.duration())
                                for (f = this, p = f.rawTime() > r._startTime; f._timeline;) p && f._timeline.smoothChildTiming ? f.totalTime(f._totalTime, !0) : f._gc && f._enabled(!0, !1), f = f._timeline;
                            return this
                        }, g.remove = function(t) {
                            if (t instanceof e) {
                                this._remove(t, !1);
                                var n = t._timeline = t.vars.useFrames ? e._rootFramesTimeline : e._rootTimeline;
                                return t._startTime = (t._paused ? t._pauseTime : n._time) - (t._reversed ? t.totalDuration() - t._totalTime : t._totalTime) / t._timeScale, this
                            }
                            if (t instanceof Array || t && t.push && l(t)) {
                                for (var i = t.length; --i > -1;) this.remove(t[i]);
                                return this
                            }
                            return "string" == typeof t ? this.removeLabel(t) : this.kill(null, t)
                        }, g._remove = function(e, n) {
                            t.prototype._remove.call(this, e, n);
                            var i = this._last;
                            return i ? this._time > i._startTime + i._totalDuration / i._timeScale && (this._time = this.duration(), this._totalTime = this._totalDuration) : this._time = this._totalTime = this._duration = this._totalDuration = 0, this
                        }, g.append = function(e, t) {
                            return this.add(e, this._parseTimeOrLabel(null, t, !0, e))
                        }, g.insert = g.insertMultiple = function(e, t, n, i) {
                            return this.add(e, t || 0, n, i)
                        }, g.appendMultiple = function(e, t, n, i) {
                            return this.add(e, this._parseTimeOrLabel(null, t, !0, e), n, i)
                        }, g.addLabel = function(e, t) {
                            return this._labels[e] = this._parseTimeOrLabel(t), this
                        }, g.addPause = function(e, t, i, r) {
                            var o = n.delayedCall(0, m, i, r || this);
                            return o.vars.onComplete = o.vars.onReverseComplete = t, o.data = "isPause", this._hasPause = !0, this.add(o, e)
                        }, g.removeLabel = function(e) {
                            return delete this._labels[e], this
                        }, g.getLabelTime = function(e) {
                            return null != this._labels[e] ? this._labels[e] : -1
                        }, g._parseTimeOrLabel = function(t, n, i, r) {
                            var o;
                            if (r instanceof e && r.timeline === this) this.remove(r);
                            else if (r && (r instanceof Array || r.push && l(r)))
                                for (o = r.length; --o > -1;) r[o] instanceof e && r[o].timeline === this && this.remove(r[o]);
                            if ("string" == typeof n) return this._parseTimeOrLabel(n, i && "number" == typeof t && null == this._labels[n] ? t - this.duration() : 0, i);
                            if (n = n || 0, "string" != typeof t || !isNaN(t) && null == this._labels[t]) null == t && (t = this.duration());
                            else {
                                if (o = t.indexOf("="), -1 === o) return null == this._labels[t] ? i ? this._labels[t] = this.duration() + n : n : this._labels[t] + n;
                                n = parseInt(t.charAt(o - 1) + "1", 10) * Number(t.substr(o + 1)), t = o > 1 ? this._parseTimeOrLabel(t.substr(0, o - 1), 0, i) : this.duration()
                            }
                            return Number(t) + n
                        }, g.seek = function(e, t) {
                            return this.totalTime("number" == typeof e ? e : this._parseTimeOrLabel(e), t !== !1)
                        }, g.stop = function() {
                            return this.paused(!0)
                        }, g.gotoAndPlay = function(e, t) {
                            return this.play(e, t)
                        }, g.gotoAndStop = function(e, t) {
                            return this.pause(e, t)
                        }, g.render = function(e, t, n) {
                            this._gc && this._enabled(!0, !1);
                            var i, o, a, s, u, l, d = this._dirty ? this.totalDuration() : this._totalDuration,
                                f = this._time,
                                p = this._startTime,
                                m = this._timeScale,
                                v = this._paused;
                            if (e >= d) this._totalTime = this._time = d, this._reversed || this._hasPausedChild() || (o = !0, s = "onComplete", u = !!this._timeline.autoRemoveChildren, 0 === this._duration && (0 === e || 0 > this._rawPrevTime || this._rawPrevTime === r) && this._rawPrevTime !== e && this._first && (u = !0, this._rawPrevTime > r && (s = "onReverseComplete"))), this._rawPrevTime = this._duration || !t || e || this._rawPrevTime === e ? e : r, e = d + 1e-4;
                            else if (1e-7 > e)
                                if (this._totalTime = this._time = 0, (0 !== f || 0 === this._duration && this._rawPrevTime !== r && (this._rawPrevTime > 0 || 0 > e && this._rawPrevTime >= 0)) && (s = "onReverseComplete", o = this._reversed), 0 > e) this._active = !1, this._timeline.autoRemoveChildren && this._reversed ? (u = o = !0, s = "onReverseComplete") : this._rawPrevTime >= 0 && this._first && (u = !0), this._rawPrevTime = e;
                                else {
                                    if (this._rawPrevTime = this._duration || !t || e || this._rawPrevTime === e ? e : r, 0 === e && o)
                                        for (i = this._first; i && 0 === i._startTime;) i._duration || (o = !1), i = i._next;
                                    e = 0, this._initted || (u = !0)
                                }
                            else {
                                if (this._hasPause && !this._forcingPlayhead && !t) {
                                    if (e >= f)
                                        for (i = this._first; i && e >= i._startTime && !l;) i._duration || "isPause" !== i.data || i.ratio || 0 === i._startTime && 0 === this._rawPrevTime || (l = i), i = i._next;
                                    else
                                        for (i = this._last; i && i._startTime >= e && !l;) i._duration || "isPause" === i.data && i._rawPrevTime > 0 && (l = i), i = i._prev;
                                    l && (this._time = e = l._startTime, this._totalTime = e + this._cycle * (this._totalDuration + this._repeatDelay))
                                }
                                this._totalTime = this._time = this._rawPrevTime = e
                            }
                            if (this._time !== f && this._first || n || u || l) {
                                if (this._initted || (this._initted = !0), this._active || !this._paused && this._time !== f && e > 0 && (this._active = !0), 0 === f && this.vars.onStart && 0 !== this._time && (t || this._callback("onStart")), this._time >= f)
                                    for (i = this._first; i && (a = i._next, !this._paused || v);)(i._active || i._startTime <= this._time && !i._paused && !i._gc) && (l === i && this.pause(), i._reversed ? i.render((i._dirty ? i.totalDuration() : i._totalDuration) - (e - i._startTime) * i._timeScale, t, n) : i.render((e - i._startTime) * i._timeScale, t, n)), i = a;
                                else
                                    for (i = this._last; i && (a = i._prev, !this._paused || v);) {
                                        if (i._active || f >= i._startTime && !i._paused && !i._gc) {
                                            if (l === i) {
                                                for (l = i._prev; l && l.endTime() > this._time;) l.render(l._reversed ? l.totalDuration() - (e - l._startTime) * l._timeScale : (e - l._startTime) * l._timeScale, t, n), l = l._prev;
                                                l = null, this.pause()
                                            }
                                            i._reversed ? i.render((i._dirty ? i.totalDuration() : i._totalDuration) - (e - i._startTime) * i._timeScale, t, n) : i.render((e - i._startTime) * i._timeScale, t, n)
                                        }
                                        i = a
                                    }
                                this._onUpdate && (t || (c.length && h(), this._callback("onUpdate"))), s && (this._gc || (p === this._startTime || m !== this._timeScale) && (0 === this._time || d >= this.totalDuration()) && (o && (c.length && h(), this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !t && this.vars[s] && this._callback(s)))
                            }
                        }, g._hasPausedChild = function() {
                            for (var e = this._first; e;) {
                                if (e._paused || e instanceof i && e._hasPausedChild()) return !0;
                                e = e._next
                            }
                            return !1
                        }, g.getChildren = function(e, t, i, r) {
                            r = r || -9999999999;
                            for (var o = [], a = this._first, s = 0; a;) r > a._startTime || (a instanceof n ? t !== !1 && (o[s++] = a) : (i !== !1 && (o[s++] = a), e !== !1 && (o = o.concat(a.getChildren(!0, t, i)), s = o.length))), a = a._next;
                            return o
                        }, g.getTweensOf = function(e, t) {
                            var i, r, o = this._gc,
                                a = [],
                                s = 0;
                            for (o && this._enabled(!0, !0), i = n.getTweensOf(e), r = i.length; --r > -1;)(i[r].timeline === this || t && this._contains(i[r])) && (a[s++] = i[r]);
                            return o && this._enabled(!1, !0), a
                        }, g.recent = function() {
                            return this._recent
                        }, g._contains = function(e) {
                            for (var t = e.timeline; t;) {
                                if (t === this) return !0;
                                t = t.timeline
                            }
                            return !1
                        }, g.shiftChildren = function(e, t, n) {
                            n = n || 0;
                            for (var i, r = this._first, o = this._labels; r;) r._startTime >= n && (r._startTime += e), r = r._next;
                            if (t)
                                for (i in o) o[i] >= n && (o[i] += e);
                            return this._uncache(!0)
                        }, g._kill = function(e, t) {
                            if (!e && !t) return this._enabled(!1, !1);
                            for (var n = t ? this.getTweensOf(t) : this.getChildren(!0, !0, !1), i = n.length, r = !1; --i > -1;) n[i]._kill(e, t) && (r = !0);
                            return r
                        }, g.clear = function(e) {
                            var t = this.getChildren(!1, !0, !0),
                                n = t.length;
                            for (this._time = this._totalTime = 0; --n > -1;) t[n]._enabled(!1, !1);
                            return e !== !1 && (this._labels = {}), this._uncache(!0)
                        }, g.invalidate = function() {
                            for (var t = this._first; t;) t.invalidate(), t = t._next;
                            return e.prototype.invalidate.call(this)
                        }, g._enabled = function(e, n) {
                            if (e === this._gc)
                                for (var i = this._first; i;) i._enabled(e, !0), i = i._next;
                            return t.prototype._enabled.call(this, e, n)
                        }, g.totalTime = function() {
                            this._forcingPlayhead = !0;
                            var t = e.prototype.totalTime.apply(this, arguments);
                            return this._forcingPlayhead = !1, t
                        }, g.duration = function(e) {
                            return arguments.length ? (0 !== this.duration() && 0 !== e && this.timeScale(this._duration / e), this) : (this._dirty && this.totalDuration(), this._duration)
                        }, g.totalDuration = function(e) {
                            if (!arguments.length) {
                                if (this._dirty) {
                                    for (var t, n, i = 0, r = this._last, o = 999999999999; r;) t = r._prev, r._dirty && r.totalDuration(), r._startTime > o && this._sortChildren && !r._paused ? this.add(r, r._startTime - r._delay) : o = r._startTime, 0 > r._startTime && !r._paused && (i -= r._startTime, this._timeline.smoothChildTiming && (this._startTime += r._startTime / this._timeScale), this.shiftChildren(-r._startTime, !1, -9999999999), o = 0), n = r._startTime + r._totalDuration / r._timeScale, n > i && (i = n), r = t;
                                    this._duration = this._totalDuration = i, this._dirty = !1
                                }
                                return this._totalDuration
                            }
                            return 0 !== this.totalDuration() && 0 !== e && this.timeScale(this._totalDuration / e), this
                        }, g.paused = function(t) {
                            if (!t)
                                for (var n = this._first, i = this._time; n;) n._startTime === i && "isPause" === n.data && (n._rawPrevTime = 0), n = n._next;
                            return e.prototype.paused.apply(this, arguments)
                        }, g.usesFrames = function() {
                            for (var t = this._timeline; t._timeline;) t = t._timeline;
                            return t === e._rootFramesTimeline
                        }, g.rawTime = function() {
                            return this._paused ? this._totalTime : (this._timeline.rawTime() - this._startTime) * this._timeScale
                        }, i
                    }, !0), a._gsDefine("TimelineMax", ["TimelineLite", "TweenLite", "easing.Ease"], function(e, t, n) {
                        var i = function(t) {
                                e.call(this, t), this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._cycle = 0, this._yoyo = this.vars.yoyo === !0, this._dirty = !0
                            },
                            r = 1e-10,
                            o = t._internals,
                            a = o.lazyTweens,
                            s = o.lazyRender,
                            u = new n(null, null, 1, 0),
                            l = i.prototype = new e;
                        return l.constructor = i, l.kill()._gc = !1, i.version = "1.18.0", l.invalidate = function() {
                            return this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), e.prototype.invalidate.call(this)
                        }, l.addCallback = function(e, n, i, r) {
                            return this.add(t.delayedCall(0, e, i, r), n)
                        }, l.removeCallback = function(e, t) {
                            if (e)
                                if (null == t) this._kill(null, e);
                                else
                                    for (var n = this.getTweensOf(e, !1), i = n.length, r = this._parseTimeOrLabel(t); --i > -1;) n[i]._startTime === r && n[i]._enabled(!1, !1);
                            return this
                        }, l.removePause = function(t) {
                            return this.removeCallback(e._internals.pauseCallback, t)
                        }, l.tweenTo = function(e, n) {
                            n = n || {};
                            var i, r, o, a = {
                                ease: u,
                                useFrames: this.usesFrames(),
                                immediateRender: !1
                            };
                            for (r in n) a[r] = n[r];
                            return a.time = this._parseTimeOrLabel(e), i = Math.abs(Number(a.time) - this._time) / this._timeScale || .001, o = new t(this, i, a), a.onStart = function() {
                                o.target.paused(!0), o.vars.time !== o.target.time() && i === o.duration() && o.duration(Math.abs(o.vars.time - o.target.time()) / o.target._timeScale), n.onStart && o._callback("onStart")
                            }, o
                        }, l.tweenFromTo = function(e, t, n) {
                            n = n || {}, e = this._parseTimeOrLabel(e), n.startAt = {
                                onComplete: this.seek,
                                onCompleteParams: [e],
                                callbackScope: this
                            }, n.immediateRender = n.immediateRender !== !1;
                            var i = this.tweenTo(t, n);
                            return i.duration(Math.abs(i.vars.time - e) / this._timeScale || .001)
                        }, l.render = function(e, t, n) {
                            this._gc && this._enabled(!0, !1);
                            var i, o, u, l, c, h, d, f = this._dirty ? this.totalDuration() : this._totalDuration,
                                p = this._duration,
                                m = this._time,
                                v = this._totalTime,
                                g = this._startTime,
                                y = this._timeScale,
                                _ = this._rawPrevTime,
                                x = this._paused,
                                b = this._cycle;
                            if (e >= f) this._locked || (this._totalTime = f, this._cycle = this._repeat), this._reversed || this._hasPausedChild() || (o = !0, l = "onComplete", c = !!this._timeline.autoRemoveChildren, 0 === this._duration && (0 === e || 0 > _ || _ === r) && _ !== e && this._first && (c = !0, _ > r && (l = "onReverseComplete"))), this._rawPrevTime = this._duration || !t || e || this._rawPrevTime === e ? e : r, this._yoyo && 0 !== (1 & this._cycle) ? this._time = e = 0 : (this._time = p, e = p + 1e-4);
                            else if (1e-7 > e)
                                if (this._locked || (this._totalTime = this._cycle = 0), this._time = 0, (0 !== m || 0 === p && _ !== r && (_ > 0 || 0 > e && _ >= 0) && !this._locked) && (l = "onReverseComplete", o = this._reversed), 0 > e) this._active = !1, this._timeline.autoRemoveChildren && this._reversed ? (c = o = !0, l = "onReverseComplete") : _ >= 0 && this._first && (c = !0), this._rawPrevTime = e;
                                else {
                                    if (this._rawPrevTime = p || !t || e || this._rawPrevTime === e ? e : r, 0 === e && o)
                                        for (i = this._first; i && 0 === i._startTime;) i._duration || (o = !1), i = i._next;
                                    e = 0, this._initted || (c = !0)
                                }
                            else if (0 === p && 0 > _ && (c = !0), this._time = this._rawPrevTime = e, this._locked || (this._totalTime = e, 0 !== this._repeat && (h = p + this._repeatDelay, this._cycle = this._totalTime / h >> 0, 0 !== this._cycle && this._cycle === this._totalTime / h && this._cycle--, this._time = this._totalTime - this._cycle * h, this._yoyo && 0 !== (1 & this._cycle) && (this._time = p - this._time), this._time > p ? (this._time = p, e = p + 1e-4) : 0 > this._time ? this._time = e = 0 : e = this._time)), this._hasPause && !this._forcingPlayhead && !t) {
                                if (e = this._time, e >= m)
                                    for (i = this._first; i && e >= i._startTime && !d;) i._duration || "isPause" !== i.data || i.ratio || 0 === i._startTime && 0 === this._rawPrevTime || (d = i), i = i._next;
                                else
                                    for (i = this._last; i && i._startTime >= e && !d;) i._duration || "isPause" === i.data && i._rawPrevTime > 0 && (d = i), i = i._prev;
                                d && (this._time = e = d._startTime, this._totalTime = e + this._cycle * (this._totalDuration + this._repeatDelay))
                            }
                            if (this._cycle !== b && !this._locked) {
                                var w = this._yoyo && 0 !== (1 & b),
                                    T = w === (this._yoyo && 0 !== (1 & this._cycle)),
                                    E = this._totalTime,
                                    S = this._cycle,
                                    M = this._rawPrevTime,
                                    P = this._time;
                                if (this._totalTime = b * p, b > this._cycle ? w = !w : this._totalTime += p, this._time = m, this._rawPrevTime = 0 === p ? _ - 1e-4 : _, this._cycle = b, this._locked = !0, m = w ? 0 : p, this.render(m, t, 0 === p), t || this._gc || this.vars.onRepeat && this._callback("onRepeat"), T && (m = w ? p + 1e-4 : -1e-4, this.render(m, !0, !1)), this._locked = !1, this._paused && !x) return;
                                this._time = P, this._totalTime = E, this._cycle = S, this._rawPrevTime = M
                            }
                            if (!(this._time !== m && this._first || n || c || d)) return void(v !== this._totalTime && this._onUpdate && (t || this._callback("onUpdate")));
                            if (this._initted || (this._initted = !0), this._active || !this._paused && this._totalTime !== v && e > 0 && (this._active = !0), 0 === v && this.vars.onStart && 0 !== this._totalTime && (t || this._callback("onStart")), this._time >= m)
                                for (i = this._first; i && (u = i._next, !this._paused || x);)(i._active || i._startTime <= this._time && !i._paused && !i._gc) && (d === i && this.pause(), i._reversed ? i.render((i._dirty ? i.totalDuration() : i._totalDuration) - (e - i._startTime) * i._timeScale, t, n) : i.render((e - i._startTime) * i._timeScale, t, n)), i = u;
                            else
                                for (i = this._last; i && (u = i._prev, !this._paused || x);) {
                                    if (i._active || m >= i._startTime && !i._paused && !i._gc) {
                                        if (d === i) {
                                            for (d = i._prev; d && d.endTime() > this._time;) d.render(d._reversed ? d.totalDuration() - (e - d._startTime) * d._timeScale : (e - d._startTime) * d._timeScale, t, n), d = d._prev;
                                            d = null, this.pause()
                                        }
                                        i._reversed ? i.render((i._dirty ? i.totalDuration() : i._totalDuration) - (e - i._startTime) * i._timeScale, t, n) : i.render((e - i._startTime) * i._timeScale, t, n)
                                    }
                                    i = u
                                }
                            this._onUpdate && (t || (a.length && s(), this._callback("onUpdate"))), l && (this._locked || this._gc || (g === this._startTime || y !== this._timeScale) && (0 === this._time || f >= this.totalDuration()) && (o && (a.length && s(), this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !t && this.vars[l] && this._callback(l)))
                        }, l.getActive = function(e, t, n) {
                            null == e && (e = !0), null == t && (t = !0), null == n && (n = !1);
                            var i, r, o = [],
                                a = this.getChildren(e, t, n),
                                s = 0,
                                u = a.length;
                            for (i = 0; u > i; i++) r = a[i], r.isActive() && (o[s++] = r);
                            return o
                        }, l.getLabelAfter = function(e) {
                            e || 0 !== e && (e = this._time);
                            var t, n = this.getLabelsArray(),
                                i = n.length;
                            for (t = 0; i > t; t++)
                                if (n[t].time > e) return n[t].name;
                            return null
                        }, l.getLabelBefore = function(e) {
                            null == e && (e = this._time);
                            for (var t = this.getLabelsArray(), n = t.length; --n > -1;)
                                if (e > t[n].time) return t[n].name;
                            return null
                        }, l.getLabelsArray = function() {
                            var e, t = [],
                                n = 0;
                            for (e in this._labels) t[n++] = {
                                time: this._labels[e],
                                name: e
                            };
                            return t.sort(function(e, t) {
                                return e.time - t.time
                            }), t
                        }, l.progress = function(e, t) {
                            return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - e : e) + this._cycle * (this._duration + this._repeatDelay), t) : this._time / this.duration()
                        }, l.totalProgress = function(e, t) {
                            return arguments.length ? this.totalTime(this.totalDuration() * e, t) : this._totalTime / this.totalDuration()
                        }, l.totalDuration = function(t) {
                            return arguments.length ? -1 === this._repeat ? this : this.duration((t - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (e.prototype.totalDuration.call(this), this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat), this._totalDuration)
                        }, l.time = function(e, t) {
                            return arguments.length ? (this._dirty && this.totalDuration(), e > this._duration && (e = this._duration), this._yoyo && 0 !== (1 & this._cycle) ? e = this._duration - e + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (e += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(e, t)) : this._time
                        }, l.repeat = function(e) {
                            return arguments.length ? (this._repeat = e, this._uncache(!0)) : this._repeat
                        }, l.repeatDelay = function(e) {
                            return arguments.length ? (this._repeatDelay = e, this._uncache(!0)) : this._repeatDelay
                        }, l.yoyo = function(e) {
                            return arguments.length ? (this._yoyo = e, this) : this._yoyo
                        }, l.currentLabel = function(e) {
                            return arguments.length ? this.seek(e, !0) : this.getLabelBefore(this._time + 1e-8)
                        }, i
                    }, !0),
                    function() {
                        var e = 180 / Math.PI,
                            t = [],
                            n = [],
                            i = [],
                            r = {},
                            o = a._gsDefine.globals,
                            s = function(e, t, n, i) {
                                this.a = e, this.b = t, this.c = n, this.d = i, this.da = i - e, this.ca = n - e, this.ba = t - e
                            },
                            u = ",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",
                            l = function(e, t, n, i) {
                                var r = {
                                        a: e
                                    },
                                    o = {},
                                    a = {},
                                    s = {
                                        c: i
                                    },
                                    u = (e + t) / 2,
                                    l = (t + n) / 2,
                                    c = (n + i) / 2,
                                    h = (u + l) / 2,
                                    d = (l + c) / 2,
                                    f = (d - h) / 8;
                                return r.b = u + (e - u) / 4, o.b = h + f, r.c = o.a = (r.b + o.b) / 2, o.c = a.a = (h + d) / 2, a.b = d - f, s.b = c + (i - c) / 4, a.c = s.a = (a.b + s.b) / 2, [r, o, a, s]
                            },
                            c = function(e, r, o, a, s) {
                                var u, c, h, d, f, p, m, v, g, y, _, x, b, w = e.length - 1,
                                    T = 0,
                                    E = e[0].a;
                                for (u = 0; w > u; u++) f = e[T], c = f.a, h = f.d, d = e[T + 1].d, s ? (_ = t[u], x = n[u], b = .25 * (x + _) * r / (a ? .5 : i[u] || .5), p = h - (h - c) * (a ? .5 * r : 0 !== _ ? b / _ : 0), m = h + (d - h) * (a ? .5 * r : 0 !== x ? b / x : 0), v = h - (p + ((m - p) * (3 * _ / (_ + x) + .5) / 4 || 0))) : (p = h - .5 * (h - c) * r, m = h + .5 * (d - h) * r, v = h - (p + m) / 2), p += v, m += v, f.c = g = p, f.b = 0 !== u ? E : E = f.a + .6 * (f.c - f.a), f.da = h - c, f.ca = g - c, f.ba = E - c, o ? (y = l(c, E, g, h), e.splice(T, 1, y[0], y[1], y[2], y[3]), T += 4) : T++, E = m;
                                f = e[T], f.b = E, f.c = E + .4 * (f.d - E), f.da = f.d - f.a, f.ca = f.c - f.a, f.ba = E - f.a, o && (y = l(f.a, E, f.c, f.d), e.splice(T, 1, y[0], y[1], y[2], y[3]))
                            },
                            h = function(e, i, r, o) {
                                var a, u, l, c, h, d, f = [];
                                if (o)
                                    for (e = [o].concat(e), u = e.length; --u > -1;) "string" == typeof(d = e[u][i]) && "=" === d.charAt(1) && (e[u][i] = o[i] + Number(d.charAt(0) + d.substr(2)));
                                if (a = e.length - 2, 0 > a) return f[0] = new s(e[0][i], 0, 0, e[-1 > a ? 0 : 1][i]), f;
                                for (u = 0; a > u; u++) l = e[u][i], c = e[u + 1][i], f[u] = new s(l, 0, 0, c), r && (h = e[u + 2][i], t[u] = (t[u] || 0) + (c - l) * (c - l), n[u] = (n[u] || 0) + (h - c) * (h - c));
                                return f[u] = new s(e[u][i], 0, 0, e[u + 1][i]), f
                            },
                            d = function(e, o, a, s, l, d) {
                                var f, p, m, v, g, y, _, x, b = {},
                                    w = [],
                                    T = d || e[0];
                                l = "string" == typeof l ? "," + l + "," : u, null == o && (o = 1);
                                for (p in e[0]) w.push(p);
                                if (e.length > 1) {
                                    for (x = e[e.length - 1], _ = !0, f = w.length; --f > -1;)
                                        if (p = w[f], Math.abs(T[p] - x[p]) > .05) {
                                            _ = !1;
                                            break
                                        }
                                    _ && (e = e.concat(), d && e.unshift(d), e.push(e[1]), d = e[e.length - 3])
                                }
                                for (t.length = n.length = i.length = 0, f = w.length; --f > -1;) p = w[f], r[p] = -1 !== l.indexOf("," + p + ","), b[p] = h(e, p, r[p], d);
                                for (f = t.length; --f > -1;) t[f] = Math.sqrt(t[f]), n[f] = Math.sqrt(n[f]);
                                if (!s) {
                                    for (f = w.length; --f > -1;)
                                        if (r[p])
                                            for (m = b[w[f]], y = m.length - 1, v = 0; y > v; v++) g = m[v + 1].da / n[v] + m[v].da / t[v], i[v] = (i[v] || 0) + g * g;
                                    for (f = i.length; --f > -1;) i[f] = Math.sqrt(i[f])
                                }
                                for (f = w.length, v = a ? 4 : 1; --f > -1;) p = w[f], m = b[p], c(m, o, a, s, r[p]), _ && (m.splice(0, v), m.splice(m.length - v, v));
                                return b
                            },
                            f = function(e, t, n) {
                                t = t || "soft";
                                var i, r, o, a, u, l, c, h, d, f, p, m = {},
                                    v = "cubic" === t ? 3 : 2,
                                    g = "soft" === t,
                                    y = [];
                                if (g && n && (e = [n].concat(e)), null == e || v + 1 > e.length) throw "invalid Bezier data";
                                for (d in e[0]) y.push(d);
                                for (l = y.length; --l > -1;) {
                                    for (d = y[l], m[d] = u = [], f = 0, h = e.length, c = 0; h > c; c++) i = null == n ? e[c][d] : "string" == typeof(p = e[c][d]) && "=" === p.charAt(1) ? n[d] + Number(p.charAt(0) + p.substr(2)) : Number(p), g && c > 1 && h - 1 > c && (u[f++] = (i + u[f - 2]) / 2), u[f++] = i;
                                    for (h = f - v + 1, f = 0, c = 0; h > c; c += v) i = u[c], r = u[c + 1], o = u[c + 2], a = 2 === v ? 0 : u[c + 3], u[f++] = p = 3 === v ? new s(i, r, o, a) : new s(i, (2 * r + i) / 3, (2 * r + o) / 3, o);
                                    u.length = f
                                }
                                return m
                            },
                            p = function(e, t, n) {
                                for (var i, r, o, a, s, u, l, c, h, d, f, p = 1 / n, m = e.length; --m > -1;)
                                    for (d = e[m], o = d.a, a = d.d - o, s = d.c - o, u = d.b - o, i = r = 0, c = 1; n >= c; c++) l = p * c, h = 1 - l, i = r - (r = (l * l * a + 3 * h * (l * s + h * u)) * l), f = m * n + c - 1, t[f] = (t[f] || 0) + i * i
                            },
                            m = function(e, t) {
                                t = t >> 0 || 6;
                                var n, i, r, o, a = [],
                                    s = [],
                                    u = 0,
                                    l = 0,
                                    c = t - 1,
                                    h = [],
                                    d = [];
                                for (n in e) p(e[n], a, t);
                                for (r = a.length, i = 0; r > i; i++) u += Math.sqrt(a[i]), o = i % t, d[o] = u, o === c && (l += u, o = i / t >> 0, h[o] = d, s[o] = l, u = 0, d = []);
                                return {
                                    length: l,
                                    lengths: s,
                                    segments: h
                                }
                            },
                            v = a._gsDefine.plugin({
                                propName: "bezier",
                                priority: -1,
                                version: "1.3.4",
                                API: 2,
                                global: !0,
                                init: function(e, t, n) {
                                    this._target = e, t instanceof Array && (t = {
                                        values: t
                                    }), this._func = {}, this._round = {}, this._props = [], this._timeRes = null == t.timeResolution ? 6 : parseInt(t.timeResolution, 10);
                                    var i, r, o, a, s, u = t.values || [],
                                        l = {},
                                        c = u[0],
                                        h = t.autoRotate || n.vars.orientToBezier;
                                    this._autoRotate = h ? h instanceof Array ? h : [
                                        ["x", "y", "rotation", h === !0 ? 0 : Number(h) || 0]
                                    ] : null;
                                    for (i in c) this._props.push(i);
                                    for (o = this._props.length; --o > -1;) i = this._props[o], this._overwriteProps.push(i), r = this._func[i] = "function" == typeof e[i], l[i] = r ? e[i.indexOf("set") || "function" != typeof e["get" + i.substr(3)] ? i : "get" + i.substr(3)]() : parseFloat(e[i]), s || l[i] !== u[0][i] && (s = l);
                                    if (this._beziers = "cubic" !== t.type && "quadratic" !== t.type && "soft" !== t.type ? d(u, isNaN(t.curviness) ? 1 : t.curviness, !1, "thruBasic" === t.type, t.correlate, s) : f(u, t.type, l), this._segCount = this._beziers[i].length, this._timeRes) {
                                        var p = m(this._beziers, this._timeRes);
                                        this._length = p.length, this._lengths = p.lengths, this._segments = p.segments, this._l1 = this._li = this._s1 = this._si = 0, this._l2 = this._lengths[0], this._curSeg = this._segments[0], this._s2 = this._curSeg[0], this._prec = 1 / this._curSeg.length
                                    }
                                    if (h = this._autoRotate)
                                        for (this._initialRotations = [], h[0] instanceof Array || (this._autoRotate = h = [h]), o = h.length; --o > -1;) {
                                            for (a = 0; 3 > a; a++) i = h[o][a], this._func[i] = "function" == typeof e[i] ? e[i.indexOf("set") || "function" != typeof e["get" + i.substr(3)] ? i : "get" + i.substr(3)] : !1;
                                            i = h[o][2], this._initialRotations[o] = this._func[i] ? this._func[i].call(this._target) : this._target[i]
                                        }
                                    return this._startRatio = n.vars.runBackwards ? 1 : 0, !0
                                },
                                set: function(t) {
                                    var n, i, r, o, a, s, u, l, c, h, d = this._segCount,
                                        f = this._func,
                                        p = this._target,
                                        m = t !== this._startRatio;
                                    if (this._timeRes) {
                                        if (c = this._lengths, h = this._curSeg, t *= this._length, r = this._li, t > this._l2 && d - 1 > r) {
                                            for (l = d - 1; l > r && t >= (this._l2 = c[++r]););
                                            this._l1 = c[r - 1], this._li = r, this._curSeg = h = this._segments[r], this._s2 = h[this._s1 = this._si = 0]
                                        } else if (this._l1 > t && r > 0) {
                                            for (; r > 0 && (this._l1 = c[--r]) >= t;);
                                            0 === r && this._l1 > t ? this._l1 = 0 : r++, this._l2 = c[r], this._li = r, this._curSeg = h = this._segments[r], this._s1 = h[(this._si = h.length - 1) - 1] || 0, this._s2 = h[this._si]
                                        }
                                        if (n = r, t -= this._l1, r = this._si, t > this._s2 && h.length - 1 > r) {
                                            for (l = h.length - 1; l > r && t >= (this._s2 = h[++r]););
                                            this._s1 = h[r - 1], this._si = r
                                        } else if (this._s1 > t && r > 0) {
                                            for (; r > 0 && (this._s1 = h[--r]) >= t;);
                                            0 === r && this._s1 > t ? this._s1 = 0 : r++, this._s2 = h[r], this._si = r
                                        }
                                        s = (r + (t - this._s1) / (this._s2 - this._s1)) * this._prec
                                    } else n = 0 > t ? 0 : t >= 1 ? d - 1 : d * t >> 0, s = (t - n * (1 / d)) * d;
                                    for (i = 1 - s, r = this._props.length; --r > -1;) o = this._props[r], a = this._beziers[o][n], u = (s * s * a.da + 3 * i * (s * a.ca + i * a.ba)) * s + a.a, this._round[o] && (u = Math.round(u)), f[o] ? p[o](u) : p[o] = u;
                                    if (this._autoRotate) {
                                        var v, g, y, _, x, b, w, T = this._autoRotate;
                                        for (r = T.length; --r > -1;) o = T[r][2], b = T[r][3] || 0, w = T[r][4] === !0 ? 1 : e, a = this._beziers[T[r][0]], v = this._beziers[T[r][1]], a && v && (a = a[n], v = v[n], g = a.a + (a.b - a.a) * s, _ = a.b + (a.c - a.b) * s, g += (_ - g) * s, _ += (a.c + (a.d - a.c) * s - _) * s, y = v.a + (v.b - v.a) * s, x = v.b + (v.c - v.b) * s, y += (x - y) * s, x += (v.c + (v.d - v.c) * s - x) * s, u = m ? Math.atan2(x - y, _ - g) * w + b : this._initialRotations[r], f[o] ? p[o](u) : p[o] = u)
                                    }
                                }
                            }),
                            g = v.prototype;
                        v.bezierThrough = d, v.cubicToQuadratic = l, v._autoCSS = !0, v.quadraticToCubic = function(e, t, n) {
                            return new s(e, (2 * t + e) / 3, (2 * t + n) / 3, n)
                        }, v._cssRegister = function() {
                            var e = o.CSSPlugin;
                            if (e) {
                                var t = e._internals,
                                    n = t._parseToProxy,
                                    i = t._setPluginRatio,
                                    r = t.CSSPropTween;
                                t._registerComplexSpecialProp("bezier", {
                                    parser: function(e, t, o, a, s, u) {
                                        t instanceof Array && (t = {
                                            values: t
                                        }), u = new v;
                                        var l, c, h, d = t.values,
                                            f = d.length - 1,
                                            p = [],
                                            m = {};
                                        if (0 > f) return s;
                                        for (l = 0; f >= l; l++) h = n(e, d[l], a, s, u, f !== l), p[l] = h.end;
                                        for (c in t) m[c] = t[c];
                                        return m.values = p, s = new r(e, "bezier", 0, 0, h.pt, 2), s.data = h, s.plugin = u, s.setRatio = i, 0 === m.autoRotate && (m.autoRotate = !0), !m.autoRotate || m.autoRotate instanceof Array || (l = m.autoRotate === !0 ? 0 : Number(m.autoRotate), m.autoRotate = null != h.end.left ? [
                                            ["left", "top", "rotation", l, !1]
                                        ] : null != h.end.x ? [
                                            ["x", "y", "rotation", l, !1]
                                        ] : !1), m.autoRotate && (a._transform || a._enableTransforms(!1), h.autoRotate = a._target._gsTransform), u._onInitTween(h.proxy, m, a._tween), s
                                    }
                                })
                            }
                        }, g._roundProps = function(e, t) {
                            for (var n = this._overwriteProps, i = n.length; --i > -1;)(e[n[i]] || e.bezier || e.bezierThrough) && (this._round[n[i]] = t)
                        }, g._kill = function(e) {
                            var t, n, i = this._props;
                            for (t in this._beziers)
                                if (t in e)
                                    for (delete this._beziers[t], delete this._func[t], n = i.length; --n > -1;) i[n] === t && i.splice(n, 1);
                            return this._super._kill.call(this, e)
                        }
                    }(), a._gsDefine("plugins.CSSPlugin", ["plugins.TweenPlugin", "TweenLite"], function(e, t) {
                        var n, i, r, o, s = function() {
                                e.call(this, "css"), this._overwriteProps.length = 0, this.setRatio = s.prototype.setRatio
                            },
                            u = a._gsDefine.globals,
                            l = {},
                            c = s.prototype = new e("css");
                        c.constructor = s, s.version = "1.18.0", s.API = 2, s.defaultTransformPerspective = 0, s.defaultSkewType = "compensated", s.defaultSmoothOrigin = !0, c = "px", s.suffixMap = {
                            top: c,
                            right: c,
                            bottom: c,
                            left: c,
                            width: c,
                            height: c,
                            fontSize: c,
                            padding: c,
                            margin: c,
                            perspective: c,
                            lineHeight: ""
                        };
                        var h, d, f, p, m, v, g = /(?:\d|\-\d|\.\d|\-\.\d)+/g,
                            y = /(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,
                            _ = /(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,
                            x = /(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,
                            b = /(?:\d|\-|\+|=|#|\.)*/g,
                            w = /opacity *= *([^)]*)/i,
                            T = /opacity:([^;]*)/i,
                            E = /alpha\(opacity *=.+?\)/i,
                            S = /^(rgb|hsl)/,
                            M = /([A-Z])/g,
                            P = /-([a-z])/gi,
                            A = /(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,
                            C = function(e, t) {
                                return t.toUpperCase()
                            },
                            R = /(?:Left|Right|Width)/i,
                            L = /(M11|M12|M21|M22)=[\d\-\.e]+/gi,
                            O = /progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,
                            k = /,(?=[^\)]*(?:\(|$))/gi,
                            D = Math.PI / 180,
                            F = 180 / Math.PI,
                            B = {},
                            I = document,
                            U = function(e) {
                                return I.createElementNS ? I.createElementNS("http://www.w3.org/1999/xhtml", e) : I.createElement(e)
                            },
                            N = U("div"),
                            z = U("img"),
                            V = s._internals = {
                                _specialProps: l
                            },
                            j = navigator.userAgent,
                            G = function() {
                                var e = j.indexOf("Android"),
                                    t = U("a");
                                return f = -1 !== j.indexOf("Safari") && -1 === j.indexOf("Chrome") && (-1 === e || Number(j.substr(e + 8, 1)) > 3), m = f && 6 > Number(j.substr(j.indexOf("Version/") + 8, 1)), p = -1 !== j.indexOf("Firefox"), (/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(j) || /Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(j)) && (v = parseFloat(RegExp.$1)), t ? (t.style.cssText = "top:1px;opacity:.55;", /^0.55/.test(t.style.opacity)) : !1
                            }(),
                            H = function(e) {
                                return w.test("string" == typeof e ? e : (e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? parseFloat(RegExp.$1) / 100 : 1
                            },
                            W = function(e) {
                                window.console && console.log(e)
                            },
                            X = "",
                            Y = "",
                            q = function(e, t) {
                                t = t || N;
                                var n, i, r = t.style;
                                if (void 0 !== r[e]) return e;
                                for (e = e.charAt(0).toUpperCase() + e.substr(1), n = ["O", "Moz", "ms", "Ms", "Webkit"], i = 5; --i > -1 && void 0 === r[n[i] + e];);
                                return i >= 0 ? (Y = 3 === i ? "ms" : n[i], X = "-" + Y.toLowerCase() + "-", Y + e) : null
                            },
                            K = I.defaultView ? I.defaultView.getComputedStyle : function() {},
                            Z = s.getStyle = function(e, t, n, i, r) {
                                var o;
                                return G || "opacity" !== t ? (!i && e.style[t] ? o = e.style[t] : (n = n || K(e)) ? o = n[t] || n.getPropertyValue(t) || n.getPropertyValue(t.replace(M, "-$1").toLowerCase()) : e.currentStyle && (o = e.currentStyle[t]), null == r || o && "none" !== o && "auto" !== o && "auto auto" !== o ? o : r) : H(e)
                            },
                            Q = V.convertToPixels = function(e, n, i, r, o) {
                                if ("px" === r || !r) return i;
                                if ("auto" === r || !i) return 0;
                                var a, u, l, c = R.test(n),
                                    h = e,
                                    d = N.style,
                                    f = 0 > i;
                                if (f && (i = -i), "%" === r && -1 !== n.indexOf("border")) a = i / 100 * (c ? e.clientWidth : e.clientHeight);
                                else {
                                    if (d.cssText = "border:0 solid red;position:" + Z(e, "position") + ";line-height:0;", "%" !== r && h.appendChild && "v" !== r.charAt(0) && "rem" !== r) d[c ? "borderLeftWidth" : "borderTopWidth"] = i + r;
                                    else {
                                        if (h = e.parentNode || I.body, u = h._gsCache, l = t.ticker.frame, u && c && u.time === l) return u.width * i / 100;
                                        d[c ? "width" : "height"] = i + r
                                    }
                                    h.appendChild(N), a = parseFloat(N[c ? "offsetWidth" : "offsetHeight"]), h.removeChild(N), c && "%" === r && s.cacheWidths !== !1 && (u = h._gsCache = h._gsCache || {}, u.time = l, u.width = 100 * (a / i)), 0 !== a || o || (a = Q(e, n, i, r, !0))
                                }
                                return f ? -a : a
                            },
                            J = V.calculateOffset = function(e, t, n) {
                                if ("absolute" !== Z(e, "position", n)) return 0;
                                var i = "left" === t ? "Left" : "Top",
                                    r = Z(e, "margin" + i, n);
                                return e["offset" + i] - (Q(e, t, parseFloat(r), r.replace(b, "")) || 0)
                            },
                            $ = function(e, t) {
                                var n, i, r, o = {};
                                if (t = t || K(e, null))
                                    if (n = t.length)
                                        for (; --n > -1;) r = t[n], (-1 === r.indexOf("-transform") || Me === r) && (o[r.replace(P, C)] = t.getPropertyValue(r));
                                    else
                                        for (n in t)(-1 === n.indexOf("Transform") || Se === n) && (o[n] = t[n]);
                                else if (t = e.currentStyle || e.style)
                                    for (n in t) "string" == typeof n && void 0 === o[n] && (o[n.replace(P, C)] = t[n]);
                                return G || (o.opacity = H(e)), i = Ue(e, t, !1), o.rotation = i.rotation, o.skewX = i.skewX, o.scaleX = i.scaleX, o.scaleY = i.scaleY, o.x = i.x, o.y = i.y, Ae && (o.z = i.z, o.rotationX = i.rotationX, o.rotationY = i.rotationY, o.scaleZ = i.scaleZ), o.filters && delete o.filters, o
                            },
                            ee = function(e, t, n, i, r) {
                                var o, a, s, u = {},
                                    l = e.style;
                                for (a in n) "cssText" !== a && "length" !== a && isNaN(a) && (t[a] !== (o = n[a]) || r && r[a]) && -1 === a.indexOf("Origin") && ("number" == typeof o || "string" == typeof o) && (u[a] = "auto" !== o || "left" !== a && "top" !== a ? "" !== o && "auto" !== o && "none" !== o || "string" != typeof t[a] || "" === t[a].replace(x, "") ? o : 0 : J(e, a), void 0 !== l[a] && (s = new me(l, a, l[a], s)));
                                if (i)
                                    for (a in i) "className" !== a && (u[a] = i[a]);
                                return {
                                    difs: u,
                                    firstMPT: s
                                }
                            },
                            te = {
                                width: ["Left", "Right"],
                                height: ["Top", "Bottom"]
                            },
                            ne = ["marginLeft", "marginRight", "marginTop", "marginBottom"],
                            ie = function(e, t, n) {
                                var i = parseFloat("width" === t ? e.offsetWidth : e.offsetHeight),
                                    r = te[t],
                                    o = r.length;
                                for (n = n || K(e, null); --o > -1;) i -= parseFloat(Z(e, "padding" + r[o], n, !0)) || 0, i -= parseFloat(Z(e, "border" + r[o] + "Width", n, !0)) || 0;
                                return i
                            },
                            re = function(e, t) {
                                if ("contain" === e || "auto" === e || "auto auto" === e) return e + " ";
                                (null == e || "" === e) && (e = "0 0");
                                var n = e.split(" "),
                                    i = -1 !== e.indexOf("left") ? "0%" : -1 !== e.indexOf("right") ? "100%" : n[0],
                                    r = -1 !== e.indexOf("top") ? "0%" : -1 !== e.indexOf("bottom") ? "100%" : n[1];
                                return null == r ? r = "center" === i ? "50%" : "0" : "center" === r && (r = "50%"), ("center" === i || isNaN(parseFloat(i)) && -1 === (i + "").indexOf("=")) && (i = "50%"), e = i + " " + r + (n.length > 2 ? " " + n[2] : ""), t && (t.oxp = -1 !== i.indexOf("%"), t.oyp = -1 !== r.indexOf("%"), t.oxr = "=" === i.charAt(1), t.oyr = "=" === r.charAt(1), t.ox = parseFloat(i.replace(x, "")), t.oy = parseFloat(r.replace(x, "")), t.v = e), t || e
                            },
                            oe = function(e, t) {
                                return "string" == typeof e && "=" === e.charAt(1) ? parseInt(e.charAt(0) + "1", 10) * parseFloat(e.substr(2)) : parseFloat(e) - parseFloat(t)
                            },
                            ae = function(e, t) {
                                return null == e ? t : "string" == typeof e && "=" === e.charAt(1) ? parseInt(e.charAt(0) + "1", 10) * parseFloat(e.substr(2)) + t : parseFloat(e)
                            },
                            se = function(e, t, n, i) {
                                var r, o, a, s, u, l = 1e-6;
                                return null == e ? s = t : "number" == typeof e ? s = e : (r = 360, o = e.split("_"), u = "=" === e.charAt(1), a = (u ? parseInt(e.charAt(0) + "1", 10) * parseFloat(o[0].substr(2)) : parseFloat(o[0])) * (-1 === e.indexOf("rad") ? 1 : F) - (u ? 0 : t), o.length && (i && (i[n] = t + a), -1 !== e.indexOf("short") && (a %= r, a !== a % (r / 2) && (a = 0 > a ? a + r : a - r)), -1 !== e.indexOf("_cw") && 0 > a ? a = (a + 9999999999 * r) % r - (0 | a / r) * r : -1 !== e.indexOf("ccw") && a > 0 && (a = (a - 9999999999 * r) % r - (0 | a / r) * r)), s = t + a), l > s && s > -l && (s = 0), s
                            },
                            ue = {
                                aqua: [0, 255, 255],
                                lime: [0, 255, 0],
                                silver: [192, 192, 192],
                                black: [0, 0, 0],
                                maroon: [128, 0, 0],
                                teal: [0, 128, 128],
                                blue: [0, 0, 255],
                                navy: [0, 0, 128],
                                white: [255, 255, 255],
                                fuchsia: [255, 0, 255],
                                olive: [128, 128, 0],
                                yellow: [255, 255, 0],
                                orange: [255, 165, 0],
                                gray: [128, 128, 128],
                                purple: [128, 0, 128],
                                green: [0, 128, 0],
                                red: [255, 0, 0],
                                pink: [255, 192, 203],
                                cyan: [0, 255, 255],
                                transparent: [255, 255, 255, 0]
                            },
                            le = function(e, t, n) {
                                return e = 0 > e ? e + 1 : e > 1 ? e - 1 : e, 0 | 255 * (1 > 6 * e ? t + 6 * (n - t) * e : .5 > e ? n : 2 > 3 * e ? t + 6 * (n - t) * (2 / 3 - e) : t) + .5
                            },
                            ce = s.parseColor = function(e, t) {
                                var n, i, r, o, a, s, u, l, c, h, d;
                                if (e)
                                    if ("number" == typeof e) n = [e >> 16, 255 & e >> 8, 255 & e];
                                    else {
                                        if ("," === e.charAt(e.length - 1) && (e = e.substr(0, e.length - 1)), ue[e]) n = ue[e];
                                        else if ("#" === e.charAt(0)) 4 === e.length && (i = e.charAt(1), r = e.charAt(2), o = e.charAt(3), e = "#" + i + i + r + r + o + o), e = parseInt(e.substr(1), 16), n = [e >> 16, 255 & e >> 8, 255 & e];
                                        else if ("hsl" === e.substr(0, 3))
                                            if (n = d = e.match(g), t) {
                                                if (-1 !== e.indexOf("=")) return e.match(y)
                                            } else a = Number(n[0]) % 360 / 360, s = Number(n[1]) / 100, u = Number(n[2]) / 100, r = .5 >= u ? u * (s + 1) : u + s - u * s, i = 2 * u - r, n.length > 3 && (n[3] = Number(e[3])), n[0] = le(a + 1 / 3, i, r), n[1] = le(a, i, r), n[2] = le(a - 1 / 3, i, r);
                                        else n = e.match(g) || ue.transparent;
                                        n[0] = Number(n[0]), n[1] = Number(n[1]), n[2] = Number(n[2]), n.length > 3 && (n[3] = Number(n[3]))
                                    }
                                else n = ue.black;
                                return t && !d && (i = n[0] / 255, r = n[1] / 255, o = n[2] / 255, l = Math.max(i, r, o), c = Math.min(i, r, o), u = (l + c) / 2, l === c ? a = s = 0 : (h = l - c, s = u > .5 ? h / (2 - l - c) : h / (l + c), a = l === i ? (r - o) / h + (o > r ? 6 : 0) : l === r ? (o - i) / h + 2 : (i - r) / h + 4, a *= 60), n[0] = 0 | a + .5, n[1] = 0 | 100 * s + .5, n[2] = 0 | 100 * u + .5), n
                            },
                            he = function(e, t) {
                                var n, i, r, o = e.match(de) || [],
                                    a = 0,
                                    s = o.length ? "" : e;
                                for (n = 0; o.length > n; n++) i = o[n], r = e.substr(a, e.indexOf(i, a) - a), a += r.length + i.length, i = ce(i, t), 3 === i.length && i.push(1), s += r + (t ? "hsla(" + i[0] + "," + i[1] + "%," + i[2] + "%," + i[3] : "rgba(" + i.join(",")) + ")";
                                return s
                            },
                            de = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";
                        for (c in ue) de += "|" + c + "\\b";
                        de = RegExp(de + ")", "gi"), s.colorStringFilter = function(e) {
                            var t, n = e[0] + e[1];
                            de.lastIndex = 0, de.test(n) && (t = -1 !== n.indexOf("hsl(") || -1 !== n.indexOf("hsla("), e[0] = he(e[0], t), e[1] = he(e[1], t))
                        }, t.defaultStringFilter || (t.defaultStringFilter = s.colorStringFilter);
                        var fe = function(e, t, n, i) {
                                if (null == e) return function(e) {
                                    return e
                                };
                                var r, o = t ? (e.match(de) || [""])[0] : "",
                                    a = e.split(o).join("").match(_) || [],
                                    s = e.substr(0, e.indexOf(a[0])),
                                    u = ")" === e.charAt(e.length - 1) ? ")" : "",
                                    l = -1 !== e.indexOf(" ") ? " " : ",",
                                    c = a.length,
                                    h = c > 0 ? a[0].replace(g, "") : "";
                                return c ? r = t ? function(e) {
                                    var t, d, f, p;
                                    if ("number" == typeof e) e += h;
                                    else if (i && k.test(e)) {
                                        for (p = e.replace(k, "|").split("|"), f = 0; p.length > f; f++) p[f] = r(p[f]);
                                        return p.join(",")
                                    }
                                    if (t = (e.match(de) || [o])[0], d = e.split(t).join("").match(_) || [], f = d.length, c > f--)
                                        for (; c > ++f;) d[f] = n ? d[0 | (f - 1) / 2] : a[f];
                                    return s + d.join(l) + l + t + u + (-1 !== e.indexOf("inset") ? " inset" : "")
                                } : function(e) {
                                    var t, o, d;
                                    if ("number" == typeof e) e += h;
                                    else if (i && k.test(e)) {
                                        for (o = e.replace(k, "|").split("|"), d = 0; o.length > d; d++) o[d] = r(o[d]);
                                        return o.join(",")
                                    }
                                    if (t = e.match(_) || [], d = t.length, c > d--)
                                        for (; c > ++d;) t[d] = n ? t[0 | (d - 1) / 2] : a[d];
                                    return s + t.join(l) + u
                                } : function(e) {
                                    return e
                                }
                            },
                            pe = function(e) {
                                return e = e.split(","),
                                    function(t, n, i, r, o, a, s) {
                                        var u, l = (n + "").split(" ");
                                        for (s = {}, u = 0; 4 > u; u++) s[e[u]] = l[u] = l[u] || l[(u - 1) / 2 >> 0];
                                        return r.parse(t, s, o, a)
                                    }
                            },
                            me = (V._setPluginRatio = function(e) {
                                this.plugin.setRatio(e);
                                for (var t, n, i, r, o = this.data, a = o.proxy, s = o.firstMPT, u = 1e-6; s;) t = a[s.v], s.r ? t = Math.round(t) : u > t && t > -u && (t = 0), s.t[s.p] = t, s = s._next;
                                if (o.autoRotate && (o.autoRotate.rotation = a.rotation), 1 === e)
                                    for (s = o.firstMPT; s;) {
                                        if (n = s.t, n.type) {
                                            if (1 === n.type) {
                                                for (r = n.xs0 + n.s + n.xs1, i = 1; n.l > i; i++) r += n["xn" + i] + n["xs" + (i + 1)];
                                                n.e = r
                                            }
                                        } else n.e = n.s + n.xs0;
                                        s = s._next
                                    }
                            }, function(e, t, n, i, r) {
                                this.t = e, this.p = t, this.v = n, this.r = r, i && (i._prev = this, this._next = i)
                            }),
                            ve = (V._parseToProxy = function(e, t, n, i, r, o) {
                                var a, s, u, l, c, h = i,
                                    d = {},
                                    f = {},
                                    p = n._transform,
                                    m = B;
                                for (n._transform = null, B = t, i = c = n.parse(e, t, i, r), B = m, o && (n._transform = p, h && (h._prev = null, h._prev && (h._prev._next = null))); i && i !== h;) {
                                    if (1 >= i.type && (s = i.p, f[s] = i.s + i.c, d[s] = i.s, o || (l = new me(i, "s", s, l, i.r), i.c = 0), 1 === i.type))
                                        for (a = i.l; --a > 0;) u = "xn" + a, s = i.p + "_" + u, f[s] = i.data[u], d[s] = i[u], o || (l = new me(i, u, s, l, i.rxp[u]));
                                    i = i._next
                                }
                                return {
                                    proxy: d,
                                    end: f,
                                    firstMPT: l,
                                    pt: c
                                }
                            }, V.CSSPropTween = function(e, t, i, r, a, s, u, l, c, h, d) {
                                this.t = e, this.p = t, this.s = i, this.c = r, this.n = u || t, e instanceof ve || o.push(this.n), this.r = l, this.type = s || 0, c && (this.pr = c, n = !0), this.b = void 0 === h ? i : h, this.e = void 0 === d ? i + r : d, a && (this._next = a, a._prev = this)
                            }),
                            ge = function(e, t, n, i, r, o) {
                                var a = new ve(e, t, n, i - n, r, -1, o);
                                return a.b = n, a.e = a.xs0 = i, a
                            },
                            ye = s.parseComplex = function(e, t, n, i, r, o, a, s, u, l) {
                                n = n || o || "", a = new ve(e, t, 0, 0, a, l ? 2 : 1, null, !1, s, n, i), i += "";
                                var c, d, f, p, m, v, _, x, b, w, T, E, S, M = n.split(", ").join(",").split(" "),
                                    P = i.split(", ").join(",").split(" "),
                                    A = M.length,
                                    C = h !== !1;
                                for ((-1 !== i.indexOf(",") || -1 !== n.indexOf(",")) && (M = M.join(" ").replace(k, ", ").split(" "), P = P.join(" ").replace(k, ", ").split(" "), A = M.length), A !== P.length && (M = (o || "").split(" "), A = M.length), a.plugin = u, a.setRatio = l, de.lastIndex = 0, c = 0; A > c; c++)
                                    if (p = M[c], m = P[c], x = parseFloat(p), x || 0 === x) a.appendXtra("", x, oe(m, x), m.replace(y, ""), C && -1 !== m.indexOf("px"), !0);
                                    else if (r && de.test(p)) E = "," === m.charAt(m.length - 1) ? ")," : ")", S = -1 !== m.indexOf("hsl") && G, p = ce(p, S), m = ce(m, S), b = p.length + m.length > 6, b && !G && 0 === m[3] ? (a["xs" + a.l] += a.l ? " transparent" : "transparent", a.e = a.e.split(P[c]).join("transparent")) : (G || (b = !1), S ? a.appendXtra(b ? "hsla(" : "hsl(", p[0], oe(m[0], p[0]), ",", !1, !0).appendXtra("", p[1], oe(m[1], p[1]), "%,", !1).appendXtra("", p[2], oe(m[2], p[2]), b ? "%," : "%" + E, !1) : a.appendXtra(b ? "rgba(" : "rgb(", p[0], m[0] - p[0], ",", !0, !0).appendXtra("", p[1], m[1] - p[1], ",", !0).appendXtra("", p[2], m[2] - p[2], b ? "," : E, !0), b && (p = 4 > p.length ? 1 : p[3], a.appendXtra("", p, (4 > m.length ? 1 : m[3]) - p, E, !1))), de.lastIndex = 0;
                                else if (v = p.match(g)) {
                                    if (_ = m.match(y), !_ || _.length !== v.length) return a;
                                    for (f = 0, d = 0; v.length > d; d++) T = v[d], w = p.indexOf(T, f), a.appendXtra(p.substr(f, w - f), Number(T), oe(_[d], T), "", C && "px" === p.substr(w + T.length, 2), 0 === d), f = w + T.length;
                                    a["xs" + a.l] += p.substr(f)
                                } else a["xs" + a.l] += a.l ? " " + p : p;
                                if (-1 !== i.indexOf("=") && a.data) {
                                    for (E = a.xs0 + a.data.s, c = 1; a.l > c; c++) E += a["xs" + c] + a.data["xn" + c];
                                    a.e = E + a["xs" + c]
                                }
                                return a.l || (a.type = -1, a.xs0 = a.e), a.xfirst || a
                            },
                            _e = 9;
                        for (c = ve.prototype, c.l = c.pr = 0; --_e > 0;) c["xn" + _e] = 0, c["xs" + _e] = "";
                        c.xs0 = "", c._next = c._prev = c.xfirst = c.data = c.plugin = c.setRatio = c.rxp = null, c.appendXtra = function(e, t, n, i, r, o) {
                            var a = this,
                                s = a.l;
                            return a["xs" + s] += o && s ? " " + e : e || "", n || 0 === s || a.plugin ? (a.l++, a.type = a.setRatio ? 2 : 1, a["xs" + a.l] = i || "", s > 0 ? (a.data["xn" + s] = t + n, a.rxp["xn" + s] = r, a["xn" + s] = t, a.plugin || (a.xfirst = new ve(a, "xn" + s, t, n, a.xfirst || a, 0, a.n, r, a.pr), a.xfirst.xs0 = 0), a) : (a.data = {
                                s: t + n
                            }, a.rxp = {}, a.s = t, a.c = n, a.r = r, a)) : (a["xs" + s] += t + (i || ""), a)
                        };
                        var xe = function(e, t) {
                                t = t || {}, this.p = t.prefix ? q(e) || e : e, l[e] = l[this.p] = this, this.format = t.formatter || fe(t.defaultValue, t.color, t.collapsible, t.multi), t.parser && (this.parse = t.parser), this.clrs = t.color, this.multi = t.multi, this.keyword = t.keyword, this.dflt = t.defaultValue, this.pr = t.priority || 0
                            },
                            be = V._registerComplexSpecialProp = function(e, t, n) {
                                "object" != typeof t && (t = {
                                    parser: n
                                });
                                var i, r, o = e.split(","),
                                    a = t.defaultValue;
                                for (n = n || [a], i = 0; o.length > i; i++) t.prefix = 0 === i && t.prefix, t.defaultValue = n[i] || a, r = new xe(o[i], t)
                            },
                            we = function(e) {
                                if (!l[e]) {
                                    var t = e.charAt(0).toUpperCase() + e.substr(1) + "Plugin";
                                    be(e, {
                                        parser: function(e, n, i, r, o, a, s) {
                                            var c = u.com.greensock.plugins[t];
                                            return c ? (c._cssRegister(), l[i].parse(e, n, i, r, o, a, s)) : (W("Error: " + t + " js file not loaded."), o)
                                        }
                                    })
                                }
                            };
                        c = xe.prototype, c.parseComplex = function(e, t, n, i, r, o) {
                            var a, s, u, l, c, h, d = this.keyword;
                            if (this.multi && (k.test(n) || k.test(t) ? (s = t.replace(k, "|").split("|"), u = n.replace(k, "|").split("|")) : d && (s = [t], u = [n])), u) {
                                for (l = u.length > s.length ? u.length : s.length, a = 0; l > a; a++) t = s[a] = s[a] || this.dflt, n = u[a] = u[a] || this.dflt, d && (c = t.indexOf(d), h = n.indexOf(d), c !== h && (-1 === h ? s[a] = s[a].split(d).join("") : -1 === c && (s[a] += " " + d)));
                                t = s.join(", "), n = u.join(", ")
                            }
                            return ye(e, this.p, t, n, this.clrs, this.dflt, i, this.pr, r, o)
                        }, c.parse = function(e, t, n, i, o, a) {
                            return this.parseComplex(e.style, this.format(Z(e, this.p, r, !1, this.dflt)), this.format(t), o, a)
                        }, s.registerSpecialProp = function(e, t, n) {
                            be(e, {
                                parser: function(e, i, r, o, a, s) {
                                    var u = new ve(e, r, 0, 0, a, 2, r, !1, n);
                                    return u.plugin = s, u.setRatio = t(e, i, o._tween, r), u
                                },
                                priority: n
                            })
                        }, s.useSVGTransformAttr = f || p;
                        var Te, Ee = "scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),
                            Se = q("transform"),
                            Me = X + "transform",
                            Pe = q("transformOrigin"),
                            Ae = null !== q("perspective"),
                            Ce = V.Transform = function() {
                                this.perspective = parseFloat(s.defaultTransformPerspective) || 0, this.force3D = s.defaultForce3D !== !1 && Ae ? s.defaultForce3D || "auto" : !1
                            },
                            Re = window.SVGElement,
                            Le = function(e, t, n) {
                                var i, r = I.createElementNS("http://www.w3.org/2000/svg", e),
                                    o = /([a-z])([A-Z])/g;
                                for (i in n) r.setAttributeNS(null, i.replace(o, "$1-$2").toLowerCase(), n[i]);
                                return t.appendChild(r), r
                            },
                            Oe = I.documentElement,
                            ke = function() {
                                var e, t, n, i = v || /Android/i.test(j) && !window.chrome;
                                return I.createElementNS && !i && (e = Le("svg", Oe), t = Le("rect", e, {
                                    width: 100,
                                    height: 50,
                                    x: 100
                                }), n = t.getBoundingClientRect().width, t.style[Pe] = "50% 50%", t.style[Se] = "scaleX(0.5)", i = n === t.getBoundingClientRect().width && !(p && Ae), Oe.removeChild(e)), i
                            }(),
                            De = function(e, t, n, i, r) {
                                var o, a, u, l, c, h, d, f, p, m, v, g, y, _, x = e._gsTransform,
                                    b = Ie(e, !0);
                                x && (y = x.xOrigin, _ = x.yOrigin), (!i || 2 > (o = i.split(" ")).length) && (d = e.getBBox(), t = re(t).split(" "), o = [(-1 !== t[0].indexOf("%") ? parseFloat(t[0]) / 100 * d.width : parseFloat(t[0])) + d.x, (-1 !== t[1].indexOf("%") ? parseFloat(t[1]) / 100 * d.height : parseFloat(t[1])) + d.y]), n.xOrigin = l = parseFloat(o[0]), n.yOrigin = c = parseFloat(o[1]), i && b !== Be && (h = b[0], d = b[1], f = b[2], p = b[3], m = b[4], v = b[5], g = h * p - d * f, a = l * (p / g) + c * (-f / g) + (f * v - p * m) / g, u = l * (-d / g) + c * (h / g) - (h * v - d * m) / g, l = n.xOrigin = o[0] = a, c = n.yOrigin = o[1] = u), x && (r || r !== !1 && s.defaultSmoothOrigin !== !1 ? (a = l - y, u = c - _, x.xOffset += a * b[0] + u * b[2] - a, x.yOffset += a * b[1] + u * b[3] - u) : x.xOffset = x.yOffset = 0), e.setAttribute("data-svg-origin", o.join(" "))
                            },
                            Fe = function(e) {
                                return !!(Re && "function" == typeof e.getBBox && e.getCTM && (!e.parentNode || e.parentNode.getBBox && e.parentNode.getCTM))
                            },
                            Be = [1, 0, 0, 1, 0, 0],
                            Ie = function(e, t) {
                                var n, i, r, o, a, s = e._gsTransform || new Ce,
                                    u = 1e5;
                                if (Se ? i = Z(e, Me, null, !0) : e.currentStyle && (i = e.currentStyle.filter.match(L), i = i && 4 === i.length ? [i[0].substr(4), Number(i[2].substr(4)), Number(i[1].substr(4)), i[3].substr(4), s.x || 0, s.y || 0].join(",") : ""), n = !i || "none" === i || "matrix(1, 0, 0, 1, 0, 0)" === i, (s.svg || e.getBBox && Fe(e)) && (n && -1 !== (e.style[Se] + "").indexOf("matrix") && (i = e.style[Se], n = 0), r = e.getAttribute("transform"), n && r && (-1 !== r.indexOf("matrix") ? (i = r, n = 0) : -1 !== r.indexOf("translate") && (i = "matrix(1,0,0,1," + r.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",") + ")", n = 0))), n) return Be;
                                for (r = (i || "").match(/(?:\-|\b)[\d\-\.e]+\b/gi) || [], _e = r.length; --_e > -1;) o = Number(r[_e]), r[_e] = (a = o - (o |= 0)) ? (0 | a * u + (0 > a ? -.5 : .5)) / u + o : o;
                                return t && r.length > 6 ? [r[0], r[1], r[4], r[5], r[12], r[13]] : r
                            },
                            Ue = V.getTransform = function(e, n, i, o) {
                                if (e._gsTransform && i && !o) return e._gsTransform;
                                var a, u, l, c, h, d, f = i ? e._gsTransform || new Ce : new Ce,
                                    p = 0 > f.scaleX,
                                    m = 2e-5,
                                    v = 1e5,
                                    g = Ae ? parseFloat(Z(e, Pe, n, !1, "0 0 0").split(" ")[2]) || f.zOrigin || 0 : 0,
                                    y = parseFloat(s.defaultTransformPerspective) || 0;
                                if (f.svg = !(!e.getBBox || !Fe(e)), f.svg && (De(e, Z(e, Pe, r, !1, "50% 50%") + "", f, e.getAttribute("data-svg-origin")), Te = s.useSVGTransformAttr || ke), a = Ie(e), a !== Be) {
                                    if (16 === a.length) {
                                        var _, x, b, w, T, E = a[0],
                                            S = a[1],
                                            M = a[2],
                                            P = a[3],
                                            A = a[4],
                                            C = a[5],
                                            R = a[6],
                                            L = a[7],
                                            O = a[8],
                                            k = a[9],
                                            D = a[10],
                                            B = a[12],
                                            I = a[13],
                                            U = a[14],
                                            N = a[11],
                                            z = Math.atan2(R, D);
                                        f.zOrigin && (U = -f.zOrigin, B = O * U - a[12], I = k * U - a[13], U = D * U + f.zOrigin - a[14]), f.rotationX = z * F, z && (w = Math.cos(-z), T = Math.sin(-z), _ = A * w + O * T, x = C * w + k * T, b = R * w + D * T, O = A * -T + O * w, k = C * -T + k * w, D = R * -T + D * w, N = L * -T + N * w, A = _, C = x, R = b),
                                            z = Math.atan2(O, D), f.rotationY = z * F, z && (w = Math.cos(-z), T = Math.sin(-z), _ = E * w - O * T, x = S * w - k * T, b = M * w - D * T, k = S * T + k * w, D = M * T + D * w, N = P * T + N * w, E = _, S = x, M = b), z = Math.atan2(S, E), f.rotation = z * F, z && (w = Math.cos(-z), T = Math.sin(-z), E = E * w + A * T, x = S * w + C * T, C = S * -T + C * w, R = M * -T + R * w, S = x), f.rotationX && Math.abs(f.rotationX) + Math.abs(f.rotation) > 359.9 && (f.rotationX = f.rotation = 0, f.rotationY += 180), f.scaleX = (0 | Math.sqrt(E * E + S * S) * v + .5) / v, f.scaleY = (0 | Math.sqrt(C * C + k * k) * v + .5) / v, f.scaleZ = (0 | Math.sqrt(R * R + D * D) * v + .5) / v, f.skewX = 0, f.perspective = N ? 1 / (0 > N ? -N : N) : 0, f.x = B, f.y = I, f.z = U, f.svg && (f.x -= f.xOrigin - (f.xOrigin * E - f.yOrigin * A), f.y -= f.yOrigin - (f.yOrigin * S - f.xOrigin * C))
                                    } else if (!(Ae && !o && a.length && f.x === a[4] && f.y === a[5] && (f.rotationX || f.rotationY) || void 0 !== f.x && "none" === Z(e, "display", n))) {
                                        var V = a.length >= 6,
                                            j = V ? a[0] : 1,
                                            G = a[1] || 0,
                                            H = a[2] || 0,
                                            W = V ? a[3] : 1;
                                        f.x = a[4] || 0, f.y = a[5] || 0, l = Math.sqrt(j * j + G * G), c = Math.sqrt(W * W + H * H), h = j || G ? Math.atan2(G, j) * F : f.rotation || 0, d = H || W ? Math.atan2(H, W) * F + h : f.skewX || 0, Math.abs(d) > 90 && 270 > Math.abs(d) && (p ? (l *= -1, d += 0 >= h ? 180 : -180, h += 0 >= h ? 180 : -180) : (c *= -1, d += 0 >= d ? 180 : -180)), f.scaleX = l, f.scaleY = c, f.rotation = h, f.skewX = d, Ae && (f.rotationX = f.rotationY = f.z = 0, f.perspective = y, f.scaleZ = 1), f.svg && (f.x -= f.xOrigin - (f.xOrigin * j + f.yOrigin * H), f.y -= f.yOrigin - (f.xOrigin * G + f.yOrigin * W))
                                    }
                                    f.zOrigin = g;
                                    for (u in f) m > f[u] && f[u] > -m && (f[u] = 0)
                                }
                                return i && (e._gsTransform = f, f.svg && (Te && e.style[Se] ? t.delayedCall(.001, function() {
                                    je(e.style, Se)
                                }) : !Te && e.getAttribute("transform") && t.delayedCall(.001, function() {
                                    e.removeAttribute("transform")
                                }))), f
                            },
                            Ne = function(e) {
                                var t, n, i = this.data,
                                    r = -i.rotation * D,
                                    o = r + i.skewX * D,
                                    a = 1e5,
                                    s = (0 | Math.cos(r) * i.scaleX * a) / a,
                                    u = (0 | Math.sin(r) * i.scaleX * a) / a,
                                    l = (0 | Math.sin(o) * -i.scaleY * a) / a,
                                    c = (0 | Math.cos(o) * i.scaleY * a) / a,
                                    h = this.t.style,
                                    d = this.t.currentStyle;
                                if (d) {
                                    n = u, u = -l, l = -n, t = d.filter, h.filter = "";
                                    var f, p, m = this.t.offsetWidth,
                                        g = this.t.offsetHeight,
                                        y = "absolute" !== d.position,
                                        _ = "progid:DXImageTransform.Microsoft.Matrix(M11=" + s + ", M12=" + u + ", M21=" + l + ", M22=" + c,
                                        x = i.x + m * i.xPercent / 100,
                                        T = i.y + g * i.yPercent / 100;
                                    if (null != i.ox && (f = (i.oxp ? .01 * m * i.ox : i.ox) - m / 2, p = (i.oyp ? .01 * g * i.oy : i.oy) - g / 2, x += f - (f * s + p * u), T += p - (f * l + p * c)), y ? (f = m / 2, p = g / 2, _ += ", Dx=" + (f - (f * s + p * u) + x) + ", Dy=" + (p - (f * l + p * c) + T) + ")") : _ += ", sizingMethod='auto expand')", h.filter = -1 !== t.indexOf("DXImageTransform.Microsoft.Matrix(") ? t.replace(O, _) : _ + " " + t, (0 === e || 1 === e) && 1 === s && 0 === u && 0 === l && 1 === c && (y && -1 === _.indexOf("Dx=0, Dy=0") || w.test(t) && 100 !== parseFloat(RegExp.$1) || -1 === t.indexOf(t.indexOf("Alpha")) && h.removeAttribute("filter")), !y) {
                                        var E, S, M, P = 8 > v ? 1 : -1;
                                        for (f = i.ieOffsetX || 0, p = i.ieOffsetY || 0, i.ieOffsetX = Math.round((m - ((0 > s ? -s : s) * m + (0 > u ? -u : u) * g)) / 2 + x), i.ieOffsetY = Math.round((g - ((0 > c ? -c : c) * g + (0 > l ? -l : l) * m)) / 2 + T), _e = 0; 4 > _e; _e++) S = ne[_e], E = d[S], n = -1 !== E.indexOf("px") ? parseFloat(E) : Q(this.t, S, parseFloat(E), E.replace(b, "")) || 0, M = n !== i[S] ? 2 > _e ? -i.ieOffsetX : -i.ieOffsetY : 2 > _e ? f - i.ieOffsetX : p - i.ieOffsetY, h[S] = (i[S] = Math.round(n - M * (0 === _e || 2 === _e ? 1 : P))) + "px"
                                    }
                                }
                            },
                            ze = V.set3DTransformRatio = V.setTransformRatio = function(e) {
                                var t, n, i, r, o, a, s, u, l, c, h, d, f, m, v, g, y, _, x, b, w, T, E, S = this.data,
                                    M = this.t.style,
                                    P = S.rotation,
                                    A = S.rotationX,
                                    C = S.rotationY,
                                    R = S.scaleX,
                                    L = S.scaleY,
                                    O = S.scaleZ,
                                    k = S.x,
                                    F = S.y,
                                    B = S.z,
                                    I = S.svg,
                                    U = S.perspective,
                                    N = S.force3D;
                                if (!((1 !== e && 0 !== e || "auto" !== N || this.tween._totalTime !== this.tween._totalDuration && this.tween._totalTime) && N || B || U || C || A) || Te && I || !Ae) return void(P || S.skewX || I ? (P *= D, T = S.skewX * D, E = 1e5, t = Math.cos(P) * R, r = Math.sin(P) * R, n = Math.sin(P - T) * -L, o = Math.cos(P - T) * L, T && "simple" === S.skewType && (y = Math.tan(T), y = Math.sqrt(1 + y * y), n *= y, o *= y, S.skewY && (t *= y, r *= y)), I && (k += S.xOrigin - (S.xOrigin * t + S.yOrigin * n) + S.xOffset, F += S.yOrigin - (S.xOrigin * r + S.yOrigin * o) + S.yOffset, Te && (S.xPercent || S.yPercent) && (m = this.t.getBBox(), k += .01 * S.xPercent * m.width, F += .01 * S.yPercent * m.height), m = 1e-6, m > k && k > -m && (k = 0), m > F && F > -m && (F = 0)), x = (0 | t * E) / E + "," + (0 | r * E) / E + "," + (0 | n * E) / E + "," + (0 | o * E) / E + "," + k + "," + F + ")", I && Te ? this.t.setAttribute("transform", "matrix(" + x) : M[Se] = (S.xPercent || S.yPercent ? "translate(" + S.xPercent + "%," + S.yPercent + "%) matrix(" : "matrix(") + x) : M[Se] = (S.xPercent || S.yPercent ? "translate(" + S.xPercent + "%," + S.yPercent + "%) matrix(" : "matrix(") + R + ",0,0," + L + "," + k + "," + F + ")");
                                if (p && (m = 1e-4, m > R && R > -m && (R = O = 2e-5), m > L && L > -m && (L = O = 2e-5), !U || S.z || S.rotationX || S.rotationY || (U = 0)), P || S.skewX) P *= D, v = t = Math.cos(P), g = r = Math.sin(P), S.skewX && (P -= S.skewX * D, v = Math.cos(P), g = Math.sin(P), "simple" === S.skewType && (y = Math.tan(S.skewX * D), y = Math.sqrt(1 + y * y), v *= y, g *= y, S.skewY && (t *= y, r *= y))), n = -g, o = v;
                                else {
                                    if (!(C || A || 1 !== O || U || I)) return void(M[Se] = (S.xPercent || S.yPercent ? "translate(" + S.xPercent + "%," + S.yPercent + "%) translate3d(" : "translate3d(") + k + "px," + F + "px," + B + "px)" + (1 !== R || 1 !== L ? " scale(" + R + "," + L + ")" : ""));
                                    t = o = 1, n = r = 0
                                }
                                l = 1, i = a = s = u = c = h = 0, d = U ? -1 / U : 0, f = S.zOrigin, m = 1e-6, b = ",", w = "0", P = C * D, P && (v = Math.cos(P), g = Math.sin(P), s = -g, c = d * -g, i = t * g, a = r * g, l = v, d *= v, t *= v, r *= v), P = A * D, P && (v = Math.cos(P), g = Math.sin(P), y = n * v + i * g, _ = o * v + a * g, u = l * g, h = d * g, i = n * -g + i * v, a = o * -g + a * v, l *= v, d *= v, n = y, o = _), 1 !== O && (i *= O, a *= O, l *= O, d *= O), 1 !== L && (n *= L, o *= L, u *= L, h *= L), 1 !== R && (t *= R, r *= R, s *= R, c *= R), (f || I) && (f && (k += i * -f, F += a * -f, B += l * -f + f), I && (k += S.xOrigin - (S.xOrigin * t + S.yOrigin * n) + S.xOffset, F += S.yOrigin - (S.xOrigin * r + S.yOrigin * o) + S.yOffset), m > k && k > -m && (k = w), m > F && F > -m && (F = w), m > B && B > -m && (B = 0)), x = S.xPercent || S.yPercent ? "translate(" + S.xPercent + "%," + S.yPercent + "%) matrix3d(" : "matrix3d(", x += (m > t && t > -m ? w : t) + b + (m > r && r > -m ? w : r) + b + (m > s && s > -m ? w : s), x += b + (m > c && c > -m ? w : c) + b + (m > n && n > -m ? w : n) + b + (m > o && o > -m ? w : o), A || C ? (x += b + (m > u && u > -m ? w : u) + b + (m > h && h > -m ? w : h) + b + (m > i && i > -m ? w : i), x += b + (m > a && a > -m ? w : a) + b + (m > l && l > -m ? w : l) + b + (m > d && d > -m ? w : d) + b) : x += ",0,0,0,0,1,0,", x += k + b + F + b + B + b + (U ? 1 + -B / U : 1) + ")", M[Se] = x
                            };
                        c = Ce.prototype, c.x = c.y = c.z = c.skewX = c.skewY = c.rotation = c.rotationX = c.rotationY = c.zOrigin = c.xPercent = c.yPercent = c.xOffset = c.yOffset = 0, c.scaleX = c.scaleY = c.scaleZ = 1, be("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin", {
                            parser: function(e, t, n, i, o, a, u) {
                                if (i._lastParsedTransform === u) return o;
                                i._lastParsedTransform = u;
                                var l, c, h, d, f, p, m, v, g, y, _ = e._gsTransform,
                                    x = e.style,
                                    b = 1e-6,
                                    w = Ee.length,
                                    T = u,
                                    E = {},
                                    S = "transformOrigin";
                                if (u.display ? (d = Z(e, "display"), x.display = "block", l = Ue(e, r, !0, u.parseTransform), x.display = d) : l = Ue(e, r, !0, u.parseTransform), i._transform = l, "string" == typeof T.transform && Se) d = N.style, d[Se] = T.transform, d.display = "block", d.position = "absolute", I.body.appendChild(N), c = Ue(N, null, !1), I.body.removeChild(N), c.perspective || (c.perspective = l.perspective), null != T.xPercent && (c.xPercent = ae(T.xPercent, l.xPercent)), null != T.yPercent && (c.yPercent = ae(T.yPercent, l.yPercent));
                                else if ("object" == typeof T) {
                                    if (c = {
                                            scaleX: ae(null != T.scaleX ? T.scaleX : T.scale, l.scaleX),
                                            scaleY: ae(null != T.scaleY ? T.scaleY : T.scale, l.scaleY),
                                            scaleZ: ae(T.scaleZ, l.scaleZ),
                                            x: ae(T.x, l.x),
                                            y: ae(T.y, l.y),
                                            z: ae(T.z, l.z),
                                            xPercent: ae(T.xPercent, l.xPercent),
                                            yPercent: ae(T.yPercent, l.yPercent),
                                            perspective: ae(T.transformPerspective, l.perspective)
                                        }, v = T.directionalRotation, null != v)
                                        if ("object" == typeof v)
                                            for (d in v) T[d] = v[d];
                                        else T.rotation = v;
                                    "string" == typeof T.x && -1 !== T.x.indexOf("%") && (c.x = 0, c.xPercent = ae(T.x, l.xPercent)), "string" == typeof T.y && -1 !== T.y.indexOf("%") && (c.y = 0, c.yPercent = ae(T.y, l.yPercent)), c.rotation = se("rotation" in T ? T.rotation : "shortRotation" in T ? T.shortRotation + "_short" : "rotationZ" in T ? T.rotationZ : l.rotation, l.rotation, "rotation", E), Ae && (c.rotationX = se("rotationX" in T ? T.rotationX : "shortRotationX" in T ? T.shortRotationX + "_short" : l.rotationX || 0, l.rotationX, "rotationX", E), c.rotationY = se("rotationY" in T ? T.rotationY : "shortRotationY" in T ? T.shortRotationY + "_short" : l.rotationY || 0, l.rotationY, "rotationY", E)), c.skewX = null == T.skewX ? l.skewX : se(T.skewX, l.skewX), c.skewY = null == T.skewY ? l.skewY : se(T.skewY, l.skewY), (h = c.skewY - l.skewY) && (c.skewX += h, c.rotation += h)
                                }
                                for (Ae && null != T.force3D && (l.force3D = T.force3D, m = !0), l.skewType = T.skewType || l.skewType || s.defaultSkewType, p = l.force3D || l.z || l.rotationX || l.rotationY || c.z || c.rotationX || c.rotationY || c.perspective, p || null == T.scale || (c.scaleZ = 1); --w > -1;) n = Ee[w], f = c[n] - l[n], (f > b || -b > f || null != T[n] || null != B[n]) && (m = !0, o = new ve(l, n, l[n], f, o), n in E && (o.e = E[n]), o.xs0 = 0, o.plugin = a, i._overwriteProps.push(o.n));
                                return f = T.transformOrigin, l.svg && (f || T.svgOrigin) && (g = l.xOffset, y = l.yOffset, De(e, re(f), c, T.svgOrigin, T.smoothOrigin), o = ge(l, "xOrigin", (_ ? l : c).xOrigin, c.xOrigin, o, S), o = ge(l, "yOrigin", (_ ? l : c).yOrigin, c.yOrigin, o, S), (g !== l.xOffset || y !== l.yOffset) && (o = ge(l, "xOffset", _ ? g : l.xOffset, l.xOffset, o, S), o = ge(l, "yOffset", _ ? y : l.yOffset, l.yOffset, o, S)), f = Te ? null : "0px 0px"), (f || Ae && p && l.zOrigin) && (Se ? (m = !0, n = Pe, f = (f || Z(e, n, r, !1, "50% 50%")) + "", o = new ve(x, n, 0, 0, o, -1, S), o.b = x[n], o.plugin = a, Ae ? (d = l.zOrigin, f = f.split(" "), l.zOrigin = (f.length > 2 && (0 === d || "0px" !== f[2]) ? parseFloat(f[2]) : d) || 0, o.xs0 = o.e = f[0] + " " + (f[1] || "50%") + " 0px", o = new ve(l, "zOrigin", 0, 0, o, -1, o.n), o.b = d, o.xs0 = o.e = l.zOrigin) : o.xs0 = o.e = f) : re(f + "", l)), m && (i._transformType = l.svg && Te || !p && 3 !== this._transformType ? 2 : 3), o
                            },
                            prefix: !0
                        }), be("boxShadow", {
                            defaultValue: "0px 0px 0px 0px #999",
                            prefix: !0,
                            color: !0,
                            multi: !0,
                            keyword: "inset"
                        }), be("borderRadius", {
                            defaultValue: "0px",
                            parser: function(e, t, n, o, a) {
                                t = this.format(t);
                                var s, u, l, c, h, d, f, p, m, v, g, y, _, x, b, w, T = ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"],
                                    E = e.style;
                                for (m = parseFloat(e.offsetWidth), v = parseFloat(e.offsetHeight), s = t.split(" "), u = 0; T.length > u; u++) this.p.indexOf("border") && (T[u] = q(T[u])), h = c = Z(e, T[u], r, !1, "0px"), -1 !== h.indexOf(" ") && (c = h.split(" "), h = c[0], c = c[1]), d = l = s[u], f = parseFloat(h), y = h.substr((f + "").length), _ = "=" === d.charAt(1), _ ? (p = parseInt(d.charAt(0) + "1", 10), d = d.substr(2), p *= parseFloat(d), g = d.substr((p + "").length - (0 > p ? 1 : 0)) || "") : (p = parseFloat(d), g = d.substr((p + "").length)), "" === g && (g = i[n] || y), g !== y && (x = Q(e, "borderLeft", f, y), b = Q(e, "borderTop", f, y), "%" === g ? (h = 100 * (x / m) + "%", c = 100 * (b / v) + "%") : "em" === g ? (w = Q(e, "borderLeft", 1, "em"), h = x / w + "em", c = b / w + "em") : (h = x + "px", c = b + "px"), _ && (d = parseFloat(h) + p + g, l = parseFloat(c) + p + g)), a = ye(E, T[u], h + " " + c, d + " " + l, !1, "0px", a);
                                return a
                            },
                            prefix: !0,
                            formatter: fe("0px 0px 0px 0px", !1, !0)
                        }), be("backgroundPosition", {
                            defaultValue: "0 0",
                            parser: function(e, t, n, i, o, a) {
                                var s, u, l, c, h, d, f = "background-position",
                                    p = r || K(e, null),
                                    m = this.format((p ? v ? p.getPropertyValue(f + "-x") + " " + p.getPropertyValue(f + "-y") : p.getPropertyValue(f) : e.currentStyle.backgroundPositionX + " " + e.currentStyle.backgroundPositionY) || "0 0"),
                                    g = this.format(t);
                                if (-1 !== m.indexOf("%") != (-1 !== g.indexOf("%")) && (d = Z(e, "backgroundImage").replace(A, ""), d && "none" !== d)) {
                                    for (s = m.split(" "), u = g.split(" "), z.setAttribute("src", d), l = 2; --l > -1;) m = s[l], c = -1 !== m.indexOf("%"), c !== (-1 !== u[l].indexOf("%")) && (h = 0 === l ? e.offsetWidth - z.width : e.offsetHeight - z.height, s[l] = c ? parseFloat(m) / 100 * h + "px" : 100 * (parseFloat(m) / h) + "%");
                                    m = s.join(" ")
                                }
                                return this.parseComplex(e.style, m, g, o, a)
                            },
                            formatter: re
                        }), be("backgroundSize", {
                            defaultValue: "0 0",
                            formatter: re
                        }), be("perspective", {
                            defaultValue: "0px",
                            prefix: !0
                        }), be("perspectiveOrigin", {
                            defaultValue: "50% 50%",
                            prefix: !0
                        }), be("transformStyle", {
                            prefix: !0
                        }), be("backfaceVisibility", {
                            prefix: !0
                        }), be("userSelect", {
                            prefix: !0
                        }), be("margin", {
                            parser: pe("marginTop,marginRight,marginBottom,marginLeft")
                        }), be("padding", {
                            parser: pe("paddingTop,paddingRight,paddingBottom,paddingLeft")
                        }), be("clip", {
                            defaultValue: "rect(0px,0px,0px,0px)",
                            parser: function(e, t, n, i, o, a) {
                                var s, u, l;
                                return 9 > v ? (u = e.currentStyle, l = 8 > v ? " " : ",", s = "rect(" + u.clipTop + l + u.clipRight + l + u.clipBottom + l + u.clipLeft + ")", t = this.format(t).split(",").join(l)) : (s = this.format(Z(e, this.p, r, !1, this.dflt)), t = this.format(t)), this.parseComplex(e.style, s, t, o, a)
                            }
                        }), be("textShadow", {
                            defaultValue: "0px 0px 0px #999",
                            color: !0,
                            multi: !0
                        }), be("autoRound,strictUnits", {
                            parser: function(e, t, n, i, r) {
                                return r
                            }
                        }), be("border", {
                            defaultValue: "0px solid #000",
                            parser: function(e, t, n, i, o, a) {
                                return this.parseComplex(e.style, this.format(Z(e, "borderTopWidth", r, !1, "0px") + " " + Z(e, "borderTopStyle", r, !1, "solid") + " " + Z(e, "borderTopColor", r, !1, "#000")), this.format(t), o, a)
                            },
                            color: !0,
                            formatter: function(e) {
                                var t = e.split(" ");
                                return t[0] + " " + (t[1] || "solid") + " " + (e.match(de) || ["#000"])[0]
                            }
                        }), be("borderWidth", {
                            parser: pe("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")
                        }), be("float,cssFloat,styleFloat", {
                            parser: function(e, t, n, i, r) {
                                var o = e.style,
                                    a = "cssFloat" in o ? "cssFloat" : "styleFloat";
                                return new ve(o, a, 0, 0, r, -1, n, !1, 0, o[a], t)
                            }
                        });
                        var Ve = function(e) {
                            var t, n = this.t,
                                i = n.filter || Z(this.data, "filter") || "",
                                r = 0 | this.s + this.c * e;
                            100 === r && (-1 === i.indexOf("atrix(") && -1 === i.indexOf("radient(") && -1 === i.indexOf("oader(") ? (n.removeAttribute("filter"), t = !Z(this.data, "filter")) : (n.filter = i.replace(E, ""), t = !0)), t || (this.xn1 && (n.filter = i = i || "alpha(opacity=" + r + ")"), -1 === i.indexOf("pacity") ? 0 === r && this.xn1 || (n.filter = i + " alpha(opacity=" + r + ")") : n.filter = i.replace(w, "opacity=" + r))
                        };
                        be("opacity,alpha,autoAlpha", {
                            defaultValue: "1",
                            parser: function(e, t, n, i, o, a) {
                                var s = parseFloat(Z(e, "opacity", r, !1, "1")),
                                    u = e.style,
                                    l = "autoAlpha" === n;
                                return "string" == typeof t && "=" === t.charAt(1) && (t = ("-" === t.charAt(0) ? -1 : 1) * parseFloat(t.substr(2)) + s), l && 1 === s && "hidden" === Z(e, "visibility", r) && 0 !== t && (s = 0), G ? o = new ve(u, "opacity", s, t - s, o) : (o = new ve(u, "opacity", 100 * s, 100 * (t - s), o), o.xn1 = l ? 1 : 0, u.zoom = 1, o.type = 2, o.b = "alpha(opacity=" + o.s + ")", o.e = "alpha(opacity=" + (o.s + o.c) + ")", o.data = e, o.plugin = a, o.setRatio = Ve), l && (o = new ve(u, "visibility", 0, 0, o, -1, null, !1, 0, 0 !== s ? "inherit" : "hidden", 0 === t ? "hidden" : "inherit"), o.xs0 = "inherit", i._overwriteProps.push(o.n), i._overwriteProps.push(n)), o
                            }
                        });
                        var je = function(e, t) {
                                t && (e.removeProperty ? (("ms" === t.substr(0, 2) || "webkit" === t.substr(0, 6)) && (t = "-" + t), e.removeProperty(t.replace(M, "-$1").toLowerCase())) : e.removeAttribute(t))
                            },
                            Ge = function(e) {
                                if (this.t._gsClassPT = this, 1 === e || 0 === e) {
                                    this.t.setAttribute("class", 0 === e ? this.b : this.e);
                                    for (var t = this.data, n = this.t.style; t;) t.v ? n[t.p] = t.v : je(n, t.p), t = t._next;
                                    1 === e && this.t._gsClassPT === this && (this.t._gsClassPT = null)
                                } else this.t.getAttribute("class") !== this.e && this.t.setAttribute("class", this.e)
                            };
                        be("className", {
                            parser: function(e, t, i, o, a, s, u) {
                                var l, c, h, d, f, p = e.getAttribute("class") || "",
                                    m = e.style.cssText;
                                if (a = o._classNamePT = new ve(e, i, 0, 0, a, 2), a.setRatio = Ge, a.pr = -11, n = !0, a.b = p, c = $(e, r), h = e._gsClassPT) {
                                    for (d = {}, f = h.data; f;) d[f.p] = 1, f = f._next;
                                    h.setRatio(1)
                                }
                                return e._gsClassPT = a, a.e = "=" !== t.charAt(1) ? t : p.replace(RegExp("\\s*\\b" + t.substr(2) + "\\b"), "") + ("+" === t.charAt(0) ? " " + t.substr(2) : ""), e.setAttribute("class", a.e), l = ee(e, c, $(e), u, d), e.setAttribute("class", p), a.data = l.firstMPT, e.style.cssText = m, a = a.xfirst = o.parse(e, l.difs, a, s)
                            }
                        });
                        var He = function(e) {
                            if ((1 === e || 0 === e) && this.data._totalTime === this.data._totalDuration && "isFromStart" !== this.data.data) {
                                var t, n, i, r, o, a = this.t.style,
                                    s = l.transform.parse;
                                if ("all" === this.e) a.cssText = "", r = !0;
                                else
                                    for (t = this.e.split(" ").join("").split(","), i = t.length; --i > -1;) n = t[i], l[n] && (l[n].parse === s ? r = !0 : n = "transformOrigin" === n ? Pe : l[n].p), je(a, n);
                                r && (je(a, Se), o = this.t._gsTransform, o && (o.svg && this.t.removeAttribute("data-svg-origin"), delete this.t._gsTransform))
                            }
                        };
                        for (be("clearProps", {
                                parser: function(e, t, i, r, o) {
                                    return o = new ve(e, i, 0, 0, o, 2), o.setRatio = He, o.e = t, o.pr = -10, o.data = r._tween, n = !0, o
                                }
                            }), c = "bezier,throwProps,physicsProps,physics2D".split(","), _e = c.length; _e--;) we(c[_e]);
                        c = s.prototype, c._firstPT = c._lastParsedTransform = c._transform = null, c._onInitTween = function(e, t, a) {
                            if (!e.nodeType) return !1;
                            this._target = e, this._tween = a, this._vars = t, h = t.autoRound, n = !1, i = t.suffixMap || s.suffixMap, r = K(e, ""), o = this._overwriteProps;
                            var u, c, p, v, g, y, _, x, b, w = e.style;
                            if (d && "" === w.zIndex && (u = Z(e, "zIndex", r), ("auto" === u || "" === u) && this._addLazySet(w, "zIndex", 0)), "string" == typeof t && (v = w.cssText, u = $(e, r), w.cssText = v + ";" + t, u = ee(e, u, $(e)).difs, !G && T.test(t) && (u.opacity = parseFloat(RegExp.$1)), t = u, w.cssText = v), this._firstPT = c = t.className ? l.className.parse(e, t.className, "className", this, null, null, t) : this.parse(e, t, null), this._transformType) {
                                for (b = 3 === this._transformType, Se ? f && (d = !0, "" === w.zIndex && (_ = Z(e, "zIndex", r), ("auto" === _ || "" === _) && this._addLazySet(w, "zIndex", 0)), m && this._addLazySet(w, "WebkitBackfaceVisibility", this._vars.WebkitBackfaceVisibility || (b ? "visible" : "hidden"))) : w.zoom = 1, p = c; p && p._next;) p = p._next;
                                x = new ve(e, "transform", 0, 0, null, 2), this._linkCSSP(x, null, p), x.setRatio = Se ? ze : Ne, x.data = this._transform || Ue(e, r, !0), x.tween = a, x.pr = -1, o.pop()
                            }
                            if (n) {
                                for (; c;) {
                                    for (y = c._next, p = v; p && p.pr > c.pr;) p = p._next;
                                    (c._prev = p ? p._prev : g) ? c._prev._next = c: v = c, (c._next = p) ? p._prev = c : g = c, c = y
                                }
                                this._firstPT = v
                            }
                            return !0
                        }, c.parse = function(e, t, n, o) {
                            var a, s, u, c, d, f, p, m, v, g, y = e.style;
                            for (a in t) f = t[a], s = l[a], s ? n = s.parse(e, f, a, this, n, o, t) : (d = Z(e, a, r) + "", v = "string" == typeof f, "color" === a || "fill" === a || "stroke" === a || -1 !== a.indexOf("Color") || v && S.test(f) ? (v || (f = ce(f), f = (f.length > 3 ? "rgba(" : "rgb(") + f.join(",") + ")"), n = ye(y, a, d, f, !0, "transparent", n, 0, o)) : !v || -1 === f.indexOf(" ") && -1 === f.indexOf(",") ? (u = parseFloat(d), p = u || 0 === u ? d.substr((u + "").length) : "", ("" === d || "auto" === d) && ("width" === a || "height" === a ? (u = ie(e, a, r), p = "px") : "left" === a || "top" === a ? (u = J(e, a, r), p = "px") : (u = "opacity" !== a ? 0 : 1, p = "")), g = v && "=" === f.charAt(1), g ? (c = parseInt(f.charAt(0) + "1", 10), f = f.substr(2), c *= parseFloat(f), m = f.replace(b, "")) : (c = parseFloat(f), m = v ? f.replace(b, "") : ""), "" === m && (m = a in i ? i[a] : p), f = c || 0 === c ? (g ? c + u : c) + m : t[a], p !== m && "" !== m && (c || 0 === c) && u && (u = Q(e, a, u, p), "%" === m ? (u /= Q(e, a, 100, "%") / 100, t.strictUnits !== !0 && (d = u + "%")) : "em" === m || "rem" === m ? u /= Q(e, a, 1, m) : "px" !== m && (c = Q(e, a, c, m), m = "px"), g && (c || 0 === c) && (f = c + u + m)), g && (c += u), !u && 0 !== u || !c && 0 !== c ? void 0 !== y[a] && (f || "NaN" != f + "" && null != f) ? (n = new ve(y, a, c || u || 0, 0, n, -1, a, !1, 0, d, f), n.xs0 = "none" !== f || "display" !== a && -1 === a.indexOf("Style") ? f : d) : W("invalid " + a + " tween value: " + t[a]) : (n = new ve(y, a, u, c - u, n, 0, a, h !== !1 && ("px" === m || "zIndex" === a), 0, d, f), n.xs0 = m)) : n = ye(y, a, d, f, !0, null, n, 0, o)), o && n && !n.plugin && (n.plugin = o);
                            return n
                        }, c.setRatio = function(e) {
                            var t, n, i, r = this._firstPT,
                                o = 1e-6;
                            if (1 !== e || this._tween._time !== this._tween._duration && 0 !== this._tween._time)
                                if (e || this._tween._time !== this._tween._duration && 0 !== this._tween._time || this._tween._rawPrevTime === -1e-6)
                                    for (; r;) {
                                        if (t = r.c * e + r.s, r.r ? t = Math.round(t) : o > t && t > -o && (t = 0), r.type)
                                            if (1 === r.type)
                                                if (i = r.l, 2 === i) r.t[r.p] = r.xs0 + t + r.xs1 + r.xn1 + r.xs2;
                                                else if (3 === i) r.t[r.p] = r.xs0 + t + r.xs1 + r.xn1 + r.xs2 + r.xn2 + r.xs3;
                                        else if (4 === i) r.t[r.p] = r.xs0 + t + r.xs1 + r.xn1 + r.xs2 + r.xn2 + r.xs3 + r.xn3 + r.xs4;
                                        else if (5 === i) r.t[r.p] = r.xs0 + t + r.xs1 + r.xn1 + r.xs2 + r.xn2 + r.xs3 + r.xn3 + r.xs4 + r.xn4 + r.xs5;
                                        else {
                                            for (n = r.xs0 + t + r.xs1, i = 1; r.l > i; i++) n += r["xn" + i] + r["xs" + (i + 1)];
                                            r.t[r.p] = n
                                        } else -1 === r.type ? r.t[r.p] = r.xs0 : r.setRatio && r.setRatio(e);
                                        else r.t[r.p] = t + r.xs0;
                                        r = r._next
                                    } else
                                        for (; r;) 2 !== r.type ? r.t[r.p] = r.b : r.setRatio(e), r = r._next;
                                else
                                    for (; r;) {
                                        if (2 !== r.type)
                                            if (r.r && -1 !== r.type)
                                                if (t = Math.round(r.s + r.c), r.type) {
                                                    if (1 === r.type) {
                                                        for (i = r.l, n = r.xs0 + t + r.xs1, i = 1; r.l > i; i++) n += r["xn" + i] + r["xs" + (i + 1)];
                                                        r.t[r.p] = n
                                                    }
                                                } else r.t[r.p] = t + r.xs0;
                                        else r.t[r.p] = r.e;
                                        else r.setRatio(e);
                                        r = r._next
                                    }
                        }, c._enableTransforms = function(e) {
                            this._transform = this._transform || Ue(this._target, r, !0), this._transformType = this._transform.svg && Te || !e && 3 !== this._transformType ? 2 : 3
                        };
                        var We = function() {
                            this.t[this.p] = this.e, this.data._linkCSSP(this, this._next, null, !0)
                        };
                        c._addLazySet = function(e, t, n) {
                            var i = this._firstPT = new ve(e, t, 0, 0, this._firstPT, 2);
                            i.e = n, i.setRatio = We, i.data = this
                        }, c._linkCSSP = function(e, t, n, i) {
                            return e && (t && (t._prev = e), e._next && (e._next._prev = e._prev), e._prev ? e._prev._next = e._next : this._firstPT === e && (this._firstPT = e._next, i = !0), n ? n._next = e : i || null !== this._firstPT || (this._firstPT = e), e._next = t, e._prev = n), e
                        }, c._kill = function(t) {
                            var n, i, r, o = t;
                            if (t.autoAlpha || t.alpha) {
                                o = {};
                                for (i in t) o[i] = t[i];
                                o.opacity = 1, o.autoAlpha && (o.visibility = 1)
                            }
                            return t.className && (n = this._classNamePT) && (r = n.xfirst, r && r._prev ? this._linkCSSP(r._prev, n._next, r._prev._prev) : r === this._firstPT && (this._firstPT = n._next), n._next && this._linkCSSP(n._next, n._next._next, r._prev), this._classNamePT = null), e.prototype._kill.call(this, o)
                        };
                        var Xe = function(e, t, n) {
                            var i, r, o, a;
                            if (e.slice)
                                for (r = e.length; --r > -1;) Xe(e[r], t, n);
                            else
                                for (i = e.childNodes, r = i.length; --r > -1;) o = i[r], a = o.type, o.style && (t.push($(o)), n && n.push(o)), 1 !== a && 9 !== a && 11 !== a || !o.childNodes.length || Xe(o, t, n)
                        };
                        return s.cascadeTo = function(e, n, i) {
                            var r, o, a, s, u = t.to(e, n, i),
                                l = [u],
                                c = [],
                                h = [],
                                d = [],
                                f = t._internals.reservedProps;
                            for (e = u._targets || u.target, Xe(e, c, d), u.render(n, !0, !0), Xe(e, h), u.render(0, !0, !0), u._enabled(!0), r = d.length; --r > -1;)
                                if (o = ee(d[r], c[r], h[r]), o.firstMPT) {
                                    o = o.difs;
                                    for (a in i) f[a] && (o[a] = i[a]);
                                    s = {};
                                    for (a in o) s[a] = c[r][a];
                                    l.push(t.fromTo(d[r], n, s, o))
                                }
                            return l
                        }, e.activate([s]), s
                    }, !0),
                    function() {
                        var e = a._gsDefine.plugin({
                                propName: "roundProps",
                                version: "1.5",
                                priority: -1,
                                API: 2,
                                init: function(e, t, n) {
                                    return this._tween = n, !0
                                }
                            }),
                            t = function(e) {
                                for (; e;) e.f || e.blob || (e.r = 1), e = e._next
                            },
                            n = e.prototype;
                        n._onInitAllProps = function() {
                            for (var e, n, i, r = this._tween, o = r.vars.roundProps.join ? r.vars.roundProps : r.vars.roundProps.split(","), a = o.length, s = {}, u = r._propLookup.roundProps; --a > -1;) s[o[a]] = 1;
                            for (a = o.length; --a > -1;)
                                for (e = o[a], n = r._firstPT; n;) i = n._next, n.pg ? n.t._roundProps(s, !0) : n.n === e && (2 === n.f && n.t ? t(n.t._firstPT) : (this._add(n.t, e, n.s, n.c), i && (i._prev = n._prev), n._prev ? n._prev._next = i : r._firstPT === n && (r._firstPT = i), n._next = n._prev = null, r._propLookup[e] = u)), n = i;
                            return !1
                        }, n._add = function(e, t, n, i) {
                            this._addTween(e, t, n, n + i, t, !0), this._overwriteProps.push(t)
                        }
                    }(),
                    function() {
                        a._gsDefine.plugin({
                            propName: "attr",
                            API: 2,
                            version: "0.5.0",
                            init: function(e, t) {
                                var n;
                                if ("function" != typeof e.setAttribute) return !1;
                                for (n in t) this._addTween(e, "setAttribute", e.getAttribute(n) + "", t[n] + "", n, !1, n), this._overwriteProps.push(n);
                                return !0
                            }
                        })
                    }(), a._gsDefine.plugin({
                        propName: "directionalRotation",
                        version: "0.2.1",
                        API: 2,
                        init: function(e, t) {
                            "object" != typeof t && (t = {
                                rotation: t
                            }), this.finals = {};
                            var n, i, r, o, a, s, u = t.useRadians === !0 ? 2 * Math.PI : 360,
                                l = 1e-6;
                            for (n in t) "useRadians" !== n && (s = (t[n] + "").split("_"), i = s[0], r = parseFloat("function" != typeof e[n] ? e[n] : e[n.indexOf("set") || "function" != typeof e["get" + n.substr(3)] ? n : "get" + n.substr(3)]()), o = this.finals[n] = "string" == typeof i && "=" === i.charAt(1) ? r + parseInt(i.charAt(0) + "1", 10) * Number(i.substr(2)) : Number(i) || 0, a = o - r, s.length && (i = s.join("_"), -1 !== i.indexOf("short") && (a %= u, a !== a % (u / 2) && (a = 0 > a ? a + u : a - u)), -1 !== i.indexOf("_cw") && 0 > a ? a = (a + 9999999999 * u) % u - (0 | a / u) * u : -1 !== i.indexOf("ccw") && a > 0 && (a = (a - 9999999999 * u) % u - (0 | a / u) * u)), (a > l || -l > a) && (this._addTween(e, n, r, r + a, n), this._overwriteProps.push(n)));
                            return !0
                        },
                        set: function(e) {
                            var t;
                            if (1 !== e) this._super.setRatio.call(this, e);
                            else
                                for (t = this._firstPT; t;) t.f ? t.t[t.p](this.finals[t.p]) : t.t[t.p] = this.finals[t.p], t = t._next
                        }
                    })._autoCSS = !0, a._gsDefine("easing.Back", ["easing.Ease"], function(e) {
                        var t, n, i, r = a.GreenSockGlobals || a,
                            o = r.com.greensock,
                            s = 2 * Math.PI,
                            u = Math.PI / 2,
                            l = o._class,
                            c = function(t, n) {
                                var i = l("easing." + t, function() {}, !0),
                                    r = i.prototype = new e;
                                return r.constructor = i, r.getRatio = n, i
                            },
                            h = e.register || function() {},
                            d = function(e, t, n, i) {
                                var r = l("easing." + e, {
                                    easeOut: new t,
                                    easeIn: new n,
                                    easeInOut: new i
                                }, !0);
                                return h(r, e), r
                            },
                            f = function(e, t, n) {
                                this.t = e, this.v = t, n && (this.next = n, n.prev = this, this.c = n.v - t, this.gap = n.t - e)
                            },
                            p = function(t, n) {
                                var i = l("easing." + t, function(e) {
                                        this._p1 = e || 0 === e ? e : 1.70158, this._p2 = 1.525 * this._p1
                                    }, !0),
                                    r = i.prototype = new e;
                                return r.constructor = i, r.getRatio = n, r.config = function(e) {
                                    return new i(e)
                                }, i
                            },
                            m = d("Back", p("BackOut", function(e) {
                                return (e -= 1) * e * ((this._p1 + 1) * e + this._p1) + 1
                            }), p("BackIn", function(e) {
                                return e * e * ((this._p1 + 1) * e - this._p1)
                            }), p("BackInOut", function(e) {
                                return 1 > (e *= 2) ? .5 * e * e * ((this._p2 + 1) * e - this._p2) : .5 * ((e -= 2) * e * ((this._p2 + 1) * e + this._p2) + 2)
                            })),
                            v = l("easing.SlowMo", function(e, t, n) {
                                t = t || 0 === t ? t : .7, null == e ? e = .7 : e > 1 && (e = 1), this._p = 1 !== e ? t : 0, this._p1 = (1 - e) / 2, this._p2 = e, this._p3 = this._p1 + this._p2, this._calcEnd = n === !0
                            }, !0),
                            g = v.prototype = new e;
                        return g.constructor = v, g.getRatio = function(e) {
                            var t = e + (.5 - e) * this._p;
                            return this._p1 > e ? this._calcEnd ? 1 - (e = 1 - e / this._p1) * e : t - (e = 1 - e / this._p1) * e * e * e * t : e > this._p3 ? this._calcEnd ? 1 - (e = (e - this._p3) / this._p1) * e : t + (e - t) * (e = (e - this._p3) / this._p1) * e * e * e : this._calcEnd ? 1 : t
                        }, v.ease = new v(.7, .7), g.config = v.config = function(e, t, n) {
                            return new v(e, t, n)
                        }, t = l("easing.SteppedEase", function(e) {
                            e = e || 1, this._p1 = 1 / e, this._p2 = e + 1
                        }, !0), g = t.prototype = new e, g.constructor = t, g.getRatio = function(e) {
                            return 0 > e ? e = 0 : e >= 1 && (e = .999999999), (this._p2 * e >> 0) * this._p1
                        }, g.config = t.config = function(e) {
                            return new t(e)
                        }, n = l("easing.RoughEase", function(t) {
                            t = t || {};
                            for (var n, i, r, o, a, s, u = t.taper || "none", l = [], c = 0, h = 0 | (t.points || 20), d = h, p = t.randomize !== !1, m = t.clamp === !0, v = t.template instanceof e ? t.template : null, g = "number" == typeof t.strength ? .4 * t.strength : .4; --d > -1;) n = p ? Math.random() : 1 / h * d, i = v ? v.getRatio(n) : n, "none" === u ? r = g : "out" === u ? (o = 1 - n, r = o * o * g) : "in" === u ? r = n * n * g : .5 > n ? (o = 2 * n, r = .5 * o * o * g) : (o = 2 * (1 - n), r = .5 * o * o * g), p ? i += Math.random() * r - .5 * r : d % 2 ? i += .5 * r : i -= .5 * r, m && (i > 1 ? i = 1 : 0 > i && (i = 0)), l[c++] = {
                                x: n,
                                y: i
                            };
                            for (l.sort(function(e, t) {
                                    return e.x - t.x
                                }), s = new f(1, 1, null), d = h; --d > -1;) a = l[d], s = new f(a.x, a.y, s);
                            this._prev = new f(0, 0, 0 !== s.t ? s : s.next)
                        }, !0), g = n.prototype = new e, g.constructor = n, g.getRatio = function(e) {
                            var t = this._prev;
                            if (e > t.t) {
                                for (; t.next && e >= t.t;) t = t.next;
                                t = t.prev
                            } else
                                for (; t.prev && t.t >= e;) t = t.prev;
                            return this._prev = t, t.v + (e - t.t) / t.gap * t.c
                        }, g.config = function(e) {
                            return new n(e)
                        }, n.ease = new n, d("Bounce", c("BounceOut", function(e) {
                            return 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : 2.5 / 2.75 > e ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375
                        }), c("BounceIn", function(e) {
                            return 1 / 2.75 > (e = 1 - e) ? 1 - 7.5625 * e * e : 2 / 2.75 > e ? 1 - (7.5625 * (e -= 1.5 / 2.75) * e + .75) : 2.5 / 2.75 > e ? 1 - (7.5625 * (e -= 2.25 / 2.75) * e + .9375) : 1 - (7.5625 * (e -= 2.625 / 2.75) * e + .984375)
                        }), c("BounceInOut", function(e) {
                            var t = .5 > e;
                            return e = t ? 1 - 2 * e : 2 * e - 1, e = 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : 2.5 / 2.75 > e ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375, t ? .5 * (1 - e) : .5 * e + .5
                        })), d("Circ", c("CircOut", function(e) {
                            return Math.sqrt(1 - (e -= 1) * e)
                        }), c("CircIn", function(e) {
                            return -(Math.sqrt(1 - e * e) - 1)
                        }), c("CircInOut", function(e) {
                            return 1 > (e *= 2) ? -.5 * (Math.sqrt(1 - e * e) - 1) : .5 * (Math.sqrt(1 - (e -= 2) * e) + 1)
                        })), i = function(t, n, i) {
                            var r = l("easing." + t, function(e, t) {
                                    this._p1 = e >= 1 ? e : 1, this._p2 = (t || i) / (1 > e ? e : 1), this._p3 = this._p2 / s * (Math.asin(1 / this._p1) || 0), this._p2 = s / this._p2
                                }, !0),
                                o = r.prototype = new e;
                            return o.constructor = r, o.getRatio = n, o.config = function(e, t) {
                                return new r(e, t)
                            }, r
                        }, d("Elastic", i("ElasticOut", function(e) {
                            return this._p1 * Math.pow(2, -10 * e) * Math.sin((e - this._p3) * this._p2) + 1
                        }, .3), i("ElasticIn", function(e) {
                            return -(this._p1 * Math.pow(2, 10 * (e -= 1)) * Math.sin((e - this._p3) * this._p2))
                        }, .3), i("ElasticInOut", function(e) {
                            return 1 > (e *= 2) ? -.5 * this._p1 * Math.pow(2, 10 * (e -= 1)) * Math.sin((e - this._p3) * this._p2) : .5 * this._p1 * Math.pow(2, -10 * (e -= 1)) * Math.sin((e - this._p3) * this._p2) + 1
                        }, .45)), d("Expo", c("ExpoOut", function(e) {
                            return 1 - Math.pow(2, -10 * e)
                        }), c("ExpoIn", function(e) {
                            return Math.pow(2, 10 * (e - 1)) - .001
                        }), c("ExpoInOut", function(e) {
                            return 1 > (e *= 2) ? .5 * Math.pow(2, 10 * (e - 1)) : .5 * (2 - Math.pow(2, -10 * (e - 1)))
                        })), d("Sine", c("SineOut", function(e) {
                            return Math.sin(e * u)
                        }), c("SineIn", function(e) {
                            return -Math.cos(e * u) + 1
                        }), c("SineInOut", function(e) {
                            return -.5 * (Math.cos(Math.PI * e) - 1)
                        })), l("easing.EaseLookup", {
                            find: function(t) {
                                return e.map[t]
                            }
                        }, !0), h(r.SlowMo, "SlowMo", "ease,"), h(n, "RoughEase", "ease,"), h(t, "SteppedEase", "ease,"), m
                    }, !0)
            }), a._gsDefine && a._gsQueue.pop()(),
            function(o, a) {
                "use strict";
                var s = o.GreenSockGlobals = o.GreenSockGlobals || o;
                if (!s.TweenLite) {
                    var u, l, c, h, d, f = function(e) {
                            var t, n = e.split("."),
                                i = s;
                            for (t = 0; n.length > t; t++) i[n[t]] = i = i[n[t]] || {};
                            return i
                        },
                        p = f("com.greensock"),
                        m = 1e-10,
                        v = function(e) {
                            var t, n = [],
                                i = e.length;
                            for (t = 0; t !== i; n.push(e[t++]));
                            return n
                        },
                        g = function() {},
                        y = function() {
                            var e = Object.prototype.toString,
                                t = e.call([]);
                            return function(n) {
                                return null != n && (n instanceof Array || "object" == typeof n && !!n.push && e.call(n) === t)
                            }
                        }(),
                        _ = {},
                        x = function(o, u, l, c) {
                            this.sc = _[o] ? _[o].sc : [], _[o] = this, this.gsClass = null, this.func = l;
                            var h = [];
                            this.check = function(d) {
                                for (var p, m, v, g, y, b = u.length, w = b; --b > -1;)(p = _[u[b]] || new x(u[b], [])).gsClass ? (h[b] = p.gsClass, w--) : d && p.sc.push(this);
                                if (0 === w && l)
                                    for (m = ("com.greensock." + o).split("."), v = m.pop(), g = f(m.join("."))[v] = this.gsClass = l.apply(l, h), c && (s[v] = g, y = "undefined" != typeof e && e.exports, !y && n(5) ? (i = [], r = function() {
                                            return g
                                        }.apply(t, i), !(void 0 !== r && (e.exports = r))) : o === a && y && (e.exports = g)), b = 0; this.sc.length > b; b++) this.sc[b].check()
                            }, this.check(!0)
                        },
                        b = o._gsDefine = function(e, t, n, i) {
                            return new x(e, t, n, i)
                        },
                        w = p._class = function(e, t, n) {
                            return t = t || function() {}, b(e, [], function() {
                                return t
                            }, n), t
                        };
                    b.globals = s;
                    var T = [0, 0, 1, 1],
                        E = [],
                        S = w("easing.Ease", function(e, t, n, i) {
                            this._func = e, this._type = n || 0, this._power = i || 0, this._params = t ? T.concat(t) : T
                        }, !0),
                        M = S.map = {},
                        P = S.register = function(e, t, n, i) {
                            for (var r, o, a, s, u = t.split(","), l = u.length, c = (n || "easeIn,easeOut,easeInOut").split(","); --l > -1;)
                                for (o = u[l], r = i ? w("easing." + o, null, !0) : p.easing[o] || {}, a = c.length; --a > -1;) s = c[a], M[o + "." + s] = M[s + o] = r[s] = e.getRatio ? e : e[s] || new e
                        };
                    for (c = S.prototype, c._calcEnd = !1, c.getRatio = function(e) {
                            if (this._func) return this._params[0] = e, this._func.apply(null, this._params);
                            var t = this._type,
                                n = this._power,
                                i = 1 === t ? 1 - e : 2 === t ? e : .5 > e ? 2 * e : 2 * (1 - e);
                            return 1 === n ? i *= i : 2 === n ? i *= i * i : 3 === n ? i *= i * i * i : 4 === n && (i *= i * i * i * i), 1 === t ? 1 - i : 2 === t ? i : .5 > e ? i / 2 : 1 - i / 2
                        }, u = ["Linear", "Quad", "Cubic", "Quart", "Quint,Strong"], l = u.length; --l > -1;) c = u[l] + ",Power" + l, P(new S(null, null, 1, l), c, "easeOut", !0), P(new S(null, null, 2, l), c, "easeIn" + (0 === l ? ",easeNone" : "")), P(new S(null, null, 3, l), c, "easeInOut");
                    M.linear = p.easing.Linear.easeIn, M.swing = p.easing.Quad.easeInOut;
                    var A = w("events.EventDispatcher", function(e) {
                        this._listeners = {}, this._eventTarget = e || this
                    });
                    c = A.prototype, c.addEventListener = function(e, t, n, i, r) {
                        r = r || 0;
                        var o, a, s = this._listeners[e],
                            u = 0;
                        for (null == s && (this._listeners[e] = s = []), a = s.length; --a > -1;) o = s[a], o.c === t && o.s === n ? s.splice(a, 1) : 0 === u && r > o.pr && (u = a + 1);
                        s.splice(u, 0, {
                            c: t,
                            s: n,
                            up: i,
                            pr: r
                        }), this !== h || d || h.wake()
                    }, c.removeEventListener = function(e, t) {
                        var n, i = this._listeners[e];
                        if (i)
                            for (n = i.length; --n > -1;)
                                if (i[n].c === t) return void i.splice(n, 1)
                    }, c.dispatchEvent = function(e) {
                        var t, n, i, r = this._listeners[e];
                        if (r)
                            for (t = r.length, n = this._eventTarget; --t > -1;) i = r[t], i && (i.up ? i.c.call(i.s || n, {
                                type: e,
                                target: n
                            }) : i.c.call(i.s || n))
                    };
                    var C = o.requestAnimationFrame,
                        R = o.cancelAnimationFrame,
                        L = Date.now || function() {
                            return (new Date).getTime()
                        },
                        O = L();
                    for (u = ["ms", "moz", "webkit", "o"], l = u.length; --l > -1 && !C;) C = o[u[l] + "RequestAnimationFrame"], R = o[u[l] + "CancelAnimationFrame"] || o[u[l] + "CancelRequestAnimationFrame"];
                    w("Ticker", function(e, t) {
                        var n, i, r, o, a, s = this,
                            u = L(),
                            l = t !== !1 && C,
                            c = 500,
                            f = 33,
                            p = "tick",
                            v = function(e) {
                                var t, l, h = L() - O;
                                h > c && (u += h - f), O += h, s.time = (O - u) / 1e3, t = s.time - a, (!n || t > 0 || e === !0) && (s.frame++, a += t + (t >= o ? .004 : o - t), l = !0), e !== !0 && (r = i(v)), l && s.dispatchEvent(p)
                            };
                        A.call(s), s.time = s.frame = 0, s.tick = function() {
                            v(!0)
                        }, s.lagSmoothing = function(e, t) {
                            c = e || 1 / m, f = Math.min(t, c, 0)
                        }, s.sleep = function() {
                            null != r && (l && R ? R(r) : clearTimeout(r), i = g, r = null, s === h && (d = !1))
                        }, s.wake = function() {
                            null !== r ? s.sleep() : s.frame > 10 && (O = L() - c + 5), i = 0 === n ? g : l && C ? C : function(e) {
                                return setTimeout(e, 0 | 1e3 * (a - s.time) + 1)
                            }, s === h && (d = !0), v(2)
                        }, s.fps = function(e) {
                            return arguments.length ? (n = e, o = 1 / (n || 60), a = this.time + o, void s.wake()) : n
                        }, s.useRAF = function(e) {
                            return arguments.length ? (s.sleep(), l = e, void s.fps(n)) : l
                        }, s.fps(e), setTimeout(function() {
                            l && 5 > s.frame && s.useRAF(!1)
                        }, 1500)
                    }), c = p.Ticker.prototype = new p.events.EventDispatcher, c.constructor = p.Ticker;
                    var k = w("core.Animation", function(e, t) {
                        if (this.vars = t = t || {}, this._duration = this._totalDuration = e || 0, this._delay = Number(t.delay) || 0, this._timeScale = 1, this._active = t.immediateRender === !0, this.data = t.data, this._reversed = t.reversed === !0, J) {
                            d || h.wake();
                            var n = this.vars.useFrames ? Q : J;
                            n.add(this, n._time), this.vars.paused && this.paused(!0)
                        }
                    });
                    h = k.ticker = new p.Ticker, c = k.prototype, c._dirty = c._gc = c._initted = c._paused = !1, c._totalTime = c._time = 0, c._rawPrevTime = -1, c._next = c._last = c._onUpdate = c._timeline = c.timeline = null, c._paused = !1;
                    var D = function() {
                        d && L() - O > 2e3 && h.wake(), setTimeout(D, 2e3)
                    };
                    D(), c.play = function(e, t) {
                        return null != e && this.seek(e, t), this.reversed(!1).paused(!1)
                    }, c.pause = function(e, t) {
                        return null != e && this.seek(e, t), this.paused(!0)
                    }, c.resume = function(e, t) {
                        return null != e && this.seek(e, t), this.paused(!1)
                    }, c.seek = function(e, t) {
                        return this.totalTime(Number(e), t !== !1)
                    }, c.restart = function(e, t) {
                        return this.reversed(!1).paused(!1).totalTime(e ? -this._delay : 0, t !== !1, !0);
                    }, c.reverse = function(e, t) {
                        return null != e && this.seek(e || this.totalDuration(), t), this.reversed(!0).paused(!1)
                    }, c.render = function() {}, c.invalidate = function() {
                        return this._time = this._totalTime = 0, this._initted = this._gc = !1, this._rawPrevTime = -1, (this._gc || !this.timeline) && this._enabled(!0), this
                    }, c.isActive = function() {
                        var e, t = this._timeline,
                            n = this._startTime;
                        return !t || !this._gc && !this._paused && t.isActive() && (e = t.rawTime()) >= n && n + this.totalDuration() / this._timeScale > e
                    }, c._enabled = function(e, t) {
                        return d || h.wake(), this._gc = !e, this._active = this.isActive(), t !== !0 && (e && !this.timeline ? this._timeline.add(this, this._startTime - this._delay) : !e && this.timeline && this._timeline._remove(this, !0)), !1
                    }, c._kill = function() {
                        return this._enabled(!1, !1)
                    }, c.kill = function(e, t) {
                        return this._kill(e, t), this
                    }, c._uncache = function(e) {
                        for (var t = e ? this : this.timeline; t;) t._dirty = !0, t = t.timeline;
                        return this
                    }, c._swapSelfInParams = function(e) {
                        for (var t = e.length, n = e.concat(); --t > -1;) "{self}" === e[t] && (n[t] = this);
                        return n
                    }, c._callback = function(e) {
                        var t = this.vars;
                        t[e].apply(t[e + "Scope"] || t.callbackScope || this, t[e + "Params"] || E)
                    }, c.eventCallback = function(e, t, n, i) {
                        if ("on" === (e || "").substr(0, 2)) {
                            var r = this.vars;
                            if (1 === arguments.length) return r[e];
                            null == t ? delete r[e] : (r[e] = t, r[e + "Params"] = y(n) && -1 !== n.join("").indexOf("{self}") ? this._swapSelfInParams(n) : n, r[e + "Scope"] = i), "onUpdate" === e && (this._onUpdate = t)
                        }
                        return this
                    }, c.delay = function(e) {
                        return arguments.length ? (this._timeline.smoothChildTiming && this.startTime(this._startTime + e - this._delay), this._delay = e, this) : this._delay
                    }, c.duration = function(e) {
                        return arguments.length ? (this._duration = this._totalDuration = e, this._uncache(!0), this._timeline.smoothChildTiming && this._time > 0 && this._time < this._duration && 0 !== e && this.totalTime(this._totalTime * (e / this._duration), !0), this) : (this._dirty = !1, this._duration)
                    }, c.totalDuration = function(e) {
                        return this._dirty = !1, arguments.length ? this.duration(e) : this._totalDuration
                    }, c.time = function(e, t) {
                        return arguments.length ? (this._dirty && this.totalDuration(), this.totalTime(e > this._duration ? this._duration : e, t)) : this._time
                    }, c.totalTime = function(e, t, n) {
                        if (d || h.wake(), !arguments.length) return this._totalTime;
                        if (this._timeline) {
                            if (0 > e && !n && (e += this.totalDuration()), this._timeline.smoothChildTiming) {
                                this._dirty && this.totalDuration();
                                var i = this._totalDuration,
                                    r = this._timeline;
                                if (e > i && !n && (e = i), this._startTime = (this._paused ? this._pauseTime : r._time) - (this._reversed ? i - e : e) / this._timeScale, r._dirty || this._uncache(!1), r._timeline)
                                    for (; r._timeline;) r._timeline._time !== (r._startTime + r._totalTime) / r._timeScale && r.totalTime(r._totalTime, !0), r = r._timeline
                            }
                            this._gc && this._enabled(!0, !1), (this._totalTime !== e || 0 === this._duration) && (N.length && ee(), this.render(e, t, !1), N.length && ee())
                        }
                        return this
                    }, c.progress = c.totalProgress = function(e, t) {
                        var n = this.duration();
                        return arguments.length ? this.totalTime(n * e, t) : n ? this._time / n : this.ratio
                    }, c.startTime = function(e) {
                        return arguments.length ? (e !== this._startTime && (this._startTime = e, this.timeline && this.timeline._sortChildren && this.timeline.add(this, e - this._delay)), this) : this._startTime
                    }, c.endTime = function(e) {
                        return this._startTime + (0 != e ? this.totalDuration() : this.duration()) / this._timeScale
                    }, c.timeScale = function(e) {
                        if (!arguments.length) return this._timeScale;
                        if (e = e || m, this._timeline && this._timeline.smoothChildTiming) {
                            var t = this._pauseTime,
                                n = t || 0 === t ? t : this._timeline.totalTime();
                            this._startTime = n - (n - this._startTime) * this._timeScale / e
                        }
                        return this._timeScale = e, this._uncache(!1)
                    }, c.reversed = function(e) {
                        return arguments.length ? (e != this._reversed && (this._reversed = e, this.totalTime(this._timeline && !this._timeline.smoothChildTiming ? this.totalDuration() - this._totalTime : this._totalTime, !0)), this) : this._reversed
                    }, c.paused = function(e) {
                        if (!arguments.length) return this._paused;
                        var t, n, i = this._timeline;
                        return e != this._paused && i && (d || e || h.wake(), t = i.rawTime(), n = t - this._pauseTime, !e && i.smoothChildTiming && (this._startTime += n, this._uncache(!1)), this._pauseTime = e ? t : null, this._paused = e, this._active = this.isActive(), !e && 0 !== n && this._initted && this.duration() && (t = i.smoothChildTiming ? this._totalTime : (t - this._startTime) / this._timeScale, this.render(t, t === this._totalTime, !0))), this._gc && !e && this._enabled(!0, !1), this
                    };
                    var F = w("core.SimpleTimeline", function(e) {
                        k.call(this, 0, e), this.autoRemoveChildren = this.smoothChildTiming = !0
                    });
                    c = F.prototype = new k, c.constructor = F, c.kill()._gc = !1, c._first = c._last = c._recent = null, c._sortChildren = !1, c.add = c.insert = function(e, t) {
                        var n, i;
                        if (e._startTime = Number(t || 0) + e._delay, e._paused && this !== e._timeline && (e._pauseTime = e._startTime + (this.rawTime() - e._startTime) / e._timeScale), e.timeline && e.timeline._remove(e, !0), e.timeline = e._timeline = this, e._gc && e._enabled(!0, !0), n = this._last, this._sortChildren)
                            for (i = e._startTime; n && n._startTime > i;) n = n._prev;
                        return n ? (e._next = n._next, n._next = e) : (e._next = this._first, this._first = e), e._next ? e._next._prev = e : this._last = e, e._prev = n, this._recent = e, this._timeline && this._uncache(!0), this
                    }, c._remove = function(e, t) {
                        return e.timeline === this && (t || e._enabled(!1, !0), e._prev ? e._prev._next = e._next : this._first === e && (this._first = e._next), e._next ? e._next._prev = e._prev : this._last === e && (this._last = e._prev), e._next = e._prev = e.timeline = null, e === this._recent && (this._recent = this._last), this._timeline && this._uncache(!0)), this
                    }, c.render = function(e, t, n) {
                        var i, r = this._first;
                        for (this._totalTime = this._time = this._rawPrevTime = e; r;) i = r._next, (r._active || e >= r._startTime && !r._paused) && (r._reversed ? r.render((r._dirty ? r.totalDuration() : r._totalDuration) - (e - r._startTime) * r._timeScale, t, n) : r.render((e - r._startTime) * r._timeScale, t, n)), r = i
                    }, c.rawTime = function() {
                        return d || h.wake(), this._totalTime
                    };
                    var B = w("TweenLite", function(e, t, n) {
                            if (k.call(this, t, n), this.render = B.prototype.render, null == e) throw "Cannot tween a null target.";
                            this.target = e = "string" != typeof e ? e : B.selector(e) || e;
                            var i, r, a, s = e.jquery || e.length && e !== o && e[0] && (e[0] === o || e[0].nodeType && e[0].style && !e.nodeType),
                                u = this.vars.overwrite;
                            if (this._overwrite = u = null == u ? Z[B.defaultOverwrite] : "number" == typeof u ? u >> 0 : Z[u], (s || e instanceof Array || e.push && y(e)) && "number" != typeof e[0])
                                for (this._targets = a = v(e), this._propLookup = [], this._siblings = [], i = 0; a.length > i; i++) r = a[i], r ? "string" != typeof r ? r.length && r !== o && r[0] && (r[0] === o || r[0].nodeType && r[0].style && !r.nodeType) ? (a.splice(i--, 1), this._targets = a = a.concat(v(r))) : (this._siblings[i] = te(r, this, !1), 1 === u && this._siblings[i].length > 1 && ie(r, this, null, 1, this._siblings[i])) : (r = a[i--] = B.selector(r), "string" == typeof r && a.splice(i + 1, 1)) : a.splice(i--, 1);
                            else this._propLookup = {}, this._siblings = te(e, this, !1), 1 === u && this._siblings.length > 1 && ie(e, this, null, 1, this._siblings);
                            (this.vars.immediateRender || 0 === t && 0 === this._delay && this.vars.immediateRender !== !1) && (this._time = -m, this.render(-this._delay))
                        }, !0),
                        I = function(e) {
                            return e && e.length && e !== o && e[0] && (e[0] === o || e[0].nodeType && e[0].style && !e.nodeType)
                        },
                        U = function(e, t) {
                            var n, i = {};
                            for (n in e) K[n] || n in t && "transform" !== n && "x" !== n && "y" !== n && "width" !== n && "height" !== n && "className" !== n && "border" !== n || !(!X[n] || X[n] && X[n]._autoCSS) || (i[n] = e[n], delete e[n]);
                            e.css = i
                        };
                    c = B.prototype = new k, c.constructor = B, c.kill()._gc = !1, c.ratio = 0, c._firstPT = c._targets = c._overwrittenProps = c._startAt = null, c._notifyPluginsOfEnabled = c._lazy = !1, B.version = "1.18.0", B.defaultEase = c._ease = new S(null, null, 1, 1), B.defaultOverwrite = "auto", B.ticker = h, B.autoSleep = 120, B.lagSmoothing = function(e, t) {
                        h.lagSmoothing(e, t)
                    }, B.selector = o.$ || o.jQuery || function(e) {
                        var t = o.$ || o.jQuery;
                        return t ? (B.selector = t, t(e)) : "undefined" == typeof document ? e : document.querySelectorAll ? document.querySelectorAll(e) : document.getElementById("#" === e.charAt(0) ? e.substr(1) : e)
                    };
                    var N = [],
                        z = {},
                        V = /(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,
                        j = function(e) {
                            for (var t, n = this._firstPT, i = 1e-6; n;) t = n.blob ? e ? this.join("") : this.start : n.c * e + n.s, n.r ? t = Math.round(t) : i > t && t > -i && (t = 0), n.f ? n.fp ? n.t[n.p](n.fp, t) : n.t[n.p](t) : n.t[n.p] = t, n = n._next
                        },
                        G = function(e, t, n, i) {
                            var r, o, a, s, u, l, c, h = [e, t],
                                d = 0,
                                f = "",
                                p = 0;
                            for (h.start = e, n && (n(h), e = h[0], t = h[1]), h.length = 0, r = e.match(V) || [], o = t.match(V) || [], i && (i._next = null, i.blob = 1, h._firstPT = i), u = o.length, s = 0; u > s; s++) c = o[s], l = t.substr(d, t.indexOf(c, d) - d), f += l || !s ? l : ",", d += l.length, p ? p = (p + 1) % 5 : "rgba(" === l.substr(-5) && (p = 1), c === r[s] || s >= r.length ? f += c : (f && (h.push(f), f = ""), a = parseFloat(r[s]), h.push(a), h._firstPT = {
                                _next: h._firstPT,
                                t: h,
                                p: h.length - 1,
                                s: a,
                                c: ("=" === c.charAt(1) ? parseInt(c.charAt(0) + "1", 10) * parseFloat(c.substr(2)) : parseFloat(c) - a) || 0,
                                f: 0,
                                r: p && 4 > p
                            }), d += c.length;
                            return f += t.substr(d), f && h.push(f), h.setRatio = j, h
                        },
                        H = function(e, t, n, i, r, o, a, s) {
                            var u, l, c = "get" === n ? e[t] : n,
                                h = typeof e[t],
                                d = "string" == typeof i && "=" === i.charAt(1),
                                f = {
                                    t: e,
                                    p: t,
                                    s: c,
                                    f: "function" === h,
                                    pg: 0,
                                    n: r || t,
                                    r: o,
                                    pr: 0,
                                    c: d ? parseInt(i.charAt(0) + "1", 10) * parseFloat(i.substr(2)) : parseFloat(i) - c || 0
                                };
                            return "number" !== h && ("function" === h && "get" === n && (l = t.indexOf("set") || "function" != typeof e["get" + t.substr(3)] ? t : "get" + t.substr(3), f.s = c = a ? e[l](a) : e[l]()), "string" == typeof c && (a || isNaN(c)) ? (f.fp = a, u = G(c, i, s || B.defaultStringFilter, f), f = {
                                t: u,
                                p: "setRatio",
                                s: 0,
                                c: 1,
                                f: 2,
                                pg: 0,
                                n: r || t,
                                pr: 0
                            }) : d || (f.c = parseFloat(i) - parseFloat(c) || 0)), f.c ? ((f._next = this._firstPT) && (f._next._prev = f), this._firstPT = f, f) : void 0
                        },
                        W = B._internals = {
                            isArray: y,
                            isSelector: I,
                            lazyTweens: N,
                            blobDif: G
                        },
                        X = B._plugins = {},
                        Y = W.tweenLookup = {},
                        q = 0,
                        K = W.reservedProps = {
                            ease: 1,
                            delay: 1,
                            overwrite: 1,
                            onComplete: 1,
                            onCompleteParams: 1,
                            onCompleteScope: 1,
                            useFrames: 1,
                            runBackwards: 1,
                            startAt: 1,
                            onUpdate: 1,
                            onUpdateParams: 1,
                            onUpdateScope: 1,
                            onStart: 1,
                            onStartParams: 1,
                            onStartScope: 1,
                            onReverseComplete: 1,
                            onReverseCompleteParams: 1,
                            onReverseCompleteScope: 1,
                            onRepeat: 1,
                            onRepeatParams: 1,
                            onRepeatScope: 1,
                            easeParams: 1,
                            yoyo: 1,
                            immediateRender: 1,
                            repeat: 1,
                            repeatDelay: 1,
                            data: 1,
                            paused: 1,
                            reversed: 1,
                            autoCSS: 1,
                            lazy: 1,
                            onOverwrite: 1,
                            callbackScope: 1,
                            stringFilter: 1
                        },
                        Z = {
                            none: 0,
                            all: 1,
                            auto: 2,
                            concurrent: 3,
                            allOnStart: 4,
                            preexisting: 5,
                            "true": 1,
                            "false": 0
                        },
                        Q = k._rootFramesTimeline = new F,
                        J = k._rootTimeline = new F,
                        $ = 30,
                        ee = W.lazyRender = function() {
                            var e, t = N.length;
                            for (z = {}; --t > -1;) e = N[t], e && e._lazy !== !1 && (e.render(e._lazy[0], e._lazy[1], !0), e._lazy = !1);
                            N.length = 0
                        };
                    J._startTime = h.time, Q._startTime = h.frame, J._active = Q._active = !0, setTimeout(ee, 1), k._updateRoot = B.render = function() {
                        var e, t, n;
                        if (N.length && ee(), J.render((h.time - J._startTime) * J._timeScale, !1, !1), Q.render((h.frame - Q._startTime) * Q._timeScale, !1, !1), N.length && ee(), h.frame >= $) {
                            $ = h.frame + (parseInt(B.autoSleep, 10) || 120);
                            for (n in Y) {
                                for (t = Y[n].tweens, e = t.length; --e > -1;) t[e]._gc && t.splice(e, 1);
                                0 === t.length && delete Y[n]
                            }
                            if (n = J._first, (!n || n._paused) && B.autoSleep && !Q._first && 1 === h._listeners.tick.length) {
                                for (; n && n._paused;) n = n._next;
                                n || h.sleep()
                            }
                        }
                    }, h.addEventListener("tick", k._updateRoot);
                    var te = function(e, t, n) {
                            var i, r, o = e._gsTweenID;
                            if (Y[o || (e._gsTweenID = o = "t" + q++)] || (Y[o] = {
                                    target: e,
                                    tweens: []
                                }), t && (i = Y[o].tweens, i[r = i.length] = t, n))
                                for (; --r > -1;) i[r] === t && i.splice(r, 1);
                            return Y[o].tweens
                        },
                        ne = function(e, t, n, i) {
                            var r, o, a = e.vars.onOverwrite;
                            return a && (r = a(e, t, n, i)), a = B.onOverwrite, a && (o = a(e, t, n, i)), r !== !1 && o !== !1
                        },
                        ie = function(e, t, n, i, r) {
                            var o, a, s, u;
                            if (1 === i || i >= 4) {
                                for (u = r.length, o = 0; u > o; o++)
                                    if ((s = r[o]) !== t) s._gc || s._kill(null, e, t) && (a = !0);
                                    else if (5 === i) break;
                                return a
                            }
                            var l, c = t._startTime + m,
                                h = [],
                                d = 0,
                                f = 0 === t._duration;
                            for (o = r.length; --o > -1;)(s = r[o]) === t || s._gc || s._paused || (s._timeline !== t._timeline ? (l = l || re(t, 0, f), 0 === re(s, l, f) && (h[d++] = s)) : c >= s._startTime && s._startTime + s.totalDuration() / s._timeScale > c && ((f || !s._initted) && 2e-10 >= c - s._startTime || (h[d++] = s)));
                            for (o = d; --o > -1;)
                                if (s = h[o], 2 === i && s._kill(n, e, t) && (a = !0), 2 !== i || !s._firstPT && s._initted) {
                                    if (2 !== i && !ne(s, t)) continue;
                                    s._enabled(!1, !1) && (a = !0)
                                }
                            return a
                        },
                        re = function(e, t, n) {
                            for (var i = e._timeline, r = i._timeScale, o = e._startTime; i._timeline;) {
                                if (o += i._startTime, r *= i._timeScale, i._paused) return -100;
                                i = i._timeline
                            }
                            return o /= r, o > t ? o - t : n && o === t || !e._initted && 2 * m > o - t ? m : (o += e.totalDuration() / e._timeScale / r) > t + m ? 0 : o - t - m
                        };
                    c._init = function() {
                        var e, t, n, i, r, o = this.vars,
                            a = this._overwrittenProps,
                            s = this._duration,
                            u = !!o.immediateRender,
                            l = o.ease;
                        if (o.startAt) {
                            this._startAt && (this._startAt.render(-1, !0), this._startAt.kill()), r = {};
                            for (i in o.startAt) r[i] = o.startAt[i];
                            if (r.overwrite = !1, r.immediateRender = !0, r.lazy = u && o.lazy !== !1, r.startAt = r.delay = null, this._startAt = B.to(this.target, 0, r), u)
                                if (this._time > 0) this._startAt = null;
                                else if (0 !== s) return
                        } else if (o.runBackwards && 0 !== s)
                            if (this._startAt) this._startAt.render(-1, !0), this._startAt.kill(), this._startAt = null;
                            else {
                                0 !== this._time && (u = !1), n = {};
                                for (i in o) K[i] && "autoCSS" !== i || (n[i] = o[i]);
                                if (n.overwrite = 0, n.data = "isFromStart", n.lazy = u && o.lazy !== !1, n.immediateRender = u, this._startAt = B.to(this.target, 0, n), u) {
                                    if (0 === this._time) return
                                } else this._startAt._init(), this._startAt._enabled(!1), this.vars.immediateRender && (this._startAt = null)
                            }
                        if (this._ease = l = l ? l instanceof S ? l : "function" == typeof l ? new S(l, o.easeParams) : M[l] || B.defaultEase : B.defaultEase, o.easeParams instanceof Array && l.config && (this._ease = l.config.apply(l, o.easeParams)), this._easeType = this._ease._type, this._easePower = this._ease._power, this._firstPT = null, this._targets)
                            for (e = this._targets.length; --e > -1;) this._initProps(this._targets[e], this._propLookup[e] = {}, this._siblings[e], a ? a[e] : null) && (t = !0);
                        else t = this._initProps(this.target, this._propLookup, this._siblings, a);
                        if (t && B._onPluginEvent("_onInitAllProps", this), a && (this._firstPT || "function" != typeof this.target && this._enabled(!1, !1)), o.runBackwards)
                            for (n = this._firstPT; n;) n.s += n.c, n.c = -n.c, n = n._next;
                        this._onUpdate = o.onUpdate, this._initted = !0
                    }, c._initProps = function(e, t, n, i) {
                        var r, a, s, u, l, c;
                        if (null == e) return !1;
                        z[e._gsTweenID] && ee(), this.vars.css || e.style && e !== o && e.nodeType && X.css && this.vars.autoCSS !== !1 && U(this.vars, e);
                        for (r in this.vars)
                            if (c = this.vars[r], K[r]) c && (c instanceof Array || c.push && y(c)) && -1 !== c.join("").indexOf("{self}") && (this.vars[r] = c = this._swapSelfInParams(c, this));
                            else if (X[r] && (u = new X[r])._onInitTween(e, this.vars[r], this)) {
                            for (this._firstPT = l = {
                                    _next: this._firstPT,
                                    t: u,
                                    p: "setRatio",
                                    s: 0,
                                    c: 1,
                                    f: 1,
                                    n: r,
                                    pg: 1,
                                    pr: u._priority
                                }, a = u._overwriteProps.length; --a > -1;) t[u._overwriteProps[a]] = this._firstPT;
                            (u._priority || u._onInitAllProps) && (s = !0), (u._onDisable || u._onEnable) && (this._notifyPluginsOfEnabled = !0), l._next && (l._next._prev = l)
                        } else t[r] = H.call(this, e, r, "get", c, r, 0, null, this.vars.stringFilter);
                        return i && this._kill(i, e) ? this._initProps(e, t, n, i) : this._overwrite > 1 && this._firstPT && n.length > 1 && ie(e, this, t, this._overwrite, n) ? (this._kill(t, e), this._initProps(e, t, n, i)) : (this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration) && (z[e._gsTweenID] = !0), s)
                    }, c.render = function(e, t, n) {
                        var i, r, o, a, s = this._time,
                            u = this._duration,
                            l = this._rawPrevTime;
                        if (e >= u) this._totalTime = this._time = u, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1, this._reversed || (i = !0, r = "onComplete", n = n || this._timeline.autoRemoveChildren), 0 === u && (this._initted || !this.vars.lazy || n) && (this._startTime === this._timeline._duration && (e = 0), (0 === e || 0 > l || l === m && "isPause" !== this.data) && l !== e && (n = !0, l > m && (r = "onReverseComplete")), this._rawPrevTime = a = !t || e || l === e ? e : m);
                        else if (1e-7 > e) this._totalTime = this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== s || 0 === u && l > 0) && (r = "onReverseComplete", i = this._reversed), 0 > e && (this._active = !1, 0 === u && (this._initted || !this.vars.lazy || n) && (l >= 0 && (l !== m || "isPause" !== this.data) && (n = !0), this._rawPrevTime = a = !t || e || l === e ? e : m)), this._initted || (n = !0);
                        else if (this._totalTime = this._time = e, this._easeType) {
                            var c = e / u,
                                h = this._easeType,
                                d = this._easePower;
                            (1 === h || 3 === h && c >= .5) && (c = 1 - c), 3 === h && (c *= 2), 1 === d ? c *= c : 2 === d ? c *= c * c : 3 === d ? c *= c * c * c : 4 === d && (c *= c * c * c * c), this.ratio = 1 === h ? 1 - c : 2 === h ? c : .5 > e / u ? c / 2 : 1 - c / 2
                        } else this.ratio = this._ease.getRatio(e / u);
                        if (this._time !== s || n) {
                            if (!this._initted) {
                                if (this._init(), !this._initted || this._gc) return;
                                if (!n && this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration)) return this._time = this._totalTime = s, this._rawPrevTime = l, N.push(this), void(this._lazy = [e, t]);
                                this._time && !i ? this.ratio = this._ease.getRatio(this._time / u) : i && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
                            }
                            for (this._lazy !== !1 && (this._lazy = !1), this._active || !this._paused && this._time !== s && e >= 0 && (this._active = !0), 0 === s && (this._startAt && (e >= 0 ? this._startAt.render(e, t, n) : r || (r = "_dummyGS")), this.vars.onStart && (0 !== this._time || 0 === u) && (t || this._callback("onStart"))), o = this._firstPT; o;) o.f ? o.t[o.p](o.c * this.ratio + o.s) : o.t[o.p] = o.c * this.ratio + o.s, o = o._next;
                            this._onUpdate && (0 > e && this._startAt && e !== -1e-4 && this._startAt.render(e, t, n), t || (this._time !== s || i) && this._callback("onUpdate")), r && (!this._gc || n) && (0 > e && this._startAt && !this._onUpdate && e !== -1e-4 && this._startAt.render(e, t, n), i && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !t && this.vars[r] && this._callback(r), 0 === u && this._rawPrevTime === m && a !== m && (this._rawPrevTime = 0))
                        }
                    }, c._kill = function(e, t, n) {
                        if ("all" === e && (e = null), null == e && (null == t || t === this.target)) return this._lazy = !1, this._enabled(!1, !1);
                        t = "string" != typeof t ? t || this._targets || this.target : B.selector(t) || t;
                        var i, r, o, a, s, u, l, c, h, d = n && this._time && n._startTime === this._startTime && this._timeline === n._timeline;
                        if ((y(t) || I(t)) && "number" != typeof t[0])
                            for (i = t.length; --i > -1;) this._kill(e, t[i], n) && (u = !0);
                        else {
                            if (this._targets) {
                                for (i = this._targets.length; --i > -1;)
                                    if (t === this._targets[i]) {
                                        s = this._propLookup[i] || {}, this._overwrittenProps = this._overwrittenProps || [], r = this._overwrittenProps[i] = e ? this._overwrittenProps[i] || {} : "all";
                                        break
                                    }
                            } else {
                                if (t !== this.target) return !1;
                                s = this._propLookup, r = this._overwrittenProps = e ? this._overwrittenProps || {} : "all"
                            }
                            if (s) {
                                if (l = e || s, c = e !== r && "all" !== r && e !== s && ("object" != typeof e || !e._tempKill), n && (B.onOverwrite || this.vars.onOverwrite)) {
                                    for (o in l) s[o] && (h || (h = []), h.push(o));
                                    if ((h || !e) && !ne(this, n, t, h)) return !1
                                }
                                for (o in l)(a = s[o]) && (d && (a.f ? a.t[a.p](a.s) : a.t[a.p] = a.s, u = !0), a.pg && a.t._kill(l) && (u = !0), a.pg && 0 !== a.t._overwriteProps.length || (a._prev ? a._prev._next = a._next : a === this._firstPT && (this._firstPT = a._next), a._next && (a._next._prev = a._prev), a._next = a._prev = null), delete s[o]), c && (r[o] = 1);
                                !this._firstPT && this._initted && this._enabled(!1, !1)
                            }
                        }
                        return u
                    }, c.invalidate = function() {
                        return this._notifyPluginsOfEnabled && B._onPluginEvent("_onDisable", this), this._firstPT = this._overwrittenProps = this._startAt = this._onUpdate = null, this._notifyPluginsOfEnabled = this._active = this._lazy = !1, this._propLookup = this._targets ? {} : [], k.prototype.invalidate.call(this), this.vars.immediateRender && (this._time = -m, this.render(-this._delay)), this
                    }, c._enabled = function(e, t) {
                        if (d || h.wake(), e && this._gc) {
                            var n, i = this._targets;
                            if (i)
                                for (n = i.length; --n > -1;) this._siblings[n] = te(i[n], this, !0);
                            else this._siblings = te(this.target, this, !0)
                        }
                        return k.prototype._enabled.call(this, e, t), this._notifyPluginsOfEnabled && this._firstPT ? B._onPluginEvent(e ? "_onEnable" : "_onDisable", this) : !1
                    }, B.to = function(e, t, n) {
                        return new B(e, t, n)
                    }, B.from = function(e, t, n) {
                        return n.runBackwards = !0, n.immediateRender = 0 != n.immediateRender, new B(e, t, n)
                    }, B.fromTo = function(e, t, n, i) {
                        return i.startAt = n, i.immediateRender = 0 != i.immediateRender && 0 != n.immediateRender, new B(e, t, i)
                    }, B.delayedCall = function(e, t, n, i, r) {
                        return new B(t, 0, {
                            delay: e,
                            onComplete: t,
                            onCompleteParams: n,
                            callbackScope: i,
                            onReverseComplete: t,
                            onReverseCompleteParams: n,
                            immediateRender: !1,
                            lazy: !1,
                            useFrames: r,
                            overwrite: 0
                        })
                    }, B.set = function(e, t) {
                        return new B(e, 0, t)
                    }, B.getTweensOf = function(e, t) {
                        if (null == e) return [];
                        e = "string" != typeof e ? e : B.selector(e) || e;
                        var n, i, r, o;
                        if ((y(e) || I(e)) && "number" != typeof e[0]) {
                            for (n = e.length, i = []; --n > -1;) i = i.concat(B.getTweensOf(e[n], t));
                            for (n = i.length; --n > -1;)
                                for (o = i[n], r = n; --r > -1;) o === i[r] && i.splice(n, 1)
                        } else
                            for (i = te(e).concat(), n = i.length; --n > -1;)(i[n]._gc || t && !i[n].isActive()) && i.splice(n, 1);
                        return i
                    }, B.killTweensOf = B.killDelayedCallsTo = function(e, t, n) {
                        "object" == typeof t && (n = t, t = !1);
                        for (var i = B.getTweensOf(e, t), r = i.length; --r > -1;) i[r]._kill(n, e)
                    };
                    var oe = w("plugins.TweenPlugin", function(e, t) {
                        this._overwriteProps = (e || "").split(","), this._propName = this._overwriteProps[0], this._priority = t || 0, this._super = oe.prototype
                    }, !0);
                    if (c = oe.prototype, oe.version = "1.18.0", oe.API = 2, c._firstPT = null, c._addTween = H, c.setRatio = j, c._kill = function(e) {
                            var t, n = this._overwriteProps,
                                i = this._firstPT;
                            if (null != e[this._propName]) this._overwriteProps = [];
                            else
                                for (t = n.length; --t > -1;) null != e[n[t]] && n.splice(t, 1);
                            for (; i;) null != e[i.n] && (i._next && (i._next._prev = i._prev), i._prev ? (i._prev._next = i._next, i._prev = null) : this._firstPT === i && (this._firstPT = i._next)), i = i._next;
                            return !1
                        }, c._roundProps = function(e, t) {
                            for (var n = this._firstPT; n;)(e[this._propName] || null != n.n && e[n.n.split(this._propName + "_").join("")]) && (n.r = t), n = n._next
                        }, B._onPluginEvent = function(e, t) {
                            var n, i, r, o, a, s = t._firstPT;
                            if ("_onInitAllProps" === e) {
                                for (; s;) {
                                    for (a = s._next, i = r; i && i.pr > s.pr;) i = i._next;
                                    (s._prev = i ? i._prev : o) ? s._prev._next = s: r = s, (s._next = i) ? i._prev = s : o = s, s = a
                                }
                                s = t._firstPT = r
                            }
                            for (; s;) s.pg && "function" == typeof s.t[e] && s.t[e]() && (n = !0), s = s._next;
                            return n
                        }, oe.activate = function(e) {
                            for (var t = e.length; --t > -1;) e[t].API === oe.API && (X[(new e[t])._propName] = e[t]);
                            return !0
                        }, b.plugin = function(e) {
                            if (!(e && e.propName && e.init && e.API)) throw "illegal plugin definition.";
                            var t, n = e.propName,
                                i = e.priority || 0,
                                r = e.overwriteProps,
                                o = {
                                    init: "_onInitTween",
                                    set: "setRatio",
                                    kill: "_kill",
                                    round: "_roundProps",
                                    initAll: "_onInitAllProps"
                                },
                                a = w("plugins." + n.charAt(0).toUpperCase() + n.substr(1) + "Plugin", function() {
                                    oe.call(this, n, i), this._overwriteProps = r || []
                                }, e.global === !0),
                                s = a.prototype = new oe(n);
                            s.constructor = a, a.API = e.API;
                            for (t in o) "function" == typeof e[t] && (s[o[t]] = e[t]);
                            return a.version = e.version, oe.activate([a]), a
                        }, u = o._gsQueue) {
                        for (l = 0; u.length > l; l++) u[l]();
                        for (c in _) _[c].func || o.console.log("GSAP encountered missing dependency: com.greensock." + c)
                    }
                    d = !1
                }
            }("undefined" != typeof e && e.exports && "undefined" != typeof o ? o : this || window, "TweenMax")
    }).call(t, function() {
        return this
    }())
}, function(e, t) {
    (function(t) {
        e.exports = t
    }).call(t, {})
}, function(e, t, n) {
    var i, r, o = {
        REVISION: "73"
    };
    i = o, r = "function" == typeof i ? i.call(t, n, t, e) : i, !(void 0 !== r && (e.exports = r)), void 0 !== self.requestAnimationFrame && void 0 !== self.cancelAnimationFrame || function() {
            for (var e = 0, t = ["ms", "moz", "webkit", "o"], n = 0; n < t.length && !self.requestAnimationFrame; ++n) self.requestAnimationFrame = self[t[n] + "RequestAnimationFrame"], self.cancelAnimationFrame = self[t[n] + "CancelAnimationFrame"] || self[t[n] + "CancelRequestAnimationFrame"];
            void 0 === self.requestAnimationFrame && void 0 !== self.setTimeout && (self.requestAnimationFrame = function(t) {
                var n = Date.now(),
                    i = Math.max(0, 16 - (n - e)),
                    r = self.setTimeout(function() {
                        t(n + i)
                    }, i);
                return e = n + i, r
            }), void 0 === self.cancelAnimationFrame && void 0 !== self.clearTimeout && (self.cancelAnimationFrame = function(e) {
                self.clearTimeout(e)
            })
        }(), void 0 === self.performance && (self.performance = {}), void 0 === self.performance.now && function() {
            var e = Date.now();
            self.performance.now = function() {
                return Date.now() - e
            }
        }(), void 0 === Number.EPSILON && (Number.EPSILON = Math.pow(2, -52)), void 0 === Math.sign && (Math.sign = function(e) {
            return 0 > e ? -1 : e > 0 ? 1 : +e
        }), void 0 === Function.prototype.name && void 0 !== Object.defineProperty && Object.defineProperty(Function.prototype, "name", {
            get: function() {
                return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]
            }
        }), o.MOUSE = {
            LEFT: 0,
            MIDDLE: 1,
            RIGHT: 2
        }, o.CullFaceNone = 0, o.CullFaceBack = 1, o.CullFaceFront = 2, o.CullFaceFrontBack = 3, o.FrontFaceDirectionCW = 0, o.FrontFaceDirectionCCW = 1, o.BasicShadowMap = 0, o.PCFShadowMap = 1, o.PCFSoftShadowMap = 2, o.FrontSide = 0, o.BackSide = 1, o.DoubleSide = 2, o.FlatShading = 1, o.SmoothShading = 2, o.NoColors = 0, o.FaceColors = 1, o.VertexColors = 2, o.NoBlending = 0, o.NormalBlending = 1, o.AdditiveBlending = 2, o.SubtractiveBlending = 3, o.MultiplyBlending = 4, o.CustomBlending = 5, o.AddEquation = 100, o.SubtractEquation = 101, o.ReverseSubtractEquation = 102, o.MinEquation = 103, o.MaxEquation = 104, o.ZeroFactor = 200, o.OneFactor = 201, o.SrcColorFactor = 202, o.OneMinusSrcColorFactor = 203, o.SrcAlphaFactor = 204, o.OneMinusSrcAlphaFactor = 205, o.DstAlphaFactor = 206, o.OneMinusDstAlphaFactor = 207, o.DstColorFactor = 208, o.OneMinusDstColorFactor = 209, o.SrcAlphaSaturateFactor = 210, o.NeverDepth = 0, o.AlwaysDepth = 1, o.LessDepth = 2, o.LessEqualDepth = 3, o.EqualDepth = 4, o.GreaterEqualDepth = 5, o.GreaterDepth = 6, o.NotEqualDepth = 7, o.MultiplyOperation = 0, o.MixOperation = 1, o.AddOperation = 2, o.UVMapping = 300, o.CubeReflectionMapping = 301, o.CubeRefractionMapping = 302, o.EquirectangularReflectionMapping = 303, o.EquirectangularRefractionMapping = 304, o.SphericalReflectionMapping = 305, o.RepeatWrapping = 1e3, o.ClampToEdgeWrapping = 1001, o.MirroredRepeatWrapping = 1002, o.NearestFilter = 1003, o.NearestMipMapNearestFilter = 1004, o.NearestMipMapLinearFilter = 1005, o.LinearFilter = 1006, o.LinearMipMapNearestFilter = 1007, o.LinearMipMapLinearFilter = 1008, o.UnsignedByteType = 1009, o.ByteType = 1010, o.ShortType = 1011, o.UnsignedShortType = 1012, o.IntType = 1013, o.UnsignedIntType = 1014, o.FloatType = 1015, o.HalfFloatType = 1025, o.UnsignedShort4444Type = 1016, o.UnsignedShort5551Type = 1017, o.UnsignedShort565Type = 1018, o.AlphaFormat = 1019, o.RGBFormat = 1020, o.RGBAFormat = 1021, o.LuminanceFormat = 1022, o.LuminanceAlphaFormat = 1023, o.RGBEFormat = o.RGBAFormat, o.RGB_S3TC_DXT1_Format = 2001, o.RGBA_S3TC_DXT1_Format = 2002, o.RGBA_S3TC_DXT3_Format = 2003, o.RGBA_S3TC_DXT5_Format = 2004, o.RGB_PVRTC_4BPPV1_Format = 2100, o.RGB_PVRTC_2BPPV1_Format = 2101, o.RGBA_PVRTC_4BPPV1_Format = 2102, o.RGBA_PVRTC_2BPPV1_Format = 2103, o.LoopOnce = 2200, o.LoopRepeat = 2201, o.LoopPingPong = 2202, o.Projector = function() {
            console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."), this.projectVector = function(e, t) {
                console.warn("THREE.Projector: .projectVector() is now vector.project()."), e.project(t)
            }, this.unprojectVector = function(e, t) {
                console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."), e.unproject(t)
            }, this.pickingRay = function(e, t) {
                console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")
            }
        }, o.CanvasRenderer = function() {
            console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"), this.domElement = document.createElement("canvas"), this.clear = function() {}, this.render = function() {}, this.setClearColor = function() {}, this.setSize = function() {}
        }, o.Color = function(e) {
            return 3 === arguments.length ? this.fromArray(arguments) : this.set(e)
        }, o.Color.prototype = {
            constructor: o.Color,
            r: 1,
            g: 1,
            b: 1,
            set: function(e) {
                return e instanceof o.Color ? this.copy(e) : "number" == typeof e ? this.setHex(e) : "string" == typeof e && this.setStyle(e), this
            },
            setHex: function(e) {
                return e = Math.floor(e), this.r = (e >> 16 & 255) / 255, this.g = (e >> 8 & 255) / 255, this.b = (255 & e) / 255, this
            },
            setRGB: function(e, t, n) {
                return this.r = e, this.g = t, this.b = n, this
            },
            setHSL: function() {
                function e(e, t, n) {
                    return 0 > n && (n += 1), n > 1 && (n -= 1), 1 / 6 > n ? e + 6 * (t - e) * n : .5 > n ? t : 2 / 3 > n ? e + 6 * (t - e) * (2 / 3 - n) : e
                }
                return function(t, n, i) {
                    return t = o.Math.euclideanModulo(t, 1), n = o.Math.clamp(n, 0, 1), i = o.Math.clamp(i, 0, 1), 0 === n ? this.r = this.g = this.b = i : (n = .5 >= i ? i * (1 + n) : i + n - i * n, i = 2 * i - n, this.r = e(i, n, t + 1 / 3), this.g = e(i, n, t), this.b = e(i, n, t - 1 / 3)), this
                }
            }(),
            setStyle: function(e) {
                function t(t) {
                    void 0 !== t && 1 > parseFloat(t) && console.warn("THREE.Color: Alpha component of " + e + " will be ignored.")
                }
                var n;
                if (n = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)) {
                    var i = n[2];
                    switch (n[1]) {
                        case "rgb":
                        case "rgba":
                            if (n = /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)) return this.r = Math.min(255, parseInt(n[1], 10)) / 255, this.g = Math.min(255, parseInt(n[2], 10)) / 255, this.b = Math.min(255, parseInt(n[3], 10)) / 255, t(n[5]), this;
                            if (n = /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)) return this.r = Math.min(100, parseInt(n[1], 10)) / 100, this.g = Math.min(100, parseInt(n[2], 10)) / 100, this.b = Math.min(100, parseInt(n[3], 10)) / 100, t(n[5]), this;
                            break;
                        case "hsl":
                        case "hsla":
                            if (n = /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)) {
                                var i = parseFloat(n[1]) / 360,
                                    r = parseInt(n[2], 10) / 100,
                                    a = parseInt(n[3], 10) / 100;
                                return t(n[5]), this.setHSL(i, r, a)
                            }
                    }
                } else if (n = /^\#([A-Fa-f0-9]+)$/.exec(e)) {
                    if (n = n[1], i = n.length, 3 === i) return this.r = parseInt(n.charAt(0) + n.charAt(0), 16) / 255, this.g = parseInt(n.charAt(1) + n.charAt(1), 16) / 255, this.b = parseInt(n.charAt(2) + n.charAt(2), 16) / 255, this;
                    if (6 === i) return this.r = parseInt(n.charAt(0) + n.charAt(1), 16) / 255, this.g = parseInt(n.charAt(2) + n.charAt(3), 16) / 255, this.b = parseInt(n.charAt(4) + n.charAt(5), 16) / 255, this
                }
                return e && 0 < e.length && (n = o.ColorKeywords[e], void 0 !== n ? this.setHex(n) : console.warn("THREE.Color: Unknown color " + e)), this
            },
            clone: function() {
                return new this.constructor(this.r, this.g, this.b)
            },
            copy: function(e) {
                return this.r = e.r, this.g = e.g, this.b = e.b, this
            },
            copyGammaToLinear: function(e, t) {
                return void 0 === t && (t = 2), this.r = Math.pow(e.r, t), this.g = Math.pow(e.g, t), this.b = Math.pow(e.b, t), this
            },
            copyLinearToGamma: function(e, t) {
                void 0 === t && (t = 2);
                var n = t > 0 ? 1 / t : 1;
                return this.r = Math.pow(e.r, n), this.g = Math.pow(e.g, n), this.b = Math.pow(e.b, n), this
            },
            convertGammaToLinear: function() {
                var e = this.r,
                    t = this.g,
                    n = this.b;
                return this.r = e * e, this.g = t * t, this.b = n * n, this
            },
            convertLinearToGamma: function() {
                return this.r = Math.sqrt(this.r), this.g = Math.sqrt(this.g), this.b = Math.sqrt(this.b), this
            },
            getHex: function() {
                return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
            },
            getHexString: function() {
                return ("000000" + this.getHex().toString(16)).slice(-6)
            },
            getHSL: function(e) {
                e = e || {
                    h: 0,
                    s: 0,
                    l: 0
                };
                var t, n = this.r,
                    i = this.g,
                    r = this.b,
                    o = Math.max(n, i, r),
                    a = Math.min(n, i, r),
                    s = (a + o) / 2;
                if (a === o) a = t = 0;
                else {
                    var u = o - a,
                        a = .5 >= s ? u / (o + a) : u / (2 - o - a);
                    switch (o) {
                        case n:
                            t = (i - r) / u + (r > i ? 6 : 0);
                            break;
                        case i:
                            t = (r - n) / u + 2;
                            break;
                        case r:
                            t = (n - i) / u + 4
                    }
                    t /= 6
                }
                return e.h = t, e.s = a, e.l = s, e
            },
            getStyle: function() {
                return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
            },
            offsetHSL: function(e, t, n) {
                var i = this.getHSL();
                return i.h += e, i.s += t, i.l += n, this.setHSL(i.h, i.s, i.l), this
            },
            add: function(e) {
                return this.r += e.r, this.g += e.g, this.b += e.b, this
            },
            addColors: function(e, t) {
                return this.r = e.r + t.r, this.g = e.g + t.g, this.b = e.b + t.b, this
            },
            addScalar: function(e) {
                return this.r += e, this.g += e, this.b += e, this
            },
            multiply: function(e) {
                return this.r *= e.r, this.g *= e.g, this.b *= e.b, this
            },
            multiplyScalar: function(e) {
                return this.r *= e, this.g *= e, this.b *= e, this
            },
            lerp: function(e, t) {
                return this.r += (e.r - this.r) * t, this.g += (e.g - this.g) * t, this.b += (e.b - this.b) * t, this
            },
            equals: function(e) {
                return e.r === this.r && e.g === this.g && e.b === this.b
            },
            fromArray: function(e, t) {
                return void 0 === t && (t = 0), this.r = e[t], this.g = e[t + 1], this.b = e[t + 2], this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.r, e[t + 1] = this.g, e[t + 2] = this.b, e
            }
        }, o.ColorKeywords = {
            aliceblue: 15792383,
            antiquewhite: 16444375,
            aqua: 65535,
            aquamarine: 8388564,
            azure: 15794175,
            beige: 16119260,
            bisque: 16770244,
            black: 0,
            blanchedalmond: 16772045,
            blue: 255,
            blueviolet: 9055202,
            brown: 10824234,
            burlywood: 14596231,
            cadetblue: 6266528,
            chartreuse: 8388352,
            chocolate: 13789470,
            coral: 16744272,
            cornflowerblue: 6591981,
            cornsilk: 16775388,
            crimson: 14423100,
            cyan: 65535,
            darkblue: 139,
            darkcyan: 35723,
            darkgoldenrod: 12092939,
            darkgray: 11119017,
            darkgreen: 25600,
            darkgrey: 11119017,
            darkkhaki: 12433259,
            darkmagenta: 9109643,
            darkolivegreen: 5597999,
            darkorange: 16747520,
            darkorchid: 10040012,
            darkred: 9109504,
            darksalmon: 15308410,
            darkseagreen: 9419919,
            darkslateblue: 4734347,
            darkslategray: 3100495,
            darkslategrey: 3100495,
            darkturquoise: 52945,
            darkviolet: 9699539,
            deeppink: 16716947,
            deepskyblue: 49151,
            dimgray: 6908265,
            dimgrey: 6908265,
            dodgerblue: 2003199,
            firebrick: 11674146,
            floralwhite: 16775920,
            forestgreen: 2263842,
            fuchsia: 16711935,
            gainsboro: 14474460,
            ghostwhite: 16316671,
            gold: 16766720,
            goldenrod: 14329120,
            gray: 8421504,
            green: 32768,
            greenyellow: 11403055,
            grey: 8421504,
            honeydew: 15794160,
            hotpink: 16738740,
            indianred: 13458524,
            indigo: 4915330,
            ivory: 16777200,
            khaki: 15787660,
            lavender: 15132410,
            lavenderblush: 16773365,
            lawngreen: 8190976,
            lemonchiffon: 16775885,
            lightblue: 11393254,
            lightcoral: 15761536,
            lightcyan: 14745599,
            lightgoldenrodyellow: 16448210,
            lightgray: 13882323,
            lightgreen: 9498256,
            lightgrey: 13882323,
            lightpink: 16758465,
            lightsalmon: 16752762,
            lightseagreen: 2142890,
            lightskyblue: 8900346,
            lightslategray: 7833753,
            lightslategrey: 7833753,
            lightsteelblue: 11584734,
            lightyellow: 16777184,
            lime: 65280,
            limegreen: 3329330,
            linen: 16445670,
            magenta: 16711935,
            maroon: 8388608,
            mediumaquamarine: 6737322,
            mediumblue: 205,
            mediumorchid: 12211667,
            mediumpurple: 9662683,
            mediumseagreen: 3978097,
            mediumslateblue: 8087790,
            mediumspringgreen: 64154,
            mediumturquoise: 4772300,
            mediumvioletred: 13047173,
            midnightblue: 1644912,
            mintcream: 16121850,
            mistyrose: 16770273,
            moccasin: 16770229,
            navajowhite: 16768685,
            navy: 128,
            oldlace: 16643558,
            olive: 8421376,
            olivedrab: 7048739,
            orange: 16753920,
            orangered: 16729344,
            orchid: 14315734,
            palegoldenrod: 15657130,
            palegreen: 10025880,
            paleturquoise: 11529966,
            palevioletred: 14381203,
            papayawhip: 16773077,
            peachpuff: 16767673,
            peru: 13468991,
            pink: 16761035,
            plum: 14524637,
            powderblue: 11591910,
            purple: 8388736,
            red: 16711680,
            rosybrown: 12357519,
            royalblue: 4286945,
            saddlebrown: 9127187,
            salmon: 16416882,
            sandybrown: 16032864,
            seagreen: 3050327,
            seashell: 16774638,
            sienna: 10506797,
            silver: 12632256,
            skyblue: 8900331,
            slateblue: 6970061,
            slategray: 7372944,
            slategrey: 7372944,
            snow: 16775930,
            springgreen: 65407,
            steelblue: 4620980,
            tan: 13808780,
            teal: 32896,
            thistle: 14204888,
            tomato: 16737095,
            turquoise: 4251856,
            violet: 15631086,
            wheat: 16113331,
            white: 16777215,
            whitesmoke: 16119285,
            yellow: 16776960,
            yellowgreen: 10145074
        }, o.Quaternion = function(e, t, n, i) {
            this._x = e || 0, this._y = t || 0, this._z = n || 0, this._w = void 0 !== i ? i : 1
        }, o.Quaternion.prototype = {
            constructor: o.Quaternion,
            get x() {
                return this._x
            },
            set x(e) {
                this._x = e, this.onChangeCallback()
            },
            get y() {
                return this._y
            },
            set y(e) {
                this._y = e, this.onChangeCallback()
            },
            get z() {
                return this._z
            },
            set z(e) {
                this._z = e, this.onChangeCallback()
            },
            get w() {
                return this._w
            },
            set w(e) {
                this._w = e, this.onChangeCallback()
            },
            set: function(e, t, n, i) {
                return this._x = e, this._y = t, this._z = n, this._w = i, this.onChangeCallback(), this
            },
            clone: function() {
                return new this.constructor(this._x, this._y, this._z, this._w)
            },
            copy: function(e) {
                return this._x = e.x, this._y = e.y, this._z = e.z, this._w = e.w, this.onChangeCallback(), this
            },
            setFromEuler: function(e, t) {
                if (!1 == e instanceof o.Euler) throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
                var n = Math.cos(e._x / 2),
                    i = Math.cos(e._y / 2),
                    r = Math.cos(e._z / 2),
                    a = Math.sin(e._x / 2),
                    s = Math.sin(e._y / 2),
                    u = Math.sin(e._z / 2),
                    l = e.order;
                return "XYZ" === l ? (this._x = a * i * r + n * s * u, this._y = n * s * r - a * i * u, this._z = n * i * u + a * s * r, this._w = n * i * r - a * s * u) : "YXZ" === l ? (this._x = a * i * r + n * s * u, this._y = n * s * r - a * i * u, this._z = n * i * u - a * s * r, this._w = n * i * r + a * s * u) : "ZXY" === l ? (this._x = a * i * r - n * s * u, this._y = n * s * r + a * i * u, this._z = n * i * u + a * s * r, this._w = n * i * r - a * s * u) : "ZYX" === l ? (this._x = a * i * r - n * s * u, this._y = n * s * r + a * i * u, this._z = n * i * u - a * s * r, this._w = n * i * r + a * s * u) : "YZX" === l ? (this._x = a * i * r + n * s * u, this._y = n * s * r + a * i * u, this._z = n * i * u - a * s * r, this._w = n * i * r - a * s * u) : "XZY" === l && (this._x = a * i * r - n * s * u, this._y = n * s * r - a * i * u, this._z = n * i * u + a * s * r, this._w = n * i * r + a * s * u), !1 !== t && this.onChangeCallback(), this
            },
            setFromAxisAngle: function(e, t) {
                var n = t / 2,
                    i = Math.sin(n);
                return this._x = e.x * i, this._y = e.y * i, this._z = e.z * i, this._w = Math.cos(n), this.onChangeCallback(), this
            },
            setFromRotationMatrix: function(e) {
                var t = e.elements,
                    n = t[0];
                e = t[4];
                var i = t[8],
                    r = t[1],
                    o = t[5],
                    a = t[9],
                    s = t[2],
                    u = t[6],
                    t = t[10],
                    l = n + o + t;
                return l > 0 ? (n = .5 / Math.sqrt(l + 1), this._w = .25 / n, this._x = (u - a) * n, this._y = (i - s) * n, this._z = (r - e) * n) : n > o && n > t ? (n = 2 * Math.sqrt(1 + n - o - t), this._w = (u - a) / n, this._x = .25 * n, this._y = (e + r) / n, this._z = (i + s) / n) : o > t ? (n = 2 * Math.sqrt(1 + o - n - t), this._w = (i - s) / n, this._x = (e + r) / n, this._y = .25 * n, this._z = (a + u) / n) : (n = 2 * Math.sqrt(1 + t - n - o), this._w = (r - e) / n, this._x = (i + s) / n, this._y = (a + u) / n, this._z = .25 * n), this.onChangeCallback(), this
            },
            setFromUnitVectors: function() {
                var e, t;
                return function(n, i) {
                    return void 0 === e && (e = new o.Vector3), t = n.dot(i) + 1, 1e-6 > t ? (t = 0, Math.abs(n.x) > Math.abs(n.z) ? e.set(-n.y, n.x, 0) : e.set(0, -n.z, n.y)) : e.crossVectors(n, i), this._x = e.x, this._y = e.y, this._z = e.z, this._w = t, this.normalize(), this
                }
            }(),
            inverse: function() {
                return this.conjugate().normalize(), this
            },
            conjugate: function() {
                return this._x *= -1, this._y *= -1, this._z *= -1, this.onChangeCallback(), this
            },
            dot: function(e) {
                return this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w
            },
            lengthSq: function() {
                return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
            },
            length: function() {
                return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
            },
            normalize: function() {
                var e = this.length();
                return 0 === e ? (this._z = this._y = this._x = 0, this._w = 1) : (e = 1 / e, this._x *= e, this._y *= e, this._z *= e, this._w *= e), this.onChangeCallback(), this
            },
            multiply: function(e, t) {
                return void 0 !== t ? (console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), this.multiplyQuaternions(e, t)) : this.multiplyQuaternions(this, e)
            },
            multiplyQuaternions: function(e, t) {
                var n = e._x,
                    i = e._y,
                    r = e._z,
                    o = e._w,
                    a = t._x,
                    s = t._y,
                    u = t._z,
                    l = t._w;
                return this._x = n * l + o * a + i * u - r * s, this._y = i * l + o * s + r * a - n * u, this._z = r * l + o * u + n * s - i * a, this._w = o * l - n * a - i * s - r * u, this.onChangeCallback(), this
            },
            multiplyVector3: function(e) {
                return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."), e.applyQuaternion(this)
            },
            slerp: function(e, t) {
                if (0 === t) return this;
                if (1 === t) return this.copy(e);
                var n = this._x,
                    i = this._y,
                    r = this._z,
                    o = this._w,
                    a = o * e._w + n * e._x + i * e._y + r * e._z;
                if (0 > a ? (this._w = -e._w, this._x = -e._x, this._y = -e._y, this._z = -e._z, a = -a) : this.copy(e), a >= 1) return this._w = o, this._x = n, this._y = i, this._z = r, this;
                var s = Math.acos(a),
                    u = Math.sqrt(1 - a * a);
                return .001 > Math.abs(u) ? (this._w = .5 * (o + this._w), this._x = .5 * (n + this._x), this._y = .5 * (i + this._y), this._z = .5 * (r + this._z), this) : (a = Math.sin((1 - t) * s) / u, s = Math.sin(t * s) / u, this._w = o * a + this._w * s, this._x = n * a + this._x * s, this._y = i * a + this._y * s, this._z = r * a + this._z * s, this.onChangeCallback(), this)
            },
            equals: function(e) {
                return e._x === this._x && e._y === this._y && e._z === this._z && e._w === this._w
            },
            fromArray: function(e, t) {
                return void 0 === t && (t = 0), this._x = e[t], this._y = e[t + 1], this._z = e[t + 2], this._w = e[t + 3], this.onChangeCallback(), this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._w, e
            },
            onChange: function(e) {
                return this.onChangeCallback = e, this
            },
            onChangeCallback: function() {}
        }, o.Quaternion.slerp = function(e, t, n, i) {
            return n.copy(e).slerp(t, i)
        }, o.Vector2 = function(e, t) {
            this.x = e || 0, this.y = t || 0
        }, o.Vector2.prototype = {
            constructor: o.Vector2,
            get width() {
                return this.x
            },
            set width(e) {
                this.x = e
            },
            get height() {
                return this.y
            },
            set height(e) {
                this.y = e
            },
            set: function(e, t) {
                return this.x = e, this.y = t, this
            },
            setX: function(e) {
                return this.x = e, this
            },
            setY: function(e) {
                return this.y = e, this
            },
            setComponent: function(e, t) {
                switch (e) {
                    case 0:
                        this.x = t;
                        break;
                    case 1:
                        this.y = t;
                        break;
                    default:
                        throw Error("index is out of range: " + e)
                }
            },
            getComponent: function(e) {
                switch (e) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    default:
                        throw Error("index is out of range: " + e)
                }
            },
            clone: function() {
                return new this.constructor(this.x, this.y)
            },
            copy: function(e) {
                return this.x = e.x, this.y = e.y, this
            },
            add: function(e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this)
            },
            addScalar: function(e) {
                return this.x += e, this.y += e, this
            },
            addVectors: function(e, t) {
                return this.x = e.x + t.x, this.y = e.y + t.y, this
            },
            addScaledVector: function(e, t) {
                return this.x += e.x * t, this.y += e.y * t, this
            },
            sub: function(e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this)
            },
            subScalar: function(e) {
                return this.x -= e, this.y -= e, this
            },
            subVectors: function(e, t) {
                return this.x = e.x - t.x, this.y = e.y - t.y, this
            },
            multiply: function(e) {
                return this.x *= e.x, this.y *= e.y, this
            },
            multiplyScalar: function(e) {
                return isFinite(e) ? (this.x *= e, this.y *= e) : this.y = this.x = 0, this
            },
            divide: function(e) {
                return this.x /= e.x, this.y /= e.y, this
            },
            divideScalar: function(e) {
                return this.multiplyScalar(1 / e)
            },
            min: function(e) {
                return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this
            },
            max: function(e) {
                return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this
            },
            clamp: function(e, t) {
                return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this
            },
            clampScalar: function() {
                var e, t;
                return function(n, i) {
                    return void 0 === e && (e = new o.Vector2, t = new o.Vector2), e.set(n, n), t.set(i, i), this.clamp(e, t)
                }
            }(),
            clampLength: function(e, t) {
                var n = this.length();
                return this.multiplyScalar(Math.max(e, Math.min(t, n)) / n), this
            },
            floor: function() {
                return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
            },
            ceil: function() {
                return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this
            },
            round: function() {
                return this.x = Math.round(this.x), this.y = Math.round(this.y), this
            },
            roundToZero: function() {
                return this.x = 0 > this.x ? Math.ceil(this.x) : Math.floor(this.x), this.y = 0 > this.y ? Math.ceil(this.y) : Math.floor(this.y), this
            },
            negate: function() {
                return this.x = -this.x, this.y = -this.y, this
            },
            dot: function(e) {
                return this.x * e.x + this.y * e.y
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y)
            },
            lengthManhattan: function() {
                return Math.abs(this.x) + Math.abs(this.y)
            },
            normalize: function() {
                return this.divideScalar(this.length())
            },
            distanceTo: function(e) {
                return Math.sqrt(this.distanceToSquared(e))
            },
            distanceToSquared: function(e) {
                var t = this.x - e.x;
                return e = this.y - e.y, t * t + e * e
            },
            setLength: function(e) {
                return this.multiplyScalar(e / this.length())
            },
            lerp: function(e, t) {
                return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this
            },
            lerpVectors: function(e, t, n) {
                return this.subVectors(t, e).multiplyScalar(n).add(e), this
            },
            equals: function(e) {
                return e.x === this.x && e.y === this.y
            },
            fromArray: function(e, t) {
                return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e
            },
            fromAttribute: function(e, t, n) {
                return void 0 === n && (n = 0), t = t * e.itemSize + n, this.x = e.array[t], this.y = e.array[t + 1], this
            },
            rotateAround: function(e, t) {
                var n = Math.cos(t),
                    i = Math.sin(t),
                    r = this.x - e.x,
                    o = this.y - e.y;
                return this.x = r * n - o * i + e.x, this.y = r * i + o * n + e.y, this
            }
        }, o.Vector3 = function(e, t, n) {
            this.x = e || 0, this.y = t || 0, this.z = n || 0
        }, o.Vector3.prototype = {
            constructor: o.Vector3,
            set: function(e, t, n) {
                return this.x = e, this.y = t, this.z = n, this
            },
            setX: function(e) {
                return this.x = e, this
            },
            setY: function(e) {
                return this.y = e, this
            },
            setZ: function(e) {
                return this.z = e, this
            },
            setComponent: function(e, t) {
                switch (e) {
                    case 0:
                        this.x = t;
                        break;
                    case 1:
                        this.y = t;
                        break;
                    case 2:
                        this.z = t;
                        break;
                    default:
                        throw Error("index is out of range: " + e)
                }
            },
            getComponent: function(e) {
                switch (e) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    case 2:
                        return this.z;
                    default:
                        throw Error("index is out of range: " + e)
                }
            },
            clone: function() {
                return new this.constructor(this.x, this.y, this.z)
            },
            copy: function(e) {
                return this.x = e.x, this.y = e.y, this.z = e.z, this
            },
            add: function(e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this)
            },
            addScalar: function(e) {
                return this.x += e, this.y += e, this.z += e, this
            },
            addVectors: function(e, t) {
                return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this
            },
            addScaledVector: function(e, t) {
                return this.x += e.x * t, this.y += e.y * t, this.z += e.z * t, this
            },
            sub: function(e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this)
            },
            subScalar: function(e) {
                return this.x -= e, this.y -= e, this.z -= e, this
            },
            subVectors: function(e, t) {
                return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this
            },
            multiply: function(e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), this.multiplyVectors(e, t)) : (this.x *= e.x, this.y *= e.y, this.z *= e.z, this)
            },
            multiplyScalar: function(e) {
                return isFinite(e) ? (this.x *= e, this.y *= e, this.z *= e) : this.z = this.y = this.x = 0, this
            },
            multiplyVectors: function(e, t) {
                return this.x = e.x * t.x, this.y = e.y * t.y, this.z = e.z * t.z, this
            },
            applyEuler: function() {
                var e;
                return function(t) {
                    return !1 == t instanceof o.Euler && console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."), void 0 === e && (e = new o.Quaternion), this.applyQuaternion(e.setFromEuler(t)), this
                }
            }(),
            applyAxisAngle: function() {
                var e;
                return function(t, n) {
                    return void 0 === e && (e = new o.Quaternion), this.applyQuaternion(e.setFromAxisAngle(t, n)), this
                }
            }(),
            applyMatrix3: function(e) {
                var t = this.x,
                    n = this.y,
                    i = this.z;
                return e = e.elements, this.x = e[0] * t + e[3] * n + e[6] * i, this.y = e[1] * t + e[4] * n + e[7] * i, this.z = e[2] * t + e[5] * n + e[8] * i, this
            },
            applyMatrix4: function(e) {
                var t = this.x,
                    n = this.y,
                    i = this.z;
                return e = e.elements, this.x = e[0] * t + e[4] * n + e[8] * i + e[12], this.y = e[1] * t + e[5] * n + e[9] * i + e[13], this.z = e[2] * t + e[6] * n + e[10] * i + e[14], this
            },
            applyProjection: function(e) {
                var t = this.x,
                    n = this.y,
                    i = this.z;
                e = e.elements;
                var r = 1 / (e[3] * t + e[7] * n + e[11] * i + e[15]);
                return this.x = (e[0] * t + e[4] * n + e[8] * i + e[12]) * r, this.y = (e[1] * t + e[5] * n + e[9] * i + e[13]) * r, this.z = (e[2] * t + e[6] * n + e[10] * i + e[14]) * r, this
            },
            applyQuaternion: function(e) {
                var t = this.x,
                    n = this.y,
                    i = this.z,
                    r = e.x,
                    o = e.y,
                    a = e.z;
                e = e.w;
                var s = e * t + o * i - a * n,
                    u = e * n + a * t - r * i,
                    l = e * i + r * n - o * t,
                    t = -r * t - o * n - a * i;
                return this.x = s * e + t * -r + u * -a - l * -o, this.y = u * e + t * -o + l * -r - s * -a, this.z = l * e + t * -a + s * -o - u * -r, this
            },
            project: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new o.Matrix4), e.multiplyMatrices(t.projectionMatrix, e.getInverse(t.matrixWorld)), this.applyProjection(e)
                }
            }(),
            unproject: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new o.Matrix4), e.multiplyMatrices(t.matrixWorld, e.getInverse(t.projectionMatrix)), this.applyProjection(e)
                }
            }(),
            transformDirection: function(e) {
                var t = this.x,
                    n = this.y,
                    i = this.z;
                return e = e.elements, this.x = e[0] * t + e[4] * n + e[8] * i, this.y = e[1] * t + e[5] * n + e[9] * i, this.z = e[2] * t + e[6] * n + e[10] * i, this.normalize(), this
            },
            divide: function(e) {
                return this.x /= e.x, this.y /= e.y, this.z /= e.z, this
            },
            divideScalar: function(e) {
                return this.multiplyScalar(1 / e)
            },
            min: function(e) {
                return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this.z = Math.min(this.z, e.z), this
            },
            max: function(e) {
                return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this.z = Math.max(this.z, e.z), this
            },
            clamp: function(e, t) {
                return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this.z = Math.max(e.z, Math.min(t.z, this.z)), this
            },
            clampScalar: function() {
                var e, t;
                return function(n, i) {
                    return void 0 === e && (e = new o.Vector3, t = new o.Vector3), e.set(n, n, n), t.set(i, i, i), this.clamp(e, t)
                }
            }(),
            clampLength: function(e, t) {
                var n = this.length();
                return this.multiplyScalar(Math.max(e, Math.min(t, n)) / n), this
            },
            floor: function() {
                return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this
            },
            ceil: function() {
                return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this
            },
            round: function() {
                return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this
            },
            roundToZero: function() {
                return this.x = 0 > this.x ? Math.ceil(this.x) : Math.floor(this.x), this.y = 0 > this.y ? Math.ceil(this.y) : Math.floor(this.y), this.z = 0 > this.z ? Math.ceil(this.z) : Math.floor(this.z), this
            },
            negate: function() {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
            },
            dot: function(e) {
                return this.x * e.x + this.y * e.y + this.z * e.z
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y + this.z * this.z
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
            },
            lengthManhattan: function() {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
            },
            normalize: function() {
                return this.divideScalar(this.length())
            },
            setLength: function(e) {
                return this.multiplyScalar(e / this.length())
            },
            lerp: function(e, t) {
                return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this
            },
            lerpVectors: function(e, t, n) {
                return this.subVectors(t, e).multiplyScalar(n).add(e), this
            },
            cross: function(e, t) {
                if (void 0 !== t) return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), this.crossVectors(e, t);
                var n = this.x,
                    i = this.y,
                    r = this.z;
                return this.x = i * e.z - r * e.y, this.y = r * e.x - n * e.z, this.z = n * e.y - i * e.x, this
            },
            crossVectors: function(e, t) {
                var n = e.x,
                    i = e.y,
                    r = e.z,
                    o = t.x,
                    a = t.y,
                    s = t.z;
                return this.x = i * s - r * a, this.y = r * o - n * s, this.z = n * a - i * o, this
            },
            projectOnVector: function() {
                var e, t;
                return function(n) {
                    return void 0 === e && (e = new o.Vector3), e.copy(n).normalize(), t = this.dot(e), this.copy(e).multiplyScalar(t)
                }
            }(),
            projectOnPlane: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new o.Vector3), e.copy(this).projectOnVector(t), this.sub(e)
                }
            }(),
            reflect: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new o.Vector3), this.sub(e.copy(t).multiplyScalar(2 * this.dot(t)))
                }
            }(),
            angleTo: function(e) {
                return e = this.dot(e) / (this.length() * e.length()), Math.acos(o.Math.clamp(e, -1, 1))
            },
            distanceTo: function(e) {
                return Math.sqrt(this.distanceToSquared(e))
            },
            distanceToSquared: function(e) {
                var t = this.x - e.x,
                    n = this.y - e.y;
                return e = this.z - e.z, t * t + n * n + e * e
            },
            setEulerFromRotationMatrix: function(e, t) {
                console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")
            },
            setEulerFromQuaternion: function(e, t) {
                console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")
            },
            getPositionFromMatrix: function(e) {
                return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."), this.setFromMatrixPosition(e)
            },
            getScaleFromMatrix: function(e) {
                return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."), this.setFromMatrixScale(e)
            },
            getColumnFromMatrix: function(e, t) {
                return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."), this.setFromMatrixColumn(e, t)
            },
            setFromMatrixPosition: function(e) {
                return this.x = e.elements[12], this.y = e.elements[13], this.z = e.elements[14], this
            },
            setFromMatrixScale: function(e) {
                var t = this.set(e.elements[0], e.elements[1], e.elements[2]).length(),
                    n = this.set(e.elements[4], e.elements[5], e.elements[6]).length();
                return e = this.set(e.elements[8], e.elements[9], e.elements[10]).length(), this.x = t, this.y = n, this.z = e, this
            },
            setFromMatrixColumn: function(e, t) {
                var n = 4 * e,
                    i = t.elements;
                return this.x = i[n], this.y = i[n + 1], this.z = i[n + 2], this
            },
            equals: function(e) {
                return e.x === this.x && e.y === this.y && e.z === this.z
            },
            fromArray: function(e, t) {
                return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e
            },
            fromAttribute: function(e, t, n) {
                return void 0 === n && (n = 0), t = t * e.itemSize + n, this.x = e.array[t], this.y = e.array[t + 1], this.z = e.array[t + 2], this
            }
        }, o.Vector4 = function(e, t, n, i) {
            this.x = e || 0, this.y = t || 0, this.z = n || 0, this.w = void 0 !== i ? i : 1
        }, o.Vector4.prototype = {
            constructor: o.Vector4,
            set: function(e, t, n, i) {
                return this.x = e, this.y = t, this.z = n, this.w = i, this
            },
            setX: function(e) {
                return this.x = e, this
            },
            setY: function(e) {
                return this.y = e, this
            },
            setZ: function(e) {
                return this.z = e, this
            },
            setW: function(e) {
                return this.w = e, this
            },
            setComponent: function(e, t) {
                switch (e) {
                    case 0:
                        this.x = t;
                        break;
                    case 1:
                        this.y = t;
                        break;
                    case 2:
                        this.z = t;
                        break;
                    case 3:
                        this.w = t;
                        break;
                    default:
                        throw Error("index is out of range: " + e)
                }
            },
            getComponent: function(e) {
                switch (e) {
                    case 0:
                        return this.x;
                    case 1:
                        return this.y;
                    case 2:
                        return this.z;
                    case 3:
                        return this.w;
                    default:
                        throw Error("index is out of range: " + e)
                }
            },
            clone: function() {
                return new this.constructor(this.x, this.y, this.z, this.w)
            },
            copy: function(e) {
                return this.x = e.x, this.y = e.y, this.z = e.z, this.w = void 0 !== e.w ? e.w : 1, this
            },
            add: function(e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this.w += e.w, this)
            },
            addScalar: function(e) {
                return this.x += e, this.y += e, this.z += e, this.w += e, this
            },
            addVectors: function(e, t) {
                return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this.w = e.w + t.w, this
            },
            addScaledVector: function(e, t) {
                return this.x += e.x * t, this.y += e.y * t, this.z += e.z * t, this.w += e.w * t, this
            },
            sub: function(e, t) {
                return void 0 !== t ? (console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this.w -= e.w, this)
            },
            subScalar: function(e) {
                return this.x -= e, this.y -= e, this.z -= e, this.w -= e, this
            },
            subVectors: function(e, t) {
                return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this.w = e.w - t.w, this
            },
            multiplyScalar: function(e) {
                return isFinite(e) ? (this.x *= e, this.y *= e, this.z *= e, this.w *= e) : this.w = this.z = this.y = this.x = 0, this
            },
            applyMatrix4: function(e) {
                var t = this.x,
                    n = this.y,
                    i = this.z,
                    r = this.w;
                return e = e.elements, this.x = e[0] * t + e[4] * n + e[8] * i + e[12] * r, this.y = e[1] * t + e[5] * n + e[9] * i + e[13] * r, this.z = e[2] * t + e[6] * n + e[10] * i + e[14] * r, this.w = e[3] * t + e[7] * n + e[11] * i + e[15] * r, this
            },
            divideScalar: function(e) {
                return this.multiplyScalar(1 / e)
            },
            setAxisAngleFromQuaternion: function(e) {
                this.w = 2 * Math.acos(e.w);
                var t = Math.sqrt(1 - e.w * e.w);
                return 1e-4 > t ? (this.x = 1, this.z = this.y = 0) : (this.x = e.x / t, this.y = e.y / t, this.z = e.z / t), this
            },
            setAxisAngleFromRotationMatrix: function(e) {
                var t, n, i;
                e = e.elements;
                var r = e[0];
                i = e[4];
                var o = e[8],
                    a = e[1],
                    s = e[5],
                    u = e[9];
                n = e[2], t = e[6];
                var l = e[10];
                return .01 > Math.abs(i - a) && .01 > Math.abs(o - n) && .01 > Math.abs(u - t) ? .1 > Math.abs(i + a) && .1 > Math.abs(o + n) && .1 > Math.abs(u + t) && .1 > Math.abs(r + s + l - 3) ? (this.set(1, 0, 0, 0), this) : (e = Math.PI, r = (r + 1) / 2, s = (s + 1) / 2, l = (l + 1) / 2, i = (i + a) / 4, o = (o + n) / 4, u = (u + t) / 4, r > s && r > l ? .01 > r ? (t = 0, i = n = .707106781) : (t = Math.sqrt(r), n = i / t, i = o / t) : s > l ? .01 > s ? (t = .707106781, n = 0, i = .707106781) : (n = Math.sqrt(s), t = i / n, i = u / n) : .01 > l ? (n = t = .707106781, i = 0) : (i = Math.sqrt(l), t = o / i, n = u / i), this.set(t, n, i, e), this) : (e = Math.sqrt((t - u) * (t - u) + (o - n) * (o - n) + (a - i) * (a - i)), .001 > Math.abs(e) && (e = 1), this.x = (t - u) / e, this.y = (o - n) / e, this.z = (a - i) / e, this.w = Math.acos((r + s + l - 1) / 2), this)
            },
            min: function(e) {
                return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this.z = Math.min(this.z, e.z), this.w = Math.min(this.w, e.w), this
            },
            max: function(e) {
                return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this.z = Math.max(this.z, e.z), this.w = Math.max(this.w, e.w), this
            },
            clamp: function(e, t) {
                return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this.z = Math.max(e.z, Math.min(t.z, this.z)), this.w = Math.max(e.w, Math.min(t.w, this.w)), this
            },
            clampScalar: function() {
                var e, t;
                return function(n, i) {
                    return void 0 === e && (e = new o.Vector4, t = new o.Vector4), e.set(n, n, n, n), t.set(i, i, i, i), this.clamp(e, t)
                }
            }(),
            floor: function() {
                return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this
            },
            ceil: function() {
                return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this
            },
            round: function() {
                return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this
            },
            roundToZero: function() {
                return this.x = 0 > this.x ? Math.ceil(this.x) : Math.floor(this.x), this.y = 0 > this.y ? Math.ceil(this.y) : Math.floor(this.y), this.z = 0 > this.z ? Math.ceil(this.z) : Math.floor(this.z), this.w = 0 > this.w ? Math.ceil(this.w) : Math.floor(this.w), this
            },
            negate: function() {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this
            },
            dot: function(e) {
                return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
            },
            lengthManhattan: function() {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
            },
            normalize: function() {
                return this.divideScalar(this.length())
            },
            setLength: function(e) {
                return this.multiplyScalar(e / this.length())
            },
            lerp: function(e, t) {
                return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this.w += (e.w - this.w) * t, this
            },
            lerpVectors: function(e, t, n) {
                return this.subVectors(t, e).multiplyScalar(n).add(e), this
            },
            equals: function(e) {
                return e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w
            },
            fromArray: function(e, t) {
                return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this.w = e[t + 3], this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e[t + 3] = this.w, e
            },
            fromAttribute: function(e, t, n) {
                return void 0 === n && (n = 0), t = t * e.itemSize + n, this.x = e.array[t], this.y = e.array[t + 1], this.z = e.array[t + 2], this.w = e.array[t + 3], this
            }
        }, o.Euler = function(e, t, n, i) {
            this._x = e || 0, this._y = t || 0, this._z = n || 0, this._order = i || o.Euler.DefaultOrder
        }, o.Euler.RotationOrders = "XYZ YZX ZXY XZY YXZ ZYX".split(" "), o.Euler.DefaultOrder = "XYZ", o.Euler.prototype = {
            constructor: o.Euler,
            get x() {
                return this._x
            },
            set x(e) {
                this._x = e, this.onChangeCallback()
            },
            get y() {
                return this._y
            },
            set y(e) {
                this._y = e, this.onChangeCallback()
            },
            get z() {
                return this._z
            },
            set z(e) {
                this._z = e, this.onChangeCallback()
            },
            get order() {
                return this._order
            },
            set order(e) {
                this._order = e, this.onChangeCallback()
            },
            set: function(e, t, n, i) {
                return this._x = e, this._y = t, this._z = n, this._order = i || this._order, this.onChangeCallback(), this
            },
            clone: function() {
                return new this.constructor(this._x, this._y, this._z, this._order)
            },
            copy: function(e) {
                return this._x = e._x, this._y = e._y, this._z = e._z, this._order = e._order, this.onChangeCallback(), this
            },
            setFromRotationMatrix: function(e, t, n) {
                var i = o.Math.clamp,
                    r = e.elements;
                e = r[0];
                var a = r[4],
                    s = r[8],
                    u = r[1],
                    l = r[5],
                    c = r[9],
                    h = r[2],
                    d = r[6],
                    r = r[10];
                return t = t || this._order, "XYZ" === t ? (this._y = Math.asin(i(s, -1, 1)), .99999 > Math.abs(s) ? (this._x = Math.atan2(-c, r), this._z = Math.atan2(-a, e)) : (this._x = Math.atan2(d, l), this._z = 0)) : "YXZ" === t ? (this._x = Math.asin(-i(c, -1, 1)), .99999 > Math.abs(c) ? (this._y = Math.atan2(s, r), this._z = Math.atan2(u, l)) : (this._y = Math.atan2(-h, e), this._z = 0)) : "ZXY" === t ? (this._x = Math.asin(i(d, -1, 1)), .99999 > Math.abs(d) ? (this._y = Math.atan2(-h, r), this._z = Math.atan2(-a, l)) : (this._y = 0, this._z = Math.atan2(u, e))) : "ZYX" === t ? (this._y = Math.asin(-i(h, -1, 1)), .99999 > Math.abs(h) ? (this._x = Math.atan2(d, r), this._z = Math.atan2(u, e)) : (this._x = 0, this._z = Math.atan2(-a, l))) : "YZX" === t ? (this._z = Math.asin(i(u, -1, 1)), .99999 > Math.abs(u) ? (this._x = Math.atan2(-c, l), this._y = Math.atan2(-h, e)) : (this._x = 0, this._y = Math.atan2(s, r))) : "XZY" === t ? (this._z = Math.asin(-i(a, -1, 1)), .99999 > Math.abs(a) ? (this._x = Math.atan2(d, l), this._y = Math.atan2(s, e)) : (this._x = Math.atan2(-c, r), this._y = 0)) : console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + t), this._order = t, !1 !== n && this.onChangeCallback(), this
            },
            setFromQuaternion: function() {
                var e;
                return function(t, n, i) {
                    return void 0 === e && (e = new o.Matrix4), e.makeRotationFromQuaternion(t), this.setFromRotationMatrix(e, n, i), this
                }
            }(),
            setFromVector3: function(e, t) {
                return this.set(e.x, e.y, e.z, t || this._order)
            },
            reorder: function() {
                var e = new o.Quaternion;
                return function(t) {
                    e.setFromEuler(this), this.setFromQuaternion(e, t)
                }
            }(),
            equals: function(e) {
                return e._x === this._x && e._y === this._y && e._z === this._z && e._order === this._order
            },
            fromArray: function(e) {
                return this._x = e[0], this._y = e[1], this._z = e[2], void 0 !== e[3] && (this._order = e[3]), this.onChangeCallback(), this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._order, e
            },
            toVector3: function(e) {
                return e ? e.set(this._x, this._y, this._z) : new o.Vector3(this._x, this._y, this._z)
            },
            onChange: function(e) {
                return this.onChangeCallback = e, this
            },
            onChangeCallback: function() {}
        }, o.Line3 = function(e, t) {
            this.start = void 0 !== e ? e : new o.Vector3, this.end = void 0 !== t ? t : new o.Vector3
        }, o.Line3.prototype = {
            constructor: o.Line3,
            set: function(e, t) {
                return this.start.copy(e), this.end.copy(t), this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                return this.start.copy(e.start), this.end.copy(e.end), this
            },
            center: function(e) {
                return (e || new o.Vector3).addVectors(this.start, this.end).multiplyScalar(.5)
            },
            delta: function(e) {
                return (e || new o.Vector3).subVectors(this.end, this.start)
            },
            distanceSq: function() {
                return this.start.distanceToSquared(this.end)
            },
            distance: function() {
                return this.start.distanceTo(this.end)
            },
            at: function(e, t) {
                var n = t || new o.Vector3;
                return this.delta(n).multiplyScalar(e).add(this.start)
            },
            closestPointToPointParameter: function() {
                var e = new o.Vector3,
                    t = new o.Vector3;
                return function(n, i) {
                    e.subVectors(n, this.start), t.subVectors(this.end, this.start);
                    var r = t.dot(t),
                        r = t.dot(e) / r;
                    return i && (r = o.Math.clamp(r, 0, 1)), r
                }
            }(),
            closestPointToPoint: function(e, t, n) {
                return e = this.closestPointToPointParameter(e, t), n = n || new o.Vector3, this.delta(n).multiplyScalar(e).add(this.start)
            },
            applyMatrix4: function(e) {
                return this.start.applyMatrix4(e), this.end.applyMatrix4(e), this
            },
            equals: function(e) {
                return e.start.equals(this.start) && e.end.equals(this.end)
            }
        }, o.Box2 = function(e, t) {
            this.min = void 0 !== e ? e : new o.Vector2(1 / 0, 1 / 0), this.max = void 0 !== t ? t : new o.Vector2(-(1 / 0), -(1 / 0))
        }, o.Box2.prototype = {
            constructor: o.Box2,
            set: function(e, t) {
                return this.min.copy(e), this.max.copy(t), this
            },
            setFromPoints: function(e) {
                this.makeEmpty();
                for (var t = 0, n = e.length; n > t; t++) this.expandByPoint(e[t]);
                return this
            },
            setFromCenterAndSize: function() {
                var e = new o.Vector2;
                return function(t, n) {
                    var i = e.copy(n).multiplyScalar(.5);
                    return this.min.copy(t).sub(i), this.max.copy(t).add(i), this
                }
            }(),
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                return this.min.copy(e.min), this.max.copy(e.max), this
            },
            makeEmpty: function() {
                return this.min.x = this.min.y = 1 / 0, this.max.x = this.max.y = -(1 / 0), this
            },
            empty: function() {
                return this.max.x < this.min.x || this.max.y < this.min.y
            },
            center: function(e) {
                return (e || new o.Vector2).addVectors(this.min, this.max).multiplyScalar(.5)
            },
            size: function(e) {
                return (e || new o.Vector2).subVectors(this.max, this.min)
            },
            expandByPoint: function(e) {
                return this.min.min(e), this.max.max(e), this
            },
            expandByVector: function(e) {
                return this.min.sub(e), this.max.add(e), this
            },
            expandByScalar: function(e) {
                return this.min.addScalar(-e), this.max.addScalar(e), this
            },
            containsPoint: function(e) {
                return e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y ? !1 : !0
            },
            containsBox: function(e) {
                return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y ? !0 : !1
            },
            getParameter: function(e, t) {
                return (t || new o.Vector2).set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y))
            },
            isIntersectionBox: function(e) {
                return e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y ? !1 : !0
            },
            clampPoint: function(e, t) {
                return (t || new o.Vector2).copy(e).clamp(this.min, this.max)
            },
            distanceToPoint: function() {
                var e = new o.Vector2;
                return function(t) {
                    return e.copy(t).clamp(this.min, this.max).sub(t).length()
                }
            }(),
            intersect: function(e) {
                return this.min.max(e.min), this.max.min(e.max), this
            },
            union: function(e) {
                return this.min.min(e.min), this.max.max(e.max), this
            },
            translate: function(e) {
                return this.min.add(e), this.max.add(e), this
            },
            equals: function(e) {
                return e.min.equals(this.min) && e.max.equals(this.max)
            }
        }, o.Box3 = function(e, t) {
            this.min = void 0 !== e ? e : new o.Vector3(1 / 0, 1 / 0, 1 / 0), this.max = void 0 !== t ? t : new o.Vector3(-(1 / 0), -(1 / 0), -(1 / 0))
        }, o.Box3.prototype = {
            constructor: o.Box3,
            set: function(e, t) {
                return this.min.copy(e), this.max.copy(t), this
            },
            setFromPoints: function(e) {
                this.makeEmpty();
                for (var t = 0, n = e.length; n > t; t++) this.expandByPoint(e[t]);
                return this
            },
            setFromCenterAndSize: function() {
                var e = new o.Vector3;
                return function(t, n) {
                    var i = e.copy(n).multiplyScalar(.5);
                    return this.min.copy(t).sub(i), this.max.copy(t).add(i), this
                }
            }(),
            setFromObject: function() {
                var e = new o.Vector3;
                return function(t) {
                    var n = this;
                    return t.updateMatrixWorld(!0), this.makeEmpty(), t.traverse(function(t) {
                        var i = t.geometry;
                        if (void 0 !== i)
                            if (i instanceof o.Geometry)
                                for (var r = i.vertices, i = 0, a = r.length; a > i; i++) e.copy(r[i]), e.applyMatrix4(t.matrixWorld), n.expandByPoint(e);
                            else if (i instanceof o.BufferGeometry && void 0 !== i.attributes.position)
                            for (r = i.attributes.position.array, i = 0, a = r.length; a > i; i += 3) e.set(r[i], r[i + 1], r[i + 2]), e.applyMatrix4(t.matrixWorld), n.expandByPoint(e)
                    }), this
                }
            }(),
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                return this.min.copy(e.min), this.max.copy(e.max), this
            },
            makeEmpty: function() {
                return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -(1 / 0), this
            },
            empty: function() {
                return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
            },
            center: function(e) {
                return (e || new o.Vector3).addVectors(this.min, this.max).multiplyScalar(.5)
            },
            size: function(e) {
                return (e || new o.Vector3).subVectors(this.max, this.min)
            },
            expandByPoint: function(e) {
                return this.min.min(e), this.max.max(e), this
            },
            expandByVector: function(e) {
                return this.min.sub(e), this.max.add(e), this
            },
            expandByScalar: function(e) {
                return this.min.addScalar(-e), this.max.addScalar(e), this
            },
            containsPoint: function(e) {
                return e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y || e.z < this.min.z || e.z > this.max.z ? !1 : !0
            },
            containsBox: function(e) {
                return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y && this.min.z <= e.min.z && e.max.z <= this.max.z ? !0 : !1
            },
            getParameter: function(e, t) {
                return (t || new o.Vector3).set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y), (e.z - this.min.z) / (this.max.z - this.min.z));
            },
            isIntersectionBox: function(e) {
                return e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y || e.max.z < this.min.z || e.min.z > this.max.z ? !1 : !0
            },
            clampPoint: function(e, t) {
                return (t || new o.Vector3).copy(e).clamp(this.min, this.max)
            },
            distanceToPoint: function() {
                var e = new o.Vector3;
                return function(t) {
                    return e.copy(t).clamp(this.min, this.max).sub(t).length()
                }
            }(),
            getBoundingSphere: function() {
                var e = new o.Vector3;
                return function(t) {
                    return t = t || new o.Sphere, t.center = this.center(), t.radius = .5 * this.size(e).length(), t
                }
            }(),
            intersect: function(e) {
                return this.min.max(e.min), this.max.min(e.max), this
            },
            union: function(e) {
                return this.min.min(e.min), this.max.max(e.max), this
            },
            applyMatrix4: function() {
                var e = [new o.Vector3, new o.Vector3, new o.Vector3, new o.Vector3, new o.Vector3, new o.Vector3, new o.Vector3, new o.Vector3];
                return function(t) {
                    return e[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(t), e[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(t), e[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(t), e[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(t), e[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(t), e[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(t), e[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(t), e[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(t), this.makeEmpty(), this.setFromPoints(e), this
                }
            }(),
            translate: function(e) {
                return this.min.add(e), this.max.add(e), this
            },
            equals: function(e) {
                return e.min.equals(this.min) && e.max.equals(this.max)
            }
        }, o.Matrix3 = function() {
            this.elements = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]), 0 < arguments.length && console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")
        }, o.Matrix3.prototype = {
            constructor: o.Matrix3,
            set: function(e, t, n, i, r, o, a, s, u) {
                var l = this.elements;
                return l[0] = e, l[3] = t, l[6] = n, l[1] = i, l[4] = r, l[7] = o, l[2] = a, l[5] = s, l[8] = u, this
            },
            identity: function() {
                return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this
            },
            clone: function() {
                return (new this.constructor).fromArray(this.elements)
            },
            copy: function(e) {
                return e = e.elements, this.set(e[0], e[3], e[6], e[1], e[4], e[7], e[2], e[5], e[8]), this
            },
            multiplyVector3: function(e) {
                return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."), e.applyMatrix3(this)
            },
            multiplyVector3Array: function(e) {
                return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), this.applyToVector3Array(e)
            },
            applyToVector3Array: function() {
                var e;
                return function(t, n, i) {
                    void 0 === e && (e = new o.Vector3), void 0 === n && (n = 0), void 0 === i && (i = t.length);
                    for (var r = 0; i > r; r += 3, n += 3) e.fromArray(t, n), e.applyMatrix3(this), e.toArray(t, n);
                    return t
                }
            }(),
            applyToBuffer: function() {
                var e;
                return function(t, n, i) {
                    void 0 === e && (e = new o.Vector3), void 0 === n && (n = 0), void 0 === i && (i = t.length / t.itemSize);
                    for (var r = 0; i > r; r++, n++) e.x = t.getX(n), e.y = t.getY(n), e.z = t.getZ(n), e.applyMatrix3(this), t.setXYZ(e.x, e.y, e.z);
                    return t
                }
            }(),
            multiplyScalar: function(e) {
                var t = this.elements;
                return t[0] *= e, t[3] *= e, t[6] *= e, t[1] *= e, t[4] *= e, t[7] *= e, t[2] *= e, t[5] *= e, t[8] *= e, this
            },
            determinant: function() {
                var e = this.elements,
                    t = e[0],
                    n = e[1],
                    i = e[2],
                    r = e[3],
                    o = e[4],
                    a = e[5],
                    s = e[6],
                    u = e[7],
                    e = e[8];
                return t * o * e - t * a * u - n * r * e + n * a * s + i * r * u - i * o * s
            },
            getInverse: function(e, t) {
                var n = e.elements,
                    i = this.elements;
                if (i[0] = n[10] * n[5] - n[6] * n[9], i[1] = -n[10] * n[1] + n[2] * n[9], i[2] = n[6] * n[1] - n[2] * n[5], i[3] = -n[10] * n[4] + n[6] * n[8], i[4] = n[10] * n[0] - n[2] * n[8], i[5] = -n[6] * n[0] + n[2] * n[4], i[6] = n[9] * n[4] - n[5] * n[8], i[7] = -n[9] * n[0] + n[1] * n[8], i[8] = n[5] * n[0] - n[1] * n[4], n = n[0] * i[0] + n[1] * i[3] + n[2] * i[6], 0 === n) {
                    if (t) throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");
                    return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"), this.identity(), this
                }
                return this.multiplyScalar(1 / n), this
            },
            transpose: function() {
                var e, t = this.elements;
                return e = t[1], t[1] = t[3], t[3] = e, e = t[2], t[2] = t[6], t[6] = e, e = t[5], t[5] = t[7], t[7] = e, this
            },
            flattenToArrayOffset: function(e, t) {
                var n = this.elements;
                return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e
            },
            getNormalMatrix: function(e) {
                return this.getInverse(e).transpose(), this
            },
            transposeIntoArray: function(e) {
                var t = this.elements;
                return e[0] = t[0], e[1] = t[3], e[2] = t[6], e[3] = t[1], e[4] = t[4], e[5] = t[7], e[6] = t[2], e[7] = t[5], e[8] = t[8], this
            },
            fromArray: function(e) {
                return this.elements.set(e), this
            },
            toArray: function() {
                var e = this.elements;
                return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8]]
            }
        }, o.Matrix4 = function() {
            this.elements = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]), 0 < arguments.length && console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")
        }, o.Matrix4.prototype = {
            constructor: o.Matrix4,
            set: function(e, t, n, i, r, o, a, s, u, l, c, h, d, f, p, m) {
                var v = this.elements;
                return v[0] = e, v[4] = t, v[8] = n, v[12] = i, v[1] = r, v[5] = o, v[9] = a, v[13] = s, v[2] = u, v[6] = l, v[10] = c, v[14] = h, v[3] = d, v[7] = f, v[11] = p, v[15] = m, this
            },
            identity: function() {
                return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
            },
            clone: function() {
                return (new o.Matrix4).fromArray(this.elements)
            },
            copy: function(e) {
                return this.elements.set(e.elements), this
            },
            extractPosition: function(e) {
                return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."), this.copyPosition(e)
            },
            copyPosition: function(e) {
                var t = this.elements;
                return e = e.elements, t[12] = e[12], t[13] = e[13], t[14] = e[14], this
            },
            extractBasis: function(e, t, n) {
                var i = this.elements;
                return e.set(i[0], i[1], i[2]), t.set(i[4], i[5], i[6]), n.set(i[8], i[9], i[10]), this
            },
            makeBasis: function(e, t, n) {
                return this.set(e.x, t.x, n.x, 0, e.y, t.y, n.y, 0, e.z, t.z, n.z, 0, 0, 0, 0, 1), this
            },
            extractRotation: function() {
                var e;
                return function(t) {
                    void 0 === e && (e = new o.Vector3);
                    var n = this.elements;
                    t = t.elements;
                    var i = 1 / e.set(t[0], t[1], t[2]).length(),
                        r = 1 / e.set(t[4], t[5], t[6]).length(),
                        a = 1 / e.set(t[8], t[9], t[10]).length();
                    return n[0] = t[0] * i, n[1] = t[1] * i, n[2] = t[2] * i, n[4] = t[4] * r, n[5] = t[5] * r, n[6] = t[6] * r, n[8] = t[8] * a, n[9] = t[9] * a, n[10] = t[10] * a, this
                }
            }(),
            makeRotationFromEuler: function(e) {
                !1 == e instanceof o.Euler && console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
                var t = this.elements,
                    n = e.x,
                    i = e.y,
                    r = e.z,
                    a = Math.cos(n),
                    n = Math.sin(n),
                    s = Math.cos(i),
                    i = Math.sin(i),
                    u = Math.cos(r),
                    r = Math.sin(r);
                if ("XYZ" === e.order) {
                    e = a * u;
                    var l = a * r,
                        c = n * u,
                        h = n * r;
                    t[0] = s * u, t[4] = -s * r, t[8] = i, t[1] = l + c * i, t[5] = e - h * i, t[9] = -n * s, t[2] = h - e * i, t[6] = c + l * i, t[10] = a * s
                } else "YXZ" === e.order ? (e = s * u, l = s * r, c = i * u, h = i * r, t[0] = e + h * n, t[4] = c * n - l, t[8] = a * i, t[1] = a * r, t[5] = a * u, t[9] = -n, t[2] = l * n - c, t[6] = h + e * n, t[10] = a * s) : "ZXY" === e.order ? (e = s * u, l = s * r, c = i * u, h = i * r, t[0] = e - h * n, t[4] = -a * r, t[8] = c + l * n, t[1] = l + c * n, t[5] = a * u, t[9] = h - e * n, t[2] = -a * i, t[6] = n, t[10] = a * s) : "ZYX" === e.order ? (e = a * u, l = a * r, c = n * u, h = n * r, t[0] = s * u, t[4] = c * i - l, t[8] = e * i + h, t[1] = s * r, t[5] = h * i + e, t[9] = l * i - c, t[2] = -i, t[6] = n * s, t[10] = a * s) : "YZX" === e.order ? (e = a * s, l = a * i, c = n * s, h = n * i, t[0] = s * u, t[4] = h - e * r, t[8] = c * r + l, t[1] = r, t[5] = a * u, t[9] = -n * u, t[2] = -i * u, t[6] = l * r + c, t[10] = e - h * r) : "XZY" === e.order && (e = a * s, l = a * i, c = n * s, h = n * i, t[0] = s * u, t[4] = -r, t[8] = i * u, t[1] = e * r + h, t[5] = a * u, t[9] = l * r - c, t[2] = c * r - l, t[6] = n * u, t[10] = h * r + e);
                return t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
            },
            setRotationFromQuaternion: function(e) {
                return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."), this.makeRotationFromQuaternion(e)
            },
            makeRotationFromQuaternion: function(e) {
                var t = this.elements,
                    n = e.x,
                    i = e.y,
                    r = e.z,
                    o = e.w,
                    a = n + n,
                    s = i + i,
                    u = r + r;
                e = n * a;
                var l = n * s,
                    n = n * u,
                    c = i * s,
                    i = i * u,
                    r = r * u,
                    a = o * a,
                    s = o * s,
                    o = o * u;
                return t[0] = 1 - (c + r), t[4] = l - o, t[8] = n + s, t[1] = l + o, t[5] = 1 - (e + r), t[9] = i - a, t[2] = n - s, t[6] = i + a, t[10] = 1 - (e + c), t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
            },
            lookAt: function() {
                var e, t, n;
                return function(i, r, a) {
                    void 0 === e && (e = new o.Vector3), void 0 === t && (t = new o.Vector3), void 0 === n && (n = new o.Vector3);
                    var s = this.elements;
                    return n.subVectors(i, r).normalize(), 0 === n.lengthSq() && (n.z = 1), e.crossVectors(a, n).normalize(), 0 === e.lengthSq() && (n.x += 1e-4, e.crossVectors(a, n).normalize()), t.crossVectors(n, e), s[0] = e.x, s[4] = t.x, s[8] = n.x, s[1] = e.y, s[5] = t.y, s[9] = n.y, s[2] = e.z, s[6] = t.z, s[10] = n.z, this
                }
            }(),
            multiply: function(e, t) {
                return void 0 !== t ? (console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), this.multiplyMatrices(e, t)) : this.multiplyMatrices(this, e)
            },
            multiplyMatrices: function(e, t) {
                var n = e.elements,
                    i = t.elements,
                    r = this.elements,
                    o = n[0],
                    a = n[4],
                    s = n[8],
                    u = n[12],
                    l = n[1],
                    c = n[5],
                    h = n[9],
                    d = n[13],
                    f = n[2],
                    p = n[6],
                    m = n[10],
                    v = n[14],
                    g = n[3],
                    y = n[7],
                    _ = n[11],
                    n = n[15],
                    x = i[0],
                    b = i[4],
                    w = i[8],
                    T = i[12],
                    E = i[1],
                    S = i[5],
                    M = i[9],
                    P = i[13],
                    A = i[2],
                    C = i[6],
                    R = i[10],
                    L = i[14],
                    O = i[3],
                    k = i[7],
                    D = i[11],
                    i = i[15];
                return r[0] = o * x + a * E + s * A + u * O, r[4] = o * b + a * S + s * C + u * k, r[8] = o * w + a * M + s * R + u * D, r[12] = o * T + a * P + s * L + u * i, r[1] = l * x + c * E + h * A + d * O, r[5] = l * b + c * S + h * C + d * k, r[9] = l * w + c * M + h * R + d * D, r[13] = l * T + c * P + h * L + d * i, r[2] = f * x + p * E + m * A + v * O, r[6] = f * b + p * S + m * C + v * k, r[10] = f * w + p * M + m * R + v * D, r[14] = f * T + p * P + m * L + v * i, r[3] = g * x + y * E + _ * A + n * O, r[7] = g * b + y * S + _ * C + n * k, r[11] = g * w + y * M + _ * R + n * D, r[15] = g * T + y * P + _ * L + n * i, this
            },
            multiplyToArray: function(e, t, n) {
                var i = this.elements;
                return this.multiplyMatrices(e, t), n[0] = i[0], n[1] = i[1], n[2] = i[2], n[3] = i[3], n[4] = i[4], n[5] = i[5], n[6] = i[6], n[7] = i[7], n[8] = i[8], n[9] = i[9], n[10] = i[10], n[11] = i[11], n[12] = i[12], n[13] = i[13], n[14] = i[14], n[15] = i[15], this
            },
            multiplyScalar: function(e) {
                var t = this.elements;
                return t[0] *= e, t[4] *= e, t[8] *= e, t[12] *= e, t[1] *= e, t[5] *= e, t[9] *= e, t[13] *= e, t[2] *= e, t[6] *= e, t[10] *= e, t[14] *= e, t[3] *= e, t[7] *= e, t[11] *= e, t[15] *= e, this
            },
            multiplyVector3: function(e) {
                return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."), e.applyProjection(this)
            },
            multiplyVector4: function(e) {
                return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."), e.applyMatrix4(this)
            },
            multiplyVector3Array: function(e) {
                return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), this.applyToVector3Array(e)
            },
            applyToVector3Array: function() {
                var e;
                return function(t, n, i) {
                    void 0 === e && (e = new o.Vector3), void 0 === n && (n = 0), void 0 === i && (i = t.length);
                    for (var r = 0; i > r; r += 3, n += 3) e.fromArray(t, n), e.applyMatrix4(this), e.toArray(t, n);
                    return t
                }
            }(),
            applyToBuffer: function() {
                var e;
                return function(t, n, i) {
                    void 0 === e && (e = new o.Vector3), void 0 === n && (n = 0), void 0 === i && (i = t.length / t.itemSize);
                    for (var r = 0; i > r; r++, n++) e.x = t.getX(n), e.y = t.getY(n), e.z = t.getZ(n), e.applyMatrix4(this), t.setXYZ(e.x, e.y, e.z);
                    return t
                }
            }(),
            rotateAxis: function(e) {
                console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."), e.transformDirection(this)
            },
            crossVector: function(e) {
                return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."), e.applyMatrix4(this)
            },
            determinant: function() {
                var e = this.elements,
                    t = e[0],
                    n = e[4],
                    i = e[8],
                    r = e[12],
                    o = e[1],
                    a = e[5],
                    s = e[9],
                    u = e[13],
                    l = e[2],
                    c = e[6],
                    h = e[10],
                    d = e[14];
                return e[3] * (+r * s * c - i * u * c - r * a * h + n * u * h + i * a * d - n * s * d) + e[7] * (+t * s * d - t * u * h + r * o * h - i * o * d + i * u * l - r * s * l) + e[11] * (+t * u * c - t * a * d - r * o * c + n * o * d + r * a * l - n * u * l) + e[15] * (-i * a * l - t * s * c + t * a * h + i * o * c - n * o * h + n * s * l)
            },
            transpose: function() {
                var e, t = this.elements;
                return e = t[1], t[1] = t[4], t[4] = e, e = t[2], t[2] = t[8], t[8] = e, e = t[6], t[6] = t[9], t[9] = e, e = t[3], t[3] = t[12], t[12] = e, e = t[7], t[7] = t[13], t[13] = e, e = t[11], t[11] = t[14], t[14] = e, this
            },
            flattenToArrayOffset: function(e, t) {
                var n = this.elements;
                return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e[t + 9] = n[9], e[t + 10] = n[10], e[t + 11] = n[11], e[t + 12] = n[12], e[t + 13] = n[13], e[t + 14] = n[14], e[t + 15] = n[15], e
            },
            getPosition: function() {
                var e;
                return function() {
                    void 0 === e && (e = new o.Vector3), console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
                    var t = this.elements;
                    return e.set(t[12], t[13], t[14])
                }
            }(),
            setPosition: function(e) {
                var t = this.elements;
                return t[12] = e.x, t[13] = e.y, t[14] = e.z, this
            },
            getInverse: function(e, t) {
                var n = this.elements,
                    i = e.elements,
                    r = i[0],
                    o = i[4],
                    a = i[8],
                    s = i[12],
                    u = i[1],
                    l = i[5],
                    c = i[9],
                    h = i[13],
                    d = i[2],
                    f = i[6],
                    p = i[10],
                    m = i[14],
                    v = i[3],
                    g = i[7],
                    y = i[11],
                    i = i[15];
                if (n[0] = c * m * g - h * p * g + h * f * y - l * m * y - c * f * i + l * p * i, n[4] = s * p * g - a * m * g - s * f * y + o * m * y + a * f * i - o * p * i, n[8] = a * h * g - s * c * g + s * l * y - o * h * y - a * l * i + o * c * i, n[12] = s * c * f - a * h * f - s * l * p + o * h * p + a * l * m - o * c * m, n[1] = h * p * v - c * m * v - h * d * y + u * m * y + c * d * i - u * p * i, n[5] = a * m * v - s * p * v + s * d * y - r * m * y - a * d * i + r * p * i, n[9] = s * c * v - a * h * v - s * u * y + r * h * y + a * u * i - r * c * i, n[13] = a * h * d - s * c * d + s * u * p - r * h * p - a * u * m + r * c * m, n[2] = l * m * v - h * f * v + h * d * g - u * m * g - l * d * i + u * f * i, n[6] = s * f * v - o * m * v - s * d * g + r * m * g + o * d * i - r * f * i, n[10] = o * h * v - s * l * v + s * u * g - r * h * g - o * u * i + r * l * i, n[14] = s * l * d - o * h * d - s * u * f + r * h * f + o * u * m - r * l * m, n[3] = c * f * v - l * p * v - c * d * g + u * p * g + l * d * y - u * f * y, n[7] = o * p * v - a * f * v + a * d * g - r * p * g - o * d * y + r * f * y, n[11] = a * l * v - o * c * v - a * u * g + r * c * g + o * u * y - r * l * y, n[15] = o * c * d - a * l * d + a * u * f - r * c * f - o * u * p + r * l * p, n = r * n[0] + u * n[4] + d * n[8] + v * n[12], 0 === n) {
                    if (t) throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");
                    return console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0"), this.identity(), this
                }
                return this.multiplyScalar(1 / n), this
            },
            translate: function(e) {
                console.error("THREE.Matrix4: .translate() has been removed.")
            },
            rotateX: function(e) {
                console.error("THREE.Matrix4: .rotateX() has been removed.")
            },
            rotateY: function(e) {
                console.error("THREE.Matrix4: .rotateY() has been removed.")
            },
            rotateZ: function(e) {
                console.error("THREE.Matrix4: .rotateZ() has been removed.")
            },
            rotateByAxis: function(e, t) {
                console.error("THREE.Matrix4: .rotateByAxis() has been removed.")
            },
            scale: function(e) {
                var t = this.elements,
                    n = e.x,
                    i = e.y;
                return e = e.z, t[0] *= n, t[4] *= i, t[8] *= e, t[1] *= n, t[5] *= i, t[9] *= e, t[2] *= n, t[6] *= i, t[10] *= e, t[3] *= n, t[7] *= i, t[11] *= e, this
            },
            getMaxScaleOnAxis: function() {
                var e = this.elements;
                return Math.sqrt(Math.max(e[0] * e[0] + e[1] * e[1] + e[2] * e[2], e[4] * e[4] + e[5] * e[5] + e[6] * e[6], e[8] * e[8] + e[9] * e[9] + e[10] * e[10]))
            },
            makeTranslation: function(e, t, n) {
                return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, n, 0, 0, 0, 1), this
            },
            makeRotationX: function(e) {
                var t = Math.cos(e);
                return e = Math.sin(e), this.set(1, 0, 0, 0, 0, t, -e, 0, 0, e, t, 0, 0, 0, 0, 1), this
            },
            makeRotationY: function(e) {
                var t = Math.cos(e);
                return e = Math.sin(e), this.set(t, 0, e, 0, 0, 1, 0, 0, -e, 0, t, 0, 0, 0, 0, 1), this
            },
            makeRotationZ: function(e) {
                var t = Math.cos(e);
                return e = Math.sin(e), this.set(t, -e, 0, 0, e, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
            },
            makeRotationAxis: function(e, t) {
                var n = Math.cos(t),
                    i = Math.sin(t),
                    r = 1 - n,
                    o = e.x,
                    a = e.y,
                    s = e.z,
                    u = r * o,
                    l = r * a;
                return this.set(u * o + n, u * a - i * s, u * s + i * a, 0, u * a + i * s, l * a + n, l * s - i * o, 0, u * s - i * a, l * s + i * o, r * s * s + n, 0, 0, 0, 0, 1), this
            },
            makeScale: function(e, t, n) {
                return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this
            },
            compose: function(e, t, n) {
                return this.makeRotationFromQuaternion(t), this.scale(n), this.setPosition(e), this
            },
            decompose: function() {
                var e, t;
                return function(n, i, r) {
                    void 0 === e && (e = new o.Vector3), void 0 === t && (t = new o.Matrix4);
                    var a = this.elements,
                        s = e.set(a[0], a[1], a[2]).length(),
                        u = e.set(a[4], a[5], a[6]).length(),
                        l = e.set(a[8], a[9], a[10]).length();
                    0 > this.determinant() && (s = -s), n.x = a[12], n.y = a[13], n.z = a[14], t.elements.set(this.elements), n = 1 / s;
                    var a = 1 / u,
                        c = 1 / l;
                    return t.elements[0] *= n, t.elements[1] *= n, t.elements[2] *= n, t.elements[4] *= a, t.elements[5] *= a, t.elements[6] *= a, t.elements[8] *= c, t.elements[9] *= c, t.elements[10] *= c, i.setFromRotationMatrix(t), r.x = s, r.y = u, r.z = l, this
                }
            }(),
            makeFrustum: function(e, t, n, i, r, o) {
                var a = this.elements;
                return a[0] = 2 * r / (t - e), a[4] = 0, a[8] = (t + e) / (t - e), a[12] = 0, a[1] = 0, a[5] = 2 * r / (i - n), a[9] = (i + n) / (i - n), a[13] = 0, a[2] = 0, a[6] = 0, a[10] = -(o + r) / (o - r), a[14] = -2 * o * r / (o - r), a[3] = 0, a[7] = 0, a[11] = -1, a[15] = 0, this
            },
            makePerspective: function(e, t, n, i) {
                e = n * Math.tan(o.Math.degToRad(.5 * e));
                var r = -e;
                return this.makeFrustum(r * t, e * t, r, e, n, i)
            },
            makeOrthographic: function(e, t, n, i, r, o) {
                var a = this.elements,
                    s = t - e,
                    u = n - i,
                    l = o - r;
                return a[0] = 2 / s, a[4] = 0, a[8] = 0, a[12] = -((t + e) / s), a[1] = 0, a[5] = 2 / u, a[9] = 0, a[13] = -((n + i) / u), a[2] = 0, a[6] = 0, a[10] = -2 / l, a[14] = -((o + r) / l), a[3] = 0, a[7] = 0, a[11] = 0, a[15] = 1, this
            },
            equals: function(e) {
                var t = this.elements;
                e = e.elements;
                for (var n = 0; 16 > n; n++)
                    if (t[n] !== e[n]) return !1;
                return !0
            },
            fromArray: function(e) {
                return this.elements.set(e), this
            },
            toArray: function() {
                var e = this.elements;
                return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8], e[9], e[10], e[11], e[12], e[13], e[14], e[15]]
            }
        }, o.Ray = function(e, t) {
            this.origin = void 0 !== e ? e : new o.Vector3, this.direction = void 0 !== t ? t : new o.Vector3
        }, o.Ray.prototype = {
            constructor: o.Ray,
            set: function(e, t) {
                return this.origin.copy(e), this.direction.copy(t), this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                return this.origin.copy(e.origin), this.direction.copy(e.direction), this
            },
            at: function(e, t) {
                return (t || new o.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)
            },
            recast: function() {
                var e = new o.Vector3;
                return function(t) {
                    return this.origin.copy(this.at(t, e)), this
                }
            }(),
            closestPointToPoint: function(e, t) {
                var n = t || new o.Vector3;
                n.subVectors(e, this.origin);
                var i = n.dot(this.direction);
                return 0 > i ? n.copy(this.origin) : n.copy(this.direction).multiplyScalar(i).add(this.origin)
            },
            distanceToPoint: function(e) {
                return Math.sqrt(this.distanceSqToPoint(e))
            },
            distanceSqToPoint: function() {
                var e = new o.Vector3;
                return function(t) {
                    var n = e.subVectors(t, this.origin).dot(this.direction);
                    return 0 > n ? this.origin.distanceToSquared(t) : (e.copy(this.direction).multiplyScalar(n).add(this.origin), e.distanceToSquared(t))
                }
            }(),
            distanceSqToSegment: function() {
                var e = new o.Vector3,
                    t = new o.Vector3,
                    n = new o.Vector3;
                return function(i, r, o, a) {
                    e.copy(i).add(r).multiplyScalar(.5), t.copy(r).sub(i).normalize(), n.copy(this.origin).sub(e);
                    var s, u = .5 * i.distanceTo(r),
                        l = -this.direction.dot(t),
                        c = n.dot(this.direction),
                        h = -n.dot(t),
                        d = n.lengthSq(),
                        f = Math.abs(1 - l * l);
                    return f > 0 ? (i = l * h - c, r = l * c - h, s = u * f, i >= 0 ? r >= -s ? s >= r ? (u = 1 / f, i *= u, r *= u, l = i * (i + l * r + 2 * c) + r * (l * i + r + 2 * h) + d) : (r = u, i = Math.max(0, -(l * r + c)), l = -i * i + r * (r + 2 * h) + d) : (r = -u, i = Math.max(0, -(l * r + c)), l = -i * i + r * (r + 2 * h) + d) : -s >= r ? (i = Math.max(0, -(-l * u + c)), r = i > 0 ? -u : Math.min(Math.max(-u, -h), u), l = -i * i + r * (r + 2 * h) + d) : s >= r ? (i = 0, r = Math.min(Math.max(-u, -h), u), l = r * (r + 2 * h) + d) : (i = Math.max(0, -(l * u + c)), r = i > 0 ? u : Math.min(Math.max(-u, -h), u), l = -i * i + r * (r + 2 * h) + d)) : (r = l > 0 ? -u : u, i = Math.max(0, -(l * r + c)), l = -i * i + r * (r + 2 * h) + d), o && o.copy(this.direction).multiplyScalar(i).add(this.origin), a && a.copy(t).multiplyScalar(r).add(e), l
                }
            }(),
            isIntersectionSphere: function(e) {
                return this.distanceToPoint(e.center) <= e.radius
            },
            intersectSphere: function() {
                var e = new o.Vector3;
                return function(t, n) {
                    e.subVectors(t.center, this.origin);
                    var i = e.dot(this.direction),
                        r = e.dot(e) - i * i,
                        o = t.radius * t.radius;
                    return r > o ? null : (o = Math.sqrt(o - r), r = i - o, i += o, 0 > r && 0 > i ? null : 0 > r ? this.at(i, n) : this.at(r, n))
                }
            }(),
            isIntersectionPlane: function(e) {
                var t = e.distanceToPoint(this.origin);
                return 0 === t || 0 > e.normal.dot(this.direction) * t ? !0 : !1
            },
            distanceToPlane: function(e) {
                var t = e.normal.dot(this.direction);
                return 0 === t ? 0 === e.distanceToPoint(this.origin) ? 0 : null : (e = -(this.origin.dot(e.normal) + e.constant) / t, e >= 0 ? e : null)
            },
            intersectPlane: function(e, t) {
                var n = this.distanceToPlane(e);
                return null === n ? null : this.at(n, t)
            },
            isIntersectionBox: function() {
                var e = new o.Vector3;
                return function(t) {
                    return null !== this.intersectBox(t, e)
                }
            }(),
            intersectBox: function(e, t) {
                var n, i, r, o, a;
                i = 1 / this.direction.x, o = 1 / this.direction.y, a = 1 / this.direction.z;
                var s = this.origin;
                return i >= 0 ? (n = (e.min.x - s.x) * i, i *= e.max.x - s.x) : (n = (e.max.x - s.x) * i, i *= e.min.x - s.x), o >= 0 ? (r = (e.min.y - s.y) * o, o *= e.max.y - s.y) : (r = (e.max.y - s.y) * o, o *= e.min.y - s.y), n > o || r > i ? null : ((r > n || n !== n) && (n = r), (i > o || i !== i) && (i = o), a >= 0 ? (r = (e.min.z - s.z) * a, a *= e.max.z - s.z) : (r = (e.max.z - s.z) * a, a *= e.min.z - s.z), n > a || r > i ? null : ((r > n || n !== n) && (n = r), (i > a || i !== i) && (i = a), 0 > i ? null : this.at(n >= 0 ? n : i, t)))
            },
            intersectTriangle: function() {
                var e = new o.Vector3,
                    t = new o.Vector3,
                    n = new o.Vector3,
                    i = new o.Vector3;
                return function(r, o, a, s, u) {
                    if (t.subVectors(o, r), n.subVectors(a, r), i.crossVectors(t, n), o = this.direction.dot(i), o > 0) {
                        if (s) return null;
                        s = 1
                    } else {
                        if (!(0 > o)) return null;
                        s = -1, o = -o
                    }
                    return e.subVectors(this.origin, r), r = s * this.direction.dot(n.crossVectors(e, n)), 0 > r ? null : (a = s * this.direction.dot(t.cross(e)), 0 > a || r + a > o ? null : (r = -s * e.dot(i), 0 > r ? null : this.at(r / o, u)))
                }
            }(),
            applyMatrix4: function(e) {
                return this.direction.add(this.origin).applyMatrix4(e), this.origin.applyMatrix4(e), this.direction.sub(this.origin), this.direction.normalize(), this
            },
            equals: function(e) {
                return e.origin.equals(this.origin) && e.direction.equals(this.direction)
            }
        }, o.Sphere = function(e, t) {
            this.center = void 0 !== e ? e : new o.Vector3, this.radius = void 0 !== t ? t : 0
        }, o.Sphere.prototype = {
            constructor: o.Sphere,
            set: function(e, t) {
                return this.center.copy(e), this.radius = t, this
            },
            setFromPoints: function() {
                var e = new o.Box3;
                return function(t, n) {
                    var i = this.center;
                    void 0 !== n ? i.copy(n) : e.setFromPoints(t).center(i);
                    for (var r = 0, o = 0, a = t.length; a > o; o++) r = Math.max(r, i.distanceToSquared(t[o]));
                    return this.radius = Math.sqrt(r), this
                }
            }(),
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                return this.center.copy(e.center), this.radius = e.radius, this
            },
            empty: function() {
                return 0 >= this.radius
            },
            containsPoint: function(e) {
                return e.distanceToSquared(this.center) <= this.radius * this.radius
            },
            distanceToPoint: function(e) {
                return e.distanceTo(this.center) - this.radius
            },
            intersectsSphere: function(e) {
                var t = this.radius + e.radius;
                return e.center.distanceToSquared(this.center) <= t * t
            },
            clampPoint: function(e, t) {
                var n = this.center.distanceToSquared(e),
                    i = t || new o.Vector3;
                return i.copy(e), n > this.radius * this.radius && (i.sub(this.center).normalize(), i.multiplyScalar(this.radius).add(this.center)), i
            },
            getBoundingBox: function(e) {
                return e = e || new o.Box3, e.set(this.center, this.center), e.expandByScalar(this.radius), e
            },
            applyMatrix4: function(e) {
                return this.center.applyMatrix4(e), this.radius *= e.getMaxScaleOnAxis(), this
            },
            translate: function(e) {
                return this.center.add(e), this
            },
            equals: function(e) {
                return e.center.equals(this.center) && e.radius === this.radius
            }
        }, o.Frustum = function(e, t, n, i, r, a) {
            this.planes = [void 0 !== e ? e : new o.Plane, void 0 !== t ? t : new o.Plane, void 0 !== n ? n : new o.Plane, void 0 !== i ? i : new o.Plane, void 0 !== r ? r : new o.Plane, void 0 !== a ? a : new o.Plane]
        }, o.Frustum.prototype = {
            constructor: o.Frustum,
            set: function(e, t, n, i, r, o) {
                var a = this.planes;
                return a[0].copy(e), a[1].copy(t), a[2].copy(n), a[3].copy(i), a[4].copy(r), a[5].copy(o), this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                for (var t = this.planes, n = 0; 6 > n; n++) t[n].copy(e.planes[n]);
                return this
            },
            setFromMatrix: function(e) {
                var t = this.planes,
                    n = e.elements;
                e = n[0];
                var i = n[1],
                    r = n[2],
                    o = n[3],
                    a = n[4],
                    s = n[5],
                    u = n[6],
                    l = n[7],
                    c = n[8],
                    h = n[9],
                    d = n[10],
                    f = n[11],
                    p = n[12],
                    m = n[13],
                    v = n[14],
                    n = n[15];
                return t[0].setComponents(o - e, l - a, f - c, n - p).normalize(), t[1].setComponents(o + e, l + a, f + c, n + p).normalize(), t[2].setComponents(o + i, l + s, f + h, n + m).normalize(), t[3].setComponents(o - i, l - s, f - h, n - m).normalize(), t[4].setComponents(o - r, l - u, f - d, n - v).normalize(), t[5].setComponents(o + r, l + u, f + d, n + v).normalize(), this
            },
            intersectsObject: function() {
                var e = new o.Sphere;
                return function(t) {
                    var n = t.geometry;
                    return null === n.boundingSphere && n.computeBoundingSphere(), e.copy(n.boundingSphere), e.applyMatrix4(t.matrixWorld), this.intersectsSphere(e)
                }
            }(),
            intersectsSphere: function(e) {
                var t = this.planes,
                    n = e.center;
                e = -e.radius;
                for (var i = 0; 6 > i; i++)
                    if (t[i].distanceToPoint(n) < e) return !1;
                return !0
            },
            intersectsBox: function() {
                var e = new o.Vector3,
                    t = new o.Vector3;
                return function(n) {
                    for (var i = this.planes, r = 0; 6 > r; r++) {
                        var o = i[r];
                        e.x = 0 < o.normal.x ? n.min.x : n.max.x, t.x = 0 < o.normal.x ? n.max.x : n.min.x, e.y = 0 < o.normal.y ? n.min.y : n.max.y, t.y = 0 < o.normal.y ? n.max.y : n.min.y, e.z = 0 < o.normal.z ? n.min.z : n.max.z, t.z = 0 < o.normal.z ? n.max.z : n.min.z;
                        var a = o.distanceToPoint(e),
                            o = o.distanceToPoint(t);
                        if (0 > a && 0 > o) return !1
                    }
                    return !0
                }
            }(),
            containsPoint: function(e) {
                for (var t = this.planes, n = 0; 6 > n; n++)
                    if (0 > t[n].distanceToPoint(e)) return !1;
                return !0
            }
        }, o.Plane = function(e, t) {
            this.normal = void 0 !== e ? e : new o.Vector3(1, 0, 0), this.constant = void 0 !== t ? t : 0
        }, o.Plane.prototype = {
            constructor: o.Plane,
            set: function(e, t) {
                return this.normal.copy(e), this.constant = t, this
            },
            setComponents: function(e, t, n, i) {
                return this.normal.set(e, t, n), this.constant = i, this
            },
            setFromNormalAndCoplanarPoint: function(e, t) {
                return this.normal.copy(e), this.constant = -t.dot(this.normal), this
            },
            setFromCoplanarPoints: function() {
                var e = new o.Vector3,
                    t = new o.Vector3;
                return function(n, i, r) {
                    return i = e.subVectors(r, i).cross(t.subVectors(n, i)).normalize(), this.setFromNormalAndCoplanarPoint(i, n), this
                }
            }(),
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                return this.normal.copy(e.normal), this.constant = e.constant, this
            },
            normalize: function() {
                var e = 1 / this.normal.length();
                return this.normal.multiplyScalar(e), this.constant *= e, this
            },
            negate: function() {
                return this.constant *= -1, this.normal.negate(), this
            },
            distanceToPoint: function(e) {
                return this.normal.dot(e) + this.constant
            },
            distanceToSphere: function(e) {
                return this.distanceToPoint(e.center) - e.radius
            },
            projectPoint: function(e, t) {
                return this.orthoPoint(e, t).sub(e).negate()
            },
            orthoPoint: function(e, t) {
                var n = this.distanceToPoint(e);
                return (t || new o.Vector3).copy(this.normal).multiplyScalar(n)
            },
            isIntersectionLine: function(e) {
                var t = this.distanceToPoint(e.start);
                return e = this.distanceToPoint(e.end), 0 > t && e > 0 || 0 > e && t > 0
            },
            intersectLine: function() {
                var e = new o.Vector3;
                return function(t, n) {
                    var i = n || new o.Vector3,
                        r = t.delta(e),
                        a = this.normal.dot(r);
                    return 0 !== a ? (a = -(t.start.dot(this.normal) + this.constant) / a, 0 > a || a > 1 ? void 0 : i.copy(r).multiplyScalar(a).add(t.start)) : 0 === this.distanceToPoint(t.start) ? i.copy(t.start) : void 0
                }
            }(),
            coplanarPoint: function(e) {
                return (e || new o.Vector3).copy(this.normal).multiplyScalar(-this.constant)
            },
            applyMatrix4: function() {
                var e = new o.Vector3,
                    t = new o.Vector3,
                    n = new o.Matrix3;
                return function(i, r) {
                    var o = r || n.getNormalMatrix(i),
                        o = e.copy(this.normal).applyMatrix3(o),
                        a = this.coplanarPoint(t);
                    return a.applyMatrix4(i), this.setFromNormalAndCoplanarPoint(o, a), this
                }
            }(),
            translate: function(e) {
                return this.constant -= e.dot(this.normal), this
            },
            equals: function(e) {
                return e.normal.equals(this.normal) && e.constant === this.constant
            }
        }, o.Math = {
            generateUUID: function() {
                var e, t = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),
                    n = Array(36),
                    i = 0;
                return function() {
                    for (var r = 0; 36 > r; r++) 8 === r || 13 === r || 18 === r || 23 === r ? n[r] = "-" : 14 === r ? n[r] = "4" : (2 >= i && (i = 33554432 + 16777216 * Math.random() | 0), e = 15 & i, i >>= 4, n[r] = t[19 === r ? 3 & e | 8 : e]);
                    return n.join("")
                }
            }(),
            clamp: function(e, t, n) {
                return Math.max(t, Math.min(n, e))
            },
            euclideanModulo: function(e, t) {
                return (e % t + t) % t
            },
            mapLinear: function(e, t, n, i, r) {
                return i + (e - t) * (r - i) / (n - t)
            },
            smoothstep: function(e, t, n) {
                return t >= e ? 0 : e >= n ? 1 : (e = (e - t) / (n - t), e * e * (3 - 2 * e))
            },
            smootherstep: function(e, t, n) {
                return t >= e ? 0 : e >= n ? 1 : (e = (e - t) / (n - t), e * e * e * (e * (6 * e - 15) + 10))
            },
            random16: function() {
                return (65280 * Math.random() + 255 * Math.random()) / 65535
            },
            randInt: function(e, t) {
                return e + Math.floor(Math.random() * (t - e + 1))
            },
            randFloat: function(e, t) {
                return e + Math.random() * (t - e)
            },
            randFloatSpread: function(e) {
                return e * (.5 - Math.random())
            },
            degToRad: function() {
                var e = Math.PI / 180;
                return function(t) {
                    return t * e
                }
            }(),
            radToDeg: function() {
                var e = 180 / Math.PI;
                return function(t) {
                    return t * e
                }
            }(),
            isPowerOfTwo: function(e) {
                return 0 === (e & e - 1) && 0 !== e
            },
            nearestPowerOfTwo: function(e) {
                return Math.pow(2, Math.round(Math.log(e) / Math.LN2))
            },
            nextPowerOfTwo: function(e) {
                return e--, e |= e >> 1, e |= e >> 2, e |= e >> 4, e |= e >> 8, e |= e >> 16, e++, e
            }
        }, o.Spline = function(e) {
            function t(e, t, n, i, r, o, a) {
                return e = .5 * (n - e), i = .5 * (i - t), (2 * (t - n) + e + i) * a + (-3 * (t - n) - 2 * e - i) * o + e * r + t
            }
            this.points = e;
            var n, i, r, a, s, u, l, c, h, d = [],
                f = {
                    x: 0,
                    y: 0,
                    z: 0
                };
            this.initFromArray = function(e) {
                this.points = [];
                for (var t = 0; t < e.length; t++) this.points[t] = {
                    x: e[t][0],
                    y: e[t][1],
                    z: e[t][2]
                }
            }, this.getPoint = function(e) {
                return n = (this.points.length - 1) * e, i = Math.floor(n), r = n - i, d[0] = 0 === i ? i : i - 1, d[1] = i, d[2] = i > this.points.length - 2 ? this.points.length - 1 : i + 1, d[3] = i > this.points.length - 3 ? this.points.length - 1 : i + 2, u = this.points[d[0]], l = this.points[d[1]], c = this.points[d[2]], h = this.points[d[3]], a = r * r, s = r * a, f.x = t(u.x, l.x, c.x, h.x, r, a, s), f.y = t(u.y, l.y, c.y, h.y, r, a, s), f.z = t(u.z, l.z, c.z, h.z, r, a, s), f
            }, this.getControlPointsArray = function() {
                var e, t, n = this.points.length,
                    i = [];
                for (e = 0; n > e; e++) t = this.points[e], i[e] = [t.x, t.y, t.z];
                return i
            }, this.getLength = function(e) {
                var t, n, i, r = t = t = 0,
                    a = new o.Vector3,
                    s = new o.Vector3,
                    u = [],
                    l = 0;
                for (u[0] = 0, e || (e = 100), n = this.points.length * e, a.copy(this.points[0]), e = 1; n > e; e++) t = e / n, i = this.getPoint(t), s.copy(i), l += s.distanceTo(a), a.copy(i), t *= this.points.length - 1, t = Math.floor(t), t !== r && (u[t] = l, r = t);
                return u[u.length] = l, {
                    chunks: u,
                    total: l
                }
            }, this.reparametrizeByArcLength = function(e) {
                var t, n, i, r, a, s, u = [],
                    l = new o.Vector3,
                    c = this.getLength();
                for (u.push(l.copy(this.points[0]).clone()), t = 1; t < this.points.length; t++) {
                    for (n = c.chunks[t] - c.chunks[t - 1], s = Math.ceil(e * n / c.total), r = (t - 1) / (this.points.length - 1), a = t / (this.points.length - 1), n = 1; s - 1 > n; n++) i = r + 1 / s * n * (a - r), i = this.getPoint(i), u.push(l.copy(i).clone());
                    u.push(l.copy(this.points[t]).clone())
                }
                this.points = u
            }
        }, o.Triangle = function(e, t, n) {
            this.a = void 0 !== e ? e : new o.Vector3, this.b = void 0 !== t ? t : new o.Vector3, this.c = void 0 !== n ? n : new o.Vector3
        }, o.Triangle.normal = function() {
            var e = new o.Vector3;
            return function(t, n, i, r) {
                return r = r || new o.Vector3, r.subVectors(i, n), e.subVectors(t, n), r.cross(e), t = r.lengthSq(), t > 0 ? r.multiplyScalar(1 / Math.sqrt(t)) : r.set(0, 0, 0)
            }
        }(), o.Triangle.barycoordFromPoint = function() {
            var e = new o.Vector3,
                t = new o.Vector3,
                n = new o.Vector3;
            return function(i, r, a, s, u) {
                e.subVectors(s, r), t.subVectors(a, r), n.subVectors(i, r), i = e.dot(e), r = e.dot(t), a = e.dot(n);
                var l = t.dot(t);
                s = t.dot(n);
                var c = i * l - r * r;
                return u = u || new o.Vector3, 0 === c ? u.set(-2, -1, -1) : (c = 1 / c, l = (l * a - r * s) * c, i = (i * s - r * a) * c, u.set(1 - l - i, i, l))
            }
        }(), o.Triangle.containsPoint = function() {
            var e = new o.Vector3;
            return function(t, n, i, r) {
                return t = o.Triangle.barycoordFromPoint(t, n, i, r, e), 0 <= t.x && 0 <= t.y && 1 >= t.x + t.y
            }
        }(), o.Triangle.prototype = {
            constructor: o.Triangle,
            set: function(e, t, n) {
                return this.a.copy(e), this.b.copy(t), this.c.copy(n), this
            },
            setFromPointsAndIndices: function(e, t, n, i) {
                return this.a.copy(e[t]), this.b.copy(e[n]), this.c.copy(e[i]), this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                return this.a.copy(e.a), this.b.copy(e.b), this.c.copy(e.c), this
            },
            area: function() {
                var e = new o.Vector3,
                    t = new o.Vector3;
                return function() {
                    return e.subVectors(this.c, this.b), t.subVectors(this.a, this.b), .5 * e.cross(t).length()
                }
            }(),
            midpoint: function(e) {
                return (e || new o.Vector3).addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
            },
            normal: function(e) {
                return o.Triangle.normal(this.a, this.b, this.c, e)
            },
            plane: function(e) {
                return (e || new o.Plane).setFromCoplanarPoints(this.a, this.b, this.c)
            },
            barycoordFromPoint: function(e, t) {
                return o.Triangle.barycoordFromPoint(e, this.a, this.b, this.c, t)
            },
            containsPoint: function(e) {
                return o.Triangle.containsPoint(e, this.a, this.b, this.c)
            },
            equals: function(e) {
                return e.a.equals(this.a) && e.b.equals(this.b) && e.c.equals(this.c)
            }
        }, o.Channels = function() {
            this.mask = 1
        }, o.Channels.prototype = {
            constructor: o.Channels,
            set: function(e) {
                this.mask = 1 << e
            },
            enable: function(e) {
                this.mask |= 1 << e
            },
            toggle: function(e) {
                this.mask ^= 1 << e
            },
            disable: function(e) {
                this.mask &= ~(1 << e)
            }
        }, o.Clock = function(e) {
            this.autoStart = void 0 !== e ? e : !0, this.elapsedTime = this.oldTime = this.startTime = 0, this.running = !1
        }, o.Clock.prototype = {
            constructor: o.Clock,
            start: function() {
                this.oldTime = this.startTime = self.performance.now(), this.running = !0
            },
            stop: function() {
                this.getElapsedTime(), this.running = !1
            },
            getElapsedTime: function() {
                return this.getDelta(), this.elapsedTime
            },
            getDelta: function() {
                var e = 0;
                if (this.autoStart && !this.running && this.start(), this.running) {
                    var t = self.performance.now(),
                        e = .001 * (t - this.oldTime);
                    this.oldTime = t, this.elapsedTime += e
                }
                return e
            }
        }, o.EventDispatcher = function() {}, o.EventDispatcher.prototype = {
            constructor: o.EventDispatcher,
            apply: function(e) {
                e.addEventListener = o.EventDispatcher.prototype.addEventListener, e.hasEventListener = o.EventDispatcher.prototype.hasEventListener, e.removeEventListener = o.EventDispatcher.prototype.removeEventListener, e.dispatchEvent = o.EventDispatcher.prototype.dispatchEvent
            },
            addEventListener: function(e, t) {
                void 0 === this._listeners && (this._listeners = {});
                var n = this._listeners;
                void 0 === n[e] && (n[e] = []), -1 === n[e].indexOf(t) && n[e].push(t)
            },
            hasEventListener: function(e, t) {
                if (void 0 === this._listeners) return !1;
                var n = this._listeners;
                return void 0 !== n[e] && -1 !== n[e].indexOf(t) ? !0 : !1
            },
            removeEventListener: function(e, t) {
                if (void 0 !== this._listeners) {
                    var n = this._listeners[e];
                    if (void 0 !== n) {
                        var i = n.indexOf(t); - 1 !== i && n.splice(i, 1)
                    }
                }
            },
            dispatchEvent: function(e) {
                if (void 0 !== this._listeners) {
                    var t = this._listeners[e.type];
                    if (void 0 !== t) {
                        e.target = this;
                        for (var n = [], i = t.length, r = 0; i > r; r++) n[r] = t[r];
                        for (r = 0; i > r; r++) n[r].call(this, e)
                    }
                }
            }
        },
        function(e) {
            function t(e, t) {
                return e.distance - t.distance
            }

            function n(e, t, i, r) {
                if (!1 !== e.visible && (e.raycast(t, i), !0 === r)) {
                    e = e.children, r = 0;
                    for (var o = e.length; o > r; r++) n(e[r], t, i, !0)
                }
            }
            e.Raycaster = function(t, n, i, r) {
                this.ray = new e.Ray(t, n), this.near = i || 0, this.far = r || 1 / 0, this.params = {
                    Mesh: {},
                    Line: {},
                    LOD: {},
                    Points: {
                        threshold: 1
                    },
                    Sprite: {}
                }, Object.defineProperties(this.params, {
                    PointCloud: {
                        get: function() {
                            return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."), this.Points
                        }
                    }
                })
            }, e.Raycaster.prototype = {
                constructor: e.Raycaster,
                linePrecision: 1,
                set: function(e, t) {
                    this.ray.set(e, t)
                },
                setFromCamera: function(t, n) {
                    n instanceof e.PerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(n.matrixWorld), this.ray.direction.set(t.x, t.y, .5).unproject(n).sub(this.ray.origin).normalize()) : n instanceof e.OrthographicCamera ? (this.ray.origin.set(t.x, t.y, -1).unproject(n), this.ray.direction.set(0, 0, -1).transformDirection(n.matrixWorld)) : console.error("THREE.Raycaster: Unsupported camera type.")
                },
                intersectObject: function(e, i) {
                    var r = [];
                    return n(e, this, r, i), r.sort(t), r
                },
                intersectObjects: function(e, i) {
                    var r = [];
                    if (!1 === Array.isArray(e)) return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."), r;
                    for (var o = 0, a = e.length; a > o; o++) n(e[o], this, r, i);
                    return r.sort(t), r
                }
            }
        }(o), o.Object3D = function() {
            Object.defineProperty(this, "id", {
                value: o.Object3DIdCount++
            }), this.uuid = o.Math.generateUUID(), this.name = "", this.type = "Object3D", this.parent = null, this.channels = new o.Channels, this.children = [], this.up = o.Object3D.DefaultUp.clone();
            var e = new o.Vector3,
                t = new o.Euler,
                n = new o.Quaternion,
                i = new o.Vector3(1, 1, 1);
            t.onChange(function() {
                n.setFromEuler(t, !1)
            }), n.onChange(function() {
                t.setFromQuaternion(n, void 0, !1)
            }), Object.defineProperties(this, {
                position: {
                    enumerable: !0,
                    value: e
                },
                rotation: {
                    enumerable: !0,
                    value: t
                },
                quaternion: {
                    enumerable: !0,
                    value: n
                },
                scale: {
                    enumerable: !0,
                    value: i
                },
                modelViewMatrix: {
                    value: new o.Matrix4
                },
                normalMatrix: {
                    value: new o.Matrix3
                }
            }), this.rotationAutoUpdate = !0, this.matrix = new o.Matrix4, this.matrixWorld = new o.Matrix4, this.matrixAutoUpdate = o.Object3D.DefaultMatrixAutoUpdate, this.matrixWorldNeedsUpdate = !1, this.visible = !0, this.receiveShadow = this.castShadow = !1, this.frustumCulled = !0, this.renderOrder = 0, this.userData = {}
        }, o.Object3D.DefaultUp = new o.Vector3(0, 1, 0), o.Object3D.DefaultMatrixAutoUpdate = !0, o.Object3D.prototype = {
            constructor: o.Object3D,
            get eulerOrder() {
                return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."), this.rotation.order
            },
            set eulerOrder(e) {
                console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."), this.rotation.order = e
            },
            get useQuaternion() {
                console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
            },
            set useQuaternion(e) {
                console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
            },
            set renderDepth(e) {
                console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")
            },
            applyMatrix: function(e) {
                this.matrix.multiplyMatrices(e, this.matrix), this.matrix.decompose(this.position, this.quaternion, this.scale)
            },
            setRotationFromAxisAngle: function(e, t) {
                this.quaternion.setFromAxisAngle(e, t)
            },
            setRotationFromEuler: function(e) {
                this.quaternion.setFromEuler(e, !0)
            },
            setRotationFromMatrix: function(e) {
                this.quaternion.setFromRotationMatrix(e)
            },
            setRotationFromQuaternion: function(e) {
                this.quaternion.copy(e)
            },
            rotateOnAxis: function() {
                var e = new o.Quaternion;
                return function(t, n) {
                    return e.setFromAxisAngle(t, n), this.quaternion.multiply(e), this
                }
            }(),
            rotateX: function() {
                var e = new o.Vector3(1, 0, 0);
                return function(t) {
                    return this.rotateOnAxis(e, t)
                }
            }(),
            rotateY: function() {
                var e = new o.Vector3(0, 1, 0);
                return function(t) {
                    return this.rotateOnAxis(e, t)
                }
            }(),
            rotateZ: function() {
                var e = new o.Vector3(0, 0, 1);
                return function(t) {
                    return this.rotateOnAxis(e, t)
                }
            }(),
            translateOnAxis: function() {
                var e = new o.Vector3;
                return function(t, n) {
                    return e.copy(t).applyQuaternion(this.quaternion), this.position.add(e.multiplyScalar(n)), this
                }
            }(),
            translate: function(e, t) {
                return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."), this.translateOnAxis(t, e)
            },
            translateX: function() {
                var e = new o.Vector3(1, 0, 0);
                return function(t) {
                    return this.translateOnAxis(e, t)
                }
            }(),
            translateY: function() {
                var e = new o.Vector3(0, 1, 0);
                return function(t) {
                    return this.translateOnAxis(e, t)
                }
            }(),
            translateZ: function() {
                var e = new o.Vector3(0, 0, 1);
                return function(t) {
                    return this.translateOnAxis(e, t)
                }
            }(),
            localToWorld: function(e) {
                return e.applyMatrix4(this.matrixWorld)
            },
            worldToLocal: function() {
                var e = new o.Matrix4;
                return function(t) {
                    return t.applyMatrix4(e.getInverse(this.matrixWorld))
                }
            }(),
            lookAt: function() {
                var e = new o.Matrix4;
                return function(t) {
                    e.lookAt(t, this.position, this.up), this.quaternion.setFromRotationMatrix(e)
                }
            }(),
            add: function(e) {
                if (1 < arguments.length) {
                    for (var t = 0; t < arguments.length; t++) this.add(arguments[t]);
                    return this
                }
                return e === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", e), this) : (e instanceof o.Object3D ? (null !== e.parent && e.parent.remove(e), e.parent = this, e.dispatchEvent({
                    type: "added"
                }), this.children.push(e)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e), this)
            },
            remove: function(e) {
                if (1 < arguments.length)
                    for (var t = 0; t < arguments.length; t++) this.remove(arguments[t]);
                t = this.children.indexOf(e), -1 !== t && (e.parent = null, e.dispatchEvent({
                    type: "removed"
                }), this.children.splice(t, 1))
            },
            getChildByName: function(e) {
                return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."), this.getObjectByName(e)
            },
            getObjectById: function(e) {
                return this.getObjectByProperty("id", e)
            },
            getObjectByName: function(e) {
                return this.getObjectByProperty("name", e)
            },
            getObjectByProperty: function(e, t) {
                if (this[e] === t) return this;
                for (var n = 0, i = this.children.length; i > n; n++) {
                    var r = this.children[n].getObjectByProperty(e, t);
                    if (void 0 !== r) return r
                }
            },
            getWorldPosition: function(e) {
                return e = e || new o.Vector3, this.updateMatrixWorld(!0), e.setFromMatrixPosition(this.matrixWorld)
            },
            getWorldQuaternion: function() {
                var e = new o.Vector3,
                    t = new o.Vector3;
                return function(n) {
                    return n = n || new o.Quaternion, this.updateMatrixWorld(!0), this.matrixWorld.decompose(e, n, t), n
                }
            }(),
            getWorldRotation: function() {
                var e = new o.Quaternion;
                return function(t) {
                    return t = t || new o.Euler, this.getWorldQuaternion(e), t.setFromQuaternion(e, this.rotation.order, !1)
                }
            }(),
            getWorldScale: function() {
                var e = new o.Vector3,
                    t = new o.Quaternion;
                return function(n) {
                    return n = n || new o.Vector3, this.updateMatrixWorld(!0), this.matrixWorld.decompose(e, t, n), n
                }
            }(),
            getWorldDirection: function() {
                var e = new o.Quaternion;
                return function(t) {
                    return t = t || new o.Vector3, this.getWorldQuaternion(e), t.set(0, 0, 1).applyQuaternion(e)
                }
            }(),
            raycast: function() {},
            traverse: function(e) {
                e(this);
                for (var t = this.children, n = 0, i = t.length; i > n; n++) t[n].traverse(e)
            },
            traverseVisible: function(e) {
                if (!1 !== this.visible) {
                    e(this);
                    for (var t = this.children, n = 0, i = t.length; i > n; n++) t[n].traverseVisible(e)
                }
            },
            traverseAncestors: function(e) {
                var t = this.parent;
                null !== t && (e(t), t.traverseAncestors(e))
            },
            updateMatrix: function() {
                this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0
            },
            updateMatrixWorld: function(e) {
                !0 === this.matrixAutoUpdate && this.updateMatrix(), (!0 === this.matrixWorldNeedsUpdate || !0 === e) && (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = !1, e = !0);
                for (var t = 0, n = this.children.length; n > t; t++) this.children[t].updateMatrixWorld(e)
            },
            toJSON: function(e) {
                function t(e) {
                    var t, n = [];
                    for (t in e) {
                        var i = e[t];
                        delete i.metadata, n.push(i)
                    }
                    return n
                }
                var n = void 0 === e,
                    i = {};
                n && (e = {
                    geometries: {},
                    materials: {},
                    textures: {},
                    images: {}
                }, i.metadata = {
                    version: 4.4,
                    type: "Object",
                    generator: "Object3D.toJSON"
                });
                var r = {};
                if (r.uuid = this.uuid, r.type = this.type, "" !== this.name && (r.name = this.name), "{}" !== JSON.stringify(this.userData) && (r.userData = this.userData), !0 === this.castShadow && (r.castShadow = !0), !0 === this.receiveShadow && (r.receiveShadow = !0), !1 === this.visible && (r.visible = !1), r.matrix = this.matrix.toArray(), void 0 !== this.geometry && (void 0 === e.geometries[this.geometry.uuid] && (e.geometries[this.geometry.uuid] = this.geometry.toJSON(e)), r.geometry = this.geometry.uuid), void 0 !== this.material && (void 0 === e.materials[this.material.uuid] && (e.materials[this.material.uuid] = this.material.toJSON(e)), r.material = this.material.uuid), 0 < this.children.length) {
                    r.children = [];
                    for (var o = 0; o < this.children.length; o++) r.children.push(this.children[o].toJSON(e).object)
                }
                if (n) {
                    var n = t(e.geometries),
                        o = t(e.materials),
                        a = t(e.textures);
                    e = t(e.images), 0 < n.length && (i.geometries = n), 0 < o.length && (i.materials = o), 0 < a.length && (i.textures = a), 0 < e.length && (i.images = e)
                }
                return i.object = r, i
            },
            clone: function(e) {
                return (new this.constructor).copy(this, e)
            },
            copy: function(e, t) {
                if (void 0 === t && (t = !0), this.name = e.name, this.up.copy(e.up), this.position.copy(e.position), this.quaternion.copy(e.quaternion), this.scale.copy(e.scale), this.rotationAutoUpdate = e.rotationAutoUpdate, this.matrix.copy(e.matrix), this.matrixWorld.copy(e.matrixWorld), this.matrixAutoUpdate = e.matrixAutoUpdate, this.matrixWorldNeedsUpdate = e.matrixWorldNeedsUpdate, this.visible = e.visible, this.castShadow = e.castShadow, this.receiveShadow = e.receiveShadow, this.frustumCulled = e.frustumCulled, this.renderOrder = e.renderOrder, this.userData = JSON.parse(JSON.stringify(e.userData)), !0 === t)
                    for (var n = 0; n < e.children.length; n++) this.add(e.children[n].clone());
                return this
            }
        }, o.EventDispatcher.prototype.apply(o.Object3D.prototype), o.Object3DIdCount = 0, o.Face3 = function(e, t, n, i, r, a) {
            this.a = e, this.b = t, this.c = n, this.normal = i instanceof o.Vector3 ? i : new o.Vector3, this.vertexNormals = Array.isArray(i) ? i : [], this.color = r instanceof o.Color ? r : new o.Color, this.vertexColors = Array.isArray(r) ? r : [], this.materialIndex = void 0 !== a ? a : 0
        }, o.Face3.prototype = {
            constructor: o.Face3,
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                this.a = e.a, this.b = e.b, this.c = e.c, this.normal.copy(e.normal), this.color.copy(e.color), this.materialIndex = e.materialIndex;
                for (var t = 0, n = e.vertexNormals.length; n > t; t++) this.vertexNormals[t] = e.vertexNormals[t].clone();
                for (t = 0, n = e.vertexColors.length; n > t; t++) this.vertexColors[t] = e.vertexColors[t].clone();
                return this
            }
        }, o.Face4 = function(e, t, n, i, r, a, s) {
            return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."), new o.Face3(e, t, n, r, a, s)
        }, o.BufferAttribute = function(e, t) {
            this.uuid = o.Math.generateUUID(), this.array = e, this.itemSize = t, this.dynamic = !1, this.updateRange = {
                offset: 0,
                count: -1
            }, this.version = 0
        }, o.BufferAttribute.prototype = {
            constructor: o.BufferAttribute,
            get length() {
                return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."), this.array.length
            },
            get count() {
                return this.array.length / this.itemSize
            },
            set needsUpdate(e) {
                !0 === e && this.version++
            },
            setDynamic: function(e) {
                return this.dynamic = e, this
            },
            copy: function(e) {
                return this.array = new e.array.constructor(e.array), this.itemSize = e.itemSize, this.dynamic = e.dynamic, this
            },
            copyAt: function(e, t, n) {
                e *= this.itemSize, n *= t.itemSize;
                for (var i = 0, r = this.itemSize; r > i; i++) this.array[e + i] = t.array[n + i];
                return this
            },
            copyArray: function(e) {
                return this.array.set(e), this
            },
            copyColorsArray: function(e) {
                for (var t = this.array, n = 0, i = 0, r = e.length; r > i; i++) {
                    var a = e[i];
                    void 0 === a && (console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined", i), a = new o.Color), t[n++] = a.r, t[n++] = a.g, t[n++] = a.b
                }
                return this
            },
            copyIndicesArray: function(e) {
                for (var t = this.array, n = 0, i = 0, r = e.length; r > i; i++) {
                    var o = e[i];
                    t[n++] = o.a, t[n++] = o.b, t[n++] = o.c
                }
                return this
            },
            copyVector2sArray: function(e) {
                for (var t = this.array, n = 0, i = 0, r = e.length; r > i; i++) {
                    var a = e[i];
                    void 0 === a && (console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined", i), a = new o.Vector2), t[n++] = a.x, t[n++] = a.y
                }
                return this
            },
            copyVector3sArray: function(e) {
                for (var t = this.array, n = 0, i = 0, r = e.length; r > i; i++) {
                    var a = e[i];
                    void 0 === a && (console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined", i), a = new o.Vector3), t[n++] = a.x, t[n++] = a.y, t[n++] = a.z
                }
                return this
            },
            copyVector4sArray: function(e) {
                for (var t = this.array, n = 0, i = 0, r = e.length; r > i; i++) {
                    var a = e[i];
                    void 0 === a && (console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined", i), a = new o.Vector4), t[n++] = a.x, t[n++] = a.y, t[n++] = a.z, t[n++] = a.w
                }
                return this
            },
            set: function(e, t) {
                return void 0 === t && (t = 0), this.array.set(e, t), this
            },
            getX: function(e) {
                return this.array[e * this.itemSize]
            },
            setX: function(e, t) {
                return this.array[e * this.itemSize] = t, this
            },
            getY: function(e) {
                return this.array[e * this.itemSize + 1]
            },
            setY: function(e, t) {
                return this.array[e * this.itemSize + 1] = t, this
            },
            getZ: function(e) {
                return this.array[e * this.itemSize + 2]
            },
            setZ: function(e, t) {
                return this.array[e * this.itemSize + 2] = t, this
            },
            getW: function(e) {
                return this.array[e * this.itemSize + 3]
            },
            setW: function(e, t) {
                return this.array[e * this.itemSize + 3] = t, this
            },
            setXY: function(e, t, n) {
                return e *= this.itemSize, this.array[e + 0] = t, this.array[e + 1] = n, this
            },
            setXYZ: function(e, t, n, i) {
                return e *= this.itemSize, this.array[e + 0] = t, this.array[e + 1] = n, this.array[e + 2] = i, this
            },
            setXYZW: function(e, t, n, i, r) {
                return e *= this.itemSize, this.array[e + 0] = t, this.array[e + 1] = n, this.array[e + 2] = i, this.array[e + 3] = r, this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            }
        }, o.Int8Attribute = function(e, t) {
            return new o.BufferAttribute(new Int8Array(e), t)
        }, o.Uint8Attribute = function(e, t) {
            return new o.BufferAttribute(new Uint8Array(e), t)
        }, o.Uint8ClampedAttribute = function(e, t) {
            return new o.BufferAttribute(new Uint8ClampedArray(e), t)
        }, o.Int16Attribute = function(e, t) {
            return new o.BufferAttribute(new Int16Array(e), t)
        }, o.Uint16Attribute = function(e, t) {
            return new o.BufferAttribute(new Uint16Array(e), t)
        }, o.Int32Attribute = function(e, t) {
            return new o.BufferAttribute(new Int32Array(e), t)
        }, o.Uint32Attribute = function(e, t) {
            return new o.BufferAttribute(new Uint32Array(e), t)
        }, o.Float32Attribute = function(e, t) {
            return new o.BufferAttribute(new Float32Array(e), t)
        }, o.Float64Attribute = function(e, t) {
            return new o.BufferAttribute(new Float64Array(e), t)
        }, o.DynamicBufferAttribute = function(e, t) {
            return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."), new o.BufferAttribute(e, t).setDynamic(!0)
        }, o.InstancedBufferAttribute = function(e, t, n) {
            o.BufferAttribute.call(this, e, t), this.meshPerAttribute = n || 1
        }, o.InstancedBufferAttribute.prototype = Object.create(o.BufferAttribute.prototype), o.InstancedBufferAttribute.prototype.constructor = o.InstancedBufferAttribute, o.InstancedBufferAttribute.prototype.copy = function(e) {
            return o.BufferAttribute.prototype.copy.call(this, e), this.meshPerAttribute = e.meshPerAttribute, this
        }, o.InterleavedBuffer = function(e, t) {
            this.uuid = o.Math.generateUUID(), this.array = e, this.stride = t, this.dynamic = !1, this.updateRange = {
                offset: 0,
                count: -1
            }, this.version = 0
        }, o.InterleavedBuffer.prototype = {
            constructor: o.InterleavedBuffer,
            get length() {
                return this.array.length
            },
            get count() {
                return this.array.length / this.stride
            },
            set needsUpdate(e) {
                !0 === e && this.version++
            },
            setDynamic: function(e) {
                return this.dynamic = e, this
            },
            copy: function(e) {
                this.array = new e.array.constructor(e.array), this.stride = e.stride, this.dynamic = e.dynamic
            },
            copyAt: function(e, t, n) {
                e *= this.stride, n *= t.stride;
                for (var i = 0, r = this.stride; r > i; i++) this.array[e + i] = t.array[n + i];
                return this
            },
            set: function(e, t) {
                return void 0 === t && (t = 0), this.array.set(e, t), this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            }
        }, o.InstancedInterleavedBuffer = function(e, t, n) {
            o.InterleavedBuffer.call(this, e, t), this.meshPerAttribute = n || 1
        }, o.InstancedInterleavedBuffer.prototype = Object.create(o.InterleavedBuffer.prototype), o.InstancedInterleavedBuffer.prototype.constructor = o.InstancedInterleavedBuffer, o.InstancedInterleavedBuffer.prototype.copy = function(e) {
            return o.InterleavedBuffer.prototype.copy.call(this, e), this.meshPerAttribute = e.meshPerAttribute, this
        }, o.InterleavedBufferAttribute = function(e, t, n) {
            this.uuid = o.Math.generateUUID(), this.data = e, this.itemSize = t, this.offset = n
        }, o.InterleavedBufferAttribute.prototype = {
            constructor: o.InterleavedBufferAttribute,
            get length() {
                return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."), this.array.length
            },
            get count() {
                return this.data.array.length / this.data.stride
            },
            setX: function(e, t) {
                return this.data.array[e * this.data.stride + this.offset] = t, this
            },
            setY: function(e, t) {
                return this.data.array[e * this.data.stride + this.offset + 1] = t, this
            },
            setZ: function(e, t) {
                return this.data.array[e * this.data.stride + this.offset + 2] = t, this
            },
            setW: function(e, t) {
                return this.data.array[e * this.data.stride + this.offset + 3] = t, this
            },
            getX: function(e) {
                return this.data.array[e * this.data.stride + this.offset]
            },
            getY: function(e) {
                return this.data.array[e * this.data.stride + this.offset + 1]
            },
            getZ: function(e) {
                return this.data.array[e * this.data.stride + this.offset + 2]
            },
            getW: function(e) {
                return this.data.array[e * this.data.stride + this.offset + 3]
            },
            setXY: function(e, t, n) {
                return e = e * this.data.stride + this.offset, this.data.array[e + 0] = t, this.data.array[e + 1] = n, this
            },
            setXYZ: function(e, t, n, i) {
                return e = e * this.data.stride + this.offset, this.data.array[e + 0] = t, this.data.array[e + 1] = n, this.data.array[e + 2] = i, this
            },
            setXYZW: function(e, t, n, i, r) {
                return e = e * this.data.stride + this.offset, this.data.array[e + 0] = t, this.data.array[e + 1] = n, this.data.array[e + 2] = i, this.data.array[e + 3] = r, this
            }
        }, o.Geometry = function() {
            Object.defineProperty(this, "id", {
                value: o.GeometryIdCount++
            }), this.uuid = o.Math.generateUUID(), this.name = "", this.type = "Geometry", this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [
                []
            ], this.morphTargets = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingSphere = this.boundingBox = null, this.groupsNeedUpdate = this.lineDistancesNeedUpdate = this.colorsNeedUpdate = this.normalsNeedUpdate = this.uvsNeedUpdate = this.elementsNeedUpdate = this.verticesNeedUpdate = !1
        }, o.Geometry.prototype = {
            constructor: o.Geometry,
            applyMatrix: function(e) {
                for (var t = (new o.Matrix3).getNormalMatrix(e), n = 0, i = this.vertices.length; i > n; n++) this.vertices[n].applyMatrix4(e);
                for (n = 0, i = this.faces.length; i > n; n++) {
                    e = this.faces[n], e.normal.applyMatrix3(t).normalize();
                    for (var r = 0, a = e.vertexNormals.length; a > r; r++) e.vertexNormals[r].applyMatrix3(t).normalize()
                }
                null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this.normalsNeedUpdate = this.verticesNeedUpdate = !0
            },
            rotateX: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new o.Matrix4), e.makeRotationX(t), this.applyMatrix(e), this
                }
            }(),
            rotateY: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new o.Matrix4), e.makeRotationY(t), this.applyMatrix(e), this
                }
            }(),
            rotateZ: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new o.Matrix4), e.makeRotationZ(t), this.applyMatrix(e), this
                }
            }(),
            translate: function() {
                var e;
                return function(t, n, i) {
                    return void 0 === e && (e = new o.Matrix4), e.makeTranslation(t, n, i), this.applyMatrix(e), this
                }
            }(),
            scale: function() {
                var e;
                return function(t, n, i) {
                    return void 0 === e && (e = new o.Matrix4), e.makeScale(t, n, i), this.applyMatrix(e), this
                }
            }(),
            lookAt: function() {
                var e;
                return function(t) {
                    void 0 === e && (e = new o.Object3D), e.lookAt(t), e.updateMatrix(), this.applyMatrix(e.matrix)
                }
            }(),
            fromBufferGeometry: function(e) {
                function t(e, t, i) {
                    var r = void 0 !== s ? [h[e].clone(), h[t].clone(), h[i].clone()] : [],
                        a = void 0 !== u ? [n.colors[e].clone(), n.colors[t].clone(), n.colors[i].clone()] : [],
                        r = new o.Face3(e, t, i, r, a);
                    n.faces.push(r), void 0 !== l && n.faceVertexUvs[0].push([d[e].clone(), d[t].clone(), d[i].clone()]), void 0 !== c && n.faceVertexUvs[1].push([f[e].clone(), f[t].clone(), f[i].clone()])
                }
                var n = this,
                    i = null !== e.index ? e.index.array : void 0,
                    r = e.attributes,
                    a = r.position.array,
                    s = void 0 !== r.normal ? r.normal.array : void 0,
                    u = void 0 !== r.color ? r.color.array : void 0,
                    l = void 0 !== r.uv ? r.uv.array : void 0,
                    c = void 0 !== r.uv2 ? r.uv2.array : void 0;
                void 0 !== c && (this.faceVertexUvs[1] = []);
                for (var h = [], d = [], f = [], p = r = 0; r < a.length; r += 3, p += 2) n.vertices.push(new o.Vector3(a[r], a[r + 1], a[r + 2])), void 0 !== s && h.push(new o.Vector3(s[r], s[r + 1], s[r + 2])), void 0 !== u && n.colors.push(new o.Color(u[r], u[r + 1], u[r + 2])), void 0 !== l && d.push(new o.Vector2(l[p], l[p + 1])), void 0 !== c && f.push(new o.Vector2(c[p], c[p + 1]));
                if (void 0 !== i)
                    if (a = e.groups, 0 < a.length)
                        for (r = 0; r < a.length; r++)
                            for (var p = a[r], m = p.start, v = p.count, p = m, m = m + v; m > p; p += 3) t(i[p], i[p + 1], i[p + 2]);
                    else
                        for (r = 0; r < i.length; r += 3) t(i[r], i[r + 1], i[r + 2]);
                else
                    for (r = 0; r < a.length / 3; r += 3) t(r, r + 1, r + 2);
                return this.computeFaceNormals(), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), this
            },
            center: function() {
                this.computeBoundingBox();
                var e = this.boundingBox.center().negate();
                return this.translate(e.x, e.y, e.z), e
            },
            normalize: function() {
                this.computeBoundingSphere();
                var e = this.boundingSphere.center,
                    t = this.boundingSphere.radius,
                    t = 0 === t ? 1 : 1 / t,
                    n = new o.Matrix4;
                return n.set(t, 0, 0, -t * e.x, 0, t, 0, -t * e.y, 0, 0, t, -t * e.z, 0, 0, 0, 1), this.applyMatrix(n), this
            },
            computeFaceNormals: function() {
                for (var e = new o.Vector3, t = new o.Vector3, n = 0, i = this.faces.length; i > n; n++) {
                    var r = this.faces[n],
                        a = this.vertices[r.a],
                        s = this.vertices[r.b];
                    e.subVectors(this.vertices[r.c], s), t.subVectors(a, s), e.cross(t), e.normalize(), r.normal.copy(e)
                }
            },
            computeVertexNormals: function(e) {
                var t, n, i;
                for (i = Array(this.vertices.length), t = 0, n = this.vertices.length; n > t; t++) i[t] = new o.Vector3;
                if (e) {
                    var r, a, s, u = new o.Vector3,
                        l = new o.Vector3;
                    for (e = 0, t = this.faces.length; t > e; e++) n = this.faces[e], r = this.vertices[n.a], a = this.vertices[n.b], s = this.vertices[n.c], u.subVectors(s, a), l.subVectors(r, a), u.cross(l), i[n.a].add(u), i[n.b].add(u), i[n.c].add(u)
                } else
                    for (e = 0, t = this.faces.length; t > e; e++) n = this.faces[e], i[n.a].add(n.normal), i[n.b].add(n.normal), i[n.c].add(n.normal);
                for (t = 0, n = this.vertices.length; n > t; t++) i[t].normalize();
                for (e = 0, t = this.faces.length; t > e; e++) n = this.faces[e], r = n.vertexNormals, 3 === r.length ? (r[0].copy(i[n.a]), r[1].copy(i[n.b]), r[2].copy(i[n.c])) : (r[0] = i[n.a].clone(), r[1] = i[n.b].clone(), r[2] = i[n.c].clone())
            },
            computeMorphNormals: function() {
                var e, t, n, i, r;
                for (n = 0, i = this.faces.length; i > n; n++)
                    for (r = this.faces[n], r.__originalFaceNormal ? r.__originalFaceNormal.copy(r.normal) : r.__originalFaceNormal = r.normal.clone(), r.__originalVertexNormals || (r.__originalVertexNormals = []), e = 0, t = r.vertexNormals.length; t > e; e++) r.__originalVertexNormals[e] ? r.__originalVertexNormals[e].copy(r.vertexNormals[e]) : r.__originalVertexNormals[e] = r.vertexNormals[e].clone();
                var a = new o.Geometry;
                for (a.faces = this.faces, e = 0, t = this.morphTargets.length; t > e; e++) {
                    if (!this.morphNormals[e]) {
                        this.morphNormals[e] = {}, this.morphNormals[e].faceNormals = [], this.morphNormals[e].vertexNormals = [], r = this.morphNormals[e].faceNormals;
                        var s, u, l = this.morphNormals[e].vertexNormals;
                        for (n = 0, i = this.faces.length; i > n; n++) s = new o.Vector3, u = {
                            a: new o.Vector3,
                            b: new o.Vector3,
                            c: new o.Vector3
                        }, r.push(s), l.push(u)
                    }
                    for (l = this.morphNormals[e], a.vertices = this.morphTargets[e].vertices, a.computeFaceNormals(), a.computeVertexNormals(), n = 0, i = this.faces.length; i > n; n++) r = this.faces[n], s = l.faceNormals[n], u = l.vertexNormals[n], s.copy(r.normal), u.a.copy(r.vertexNormals[0]), u.b.copy(r.vertexNormals[1]), u.c.copy(r.vertexNormals[2])
                }
                for (n = 0, i = this.faces.length; i > n; n++) r = this.faces[n], r.normal = r.__originalFaceNormal, r.vertexNormals = r.__originalVertexNormals
            },
            computeTangents: function() {
                console.warn("THREE.Geometry: .computeTangents() has been removed.")
            },
            computeLineDistances: function() {
                for (var e = 0, t = this.vertices, n = 0, i = t.length; i > n; n++) n > 0 && (e += t[n].distanceTo(t[n - 1])), this.lineDistances[n] = e
            },
            computeBoundingBox: function() {
                null === this.boundingBox && (this.boundingBox = new o.Box3), this.boundingBox.setFromPoints(this.vertices)
            },
            computeBoundingSphere: function() {
                null === this.boundingSphere && (this.boundingSphere = new o.Sphere), this.boundingSphere.setFromPoints(this.vertices)
            },
            merge: function(e, t, n) {
                if (!1 == e instanceof o.Geometry) console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", e);
                else {
                    var i, r = this.vertices.length,
                        a = this.vertices,
                        s = e.vertices,
                        u = this.faces,
                        l = e.faces,
                        c = this.faceVertexUvs[0];
                    e = e.faceVertexUvs[0], void 0 === n && (n = 0), void 0 !== t && (i = (new o.Matrix3).getNormalMatrix(t));
                    for (var h = 0, d = s.length; d > h; h++) {
                        var f = s[h].clone();
                        void 0 !== t && f.applyMatrix4(t), a.push(f)
                    }
                    for (h = 0, d = l.length; d > h; h++) {
                        var p, s = l[h],
                            m = s.vertexNormals,
                            v = s.vertexColors,
                            f = new o.Face3(s.a + r, s.b + r, s.c + r);
                        for (f.normal.copy(s.normal), void 0 !== i && f.normal.applyMatrix3(i).normalize(), t = 0, a = m.length; a > t; t++) p = m[t].clone(), void 0 !== i && p.applyMatrix3(i).normalize(), f.vertexNormals.push(p);
                        for (f.color.copy(s.color), t = 0, a = v.length; a > t; t++) p = v[t], f.vertexColors.push(p.clone());
                        f.materialIndex = s.materialIndex + n, u.push(f)
                    }
                    for (h = 0, d = e.length; d > h; h++)
                        if (n = e[h], i = [], void 0 !== n) {
                            for (t = 0, a = n.length; a > t; t++) i.push(n[t].clone());
                            c.push(i)
                        }
                }
            },
            mergeMesh: function(e) {
                !1 == e instanceof o.Mesh ? console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", e) : (e.matrixAutoUpdate && e.updateMatrix(), this.merge(e.geometry, e.matrix))
            },
            mergeVertices: function() {
                var e, t, n, i = {},
                    r = [],
                    o = [],
                    a = Math.pow(10, 4);
                for (t = 0, n = this.vertices.length; n > t; t++) e = this.vertices[t], e = Math.round(e.x * a) + "_" + Math.round(e.y * a) + "_" + Math.round(e.z * a), void 0 === i[e] ? (i[e] = t, r.push(this.vertices[t]), o[t] = r.length - 1) : o[t] = o[i[e]];
                for (i = [], t = 0, n = this.faces.length; n > t; t++)
                    for (a = this.faces[t], a.a = o[a.a], a.b = o[a.b], a.c = o[a.c], a = [a.a, a.b, a.c], e = 0; 3 > e; e++)
                        if (a[e] === a[(e + 1) % 3]) {
                            i.push(t);
                            break
                        }
                for (t = i.length - 1; t >= 0; t--)
                    for (a = i[t], this.faces.splice(a, 1), o = 0, n = this.faceVertexUvs.length; n > o; o++) this.faceVertexUvs[o].splice(a, 1);
                return t = this.vertices.length - r.length, this.vertices = r, t
            },
            sortFacesByMaterialIndex: function() {
                for (var e = this.faces, t = e.length, n = 0; t > n; n++) e[n]._id = n;
                e.sort(function(e, t) {
                    return e.materialIndex - t.materialIndex
                });
                var i, r, o = this.faceVertexUvs[0],
                    a = this.faceVertexUvs[1];
                for (o && o.length === t && (i = []), a && a.length === t && (r = []), n = 0; t > n; n++) {
                    var s = e[n]._id;
                    i && i.push(o[s]), r && r.push(a[s])
                }
                i && (this.faceVertexUvs[0] = i), r && (this.faceVertexUvs[1] = r)
            },
            toJSON: function() {
                function e(e, t, n) {
                    return n ? e | 1 << t : e & ~(1 << t)
                }

                function t(e) {
                    var t = e.x.toString() + e.y.toString() + e.z.toString();
                    return void 0 !== l[t] ? l[t] : (l[t] = u.length / 3, u.push(e.x, e.y, e.z), l[t])
                }

                function n(e) {
                    var t = e.r.toString() + e.g.toString() + e.b.toString();
                    return void 0 !== h[t] ? h[t] : (h[t] = c.length, c.push(e.getHex()), h[t])
                }

                function i(e) {
                    var t = e.x.toString() + e.y.toString();
                    return void 0 !== f[t] ? f[t] : (f[t] = d.length / 2, d.push(e.x, e.y), f[t])
                }
                var r = {
                    metadata: {
                        version: 4.4,
                        type: "Geometry",
                        generator: "Geometry.toJSON"
                    }
                };
                if (r.uuid = this.uuid, r.type = this.type, "" !== this.name && (r.name = this.name), void 0 !== this.parameters) {
                    var o, a = this.parameters;
                    for (o in a) void 0 !== a[o] && (r[o] = a[o]);
                    return r
                }
                for (a = [], o = 0; o < this.vertices.length; o++) {
                    var s = this.vertices[o];
                    a.push(s.x, s.y, s.z)
                }
                var s = [],
                    u = [],
                    l = {},
                    c = [],
                    h = {},
                    d = [],
                    f = {};
                for (o = 0; o < this.faces.length; o++) {
                    var p = this.faces[o],
                        m = void 0 !== this.faceVertexUvs[0][o],
                        v = 0 < p.normal.length(),
                        g = 0 < p.vertexNormals.length,
                        y = 1 !== p.color.r || 1 !== p.color.g || 1 !== p.color.b,
                        _ = 0 < p.vertexColors.length,
                        x = 0,
                        x = e(x, 0, 0),
                        x = e(x, 1, !1),
                        x = e(x, 2, !1),
                        x = e(x, 3, m),
                        x = e(x, 4, v),
                        x = e(x, 5, g),
                        x = e(x, 6, y),
                        x = e(x, 7, _);
                    s.push(x), s.push(p.a, p.b, p.c), m && (m = this.faceVertexUvs[0][o], s.push(i(m[0]), i(m[1]), i(m[2]))), v && s.push(t(p.normal)), g && (v = p.vertexNormals, s.push(t(v[0]), t(v[1]), t(v[2]))), y && s.push(n(p.color)), _ && (p = p.vertexColors, s.push(n(p[0]), n(p[1]), n(p[2])))
                }
                return r.data = {}, r.data.vertices = a, r.data.normals = u, 0 < c.length && (r.data.colors = c), 0 < d.length && (r.data.uvs = [d]), r.data.faces = s, r
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                this.vertices = [], this.faces = [], this.faceVertexUvs = [
                    []
                ];
                for (var t = e.vertices, n = 0, i = t.length; i > n; n++) this.vertices.push(t[n].clone());
                for (t = e.faces, n = 0, i = t.length; i > n; n++) this.faces.push(t[n].clone());
                for (n = 0, i = e.faceVertexUvs.length; i > n; n++) {
                    t = e.faceVertexUvs[n], void 0 === this.faceVertexUvs[n] && (this.faceVertexUvs[n] = []);
                    for (var r = 0, o = t.length; o > r; r++) {
                        for (var a = t[r], s = [], u = 0, l = a.length; l > u; u++) s.push(a[u].clone());
                        this.faceVertexUvs[n].push(s)
                    }
                }
                return this
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        }, o.EventDispatcher.prototype.apply(o.Geometry.prototype), o.GeometryIdCount = 0, o.DirectGeometry = function() {
            Object.defineProperty(this, "id", {
                value: o.GeometryIdCount++
            }), this.uuid = o.Math.generateUUID(), this.name = "", this.type = "DirectGeometry", this.indices = [], this.vertices = [], this.normals = [], this.colors = [], this.uvs = [], this.uvs2 = [], this.groups = [], this.morphTargets = {}, this.skinWeights = [], this.skinIndices = [], this.boundingSphere = this.boundingBox = null, this.groupsNeedUpdate = this.uvsNeedUpdate = this.colorsNeedUpdate = this.normalsNeedUpdate = this.verticesNeedUpdate = !1
        }, o.DirectGeometry.prototype = {
            constructor: o.DirectGeometry,
            computeBoundingBox: o.Geometry.prototype.computeBoundingBox,
            computeBoundingSphere: o.Geometry.prototype.computeBoundingSphere,
            computeFaceNormals: function() {
                console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")
            },
            computeVertexNormals: function() {
                console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")
            },
            computeGroups: function(e) {
                var t, n, i = [];
                e = e.faces;
                for (var r = 0; r < e.length; r++) {
                    var o = e[r];
                    o.materialIndex !== n && (n = o.materialIndex, void 0 !== t && (t.count = 3 * r - t.start, i.push(t)), t = {
                        start: 3 * r,
                        materialIndex: n
                    })
                }
                void 0 !== t && (t.count = 3 * r - t.start, i.push(t)), this.groups = i
            },
            fromGeometry: function(e) {
                var t = e.faces,
                    n = e.vertices,
                    i = e.faceVertexUvs,
                    r = i[0] && 0 < i[0].length,
                    a = i[1] && 0 < i[1].length,
                    s = e.morphTargets,
                    u = s.length;
                if (u > 0) {
                    for (var l = [], c = 0; u > c; c++) l[c] = [];
                    this.morphTargets.position = l
                }
                var h = e.morphNormals,
                    d = h.length;
                if (d > 0) {
                    for (var f = [], c = 0; d > c; c++) f[c] = [];
                    this.morphTargets.normal = f
                }
                for (var p = e.skinIndices, m = e.skinWeights, v = p.length === n.length, g = m.length === n.length, c = 0; c < t.length; c++) {
                    var y = t[c];
                    this.vertices.push(n[y.a], n[y.b], n[y.c]);
                    var _ = y.vertexNormals;
                    for (3 === _.length ? this.normals.push(_[0], _[1], _[2]) : (_ = y.normal, this.normals.push(_, _, _)), _ = y.vertexColors, 3 === _.length ? this.colors.push(_[0], _[1], _[2]) : (_ = y.color, this.colors.push(_, _, _)), !0 === r && (_ = i[0][c], void 0 !== _ ? this.uvs.push(_[0], _[1], _[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ", c), this.uvs.push(new o.Vector2, new o.Vector2, new o.Vector2))), !0 === a && (_ = i[1][c], void 0 !== _ ? this.uvs2.push(_[0], _[1], _[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ", c), this.uvs2.push(new o.Vector2, new o.Vector2, new o.Vector2))), _ = 0; u > _; _++) {
                        var x = s[_].vertices;
                        l[_].push(x[y.a], x[y.b], x[y.c])
                    }
                    for (_ = 0; d > _; _++) x = h[_].vertexNormals[c], f[_].push(x.a, x.b, x.c);
                    v && this.skinIndices.push(p[y.a], p[y.b], p[y.c]), g && this.skinWeights.push(m[y.a], m[y.b], m[y.c])
                }
                return this.computeGroups(e), this.verticesNeedUpdate = e.verticesNeedUpdate, this.normalsNeedUpdate = e.normalsNeedUpdate, this.colorsNeedUpdate = e.colorsNeedUpdate, this.uvsNeedUpdate = e.uvsNeedUpdate, this.groupsNeedUpdate = e.groupsNeedUpdate, this
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        }, o.EventDispatcher.prototype.apply(o.DirectGeometry.prototype), o.BufferGeometry = function() {
            Object.defineProperty(this, "id", {
                value: o.GeometryIdCount++
            }), this.uuid = o.Math.generateUUID(), this.name = "", this.type = "BufferGeometry", this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingSphere = this.boundingBox = null, this.drawRange = {
                start: 0,
                count: 1 / 0
            }
        }, o.BufferGeometry.prototype = {
            constructor: o.BufferGeometry,
            addIndex: function(e) {
                console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."), this.setIndex(e)
            },
            getIndex: function() {
                return this.index
            },
            setIndex: function(e) {
                this.index = e
            },
            addAttribute: function(e, t, n) {
                !1 == t instanceof o.BufferAttribute && !1 == t instanceof o.InterleavedBufferAttribute ? (console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."), this.addAttribute(e, new o.BufferAttribute(t, n))) : "index" === e ? (console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."), this.setIndex(t)) : this.attributes[e] = t
            },
            getAttribute: function(e) {
                return this.attributes[e];
            },
            removeAttribute: function(e) {
                delete this.attributes[e]
            },
            get drawcalls() {
                return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."), this.groups
            },
            get offsets() {
                return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."), this.groups
            },
            addDrawCall: function(e, t, n) {
                void 0 !== n && console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."), console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."), this.addGroup(e, t)
            },
            clearDrawCalls: function() {
                console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."), this.clearGroups()
            },
            addGroup: function(e, t, n) {
                this.groups.push({
                    start: e,
                    count: t,
                    materialIndex: void 0 !== n ? n : 0
                })
            },
            clearGroups: function() {
                this.groups = []
            },
            setDrawRange: function(e, t) {
                this.drawRange.start = e, this.drawRange.count = t
            },
            applyMatrix: function(e) {
                var t = this.attributes.position;
                void 0 !== t && (e.applyToVector3Array(t.array), t.needsUpdate = !0), t = this.attributes.normal, void 0 !== t && ((new o.Matrix3).getNormalMatrix(e).applyToVector3Array(t.array), t.needsUpdate = !0), null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere()
            },
            rotateX: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new o.Matrix4), e.makeRotationX(t), this.applyMatrix(e), this
                }
            }(),
            rotateY: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new o.Matrix4), e.makeRotationY(t), this.applyMatrix(e), this
                }
            }(),
            rotateZ: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new o.Matrix4), e.makeRotationZ(t), this.applyMatrix(e), this
                }
            }(),
            translate: function() {
                var e;
                return function(t, n, i) {
                    return void 0 === e && (e = new o.Matrix4), e.makeTranslation(t, n, i), this.applyMatrix(e), this
                }
            }(),
            scale: function() {
                var e;
                return function(t, n, i) {
                    return void 0 === e && (e = new o.Matrix4), e.makeScale(t, n, i), this.applyMatrix(e), this
                }
            }(),
            lookAt: function() {
                var e;
                return function(t) {
                    void 0 === e && (e = new o.Object3D), e.lookAt(t), e.updateMatrix(), this.applyMatrix(e.matrix)
                }
            }(),
            center: function() {
                this.computeBoundingBox();
                var e = this.boundingBox.center().negate();
                return this.translate(e.x, e.y, e.z), e
            },
            setFromObject: function(e) {
                var t = e.geometry;
                if (e instanceof o.Points || e instanceof o.Line) {
                    e = new o.Float32Attribute(3 * t.vertices.length, 3);
                    var n = new o.Float32Attribute(3 * t.colors.length, 3);
                    this.addAttribute("position", e.copyVector3sArray(t.vertices)), this.addAttribute("color", n.copyColorsArray(t.colors)), t.lineDistances && t.lineDistances.length === t.vertices.length && (e = new o.Float32Attribute(t.lineDistances.length, 1), this.addAttribute("lineDistance", e.copyArray(t.lineDistances))), null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()), null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone())
                } else e instanceof o.Mesh && t instanceof o.Geometry && this.fromGeometry(t);
                return this
            },
            updateFromObject: function(e) {
                var t = e.geometry;
                if (e instanceof o.Mesh) {
                    var n = t.__directGeometry;
                    if (void 0 === n) return this.fromGeometry(t);
                    n.verticesNeedUpdate = t.verticesNeedUpdate, n.normalsNeedUpdate = t.normalsNeedUpdate, n.colorsNeedUpdate = t.colorsNeedUpdate, n.uvsNeedUpdate = t.uvsNeedUpdate, n.groupsNeedUpdate = t.groupsNeedUpdate, t.verticesNeedUpdate = !1, t.normalsNeedUpdate = !1, t.colorsNeedUpdate = !1, t.uvsNeedUpdate = !1, t.groupsNeedUpdate = !1, t = n
                }
                return !0 === t.verticesNeedUpdate && (n = this.attributes.position, void 0 !== n && (n.copyVector3sArray(t.vertices), n.needsUpdate = !0), t.verticesNeedUpdate = !1), !0 === t.normalsNeedUpdate && (n = this.attributes.normal, void 0 !== n && (n.copyVector3sArray(t.normals), n.needsUpdate = !0), t.normalsNeedUpdate = !1), !0 === t.colorsNeedUpdate && (n = this.attributes.color, void 0 !== n && (n.copyColorsArray(t.colors), n.needsUpdate = !0), t.colorsNeedUpdate = !1), t.uvsNeedUpdate && (n = this.attributes.uv, void 0 !== n && (n.copyVector2sArray(t.uvs), n.needsUpdate = !0), t.uvsNeedUpdate = !1), t.lineDistancesNeedUpdate && (n = this.attributes.lineDistance, void 0 !== n && (n.copyArray(t.lineDistances), n.needsUpdate = !0), t.lineDistancesNeedUpdate = !1), t.groupsNeedUpdate && (t.computeGroups(e.geometry), this.groups = t.groups, t.groupsNeedUpdate = !1), this
            },
            fromGeometry: function(e) {
                return e.__directGeometry = (new o.DirectGeometry).fromGeometry(e), this.fromDirectGeometry(e.__directGeometry)
            },
            fromDirectGeometry: function(e) {
                var t = new Float32Array(3 * e.vertices.length);
                this.addAttribute("position", new o.BufferAttribute(t, 3).copyVector3sArray(e.vertices)), 0 < e.normals.length && (t = new Float32Array(3 * e.normals.length), this.addAttribute("normal", new o.BufferAttribute(t, 3).copyVector3sArray(e.normals))), 0 < e.colors.length && (t = new Float32Array(3 * e.colors.length), this.addAttribute("color", new o.BufferAttribute(t, 3).copyColorsArray(e.colors))), 0 < e.uvs.length && (t = new Float32Array(2 * e.uvs.length), this.addAttribute("uv", new o.BufferAttribute(t, 2).copyVector2sArray(e.uvs))), 0 < e.uvs2.length && (t = new Float32Array(2 * e.uvs2.length), this.addAttribute("uv2", new o.BufferAttribute(t, 2).copyVector2sArray(e.uvs2))), 0 < e.indices.length && (t = new(65535 < e.vertices.length ? Uint32Array : Uint16Array)(3 * e.indices.length), this.setIndex(new o.BufferAttribute(t, 1).copyIndicesArray(e.indices))), this.groups = e.groups;
                for (var n in e.morphTargets) {
                    for (var t = [], i = e.morphTargets[n], r = 0, a = i.length; a > r; r++) {
                        var s = i[r],
                            u = new o.Float32Attribute(3 * s.length, 3);
                        t.push(u.copyVector3sArray(s))
                    }
                    this.morphAttributes[n] = t
                }
                return 0 < e.skinIndices.length && (n = new o.Float32Attribute(4 * e.skinIndices.length, 4), this.addAttribute("skinIndex", n.copyVector4sArray(e.skinIndices))), 0 < e.skinWeights.length && (n = new o.Float32Attribute(4 * e.skinWeights.length, 4), this.addAttribute("skinWeight", n.copyVector4sArray(e.skinWeights))), null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), this
            },
            computeBoundingBox: function() {
                var e = new o.Vector3;
                return function() {
                    null === this.boundingBox && (this.boundingBox = new o.Box3);
                    var t = this.attributes.position.array;
                    if (t) {
                        var n = this.boundingBox;
                        n.makeEmpty();
                        for (var i = 0, r = t.length; r > i; i += 3) e.fromArray(t, i), n.expandByPoint(e)
                    }(void 0 === t || 0 === t.length) && (this.boundingBox.min.set(0, 0, 0), this.boundingBox.max.set(0, 0, 0)), (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this)
                }
            }(),
            computeBoundingSphere: function() {
                var e = new o.Box3,
                    t = new o.Vector3;
                return function() {
                    null === this.boundingSphere && (this.boundingSphere = new o.Sphere);
                    var n = this.attributes.position.array;
                    if (n) {
                        e.makeEmpty();
                        for (var i = this.boundingSphere.center, r = 0, a = n.length; a > r; r += 3) t.fromArray(n, r), e.expandByPoint(t);
                        e.center(i);
                        for (var s = 0, r = 0, a = n.length; a > r; r += 3) t.fromArray(n, r), s = Math.max(s, i.distanceToSquared(t));
                        this.boundingSphere.radius = Math.sqrt(s), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this)
                    }
                }
            }(),
            computeFaceNormals: function() {},
            computeVertexNormals: function() {
                var e = this.index,
                    t = this.attributes,
                    n = this.groups;
                if (t.position) {
                    var i = t.position.array;
                    if (void 0 === t.normal) this.addAttribute("normal", new o.BufferAttribute(new Float32Array(i.length), 3));
                    else
                        for (var r = t.normal.array, a = 0, s = r.length; s > a; a++) r[a] = 0;
                    var u, l, c, r = t.normal.array,
                        h = new o.Vector3,
                        d = new o.Vector3,
                        f = new o.Vector3,
                        p = new o.Vector3,
                        m = new o.Vector3;
                    if (e) {
                        e = e.array, 0 === n.length && this.addGroup(0, e.length);
                        for (var v = 0, g = n.length; g > v; ++v)
                            for (a = n[v], s = a.start, u = a.count, a = s, s += u; s > a; a += 3) u = 3 * e[a + 0], l = 3 * e[a + 1], c = 3 * e[a + 2], h.fromArray(i, u), d.fromArray(i, l), f.fromArray(i, c), p.subVectors(f, d), m.subVectors(h, d), p.cross(m), r[u] += p.x, r[u + 1] += p.y, r[u + 2] += p.z, r[l] += p.x, r[l + 1] += p.y, r[l + 2] += p.z, r[c] += p.x, r[c + 1] += p.y, r[c + 2] += p.z
                    } else
                        for (a = 0, s = i.length; s > a; a += 9) h.fromArray(i, a), d.fromArray(i, a + 3), f.fromArray(i, a + 6), p.subVectors(f, d), m.subVectors(h, d), p.cross(m), r[a] = p.x, r[a + 1] = p.y, r[a + 2] = p.z, r[a + 3] = p.x, r[a + 4] = p.y, r[a + 5] = p.z, r[a + 6] = p.x, r[a + 7] = p.y, r[a + 8] = p.z;
                    this.normalizeNormals(), t.normal.needsUpdate = !0
                }
            },
            computeTangents: function() {
                console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")
            },
            computeOffsets: function(e) {
                console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")
            },
            merge: function(e, t) {
                if (!1 != e instanceof o.BufferGeometry) {
                    void 0 === t && (t = 0);
                    var n, i = this.attributes;
                    for (n in i)
                        if (void 0 !== e.attributes[n])
                            for (var r = i[n].array, a = e.attributes[n], s = a.array, u = 0, a = a.itemSize * t; u < s.length; u++, a++) r[a] = s[u];
                    return this
                }
                console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", e)
            },
            normalizeNormals: function() {
                for (var e, t, n, i = this.attributes.normal.array, r = 0, o = i.length; o > r; r += 3) e = i[r], t = i[r + 1], n = i[r + 2], e = 1 / Math.sqrt(e * e + t * t + n * n), i[r] *= e, i[r + 1] *= e, i[r + 2] *= e
            },
            toJSON: function() {
                var e = {
                    metadata: {
                        version: 4.4,
                        type: "BufferGeometry",
                        generator: "BufferGeometry.toJSON"
                    }
                };
                if (e.uuid = this.uuid, e.type = this.type, "" !== this.name && (e.name = this.name), void 0 !== this.parameters) {
                    var t, n = this.parameters;
                    for (t in n) void 0 !== n[t] && (e[t] = n[t]);
                    return e
                }
                e.data = {
                    attributes: {}
                };
                var i = this.index;
                null !== i && (n = Array.prototype.slice.call(i.array), e.data.index = {
                    type: i.array.constructor.name,
                    array: n
                }), i = this.attributes;
                for (t in i) {
                    var r = i[t],
                        n = Array.prototype.slice.call(r.array);
                    e.data.attributes[t] = {
                        itemSize: r.itemSize,
                        type: r.array.constructor.name,
                        array: n
                    }
                }
                return t = this.groups, 0 < t.length && (e.data.groups = JSON.parse(JSON.stringify(t))), t = this.boundingSphere, null !== t && (e.data.boundingSphere = {
                    center: t.center.toArray(),
                    radius: t.radius
                }), e
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                var t = e.index;
                null !== t && this.setIndex(t.clone());
                var n, t = e.attributes;
                for (n in t) this.addAttribute(n, t[n].clone());
                for (e = e.groups, n = 0, t = e.length; t > n; n++) {
                    var i = e[n];
                    this.addGroup(i.start, i.count)
                }
                return this
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        }, o.EventDispatcher.prototype.apply(o.BufferGeometry.prototype), o.BufferGeometry.MaxIndex = 65535, o.InstancedBufferGeometry = function() {
            o.BufferGeometry.call(this), this.type = "InstancedBufferGeometry", this.maxInstancedCount = void 0
        }, o.InstancedBufferGeometry.prototype = Object.create(o.BufferGeometry.prototype), o.InstancedBufferGeometry.prototype.constructor = o.InstancedBufferGeometry, o.InstancedBufferGeometry.prototype.addGroup = function(e, t, n) {
            this.groups.push({
                start: e,
                count: t,
                instances: n
            })
        }, o.InstancedBufferGeometry.prototype.copy = function(e) {
            var t = e.index;
            null !== t && this.setIndex(t.clone());
            var n, t = e.attributes;
            for (n in t) this.addAttribute(n, t[n].clone());
            for (e = e.groups, n = 0, t = e.length; t > n; n++) {
                var i = e[n];
                this.addGroup(i.start, i.count, i.instances)
            }
            return this
        }, o.EventDispatcher.prototype.apply(o.InstancedBufferGeometry.prototype), o.AnimationAction = function(e, t, n, i, r) {
            if (void 0 === e) throw Error("clip is null");
            this.clip = e, this.localRoot = null, this.startTime = t || 0, this.timeScale = n || 1, this.weight = i || 1, this.loop = r || o.LoopRepeat, this.loopCount = 0, this.enabled = !0, this.actionTime = -this.startTime, this.clipTime = 0, this.propertyBindings = []
        }, o.AnimationAction.prototype = {
            constructor: o.AnimationAction,
            setLocalRoot: function(e) {
                return this.localRoot = e, this
            },
            updateTime: function(e) {
                var t = this.clipTime,
                    n = this.loopCount,
                    i = this.clip.duration;
                return this.actionTime += e, this.loop === o.LoopOnce ? (this.loopCount = 0, this.clipTime = Math.min(Math.max(this.actionTime, 0), i), this.clipTime !== t && (this.clipTime === i ? this.mixer.dispatchEvent({
                    type: "finished",
                    action: this,
                    direction: 1
                }) : 0 === this.clipTime && this.mixer.dispatchEvent({
                    type: "finished",
                    action: this,
                    direction: -1
                })), this.clipTime) : (this.loopCount = Math.floor(this.actionTime / i), e = this.actionTime - this.loopCount * i, e %= i, this.loop == o.LoopPingPong && 1 === Math.abs(this.loopCount % 2) && (e = i - e), this.clipTime = e, this.loopCount !== n && this.mixer.dispatchEvent({
                    type: "loop",
                    action: this,
                    loopDelta: this.loopCount - this.loopCount
                }), this.clipTime)
            },
            syncWith: function(e) {
                return this.actionTime = e.actionTime, this.timeScale = e.timeScale, this
            },
            warpToDuration: function(e) {
                return this.timeScale = this.clip.duration / e, this
            },
            init: function(e) {
                return this.clipTime = e - this.startTime, this
            },
            update: function(e) {
                return this.updateTime(e), this.clip.getAt(this.clipTime)
            },
            getTimeScaleAt: function(e) {
                return this.timeScale.getAt ? this.timeScale.getAt(e) : this.timeScale
            },
            getWeightAt: function(e) {
                return this.weight.getAt ? this.weight.getAt(e) : this.weight
            }
        }, o.AnimationClip = function(e, t, n) {
            if (this.name = e, this.tracks = n, this.duration = void 0 !== t ? t : -1, 0 > this.duration)
                for (e = 0; e < this.tracks.length; e++) t = this.tracks[e], this.duration = Math.max(t.keys[t.keys.length - 1].time);
            this.trim(), this.optimize(), this.results = []
        }, o.AnimationClip.prototype = {
            constructor: o.AnimationClip,
            getAt: function(e) {
                e = Math.max(0, Math.min(e, this.duration));
                for (var t = 0; t < this.tracks.length; t++) this.results[t] = this.tracks[t].getAt(e);
                return this.results
            },
            trim: function() {
                for (var e = 0; e < this.tracks.length; e++) this.tracks[e].trim(0, this.duration);
                return this
            },
            optimize: function() {
                for (var e = 0; e < this.tracks.length; e++) this.tracks[e].optimize();
                return this
            }
        }, o.AnimationClip.CreateFromMorphTargetSequence = function(e, t, n) {
            for (var i = t.length, r = [], a = 0; i > a; a++) {
                var s = [];
                s.push({
                    time: (a + i - 1) % i,
                    value: 0
                }), s.push({
                    time: a,
                    value: 1
                }), s.push({
                    time: (a + 1) % i,
                    value: 0
                }), s.sort(o.KeyframeTrack.keyComparer), 0 === s[0].time && s.push({
                    time: i,
                    value: s[0].value
                }), r.push(new o.NumberKeyframeTrack(".morphTargetInfluences[" + t[a].name + "]", s).scale(1 / n))
            }
            return new o.AnimationClip(e, -1, r)
        }, o.AnimationClip.findByName = function(e, t) {
            for (var n = 0; n < e.length; n++)
                if (e[n].name === t) return e[n];
            return null
        }, o.AnimationClip.CreateClipsFromMorphTargetSequences = function(e, t) {
            for (var n = {}, i = /^([\w-]*?)([\d]+)$/, r = 0, a = e.length; a > r; r++) {
                var s = e[r],
                    u = s.name.match(i);
                if (u && 1 < u.length) {
                    var l = u[1];
                    (u = n[l]) || (n[l] = u = []), u.push(s)
                }
            }
            i = [];
            for (l in n) i.push(o.AnimationClip.CreateFromMorphTargetSequence(l, n[l], t));
            return i
        }, o.AnimationClip.parse = function(e) {
            for (var t = [], n = 0; n < e.tracks.length; n++) t.push(o.KeyframeTrack.parse(e.tracks[n]).scale(1 / e.fps));
            return new o.AnimationClip(e.name, e.duration, t)
        }, o.AnimationClip.parseAnimation = function(e, t, n) {
            if (!e) return console.error("  no animation in JSONLoader data"), null;
            var i = function(e, t, n, i, r) {
                    for (var o = [], a = 0; a < t.length; a++) {
                        var s = t[a];
                        void 0 !== s[n] && o.push({
                            time: s.time,
                            value: r(s)
                        })
                    }
                    return 0 < o.length ? new i(e, o) : null
                },
                r = [],
                a = e.name || "default",
                s = e.length || -1,
                u = e.fps || 30;
            e = e.hierarchy || [];
            for (var l = 0; l < e.length; l++) {
                var c = e[l].keys;
                if (c && 0 != c.length)
                    if (c[0].morphTargets) {
                        for (var s = {}, h = 0; h < c.length; h++)
                            if (c[h].morphTargets)
                                for (var d = 0; d < c[h].morphTargets.length; d++) s[c[h].morphTargets[d]] = -1;
                        for (var f in s) {
                            for (var p = [], d = 0; d < c[h].morphTargets.length; d++) {
                                var m = c[h];
                                p.push({
                                    time: m.time,
                                    value: m.morphTarget === f ? 1 : 0
                                })
                            }
                            r.push(new o.NumberKeyframeTrack(n + ".morphTargetInfluence[" + f + "]", p))
                        }
                        s = s.length * (u || 1)
                    } else h = n + ".bones[" + t[l].name + "]", (d = i(h + ".position", c, "pos", o.VectorKeyframeTrack, function(e) {
                        return (new o.Vector3).fromArray(e.pos)
                    })) && r.push(d), (d = i(h + ".quaternion", c, "rot", o.QuaternionKeyframeTrack, function(e) {
                        return e.rot.slerp ? e.rot.clone() : (new o.Quaternion).fromArray(e.rot)
                    })) && r.push(d), (c = i(h + ".scale", c, "scl", o.VectorKeyframeTrack, function(e) {
                        return (new o.Vector3).fromArray(e.scl)
                    })) && r.push(c)
            }
            return 0 === r.length ? null : new o.AnimationClip(a, s, r)
        }, o.AnimationMixer = function(e) {
            this.root = e, this.time = 0, this.timeScale = 1, this.actions = [], this.propertyBindingMap = {}
        }, o.AnimationMixer.prototype = {
            constructor: o.AnimationMixer,
            addAction: function(e) {
                this.actions.push(e), e.init(this.time), e.mixer = this;
                for (var t = e.clip.tracks, n = e.localRoot || this.root, i = 0; i < t.length; i++) {
                    var r = t[i],
                        a = n.uuid + "-" + r.name,
                        s = this.propertyBindingMap[a];
                    void 0 === s && (s = new o.PropertyBinding(n, r.name), this.propertyBindingMap[a] = s), e.propertyBindings.push(s), s.referenceCount += 1
                }
            },
            removeAllActions: function() {
                for (var e = 0; e < this.actions.length; e++) this.actions[e].mixer = null;
                for (var t in this.propertyBindingMap) this.propertyBindingMap[t].unbind();
                return this.actions = [], this.propertyBindingMap = {}, this
            },
            removeAction: function(e) {
                var t = this.actions.indexOf(e); - 1 !== t && (this.actions.splice(t, 1), e.mixer = null), t = e.localRoot || this.root, e = e.clip.tracks;
                for (var n = 0; n < e.length; n++) {
                    var i = t.uuid + "-" + e[n].name,
                        r = this.propertyBindingMap[i];
                    r.referenceCount -= 1, 0 >= r.referenceCount && (r.unbind(), delete this.propertyBindingMap[i])
                }
                return this
            },
            findActionByName: function(e) {
                for (var t = 0; t < this.actions.length; t++)
                    if (this.actions[t].name === e) return this.actions[t];
                return null
            },
            play: function(e, t) {
                return e.startTime = this.time, this.addAction(e), this
            },
            fadeOut: function(e, t) {
                var n = [];
                return n.push({
                    time: this.time,
                    value: 1
                }), n.push({
                    time: this.time + t,
                    value: 0
                }), e.weight = new o.NumberKeyframeTrack("weight", n), this
            },
            fadeIn: function(e, t) {
                var n = [];
                return n.push({
                    time: this.time,
                    value: 0
                }), n.push({
                    time: this.time + t,
                    value: 1
                }), e.weight = new o.NumberKeyframeTrack("weight", n), this
            },
            warp: function(e, t, n, i) {
                var r = [];
                return r.push({
                    time: this.time,
                    value: t
                }), r.push({
                    time: this.time + i,
                    value: n
                }), e.timeScale = new o.NumberKeyframeTrack("timeScale", r), this
            },
            crossFade: function(e, t, n, i) {
                if (this.fadeOut(e, n), this.fadeIn(t, n), i) {
                    i = e.clip.duration / t.clip.duration;
                    var r = 1 / i;
                    this.warp(e, 1, i, n), this.warp(t, r, 1, n)
                }
                return this
            },
            update: function(e) {
                e *= this.timeScale, this.time += e;
                for (var t = 0; t < this.actions.length; t++) {
                    var n = this.actions[t],
                        i = n.getWeightAt(this.time),
                        r = n.getTimeScaleAt(this.time),
                        r = n.update(e * r);
                    if (!(0 >= n.weight) && n.enabled)
                        for (var o = 0; o < r.length; o++) n.propertyBindings[o].accumulate(r[o], i)
                }
                for (var a in this.propertyBindingMap) this.propertyBindingMap[a].apply();
                return this
            }
        }, o.EventDispatcher.prototype.apply(o.AnimationMixer.prototype), o.AnimationUtils = {
            getEqualsFunc: function(e) {
                return e.equals ? function(e, t) {
                    return e.equals(t)
                } : function(e, t) {
                    return e === t
                }
            },
            clone: function(e) {
                if ("object" == typeof e) {
                    if (e.clone) return e.clone();
                    console.error("can not figure out how to copy exemplarValue", e)
                }
                return e
            },
            lerp: function(e, t, n, i) {
                return o.AnimationUtils.getLerpFunc(e, i)(e, t, n)
            },
            lerp_object: function(e, t, n) {
                return e.lerp(t, n)
            },
            slerp_object: function(e, t, n) {
                return e.slerp(t, n)
            },
            lerp_number: function(e, t, n) {
                return e * (1 - n) + t * n
            },
            lerp_boolean: function(e, t, n) {
                return .5 > n ? e : t
            },
            lerp_boolean_immediate: function(e, t, n) {
                return e
            },
            lerp_string: function(e, t, n) {
                return .5 > n ? e : t
            },
            lerp_string_immediate: function(e, t, n) {
                return e
            },
            getLerpFunc: function(e, t) {
                if (void 0 === e || null === e) throw Error("examplarValue is null");
                switch (typeof e) {
                    case "object":
                        if (e.lerp) return o.AnimationUtils.lerp_object;
                        if (e.slerp) return o.AnimationUtils.slerp_object;
                        break;
                    case "number":
                        return o.AnimationUtils.lerp_number;
                    case "boolean":
                        return t ? o.AnimationUtils.lerp_boolean : o.AnimationUtils.lerp_boolean_immediate;
                    case "string":
                        return t ? o.AnimationUtils.lerp_string : o.AnimationUtils.lerp_string_immediate
                }
            }
        }, o.KeyframeTrack = function(e, t) {
            if (void 0 === e) throw Error("track name is undefined");
            if (void 0 === t || 0 === t.length) throw Error("no keys in track named " + e);
            this.name = e, this.keys = t, this.lastIndex = 0, this.validate(), this.optimize()
        }, o.KeyframeTrack.prototype = {
            constructor: o.KeyframeTrack,
            getAt: function(e) {
                for (; this.lastIndex < this.keys.length && e >= this.keys[this.lastIndex].time;) this.lastIndex++;
                for (; 0 < this.lastIndex && e < this.keys[this.lastIndex - 1].time;) this.lastIndex--;
                if (this.lastIndex >= this.keys.length) return this.setResult(this.keys[this.keys.length - 1].value), this.result;
                if (0 === this.lastIndex) return this.setResult(this.keys[0].value), this.result;
                var t = this.keys[this.lastIndex - 1];
                if (this.setResult(t.value), t.constantToNext) return this.result;
                var n = this.keys[this.lastIndex];
                return this.result = this.lerpValues(this.result, n.value, (e - t.time) / (n.time - t.time))
            },
            shift: function(e) {
                if (0 !== e)
                    for (var t = 0; t < this.keys.length; t++) this.keys[t].time += e;
                return this
            },
            scale: function(e) {
                if (1 !== e)
                    for (var t = 0; t < this.keys.length; t++) this.keys[t].time *= e;
                return this
            },
            trim: function(e, t) {
                for (var n = 0, i = 1; i < this.keys.length; i++) this.keys[i] <= e && n++;
                for (var r = 0, i = this.keys.length - 2; i > 0 && this.keys[i] >= t; i++) r++;
                return n + r > 0 && (this.keys = this.keys.splice(n, this.keys.length - r - n)), this
            },
            validate: function() {
                var e = null;
                if (0 !== this.keys.length) {
                    for (var t = 0; t < this.keys.length; t++) {
                        var n = this.keys[t];
                        if (!n) return void console.error("  key is null in track", this, t);
                        if ("number" != typeof n.time || isNaN(n.time)) return void console.error("  key.time is not a valid number", this, t, n);
                        if (void 0 === n.value || null === n.value) return void console.error("  key.value is null in track", this, t, n);
                        if (e && e.time > n.time) return void console.error("  key.time is less than previous key time, out of order keys", this, t, n, e);
                        e = n
                    }
                    return this
                }
                console.error("  track is empty, no keys", this)
            },
            optimize: function() {
                var e = [],
                    t = this.keys[0];
                e.push(t), o.AnimationUtils.getEqualsFunc(t.value);
                for (var n = 1; n < this.keys.length - 1; n++) {
                    var i = this.keys[n],
                        r = this.keys[n + 1];
                    t.time === i.time || this.compareValues(t.value, i.value) && this.compareValues(i.value, r.value) || (t.constantToNext = this.compareValues(t.value, i.value), e.push(i), t = i)
                }
                return e.push(this.keys[this.keys.length - 1]), this.keys = e, this
            }
        }, o.KeyframeTrack.keyComparer = function(e, t) {
            return e.time - t.time
        }, o.KeyframeTrack.parse = function(e) {
            if (void 0 === e.type) throw Error("track type undefined, can not parse");
            return o.KeyframeTrack.GetTrackTypeForTypeName(e.type).parse(e)
        }, o.KeyframeTrack.GetTrackTypeForTypeName = function(e) {
            switch (e.toLowerCase()) {
                case "vector":
                case "vector2":
                case "vector3":
                case "vector4":
                    return o.VectorKeyframeTrack;
                case "quaternion":
                    return o.QuaternionKeyframeTrack;
                case "integer":
                case "scalar":
                case "double":
                case "float":
                case "number":
                    return o.NumberKeyframeTrack;
                case "bool":
                case "boolean":
                    return o.BooleanKeyframeTrack;
                case "string":
                    return o.StringKeyframeTrack
            }
            throw Error("Unsupported typeName: " + e)
        }, o.PropertyBinding = function(e, t) {
            this.rootNode = e, this.trackName = t, this.referenceCount = 0, this.originalValue = null;
            var n = o.PropertyBinding.parseTrackName(t);
            this.directoryName = n.directoryName, this.nodeName = n.nodeName, this.objectName = n.objectName, this.objectIndex = n.objectIndex, this.propertyName = n.propertyName, this.propertyIndex = n.propertyIndex, this.node = o.PropertyBinding.findNode(e, this.nodeName) || e, this.cumulativeValue = null, this.cumulativeWeight = 0
        }, o.PropertyBinding.prototype = {
            constructor: o.PropertyBinding,
            reset: function() {
                this.cumulativeValue = null, this.cumulativeWeight = 0
            },
            accumulate: function(e, t) {
                this.isBound || this.bind(), 0 === this.cumulativeWeight ? t > 0 && (null === this.cumulativeValue && (this.cumulativeValue = o.AnimationUtils.clone(e)), this.cumulativeWeight = t) : (this.cumulativeValue = this.lerpValue(this.cumulativeValue, e, t / (this.cumulativeWeight + t)), this.cumulativeWeight += t)
            },
            unbind: function() {
                this.isBound && (this.setValue(this.originalValue), this.triggerDirty = this.equalsValue = this.lerpValue = this.getValue = this.setValue = null, this.isBound = !1)
            },
            bind: function() {
                if (!this.isBound) {
                    var e = this.node;
                    if (e) {
                        if (this.objectName) {
                            if ("materials" === this.objectName) {
                                if (!e.material) return void console.error("  can not bind to material as node does not have a material", this);
                                if (!e.material.materials) return void console.error("  can not bind to material.materials as node.material does not have a materials array", this);
                                e = e.material.materials
                            } else if ("bones" === this.objectName) {
                                if (!e.skeleton) return void console.error("  can not bind to bones as node does not have a skeleton", this);
                                for (var e = e.skeleton.bones, t = 0; t < e.length; t++)
                                    if (e[t].name === this.objectIndex) {
                                        this.objectIndex = t;
                                        break
                                    }
                            } else {
                                if (void 0 === e[this.objectName]) return void console.error("  can not bind to objectName of node, undefined", this);
                                e = e[this.objectName]
                            }
                            if (void 0 !== this.objectIndex) {
                                if (void 0 === e[this.objectIndex]) return void console.error("  trying to bind to objectIndex of objectName, but is undefined:", this, e);
                                e = e[this.objectIndex]
                            }
                        }
                        var n = e[this.propertyName];
                        if (n) {
                            if (void 0 !== this.propertyIndex) {
                                if ("morphTargetInfluences" === this.propertyName)
                                    for (e.geometry || console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry", this), e.geometry.morphTargets || console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets", this), t = 0; t < this.node.geometry.morphTargets.length; t++)
                                        if (e.geometry.morphTargets[t].name === this.propertyIndex) {
                                            this.propertyIndex = t;
                                            break
                                        }
                                this.setValue = function(e) {
                                    return this.equalsValue(n[this.propertyIndex], e) ? !1 : (n[this.propertyIndex] = e, !0)
                                }, this.getValue = function() {
                                    return n[this.propertyIndex]
                                }
                            } else n.copy ? (this.setValue = function(e) {
                                return this.equalsValue(n, e) ? !1 : (n.copy(e), !0)
                            }, this.getValue = function() {
                                return n
                            }) : (this.setValue = function(t) {
                                return this.equalsValue(e[this.propertyName], t) ? !1 : (e[this.propertyName] = t, !0)
                            }, this.getValue = function() {
                                return e[this.propertyName]
                            });
                            void 0 !== e.needsUpdate ? this.triggerDirty = function() {
                                this.node.needsUpdate = !0
                            } : void 0 !== e.matrixWorldNeedsUpdate && (this.triggerDirty = function() {
                                e.matrixWorldNeedsUpdate = !0
                            }), this.originalValue = this.getValue(), this.equalsValue = o.AnimationUtils.getEqualsFunc(this.originalValue), this.lerpValue = o.AnimationUtils.getLerpFunc(this.originalValue, !0), this.isBound = !0
                        } else console.error("  trying to update property for track: " + this.nodeName + "." + this.propertyName + " but it wasn't found.", e)
                    } else console.error("  trying to update node for track: " + this.trackName + " but it wasn't found.")
                }
            },
            apply: function() {
                if (this.isBound || this.bind(), 0 < this.cumulativeWeight) {
                    if (1 > this.cumulativeWeight) {
                        var e = 1 - this.cumulativeWeight;
                        this.cumulativeValue = this.lerpValue(this.cumulativeValue, this.originalValue, e / (this.cumulativeWeight + e))
                    }
                    this.setValue(this.cumulativeValue) && this.triggerDirty && this.triggerDirty(), this.cumulativeValue = null, this.cumulativeWeight = 0
                }
            }
        }, o.PropertyBinding.parseTrackName = function(e) {
            var t = /^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_. ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,
                n = t.exec(e);
            if (!n) throw Error("cannot parse trackName at all: " + e);
            if (n.index === t.lastIndex && t.lastIndex++, t = {
                    directoryName: n[1],
                    nodeName: n[3],
                    objectName: n[5],
                    objectIndex: n[7],
                    propertyName: n[9],
                    propertyIndex: n[11]
                }, null === t.propertyName || 0 === t.propertyName.length) throw Error("can not parse propertyName from trackName: " + e);
            return t
        }, o.PropertyBinding.findNode = function(e, t) {
            function n(e) {
                for (var n = 0; n < e.bones.length; n++) {
                    var i = e.bones[n];
                    if (i.name === t) return i
                }
                return null
            }

            function i(e) {
                for (var n = 0; n < e.length; n++) {
                    var r = e[n];
                    if (r.name === t || r.uuid === t || (r = i(r.children))) return r
                }
                return null
            }
            if (!t || "" === t || "root" === t || "." === t || -1 === t || t === e.name || t === e.uuid) return e;
            if (e.skeleton) {
                var r = n(e.skeleton);
                if (r) return r
            }
            return e.children && (r = i(e.children)) ? r : null
        }, o.VectorKeyframeTrack = function(e, t) {
            o.KeyframeTrack.call(this, e, t), this.result = this.keys[0].value.clone()
        }, o.VectorKeyframeTrack.prototype = Object.create(o.KeyframeTrack.prototype), o.VectorKeyframeTrack.prototype.constructor = o.VectorKeyframeTrack, o.VectorKeyframeTrack.prototype.setResult = function(e) {
            this.result.copy(e)
        }, o.VectorKeyframeTrack.prototype.lerpValues = function(e, t, n) {
            return e.lerp(t, n)
        }, o.VectorKeyframeTrack.prototype.compareValues = function(e, t) {
            return e.equals(t)
        }, o.VectorKeyframeTrack.prototype.clone = function() {
            for (var e = [], t = 0; t < this.keys.length; t++) {
                var n = this.keys[t];
                e.push({
                    time: n.time,
                    value: n.value.clone()
                })
            }
            return new o.VectorKeyframeTrack(this.name, e)
        }, o.VectorKeyframeTrack.parse = function(e) {
            for (var t = o["Vector" + e.keys[0].value.length], n = [], i = 0; i < e.keys.length; i++) {
                var r = e.keys[i];
                n.push({
                    value: (new t).fromArray(r.value),
                    time: r.time
                })
            }
            return new o.VectorKeyframeTrack(e.name, n)
        }, o.QuaternionKeyframeTrack = function(e, t) {
            o.KeyframeTrack.call(this, e, t), this.result = this.keys[0].value.clone()
        }, o.QuaternionKeyframeTrack.prototype = Object.create(o.KeyframeTrack.prototype), o.QuaternionKeyframeTrack.prototype.constructor = o.QuaternionKeyframeTrack, o.QuaternionKeyframeTrack.prototype.setResult = function(e) {
            this.result.copy(e)
        }, o.QuaternionKeyframeTrack.prototype.lerpValues = function(e, t, n) {
            return e.slerp(t, n)
        }, o.QuaternionKeyframeTrack.prototype.compareValues = function(e, t) {
            return e.equals(t)
        }, o.QuaternionKeyframeTrack.prototype.multiply = function(e) {
            for (var t = 0; t < this.keys.length; t++) this.keys[t].value.multiply(e);
            return this
        }, o.QuaternionKeyframeTrack.prototype.clone = function() {
            for (var e = [], t = 0; t < this.keys.length; t++) {
                var n = this.keys[t];
                e.push({
                    time: n.time,
                    value: n.value.clone()
                })
            }
            return new o.QuaternionKeyframeTrack(this.name, e)
        }, o.QuaternionKeyframeTrack.parse = function(e) {
            for (var t = [], n = 0; n < e.keys.length; n++) {
                var i = e.keys[n];
                t.push({
                    value: (new o.Quaternion).fromArray(i.value),
                    time: i.time
                })
            }
            return new o.QuaternionKeyframeTrack(e.name, t)
        }, o.StringKeyframeTrack = function(e, t) {
            o.KeyframeTrack.call(this, e, t), this.result = this.keys[0].value
        }, o.StringKeyframeTrack.prototype = Object.create(o.KeyframeTrack.prototype), o.StringKeyframeTrack.prototype.constructor = o.StringKeyframeTrack, o.StringKeyframeTrack.prototype.setResult = function(e) {
            this.result = e
        }, o.StringKeyframeTrack.prototype.lerpValues = function(e, t, n) {
            return 1 > n ? e : t
        }, o.StringKeyframeTrack.prototype.compareValues = function(e, t) {
            return e === t
        }, o.StringKeyframeTrack.prototype.clone = function() {
            for (var e = [], t = 0; t < this.keys.length; t++) {
                var n = this.keys[t];
                e.push({
                    time: n.time,
                    value: n.value
                })
            }
            return new o.StringKeyframeTrack(this.name, e)
        }, o.StringKeyframeTrack.parse = function(e) {
            return new o.StringKeyframeTrack(e.name, e.keys)
        }, o.BooleanKeyframeTrack = function(e, t) {
            o.KeyframeTrack.call(this, e, t), this.result = this.keys[0].value
        }, o.BooleanKeyframeTrack.prototype = Object.create(o.KeyframeTrack.prototype), o.BooleanKeyframeTrack.prototype.constructor = o.BooleanKeyframeTrack, o.BooleanKeyframeTrack.prototype.setResult = function(e) {
            this.result = e
        }, o.BooleanKeyframeTrack.prototype.lerpValues = function(e, t, n) {
            return 1 > n ? e : t
        }, o.BooleanKeyframeTrack.prototype.compareValues = function(e, t) {
            return e === t
        }, o.BooleanKeyframeTrack.prototype.clone = function() {
            for (var e = [], t = 0; t < this.keys.length; t++) {
                var n = this.keys[t];
                e.push({
                    time: n.time,
                    value: n.value
                })
            }
            return new o.BooleanKeyframeTrack(this.name, e)
        }, o.BooleanKeyframeTrack.parse = function(e) {
            return new o.BooleanKeyframeTrack(e.name, e.keys)
        }, o.NumberKeyframeTrack = function(e, t) {
            o.KeyframeTrack.call(this, e, t), this.result = this.keys[0].value
        }, o.NumberKeyframeTrack.prototype = Object.create(o.KeyframeTrack.prototype), o.NumberKeyframeTrack.prototype.constructor = o.NumberKeyframeTrack, o.NumberKeyframeTrack.prototype.setResult = function(e) {
            this.result = e
        }, o.NumberKeyframeTrack.prototype.lerpValues = function(e, t, n) {
            return e * (1 - n) + t * n
        }, o.NumberKeyframeTrack.prototype.compareValues = function(e, t) {
            return e === t
        }, o.NumberKeyframeTrack.prototype.clone = function() {
            for (var e = [], t = 0; t < this.keys.length; t++) {
                var n = this.keys[t];
                e.push({
                    time: n.time,
                    value: n.value
                })
            }
            return new o.NumberKeyframeTrack(this.name, e)
        }, o.NumberKeyframeTrack.parse = function(e) {
            return new o.NumberKeyframeTrack(e.name, e.keys)
        }, o.Camera = function() {
            o.Object3D.call(this), this.type = "Camera", this.matrixWorldInverse = new o.Matrix4, this.projectionMatrix = new o.Matrix4
        }, o.Camera.prototype = Object.create(o.Object3D.prototype), o.Camera.prototype.constructor = o.Camera, o.Camera.prototype.getWorldDirection = function() {
            var e = new o.Quaternion;
            return function(t) {
                return t = t || new o.Vector3, this.getWorldQuaternion(e), t.set(0, 0, -1).applyQuaternion(e)
            }
        }(), o.Camera.prototype.lookAt = function() {
            var e = new o.Matrix4;
            return function(t) {
                e.lookAt(this.position, t, this.up), this.quaternion.setFromRotationMatrix(e)
            }
        }(), o.Camera.prototype.clone = function() {
            return (new this.constructor).copy(this)
        }, o.Camera.prototype.copy = function(e) {
            return o.Object3D.prototype.copy.call(this, e), this.matrixWorldInverse.copy(e.matrixWorldInverse), this.projectionMatrix.copy(e.projectionMatrix), this
        }, o.CubeCamera = function(e, t, n) {
            o.Object3D.call(this), this.type = "CubeCamera";
            var i = new o.PerspectiveCamera(90, 1, e, t);
            i.up.set(0, -1, 0), i.lookAt(new o.Vector3(1, 0, 0)), this.add(i);
            var r = new o.PerspectiveCamera(90, 1, e, t);
            r.up.set(0, -1, 0), r.lookAt(new o.Vector3(-1, 0, 0)), this.add(r);
            var a = new o.PerspectiveCamera(90, 1, e, t);
            a.up.set(0, 0, 1), a.lookAt(new o.Vector3(0, 1, 0)), this.add(a);
            var s = new o.PerspectiveCamera(90, 1, e, t);
            s.up.set(0, 0, -1), s.lookAt(new o.Vector3(0, -1, 0)), this.add(s);
            var u = new o.PerspectiveCamera(90, 1, e, t);
            u.up.set(0, -1, 0), u.lookAt(new o.Vector3(0, 0, 1)), this.add(u);
            var l = new o.PerspectiveCamera(90, 1, e, t);
            l.up.set(0, -1, 0), l.lookAt(new o.Vector3(0, 0, -1)),
                this.add(l), this.renderTarget = new o.WebGLRenderTargetCube(n, n, {
                    format: o.RGBFormat,
                    magFilter: o.LinearFilter,
                    minFilter: o.LinearFilter
                }), this.updateCubeMap = function(e, t) {
                    null === this.parent && this.updateMatrixWorld();
                    var n = this.renderTarget,
                        o = n.texture.generateMipmaps;
                    n.texture.generateMipmaps = !1, n.activeCubeFace = 0, e.render(t, i, n), n.activeCubeFace = 1, e.render(t, r, n), n.activeCubeFace = 2, e.render(t, a, n), n.activeCubeFace = 3, e.render(t, s, n), n.activeCubeFace = 4, e.render(t, u, n), n.texture.generateMipmaps = o, n.activeCubeFace = 5, e.render(t, l, n), e.setRenderTarget(null)
                }
        }, o.CubeCamera.prototype = Object.create(o.Object3D.prototype), o.CubeCamera.prototype.constructor = o.CubeCamera, o.OrthographicCamera = function(e, t, n, i, r, a) {
            o.Camera.call(this), this.type = "OrthographicCamera", this.zoom = 1, this.left = e, this.right = t, this.top = n, this.bottom = i, this.near = void 0 !== r ? r : .1, this.far = void 0 !== a ? a : 2e3, this.updateProjectionMatrix()
        }, o.OrthographicCamera.prototype = Object.create(o.Camera.prototype), o.OrthographicCamera.prototype.constructor = o.OrthographicCamera, o.OrthographicCamera.prototype.updateProjectionMatrix = function() {
            var e = (this.right - this.left) / (2 * this.zoom),
                t = (this.top - this.bottom) / (2 * this.zoom),
                n = (this.right + this.left) / 2,
                i = (this.top + this.bottom) / 2;
            this.projectionMatrix.makeOrthographic(n - e, n + e, i + t, i - t, this.near, this.far)
        }, o.OrthographicCamera.prototype.copy = function(e) {
            return o.Camera.prototype.copy.call(this, e), this.left = e.left, this.right = e.right, this.top = e.top, this.bottom = e.bottom, this.near = e.near, this.far = e.far, this.zoom = e.zoom, this
        }, o.OrthographicCamera.prototype.toJSON = function(e) {
            return e = o.Object3D.prototype.toJSON.call(this, e), e.object.zoom = this.zoom, e.object.left = this.left, e.object.right = this.right, e.object.top = this.top, e.object.bottom = this.bottom, e.object.near = this.near, e.object.far = this.far, e
        }, o.PerspectiveCamera = function(e, t, n, i) {
            o.Camera.call(this), this.type = "PerspectiveCamera", this.zoom = 1, this.fov = void 0 !== e ? e : 50, this.aspect = void 0 !== t ? t : 1, this.near = void 0 !== n ? n : .1, this.far = void 0 !== i ? i : 2e3, this.updateProjectionMatrix()
        }, o.PerspectiveCamera.prototype = Object.create(o.Camera.prototype), o.PerspectiveCamera.prototype.constructor = o.PerspectiveCamera, o.PerspectiveCamera.prototype.setLens = function(e, t) {
            void 0 === t && (t = 24), this.fov = 2 * o.Math.radToDeg(Math.atan(t / (2 * e))), this.updateProjectionMatrix()
        }, o.PerspectiveCamera.prototype.setViewOffset = function(e, t, n, i, r, o) {
            this.fullWidth = e, this.fullHeight = t, this.x = n, this.y = i, this.width = r, this.height = o, this.updateProjectionMatrix()
        }, o.PerspectiveCamera.prototype.updateProjectionMatrix = function() {
            var e = o.Math.radToDeg(2 * Math.atan(Math.tan(.5 * o.Math.degToRad(this.fov)) / this.zoom));
            if (this.fullWidth) {
                var t = this.fullWidth / this.fullHeight,
                    e = Math.tan(o.Math.degToRad(.5 * e)) * this.near,
                    n = -e,
                    i = t * n,
                    t = Math.abs(t * e - i),
                    n = Math.abs(e - n);
                this.projectionMatrix.makeFrustum(i + this.x * t / this.fullWidth, i + (this.x + this.width) * t / this.fullWidth, e - (this.y + this.height) * n / this.fullHeight, e - this.y * n / this.fullHeight, this.near, this.far)
            } else this.projectionMatrix.makePerspective(e, this.aspect, this.near, this.far)
        }, o.PerspectiveCamera.prototype.copy = function(e) {
            return o.Camera.prototype.copy.call(this, e), this.fov = e.fov, this.aspect = e.aspect, this.near = e.near, this.far = e.far, this.zoom = e.zoom, this
        }, o.PerspectiveCamera.prototype.toJSON = function(e) {
            return e = o.Object3D.prototype.toJSON.call(this, e), e.object.zoom = this.zoom, e.object.fov = this.fov, e.object.aspect = this.aspect, e.object.near = this.near, e.object.far = this.far, e
        }, o.Light = function(e) {
            o.Object3D.call(this), this.type = "Light", this.color = new o.Color(e), this.receiveShadow = void 0
        }, o.Light.prototype = Object.create(o.Object3D.prototype), o.Light.prototype.constructor = o.Light, Object.defineProperties(o.Light.prototype, {
            onlyShadow: {
                set: function(e) {
                    console.warn("THREE.Light: .onlyShadow has been removed.")
                }
            },
            shadowCameraFov: {
                set: function(e) {
                    this.shadow.camera.fov = e
                }
            },
            shadowCameraLeft: {
                set: function(e) {
                    this.shadow.camera.left = e
                }
            },
            shadowCameraRight: {
                set: function(e) {
                    this.shadow.camera.right = e
                }
            },
            shadowCameraTop: {
                set: function(e) {
                    this.shadow.camera.top = e
                }
            },
            shadowCameraBottom: {
                set: function(e) {
                    this.shadow.camera.bottom = e
                }
            },
            shadowCameraNear: {
                set: function(e) {
                    this.shadow.camera.near = e
                }
            },
            shadowCameraFar: {
                set: function(e) {
                    this.shadow.camera.far = e
                }
            },
            shadowCameraVisible: {
                set: function(e) {
                    console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow ) instead.")
                }
            },
            shadowBias: {
                set: function(e) {
                    this.shadow.bias = e
                }
            },
            shadowDarkness: {
                set: function(e) {
                    this.shadow.darkness = e
                }
            },
            shadowMapWidth: {
                set: function(e) {
                    this.shadow.mapSize.width = e
                }
            },
            shadowMapHeight: {
                set: function(e) {
                    this.shadow.mapSize.height = e
                }
            }
        }), o.Light.prototype.copy = function(e) {
            return o.Object3D.prototype.copy.call(this, e), this.color.copy(e.color), this
        }, o.Light.prototype.toJSON = function(e) {
            return e = o.Object3D.prototype.toJSON.call(this, e), e.object.color = this.color.getHex(), void 0 !== this.groundColor && (e.object.groundColor = this.groundColor.getHex()), void 0 !== this.intensity && (e.object.intensity = this.intensity), void 0 !== this.distance && (e.object.distance = this.distance), void 0 !== this.angle && (e.object.angle = this.angle), void 0 !== this.decay && (e.object.decay = this.decay), void 0 !== this.exponent && (e.object.exponent = this.exponent), e
        }, o.LightShadow = function(e) {
            this.camera = e, this.bias = 0, this.darkness = 1, this.mapSize = new o.Vector2(512, 512), this.matrix = this.map = null
        }, o.LightShadow.prototype = {
            constructor: o.LightShadow,
            copy: function(e) {
                this.camera = e.camera.clone(), this.bias = e.bias, this.darkness = e.darkness, this.mapSize.copy(e.mapSize)
            },
            clone: function() {
                return (new this.constructor).copy(this)
            }
        }, o.AmbientLight = function(e) {
            o.Light.call(this, e), this.type = "AmbientLight", this.castShadow = void 0
        }, o.AmbientLight.prototype = Object.create(o.Light.prototype), o.AmbientLight.prototype.constructor = o.AmbientLight, o.DirectionalLight = function(e, t) {
            o.Light.call(this, e), this.type = "DirectionalLight", this.position.set(0, 1, 0), this.updateMatrix(), this.target = new o.Object3D, this.intensity = void 0 !== t ? t : 1, this.shadow = new o.LightShadow(new o.OrthographicCamera(-500, 500, 500, -500, 50, 5e3))
        }, o.DirectionalLight.prototype = Object.create(o.Light.prototype), o.DirectionalLight.prototype.constructor = o.DirectionalLight, o.DirectionalLight.prototype.copy = function(e) {
            return o.Light.prototype.copy.call(this, e), this.intensity = e.intensity, this.target = e.target.clone(), this.shadow = e.shadow.clone(), this
        }, o.HemisphereLight = function(e, t, n) {
            o.Light.call(this, e), this.type = "HemisphereLight", this.castShadow = void 0, this.position.set(0, 1, 0), this.updateMatrix(), this.groundColor = new o.Color(t), this.intensity = void 0 !== n ? n : 1
        }, o.HemisphereLight.prototype = Object.create(o.Light.prototype), o.HemisphereLight.prototype.constructor = o.HemisphereLight, o.HemisphereLight.prototype.copy = function(e) {
            return o.Light.prototype.copy.call(this, e), this.groundColor.copy(e.groundColor), this.intensity = e.intensity, this
        }, o.PointLight = function(e, t, n, i) {
            o.Light.call(this, e), this.type = "PointLight", this.intensity = void 0 !== t ? t : 1, this.distance = void 0 !== n ? n : 0, this.decay = void 0 !== i ? i : 1, this.shadow = new o.LightShadow(new o.PerspectiveCamera(90, 1, 1, 500))
        }, o.PointLight.prototype = Object.create(o.Light.prototype), o.PointLight.prototype.constructor = o.PointLight, o.PointLight.prototype.copy = function(e) {
            return o.Light.prototype.copy.call(this, e), this.intensity = e.intensity, this.distance = e.distance, this.decay = e.decay, this.shadow = e.shadow.clone(), this
        }, o.SpotLight = function(e, t, n, i, r, a) {
            o.Light.call(this, e), this.type = "SpotLight", this.position.set(0, 1, 0), this.updateMatrix(), this.target = new o.Object3D, this.intensity = void 0 !== t ? t : 1, this.distance = void 0 !== n ? n : 0, this.angle = void 0 !== i ? i : Math.PI / 3, this.exponent = void 0 !== r ? r : 10, this.decay = void 0 !== a ? a : 1, this.shadow = new o.LightShadow(new o.PerspectiveCamera(50, 1, 50, 5e3))
        }, o.SpotLight.prototype = Object.create(o.Light.prototype), o.SpotLight.prototype.constructor = o.SpotLight, o.SpotLight.prototype.copy = function(e) {
            return o.Light.prototype.copy.call(this, e), this.intensity = e.intensity, this.distance = e.distance, this.angle = e.angle, this.exponent = e.exponent, this.decay = e.decay, this.target = e.target.clone(), this.shadow = e.shadow.clone(), this
        }, o.Cache = {
            enabled: !1,
            files: {},
            add: function(e, t) {
                !1 !== this.enabled && (this.files[e] = t)
            },
            get: function(e) {
                return !1 !== this.enabled ? this.files[e] : void 0
            },
            remove: function(e) {
                delete this.files[e]
            },
            clear: function() {
                this.files = {}
            }
        }, o.Loader = function() {
            this.onLoadStart = function() {}, this.onLoadProgress = function() {}, this.onLoadComplete = function() {}
        }, o.Loader.prototype = {
            constructor: o.Loader,
            crossOrigin: void 0,
            extractUrlBase: function(e) {
                return e = e.split("/"), 1 === e.length ? "./" : (e.pop(), e.join("/") + "/")
            },
            initMaterials: function(e, t, n) {
                for (var i = [], r = 0; r < e.length; ++r) i[r] = this.createMaterial(e[r], t, n);
                return i
            },
            createMaterial: function() {
                var e, t, n;
                return function(i, r, a) {
                    function s(e, n, i, s, u) {
                        e = r + e;
                        var c = o.Loader.Handlers.get(e);
                        return null !== c ? e = c.load(e) : (t.setCrossOrigin(a), e = t.load(e)), void 0 !== n && (e.repeat.fromArray(n), 1 !== n[0] && (e.wrapS = o.RepeatWrapping), 1 !== n[1] && (e.wrapT = o.RepeatWrapping)), void 0 !== i && e.offset.fromArray(i), void 0 !== s && ("repeat" === s[0] && (e.wrapS = o.RepeatWrapping), "mirror" === s[0] && (e.wrapS = o.MirroredRepeatWrapping), "repeat" === s[1] && (e.wrapT = o.RepeatWrapping), "mirror" === s[1] && (e.wrapT = o.MirroredRepeatWrapping)), void 0 !== u && (e.anisotropy = u), n = o.Math.generateUUID(), l[n] = e, n
                    }
                    void 0 === e && (e = new o.Color), void 0 === t && (t = new o.TextureLoader), void 0 === n && (n = new o.MaterialLoader);
                    var u, l = {},
                        c = {
                            uuid: o.Math.generateUUID(),
                            type: "MeshLambertMaterial"
                        };
                    for (u in i) {
                        var h = i[u];
                        switch (u) {
                            case "DbgColor":
                                c.color = h;
                                break;
                            case "DbgIndex":
                            case "opticalDensity":
                            case "illumination":
                                break;
                            case "DbgName":
                                c.name = h;
                                break;
                            case "blending":
                                c.blending = o[h];
                                break;
                            case "colorDiffuse":
                                c.color = e.fromArray(h).getHex();
                                break;
                            case "colorSpecular":
                                c.specular = e.fromArray(h).getHex();
                                break;
                            case "colorEmissive":
                                c.emissive = e.fromArray(h).getHex();
                                break;
                            case "specularCoef":
                                c.shininess = h;
                                break;
                            case "shading":
                                "basic" === h.toLowerCase() && (c.type = "MeshBasicMaterial"), "phong" === h.toLowerCase() && (c.type = "MeshPhongMaterial");
                                break;
                            case "mapDiffuse":
                                c.map = s(h, i.mapDiffuseRepeat, i.mapDiffuseOffset, i.mapDiffuseWrap, i.mapDiffuseAnisotropy);
                                break;
                            case "mapDiffuseRepeat":
                            case "mapDiffuseOffset":
                            case "mapDiffuseWrap":
                            case "mapDiffuseAnisotropy":
                                break;
                            case "mapLight":
                                c.lightMap = s(h, i.mapLightRepeat, i.mapLightOffset, i.mapLightWrap, i.mapLightAnisotropy);
                                break;
                            case "mapLightRepeat":
                            case "mapLightOffset":
                            case "mapLightWrap":
                            case "mapLightAnisotropy":
                                break;
                            case "mapAO":
                                c.aoMap = s(h, i.mapAORepeat, i.mapAOOffset, i.mapAOWrap, i.mapAOAnisotropy);
                                break;
                            case "mapAORepeat":
                            case "mapAOOffset":
                            case "mapAOWrap":
                            case "mapAOAnisotropy":
                                break;
                            case "mapBump":
                                c.bumpMap = s(h, i.mapBumpRepeat, i.mapBumpOffset, i.mapBumpWrap, i.mapBumpAnisotropy);
                                break;
                            case "mapBumpScale":
                                c.bumpScale = h;
                                break;
                            case "mapBumpRepeat":
                            case "mapBumpOffset":
                            case "mapBumpWrap":
                            case "mapBumpAnisotropy":
                                break;
                            case "mapNormal":
                                c.normalMap = s(h, i.mapNormalRepeat, i.mapNormalOffset, i.mapNormalWrap, i.mapNormalAnisotropy);
                                break;
                            case "mapNormalFactor":
                                c.normalScale = [h, h];
                                break;
                            case "mapNormalRepeat":
                            case "mapNormalOffset":
                            case "mapNormalWrap":
                            case "mapNormalAnisotropy":
                                break;
                            case "mapSpecular":
                                c.specularMap = s(h, i.mapSpecularRepeat, i.mapSpecularOffset, i.mapSpecularWrap, i.mapSpecularAnisotropy);
                                break;
                            case "mapSpecularRepeat":
                            case "mapSpecularOffset":
                            case "mapSpecularWrap":
                            case "mapSpecularAnisotropy":
                                break;
                            case "mapAlpha":
                                c.alphaMap = s(h, i.mapAlphaRepeat, i.mapAlphaOffset, i.mapAlphaWrap, i.mapAlphaAnisotropy);
                                break;
                            case "mapAlphaRepeat":
                            case "mapAlphaOffset":
                            case "mapAlphaWrap":
                            case "mapAlphaAnisotropy":
                                break;
                            case "flipSided":
                                c.side = o.BackSide;
                                break;
                            case "doubleSided":
                                c.side = o.DoubleSide;
                                break;
                            case "transparency":
                                console.warn("THREE.Loader: transparency has been renamed to opacity"), c.opacity = h;
                                break;
                            case "opacity":
                            case "transparent":
                            case "depthTest":
                            case "depthWrite":
                            case "transparent":
                            case "visible":
                            case "wireframe":
                                c[u] = h;
                                break;
                            case "vertexColors":
                                !0 === h && (c.vertexColors = o.VertexColors), "face" === h && (c.vertexColors = o.FaceColors);
                                break;
                            default:
                                console.error("Loader.createMaterial: Unsupported", u, h)
                        }
                    }
                    return "MeshPhongMaterial" !== c.type && delete c.specular, 1 > c.opacity && (c.transparent = !0), n.setTextures(l), n.parse(c)
                }
            }()
        }, o.Loader.Handlers = {
            handlers: [],
            add: function(e, t) {
                this.handlers.push(e, t)
            },
            get: function(e) {
                for (var t = this.handlers, n = 0, i = t.length; i > n; n += 2) {
                    var r = t[n + 1];
                    if (t[n].test(e)) return r
                }
                return null
            }
        }, o.XHRLoader = function(e) {
            this.manager = void 0 !== e ? e : o.DefaultLoadingManager
        }, o.XHRLoader.prototype = {
            constructor: o.XHRLoader,
            load: function(e, t, n, i) {
                var r = this,
                    a = o.Cache.get(e);
                if (void 0 !== a) return t && setTimeout(function() {
                    t(a)
                }, 0), a;
                var s = new XMLHttpRequest;
                return s.open("GET", e, !0), s.addEventListener("load", function(n) {
                    n = n.target.response, o.Cache.add(e, n), t && t(n), r.manager.itemEnd(e)
                }, !1), void 0 !== n && s.addEventListener("progress", function(e) {
                    n(e)
                }, !1), s.addEventListener("error", function(t) {
                    i && i(t), r.manager.itemError(e)
                }, !1), void 0 !== this.crossOrigin && (s.crossOrigin = this.crossOrigin), void 0 !== this.responseType && (s.responseType = this.responseType), void 0 !== this.withCredentials && (s.withCredentials = this.withCredentials), s.send(null), r.manager.itemStart(e), s
            },
            setResponseType: function(e) {
                this.responseType = e
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            },
            setWithCredentials: function(e) {
                this.withCredentials = e
            }
        }, o.ImageLoader = function(e) {
            this.manager = void 0 !== e ? e : o.DefaultLoadingManager
        }, o.ImageLoader.prototype = {
            constructor: o.ImageLoader,
            load: function(e, t, n, i) {
                var r = this,
                    a = o.Cache.get(e);
                if (void 0 !== a) return r.manager.itemStart(e), t ? setTimeout(function() {
                    t(a), r.manager.itemEnd(e)
                }, 0) : r.manager.itemEnd(e), a;
                var s = document.createElement("img");
                return s.addEventListener("load", function(n) {
                    o.Cache.add(e, this), t && t(this), r.manager.itemEnd(e)
                }, !1), void 0 !== n && s.addEventListener("progress", function(e) {
                    n(e)
                }, !1), s.addEventListener("error", function(t) {
                    i && i(t), r.manager.itemError(e)
                }, !1), void 0 !== this.crossOrigin && (s.crossOrigin = this.crossOrigin), r.manager.itemStart(e), s.src = e, s
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            }
        }, o.JSONLoader = function(e) {
            "boolean" == typeof e && (console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."), e = void 0), this.manager = void 0 !== e ? e : o.DefaultLoadingManager, this.withCredentials = !1
        }, o.JSONLoader.prototype = {
            constructor: o.JSONLoader,
            get statusDomElement() {
                return void 0 === this._statusDomElement && (this._statusDomElement = document.createElement("div")), console.warn("THREE.JSONLoader: .statusDomElement has been removed."), this._statusDomElement
            },
            load: function(e, t, n, i) {
                var r = this,
                    a = this.texturePath && "string" == typeof this.texturePath ? this.texturePath : o.Loader.prototype.extractUrlBase(e);
                n = new o.XHRLoader(this.manager), n.setCrossOrigin(this.crossOrigin), n.setWithCredentials(this.withCredentials), n.load(e, function(n) {
                    n = JSON.parse(n);
                    var i = n.metadata;
                    if (void 0 !== i) {
                        if ("object" === i.type) return void console.error("THREE.JSONLoader: " + e + " should be loaded with THREE.ObjectLoader instead.");
                        if ("scene" === i.type) return void console.error("THREE.JSONLoader: " + e + " should be loaded with THREE.SceneLoader instead.")
                    }
                    n = r.parse(n, a), t(n.geometry, n.materials)
                })
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            },
            setTexturePath: function(e) {
                this.texturePath = e
            },
            parse: function(e, t) {
                var n = new o.Geometry,
                    i = void 0 !== e.scale ? 1 / e.scale : 1;
                return function(t) {
                        var i, r, a, s, u, l, c, h, d, f, p, m, v, g = e.faces;
                        l = e.vertices;
                        var y = e.normals,
                            _ = e.colors,
                            x = 0;
                        if (void 0 !== e.uvs) {
                            for (i = 0; i < e.uvs.length; i++) e.uvs[i].length && x++;
                            for (i = 0; x > i; i++) n.faceVertexUvs[i] = []
                        }
                        for (s = 0, u = l.length; u > s;) i = new o.Vector3, i.x = l[s++] * t, i.y = l[s++] * t, i.z = l[s++] * t, n.vertices.push(i);
                        for (s = 0, u = g.length; u > s;)
                            if (t = g[s++], d = 1 & t, a = 2 & t, i = 8 & t, c = 16 & t, f = 32 & t, l = 64 & t, t &= 128, d) {
                                if (d = new o.Face3, d.a = g[s], d.b = g[s + 1], d.c = g[s + 3], p = new o.Face3, p.a = g[s + 1], p.b = g[s + 2], p.c = g[s + 3], s += 4, a && (a = g[s++], d.materialIndex = a, p.materialIndex = a), a = n.faces.length, i)
                                    for (i = 0; x > i; i++)
                                        for (m = e.uvs[i], n.faceVertexUvs[i][a] = [], n.faceVertexUvs[i][a + 1] = [], r = 0; 4 > r; r++) h = g[s++], v = m[2 * h], h = m[2 * h + 1], v = new o.Vector2(v, h), 2 !== r && n.faceVertexUvs[i][a].push(v), 0 !== r && n.faceVertexUvs[i][a + 1].push(v);
                                if (c && (c = 3 * g[s++], d.normal.set(y[c++], y[c++], y[c]), p.normal.copy(d.normal)), f)
                                    for (i = 0; 4 > i; i++) c = 3 * g[s++], f = new o.Vector3(y[c++], y[c++], y[c]), 2 !== i && d.vertexNormals.push(f), 0 !== i && p.vertexNormals.push(f);
                                if (l && (l = g[s++], l = _[l], d.color.setHex(l), p.color.setHex(l)), t)
                                    for (i = 0; 4 > i; i++) l = g[s++], l = _[l], 2 !== i && d.vertexColors.push(new o.Color(l)), 0 !== i && p.vertexColors.push(new o.Color(l));
                                n.faces.push(d), n.faces.push(p)
                            } else {
                                if (d = new o.Face3, d.a = g[s++], d.b = g[s++], d.c = g[s++], a && (a = g[s++], d.materialIndex = a), a = n.faces.length, i)
                                    for (i = 0; x > i; i++)
                                        for (m = e.uvs[i], n.faceVertexUvs[i][a] = [], r = 0; 3 > r; r++) h = g[s++], v = m[2 * h], h = m[2 * h + 1], v = new o.Vector2(v, h), n.faceVertexUvs[i][a].push(v);
                                if (c && (c = 3 * g[s++], d.normal.set(y[c++], y[c++], y[c])), f)
                                    for (i = 0; 3 > i; i++) c = 3 * g[s++], f = new o.Vector3(y[c++], y[c++], y[c]), d.vertexNormals.push(f);
                                if (l && (l = g[s++], d.color.setHex(_[l])), t)
                                    for (i = 0; 3 > i; i++) l = g[s++], d.vertexColors.push(new o.Color(_[l]));
                                n.faces.push(d)
                            }
                    }(i),
                    function() {
                        var t = void 0 !== e.influencesPerVertex ? e.influencesPerVertex : 2;
                        if (e.skinWeights)
                            for (var i = 0, r = e.skinWeights.length; r > i; i += t) n.skinWeights.push(new o.Vector4(e.skinWeights[i], t > 1 ? e.skinWeights[i + 1] : 0, t > 2 ? e.skinWeights[i + 2] : 0, t > 3 ? e.skinWeights[i + 3] : 0));
                        if (e.skinIndices)
                            for (i = 0, r = e.skinIndices.length; r > i; i += t) n.skinIndices.push(new o.Vector4(e.skinIndices[i], t > 1 ? e.skinIndices[i + 1] : 0, t > 2 ? e.skinIndices[i + 2] : 0, t > 3 ? e.skinIndices[i + 3] : 0));
                        n.bones = e.bones, n.bones && 0 < n.bones.length && (n.skinWeights.length !== n.skinIndices.length || n.skinIndices.length !== n.vertices.length) && console.warn("When skinning, number of vertices (" + n.vertices.length + "), skinIndices (" + n.skinIndices.length + "), and skinWeights (" + n.skinWeights.length + ") should match.")
                    }(),
                    function(t) {
                        if (void 0 !== e.morphTargets)
                            for (var i = 0, r = e.morphTargets.length; r > i; i++) {
                                n.morphTargets[i] = {}, n.morphTargets[i].name = e.morphTargets[i].name, n.morphTargets[i].vertices = [];
                                for (var a = n.morphTargets[i].vertices, s = e.morphTargets[i].vertices, u = 0, l = s.length; l > u; u += 3) {
                                    var c = new o.Vector3;
                                    c.x = s[u] * t, c.y = s[u + 1] * t, c.z = s[u + 2] * t, a.push(c)
                                }
                            }
                        if (void 0 !== e.morphColors && 0 < e.morphColors.length)
                            for (console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'), t = n.faces, a = e.morphColors[0].colors, i = 0, r = t.length; r > i; i++) t[i].color.fromArray(a, 3 * i)
                    }(i),
                    function() {
                        var t = [],
                            i = [];
                        void 0 !== e.animation && i.push(e.animation), void 0 !== e.animations && (e.animations.length ? i = i.concat(e.animations) : i.push(e.animations));
                        for (var r = 0; r < i.length; r++) {
                            var a = o.AnimationClip.parseAnimation(i[r], n.bones);
                            a && t.push(a)
                        }
                        n.morphTargets && (i = o.AnimationClip.CreateClipsFromMorphTargetSequences(n.morphTargets, 10), t = t.concat(i)), 0 < t.length && (n.animations = t)
                    }(), n.computeFaceNormals(), n.computeBoundingSphere(), void 0 === e.materials || 0 === e.materials.length ? {
                        geometry: n
                    } : (i = o.Loader.prototype.initMaterials(e.materials, t, this.crossOrigin), {
                        geometry: n,
                        materials: i
                    })
            }
        }, o.LoadingManager = function(e, t, n) {
            var i = this,
                r = !1,
                o = 0,
                a = 0;
            this.onStart = void 0, this.onLoad = e, this.onProgress = t, this.onError = n, this.itemStart = function(e) {
                a++, !1 === r && void 0 !== i.onStart && i.onStart(e, o, a), r = !0
            }, this.itemEnd = function(e) {
                o++, void 0 !== i.onProgress && i.onProgress(e, o, a), o === a && (r = !1, void 0 !== i.onLoad) && i.onLoad()
            }, this.itemError = function(e) {
                void 0 !== i.onError && i.onError(e)
            }
        }, o.DefaultLoadingManager = new o.LoadingManager, o.BufferGeometryLoader = function(e) {
            this.manager = void 0 !== e ? e : o.DefaultLoadingManager
        }, o.BufferGeometryLoader.prototype = {
            constructor: o.BufferGeometryLoader,
            load: function(e, t, n, i) {
                var r = this,
                    a = new o.XHRLoader(r.manager);
                a.setCrossOrigin(this.crossOrigin), a.load(e, function(e) {
                    t(r.parse(JSON.parse(e)))
                }, n, i)
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            },
            parse: function(e) {
                var t = new o.BufferGeometry,
                    n = e.data.index;
                void 0 !== n && (n = new self[n.type](n.array), t.setIndex(new o.BufferAttribute(n, 1)));
                var i, r = e.data.attributes;
                for (i in r) {
                    var a = r[i],
                        n = new self[a.type](a.array);
                    t.addAttribute(i, new o.BufferAttribute(n, a.itemSize))
                }
                if (i = e.data.groups || e.data.drawcalls || e.data.offsets, void 0 !== i)
                    for (n = 0, r = i.length; n !== r; ++n) a = i[n], t.addGroup(a.start, a.count);
                return e = e.data.boundingSphere, void 0 !== e && (i = new o.Vector3, void 0 !== e.center && i.fromArray(e.center), t.boundingSphere = new o.Sphere(i, e.radius)), t
            }
        }, o.MaterialLoader = function(e) {
            this.manager = void 0 !== e ? e : o.DefaultLoadingManager, this.textures = {}
        }, o.MaterialLoader.prototype = {
            constructor: o.MaterialLoader,
            load: function(e, t, n, i) {
                var r = this,
                    a = new o.XHRLoader(r.manager);
                a.setCrossOrigin(this.crossOrigin), a.load(e, function(e) {
                    t(r.parse(JSON.parse(e)))
                }, n, i)
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            },
            setTextures: function(e) {
                this.textures = e
            },
            getTexture: function(e) {
                var t = this.textures;
                return void 0 === t[e] && console.warn("THREE.MaterialLoader: Undefined texture", e), t[e]
            },
            parse: function(e) {
                var t = new o[e.type];
                if (t.uuid = e.uuid, void 0 !== e.name && (t.name = e.name), void 0 !== e.color && t.color.setHex(e.color), void 0 !== e.emissive && t.emissive.setHex(e.emissive), void 0 !== e.specular && t.specular.setHex(e.specular), void 0 !== e.shininess && (t.shininess = e.shininess), void 0 !== e.uniforms && (t.uniforms = e.uniforms), void 0 !== e.vertexShader && (t.vertexShader = e.vertexShader), void 0 !== e.fragmentShader && (t.fragmentShader = e.fragmentShader), void 0 !== e.vertexColors && (t.vertexColors = e.vertexColors), void 0 !== e.shading && (t.shading = e.shading), void 0 !== e.blending && (t.blending = e.blending), void 0 !== e.side && (t.side = e.side), void 0 !== e.opacity && (t.opacity = e.opacity), void 0 !== e.transparent && (t.transparent = e.transparent), void 0 !== e.alphaTest && (t.alphaTest = e.alphaTest), void 0 !== e.depthTest && (t.depthTest = e.depthTest), void 0 !== e.depthWrite && (t.depthWrite = e.depthWrite), void 0 !== e.wireframe && (t.wireframe = e.wireframe), void 0 !== e.wireframeLinewidth && (t.wireframeLinewidth = e.wireframeLinewidth), void 0 !== e.size && (t.size = e.size), void 0 !== e.sizeAttenuation && (t.sizeAttenuation = e.sizeAttenuation), void 0 !== e.map && (t.map = this.getTexture(e.map)), void 0 !== e.alphaMap && (t.alphaMap = this.getTexture(e.alphaMap), t.transparent = !0), void 0 !== e.bumpMap && (t.bumpMap = this.getTexture(e.bumpMap)), void 0 !== e.bumpScale && (t.bumpScale = e.bumpScale), void 0 !== e.normalMap && (t.normalMap = this.getTexture(e.normalMap)), e.normalScale && (t.normalScale = new o.Vector2(e.normalScale, e.normalScale)), void 0 !== e.displacementMap && (t.displacementMap = this.getTexture(e.displacementMap)), void 0 !== e.displacementScale && (t.displacementScale = e.displacementScale), void 0 !== e.displacementBias && (t.displacementBias = e.displacementBias), void 0 !== e.specularMap && (t.specularMap = this.getTexture(e.specularMap)), void 0 !== e.envMap && (t.envMap = this.getTexture(e.envMap), t.combine = o.MultiplyOperation), e.reflectivity && (t.reflectivity = e.reflectivity), void 0 !== e.lightMap && (t.lightMap = this.getTexture(e.lightMap)), void 0 !== e.lightMapIntensity && (t.lightMapIntensity = e.lightMapIntensity), void 0 !== e.aoMap && (t.aoMap = this.getTexture(e.aoMap)), void 0 !== e.aoMapIntensity && (t.aoMapIntensity = e.aoMapIntensity), void 0 !== e.materials)
                    for (var n = 0, i = e.materials.length; i > n; n++) t.materials.push(this.parse(e.materials[n]));
                return t
            }
        }, o.ObjectLoader = function(e) {
            this.manager = void 0 !== e ? e : o.DefaultLoadingManager, this.texturePath = ""
        }, o.ObjectLoader.prototype = {
            constructor: o.ObjectLoader,
            load: function(e, t, n, i) {
                "" === this.texturePath && (this.texturePath = e.substring(0, e.lastIndexOf("/") + 1));
                var r = this,
                    a = new o.XHRLoader(r.manager);
                a.setCrossOrigin(this.crossOrigin), a.load(e, function(e) {
                    r.parse(JSON.parse(e), t)
                }, n, i)
            },
            setTexturePath: function(e) {
                this.texturePath = e
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            },
            parse: function(e, t) {
                var n = this.parseGeometries(e.geometries),
                    i = this.parseImages(e.images, function() {
                        void 0 !== t && t(r)
                    }),
                    i = this.parseTextures(e.textures, i),
                    i = this.parseMaterials(e.materials, i),
                    r = this.parseObject(e.object, n, i);
                return e.animations && (r.animations = this.parseAnimations(e.animations)), void 0 !== e.images && 0 !== e.images.length || void 0 === t || t(r), r
            },
            parseGeometries: function(e) {
                var t = {};
                if (void 0 !== e)
                    for (var n = new o.JSONLoader, i = new o.BufferGeometryLoader, r = 0, a = e.length; a > r; r++) {
                        var s, u = e[r];
                        switch (u.type) {
                            case "PlaneGeometry":
                            case "PlaneBufferGeometry":
                                s = new o[u.type](u.width, u.height, u.widthSegments, u.heightSegments);
                                break;
                            case "BoxGeometry":
                            case "CubeGeometry":
                                s = new o.BoxGeometry(u.width, u.height, u.depth, u.widthSegments, u.heightSegments, u.depthSegments);
                                break;
                            case "CircleBufferGeometry":
                                s = new o.CircleBufferGeometry(u.radius, u.segments, u.thetaStart, u.thetaLength);
                                break;
                            case "CircleGeometry":
                                s = new o.CircleGeometry(u.radius, u.segments, u.thetaStart, u.thetaLength);
                                break;
                            case "CylinderGeometry":
                                s = new o.CylinderGeometry(u.radiusTop, u.radiusBottom, u.height, u.radialSegments, u.heightSegments, u.openEnded, u.thetaStart, u.thetaLength);
                                break;
                            case "SphereGeometry":
                                s = new o.SphereGeometry(u.radius, u.widthSegments, u.heightSegments, u.phiStart, u.phiLength, u.thetaStart, u.thetaLength);
                                break;
                            case "SphereBufferGeometry":
                                s = new o.SphereBufferGeometry(u.radius, u.widthSegments, u.heightSegments, u.phiStart, u.phiLength, u.thetaStart, u.thetaLength);
                                break;
                            case "DodecahedronGeometry":
                                s = new o.DodecahedronGeometry(u.radius, u.detail);
                                break;
                            case "IcosahedronGeometry":
                                s = new o.IcosahedronGeometry(u.radius, u.detail);
                                break;
                            case "OctahedronGeometry":
                                s = new o.OctahedronGeometry(u.radius, u.detail);
                                break;
                            case "TetrahedronGeometry":
                                s = new o.TetrahedronGeometry(u.radius, u.detail);
                                break;
                            case "RingGeometry":
                                s = new o.RingGeometry(u.innerRadius, u.outerRadius, u.thetaSegments, u.phiSegments, u.thetaStart, u.thetaLength);
                                break;
                            case "TorusGeometry":
                                s = new o.TorusGeometry(u.radius, u.tube, u.radialSegments, u.tubularSegments, u.arc);
                                break;
                            case "TorusKnotGeometry":
                                s = new o.TorusKnotGeometry(u.radius, u.tube, u.radialSegments, u.tubularSegments, u.p, u.q, u.heightScale);
                                break;
                            case "BufferGeometry":
                                s = i.parse(u);
                                break;
                            case "Geometry":
                                s = n.parse(u.data, this.texturePath).geometry;
                                break;
                            default:
                                console.warn('THREE.ObjectLoader: Unsupported geometry type "' + u.type + '"');
                                continue
                        }
                        s.uuid = u.uuid, void 0 !== u.name && (s.name = u.name), t[u.uuid] = s
                    }
                return t
            },
            parseMaterials: function(e, t) {
                var n = {};
                if (void 0 !== e) {
                    var i = new o.MaterialLoader;
                    i.setTextures(t);
                    for (var r = 0, a = e.length; a > r; r++) {
                        var s = i.parse(e[r]);
                        n[s.uuid] = s
                    }
                }
                return n
            },
            parseAnimations: function(e) {
                for (var t = [], n = 0; n < e.length; n++) {
                    var i = o.AnimationClip.parse(e[n]);
                    t.push(i)
                }
                return t
            },
            parseImages: function(e, t) {
                function n(e) {
                    return i.manager.itemStart(e), s.load(e, function() {
                        i.manager.itemEnd(e)
                    })
                }
                var i = this,
                    r = {};
                if (void 0 !== e && 0 < e.length) {
                    var a = new o.LoadingManager(t),
                        s = new o.ImageLoader(a);
                    s.setCrossOrigin(this.crossOrigin);
                    for (var a = 0, u = e.length; u > a; a++) {
                        var l = e[a],
                            c = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url) ? l.url : i.texturePath + l.url;
                        r[l.uuid] = n(c)
                    }
                }
                return r
            },
            parseTextures: function(e, t) {
                function n(e) {
                    return "number" == typeof e ? e : (console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.", e), o[e])
                }
                var i = {};
                if (void 0 !== e)
                    for (var r = 0, a = e.length; a > r; r++) {
                        var s = e[r];
                        void 0 === s.image && console.warn('THREE.ObjectLoader: No "image" specified for', s.uuid), void 0 === t[s.image] && console.warn("THREE.ObjectLoader: Undefined image", s.image);
                        var u = new o.Texture(t[s.image]);
                        u.needsUpdate = !0, u.uuid = s.uuid, void 0 !== s.name && (u.name = s.name), void 0 !== s.mapping && (u.mapping = n(s.mapping)), void 0 !== s.offset && (u.offset = new o.Vector2(s.offset[0], s.offset[1])), void 0 !== s.repeat && (u.repeat = new o.Vector2(s.repeat[0], s.repeat[1])), void 0 !== s.minFilter && (u.minFilter = n(s.minFilter)), void 0 !== s.magFilter && (u.magFilter = n(s.magFilter)), void 0 !== s.anisotropy && (u.anisotropy = s.anisotropy), Array.isArray(s.wrap) && (u.wrapS = n(s.wrap[0]), u.wrapT = n(s.wrap[1])), i[s.uuid] = u
                    }
                return i
            },
            parseObject: function() {
                var e = new o.Matrix4;
                return function(t, n, i) {
                    function r(e) {
                        return void 0 === n[e] && console.warn("THREE.ObjectLoader: Undefined geometry", e), n[e]
                    }

                    function a(e) {
                        return void 0 !== e ? (void 0 === i[e] && console.warn("THREE.ObjectLoader: Undefined material", e), i[e]) : void 0
                    }
                    var s;
                    switch (t.type) {
                        case "Scene":
                            s = new o.Scene;
                            break;
                        case "PerspectiveCamera":
                            s = new o.PerspectiveCamera(t.fov, t.aspect, t.near, t.far);
                            break;
                        case "OrthographicCamera":
                            s = new o.OrthographicCamera(t.left, t.right, t.top, t.bottom, t.near, t.far);
                            break;
                        case "AmbientLight":
                            s = new o.AmbientLight(t.color);
                            break;
                        case "DirectionalLight":
                            s = new o.DirectionalLight(t.color, t.intensity);
                            break;
                        case "PointLight":
                            s = new o.PointLight(t.color, t.intensity, t.distance, t.decay);
                            break;
                        case "SpotLight":
                            s = new o.SpotLight(t.color, t.intensity, t.distance, t.angle, t.exponent, t.decay);
                            break;
                        case "HemisphereLight":
                            s = new o.HemisphereLight(t.color, t.groundColor, t.intensity);
                            break;
                        case "Mesh":
                            s = new o.Mesh(r(t.geometry), a(t.material));
                            break;
                        case "LOD":
                            s = new o.LOD;
                            break;
                        case "Line":
                            s = new o.Line(r(t.geometry), a(t.material), t.mode);
                            break;
                        case "PointCloud":
                        case "Points":
                            s = new o.Points(r(t.geometry), a(t.material));
                            break;
                        case "Sprite":
                            s = new o.Sprite(a(t.material));
                            break;
                        case "Group":
                            s = new o.Group;
                            break;
                        default:
                            s = new o.Object3D
                    }
                    if (s.uuid = t.uuid, void 0 !== t.name && (s.name = t.name), void 0 !== t.matrix ? (e.fromArray(t.matrix), e.decompose(s.position, s.quaternion, s.scale)) : (void 0 !== t.position && s.position.fromArray(t.position), void 0 !== t.rotation && s.rotation.fromArray(t.rotation), void 0 !== t.scale && s.scale.fromArray(t.scale)), void 0 !== t.castShadow && (s.castShadow = t.castShadow), void 0 !== t.receiveShadow && (s.receiveShadow = t.receiveShadow), void 0 !== t.visible && (s.visible = t.visible), void 0 !== t.userData && (s.userData = t.userData), void 0 !== t.children)
                        for (var u in t.children) s.add(this.parseObject(t.children[u], n, i));
                    if ("LOD" === t.type) {
                        t = t.levels;
                        for (var l = 0; l < t.length; l++) {
                            var c = t[l];
                            u = s.getObjectByProperty("uuid", c.object), void 0 !== u && s.addLevel(u, c.distance)
                        }
                    }
                    return s
                }
            }()
        }, o.TextureLoader = function(e) {
            this.manager = void 0 !== e ? e : o.DefaultLoadingManager
        }, o.TextureLoader.prototype = {
            constructor: o.TextureLoader,
            load: function(e, t, n, i) {
                var r = new o.Texture,
                    a = new o.ImageLoader(this.manager);
                return a.setCrossOrigin(this.crossOrigin), a.load(e, function(e) {
                    r.image = e, r.needsUpdate = !0, void 0 !== t && t(r)
                }, n, i), r
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            }
        }, o.CubeTextureLoader = function(e) {
            this.manager = void 0 !== e ? e : o.DefaultLoadingManager
        }, o.CubeTextureLoader.prototype = {
            constructor: o.CubeTextureLoader,
            load: function(e, t, n, i) {
                function r(n) {
                    s.load(e[n], function(e) {
                        a.images[n] = e, u++, 6 === u && (a.needsUpdate = !0, t && t(a))
                    }, void 0, i)
                }
                var a = new o.CubeTexture([]),
                    s = new o.ImageLoader;
                s.setCrossOrigin(this.crossOrigin);
                var u = 0;
                for (n = 0; n < e.length; ++n) r(n);
                return a
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            }
        }, o.DataTextureLoader = o.BinaryTextureLoader = function(e) {
            this.manager = void 0 !== e ? e : o.DefaultLoadingManager, this._parser = null
        }, o.BinaryTextureLoader.prototype = {
            constructor: o.BinaryTextureLoader,
            load: function(e, t, n, i) {
                var r = this,
                    a = new o.DataTexture,
                    s = new o.XHRLoader(this.manager);
                return s.setCrossOrigin(this.crossOrigin), s.setResponseType("arraybuffer"), s.load(e, function(e) {
                    (e = r._parser(e)) && (void 0 !== e.image ? a.image = e.image : void 0 !== e.data && (a.image.width = e.width, a.image.height = e.height, a.image.data = e.data), a.wrapS = void 0 !== e.wrapS ? e.wrapS : o.ClampToEdgeWrapping, a.wrapT = void 0 !== e.wrapT ? e.wrapT : o.ClampToEdgeWrapping, a.magFilter = void 0 !== e.magFilter ? e.magFilter : o.LinearFilter, a.minFilter = void 0 !== e.minFilter ? e.minFilter : o.LinearMipMapLinearFilter, a.anisotropy = void 0 !== e.anisotropy ? e.anisotropy : 1, void 0 !== e.format && (a.format = e.format), void 0 !== e.type && (a.type = e.type), void 0 !== e.mipmaps && (a.mipmaps = e.mipmaps), 1 === e.mipmapCount && (a.minFilter = o.LinearFilter), a.needsUpdate = !0, t && t(a, e))
                }, n, i), a
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            }
        }, o.CompressedTextureLoader = function(e) {
            this.manager = void 0 !== e ? e : o.DefaultLoadingManager, this._parser = null
        }, o.CompressedTextureLoader.prototype = {
            constructor: o.CompressedTextureLoader,
            load: function(e, t, n, i) {
                var r = this,
                    a = [],
                    s = new o.CompressedTexture;
                s.image = a;
                var u = new o.XHRLoader(this.manager);
                if (u.setCrossOrigin(this.crossOrigin), u.setResponseType("arraybuffer"), Array.isArray(e))
                    for (var l = 0, c = function(c) {
                            u.load(e[c], function(e) {
                                e = r._parser(e, !0), a[c] = {
                                    width: e.width,
                                    height: e.height,
                                    format: e.format,
                                    mipmaps: e.mipmaps
                                }, l += 1, 6 === l && (1 === e.mipmapCount && (s.minFilter = o.LinearFilter), s.format = e.format, s.needsUpdate = !0, t && t(s))
                            }, n, i)
                        }, h = 0, d = e.length; d > h; ++h) c(h);
                else u.load(e, function(e) {
                    if (e = r._parser(e, !0), e.isCubemap)
                        for (var n = e.mipmaps.length / e.mipmapCount, i = 0; n > i; i++) {
                            a[i] = {
                                mipmaps: []
                            };
                            for (var u = 0; u < e.mipmapCount; u++) a[i].mipmaps.push(e.mipmaps[i * e.mipmapCount + u]), a[i].format = e.format, a[i].width = e.width, a[i].height = e.height
                        } else s.image.width = e.width, s.image.height = e.height, s.mipmaps = e.mipmaps;
                    1 === e.mipmapCount && (s.minFilter = o.LinearFilter), s.format = e.format, s.needsUpdate = !0, t && t(s)
                }, n, i);
                return s
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            }
        }, o.Material = function() {
            Object.defineProperty(this, "id", {
                value: o.MaterialIdCount++
            }), this.uuid = o.Math.generateUUID(), this.name = "", this.type = "Material", this.side = o.FrontSide, this.opacity = 1, this.transparent = !1, this.blending = o.NormalBlending, this.blendSrc = o.SrcAlphaFactor, this.blendDst = o.OneMinusSrcAlphaFactor, this.blendEquation = o.AddEquation, this.blendEquationAlpha = this.blendDstAlpha = this.blendSrcAlpha = null, this.depthFunc = o.LessEqualDepth, this.colorWrite = this.depthWrite = this.depthTest = !0, this.precision = null, this.polygonOffset = !1, this.overdraw = this.alphaTest = this.polygonOffsetUnits = this.polygonOffsetFactor = 0, this._needsUpdate = this.visible = !0
        }, o.Material.prototype = {
            constructor: o.Material,
            get needsUpdate() {
                return this._needsUpdate
            },
            set needsUpdate(e) {
                !0 === e && this.update(), this._needsUpdate = e
            },
            setValues: function(e) {
                if (void 0 !== e)
                    for (var t in e) {
                        var n = e[t];
                        if (void 0 === n) console.warn("THREE.Material: '" + t + "' parameter is undefined.");
                        else {
                            var i = this[t];
                            void 0 === i ? console.warn("THREE." + this.type + ": '" + t + "' is not a property of this material.") : i instanceof o.Color ? i.set(n) : i instanceof o.Vector3 && n instanceof o.Vector3 ? i.copy(n) : this[t] = "overdraw" === t ? Number(n) : n
                        }
                    }
            },
            toJSON: function(e) {
                var t = {
                    metadata: {
                        version: 4.4,
                        type: "Material",
                        generator: "Material.toJSON"
                    }
                };
                return t.uuid = this.uuid, t.type = this.type, "" !== this.name && (t.name = this.name), this.color instanceof o.Color && (t.color = this.color.getHex()), this.emissive instanceof o.Color && (t.emissive = this.emissive.getHex()), this.specular instanceof o.Color && (t.specular = this.specular.getHex()), void 0 !== this.shininess && (t.shininess = this.shininess), this.map instanceof o.Texture && (t.map = this.map.toJSON(e).uuid), this.alphaMap instanceof o.Texture && (t.alphaMap = this.alphaMap.toJSON(e).uuid), this.lightMap instanceof o.Texture && (t.lightMap = this.lightMap.toJSON(e).uuid), this.bumpMap instanceof o.Texture && (t.bumpMap = this.bumpMap.toJSON(e).uuid, t.bumpScale = this.bumpScale), this.normalMap instanceof o.Texture && (t.normalMap = this.normalMap.toJSON(e).uuid, t.normalScale = this.normalScale), this.displacementMap instanceof o.Texture && (t.displacementMap = this.displacementMap.toJSON(e).uuid, t.displacementScale = this.displacementScale, t.displacementBias = this.displacementBias), this.specularMap instanceof o.Texture && (t.specularMap = this.specularMap.toJSON(e).uuid), this.envMap instanceof o.Texture && (t.envMap = this.envMap.toJSON(e).uuid, t.reflectivity = this.reflectivity), void 0 !== this.size && (t.size = this.size), void 0 !== this.sizeAttenuation && (t.sizeAttenuation = this.sizeAttenuation), void 0 !== this.vertexColors && this.vertexColors !== o.NoColors && (t.vertexColors = this.vertexColors), void 0 !== this.shading && this.shading !== o.SmoothShading && (t.shading = this.shading), void 0 !== this.blending && this.blending !== o.NormalBlending && (t.blending = this.blending), void 0 !== this.side && this.side !== o.FrontSide && (t.side = this.side), 1 > this.opacity && (t.opacity = this.opacity), !0 === this.transparent && (t.transparent = this.transparent), 0 < this.alphaTest && (t.alphaTest = this.alphaTest), !0 === this.wireframe && (t.wireframe = this.wireframe), 1 < this.wireframeLinewidth && (t.wireframeLinewidth = this.wireframeLinewidth), t
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                return this.name = e.name, this.side = e.side, this.opacity = e.opacity, this.transparent = e.transparent, this.blending = e.blending, this.blendSrc = e.blendSrc, this.blendDst = e.blendDst, this.blendEquation = e.blendEquation, this.blendSrcAlpha = e.blendSrcAlpha, this.blendDstAlpha = e.blendDstAlpha, this.blendEquationAlpha = e.blendEquationAlpha, this.depthFunc = e.depthFunc, this.depthTest = e.depthTest, this.depthWrite = e.depthWrite, this.precision = e.precision, this.polygonOffset = e.polygonOffset, this.polygonOffsetFactor = e.polygonOffsetFactor, this.polygonOffsetUnits = e.polygonOffsetUnits, this.alphaTest = e.alphaTest, this.overdraw = e.overdraw, this.visible = e.visible, this
            },
            update: function() {
                this.dispatchEvent({
                    type: "update"
                })
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            },
            get wrapAround() {
                console.warn("THREE." + this.type + ": .wrapAround has been removed.")
            },
            set wrapAround(e) {
                console.warn("THREE." + this.type + ": .wrapAround has been removed.")
            },
            get wrapRGB() {
                return console.warn("THREE." + this.type + ": .wrapRGB has been removed."), new o.Color
            }
        }, o.EventDispatcher.prototype.apply(o.Material.prototype), o.MaterialIdCount = 0, o.LineBasicMaterial = function(e) {
            o.Material.call(this), this.type = "LineBasicMaterial", this.color = new o.Color(16777215), this.linewidth = 1, this.linejoin = this.linecap = "round", this.vertexColors = o.NoColors, this.fog = !0, this.setValues(e)
        }, o.LineBasicMaterial.prototype = Object.create(o.Material.prototype), o.LineBasicMaterial.prototype.constructor = o.LineBasicMaterial, o.LineBasicMaterial.prototype.copy = function(e) {
            return o.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.linewidth = e.linewidth, this.linecap = e.linecap, this.linejoin = e.linejoin, this.vertexColors = e.vertexColors, this.fog = e.fog, this
        }, o.LineDashedMaterial = function(e) {
            o.Material.call(this), this.type = "LineDashedMaterial", this.color = new o.Color(16777215), this.scale = this.linewidth = 1, this.dashSize = 3, this.gapSize = 1, this.vertexColors = !1, this.fog = !0, this.setValues(e)
        }, o.LineDashedMaterial.prototype = Object.create(o.Material.prototype), o.LineDashedMaterial.prototype.constructor = o.LineDashedMaterial, o.LineDashedMaterial.prototype.copy = function(e) {
            return o.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.linewidth = e.linewidth, this.scale = e.scale, this.dashSize = e.dashSize, this.gapSize = e.gapSize, this.vertexColors = e.vertexColors, this.fog = e.fog, this
        }, o.MeshBasicMaterial = function(e) {
            o.Material.call(this), this.type = "MeshBasicMaterial", this.color = new o.Color(16777215), this.aoMap = this.map = null, this.aoMapIntensity = 1, this.envMap = this.alphaMap = this.specularMap = null, this.combine = o.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = o.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinejoin = this.wireframeLinecap = "round", this.vertexColors = o.NoColors, this.morphTargets = this.skinning = !1, this.setValues(e)
        }, o.MeshBasicMaterial.prototype = Object.create(o.Material.prototype), o.MeshBasicMaterial.prototype.constructor = o.MeshBasicMaterial, o.MeshBasicMaterial.prototype.copy = function(e) {
            return o.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.fog = e.fog, this.shading = e.shading, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.vertexColors = e.vertexColors, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this
        }, o.MeshLambertMaterial = function(e) {
            o.Material.call(this), this.type = "MeshLambertMaterial", this.color = new o.Color(16777215), this.emissive = new o.Color(0), this.envMap = this.alphaMap = this.specularMap = this.map = null, this.combine = o.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinejoin = this.wireframeLinecap = "round", this.vertexColors = o.NoColors, this.morphNormals = this.morphTargets = this.skinning = !1, this.setValues(e)
        }, o.MeshLambertMaterial.prototype = Object.create(o.Material.prototype), o.MeshLambertMaterial.prototype.constructor = o.MeshLambertMaterial, o.MeshLambertMaterial.prototype.copy = function(e) {
            return o.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.emissive.copy(e.emissive), this.map = e.map, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.fog = e.fog, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.vertexColors = e.vertexColors, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this
        }, o.MeshPhongMaterial = function(e) {
            o.Material.call(this), this.type = "MeshPhongMaterial", this.color = new o.Color(16777215), this.emissive = new o.Color(0), this.specular = new o.Color(1118481), this.shininess = 30, this.metal = !1, this.lightMap = this.map = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.bumpMap = this.emissiveMap = null, this.bumpScale = 1, this.normalMap = null, this.normalScale = new o.Vector2(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.envMap = this.alphaMap = this.specularMap = null, this.combine = o.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = o.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinejoin = this.wireframeLinecap = "round", this.vertexColors = o.NoColors, this.morphNormals = this.morphTargets = this.skinning = !1, this.setValues(e)
        }, o.MeshPhongMaterial.prototype = Object.create(o.Material.prototype), o.MeshPhongMaterial.prototype.constructor = o.MeshPhongMaterial, o.MeshPhongMaterial.prototype.copy = function(e) {
            return o.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.emissive.copy(e.emissive), this.specular.copy(e.specular), this.shininess = e.shininess, this.metal = e.metal, this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissiveMap = e.emissiveMap, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.fog = e.fog, this.shading = e.shading, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.vertexColors = e.vertexColors, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this
        }, o.MeshDepthMaterial = function(e) {
            o.Material.call(this), this.type = "MeshDepthMaterial", this.wireframe = this.morphTargets = !1, this.wireframeLinewidth = 1, this.setValues(e)
        }, o.MeshDepthMaterial.prototype = Object.create(o.Material.prototype), o.MeshDepthMaterial.prototype.constructor = o.MeshDepthMaterial, o.MeshDepthMaterial.prototype.copy = function(e) {
            return o.Material.prototype.copy.call(this, e), this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this
        }, o.MeshNormalMaterial = function(e) {
            o.Material.call(this, e), this.type = "MeshNormalMaterial", this.wireframe = !1, this.wireframeLinewidth = 1, this.morphTargets = !1, this.setValues(e)
        }, o.MeshNormalMaterial.prototype = Object.create(o.Material.prototype), o.MeshNormalMaterial.prototype.constructor = o.MeshNormalMaterial, o.MeshNormalMaterial.prototype.copy = function(e) {
            return o.Material.prototype.copy.call(this, e), this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this
        }, o.MultiMaterial = function(e) {
            this.uuid = o.Math.generateUUID(), this.type = "MultiMaterial", this.materials = e instanceof Array ? e : [], this.visible = !0
        }, o.MultiMaterial.prototype = {
            constructor: o.MultiMaterial,
            toJSON: function() {
                for (var e = {
                        metadata: {
                            version: 4.2,
                            type: "material",
                            generator: "MaterialExporter"
                        },
                        uuid: this.uuid,
                        type: this.type,
                        materials: []
                    }, t = 0, n = this.materials.length; n > t; t++) e.materials.push(this.materials[t].toJSON());
                return e.visible = this.visible, e
            },
            clone: function() {
                for (var e = new this.constructor, t = 0; t < this.materials.length; t++) e.materials.push(this.materials[t].clone());
                return e.visible = this.visible, e
            }
        }, o.MeshFaceMaterial = o.MultiMaterial, o.PointsMaterial = function(e) {
            o.Material.call(this), this.type = "PointsMaterial", this.color = new o.Color(16777215), this.map = null, this.size = 1, this.sizeAttenuation = !0, this.vertexColors = o.NoColors, this.fog = !0, this.setValues(e)
        }, o.PointsMaterial.prototype = Object.create(o.Material.prototype), o.PointsMaterial.prototype.constructor = o.PointsMaterial, o.PointsMaterial.prototype.copy = function(e) {
            return o.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.size = e.size, this.sizeAttenuation = e.sizeAttenuation, this.vertexColors = e.vertexColors, this.fog = e.fog, this
        }, o.PointCloudMaterial = function(e) {
            return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."), new o.PointsMaterial(e)
        }, o.ParticleBasicMaterial = function(e) {
            return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."), new o.PointsMaterial(e)
        }, o.ParticleSystemMaterial = function(e) {
            return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."), new o.PointsMaterial(e)
        }, o.ShaderMaterial = function(e) {
            o.Material.call(this), this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.vertexShader = "void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}", this.fragmentShader = "void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}", this.shading = o.SmoothShading, this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.lights = this.fog = !1, this.vertexColors = o.NoColors, this.derivatives = this.morphNormals = this.morphTargets = this.skinning = !1, this.defaultAttributeValues = {
                color: [1, 1, 1],
                uv: [0, 0],
                uv2: [0, 0]
            }, this.index0AttributeName = void 0, void 0 !== e && (void 0 !== e.attributes && console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."), this.setValues(e))
        }, o.ShaderMaterial.prototype = Object.create(o.Material.prototype), o.ShaderMaterial.prototype.constructor = o.ShaderMaterial, o.ShaderMaterial.prototype.copy = function(e) {
            return o.Material.prototype.copy.call(this, e), this.fragmentShader = e.fragmentShader, this.vertexShader = e.vertexShader, this.uniforms = o.UniformsUtils.clone(e.uniforms), this.attributes = e.attributes, this.defines = e.defines, this.shading = e.shading, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.fog = e.fog, this.lights = e.lights, this.vertexColors = e.vertexColors, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this.derivatives = e.derivatives, this
        }, o.ShaderMaterial.prototype.toJSON = function(e) {
            return e = o.Material.prototype.toJSON.call(this, e), e.uniforms = this.uniforms, e.attributes = this.attributes, e.vertexShader = this.vertexShader, e.fragmentShader = this.fragmentShader, e
        }, o.RawShaderMaterial = function(e) {
            o.ShaderMaterial.call(this, e), this.type = "RawShaderMaterial"
        }, o.RawShaderMaterial.prototype = Object.create(o.ShaderMaterial.prototype), o.RawShaderMaterial.prototype.constructor = o.RawShaderMaterial, o.SpriteMaterial = function(e) {
            o.Material.call(this), this.type = "SpriteMaterial", this.color = new o.Color(16777215), this.map = null, this.rotation = 0, this.fog = !1, this.setValues(e)
        }, o.SpriteMaterial.prototype = Object.create(o.Material.prototype), o.SpriteMaterial.prototype.constructor = o.SpriteMaterial, o.SpriteMaterial.prototype.copy = function(e) {
            return o.Material.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.rotation = e.rotation, this.fog = e.fog, this
        }, o.Texture = function(e, t, n, i, r, a, s, u, l) {
            Object.defineProperty(this, "id", {
                value: o.TextureIdCount++
            }), this.uuid = o.Math.generateUUID(), this.sourceFile = this.name = "", this.image = void 0 !== e ? e : o.Texture.DEFAULT_IMAGE, this.mipmaps = [], this.mapping = void 0 !== t ? t : o.Texture.DEFAULT_MAPPING, this.wrapS = void 0 !== n ? n : o.ClampToEdgeWrapping, this.wrapT = void 0 !== i ? i : o.ClampToEdgeWrapping, this.magFilter = void 0 !== r ? r : o.LinearFilter, this.minFilter = void 0 !== a ? a : o.LinearMipMapLinearFilter, this.anisotropy = void 0 !== l ? l : 1, this.format = void 0 !== s ? s : o.RGBAFormat, this.type = void 0 !== u ? u : o.UnsignedByteType, this.offset = new o.Vector2(0, 0), this.repeat = new o.Vector2(1, 1), this.generateMipmaps = !0, this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, this.version = 0, this.onUpdate = null
        }, o.Texture.DEFAULT_IMAGE = void 0, o.Texture.DEFAULT_MAPPING = o.UVMapping, o.Texture.prototype = {
            constructor: o.Texture,
            set needsUpdate(e) {
                !0 === e && this.version++
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                return this.image = e.image, this.mipmaps = e.mipmaps.slice(0), this.mapping = e.mapping, this.wrapS = e.wrapS, this.wrapT = e.wrapT, this.magFilter = e.magFilter, this.minFilter = e.minFilter, this.anisotropy = e.anisotropy, this.format = e.format, this.type = e.type, this.offset.copy(e.offset), this.repeat.copy(e.repeat), this.generateMipmaps = e.generateMipmaps, this.premultiplyAlpha = e.premultiplyAlpha, this.flipY = e.flipY, this.unpackAlignment = e.unpackAlignment, this
            },
            toJSON: function(e) {
                if (void 0 !== e.textures[this.uuid]) return e.textures[this.uuid];
                var t = {
                    metadata: {
                        version: 4.4,
                        type: "Texture",
                        generator: "Texture.toJSON"
                    },
                    uuid: this.uuid,
                    name: this.name,
                    mapping: this.mapping,
                    repeat: [this.repeat.x, this.repeat.y],
                    offset: [this.offset.x, this.offset.y],
                    wrap: [this.wrapS, this.wrapT],
                    minFilter: this.minFilter,
                    magFilter: this.magFilter,
                    anisotropy: this.anisotropy
                };
                if (void 0 !== this.image) {
                    var n = this.image;
                    if (void 0 === n.uuid && (n.uuid = o.Math.generateUUID()), void 0 === e.images[n.uuid]) {
                        var i, r = e.images,
                            a = n.uuid,
                            s = n.uuid;
                        void 0 !== n.toDataURL ? i = n : (i = document.createElement("canvas"), i.width = n.width, i.height = n.height, i.getContext("2d").drawImage(n, 0, 0, n.width, n.height)), i = 2048 < i.width || 2048 < i.height ? i.toDataURL("image/jpeg", .6) : i.toDataURL("image/png"), r[a] = {
                            uuid: s,
                            url: i
                        }
                    }
                    t.image = n.uuid
                }
                return e.textures[this.uuid] = t
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            },
            transformUv: function(e) {
                if (this.mapping === o.UVMapping) {
                    if (e.multiply(this.repeat), e.add(this.offset), 0 > e.x || 1 < e.x) switch (this.wrapS) {
                        case o.RepeatWrapping:
                            e.x -= Math.floor(e.x);
                            break;
                        case o.ClampToEdgeWrapping:
                            e.x = 0 > e.x ? 0 : 1;
                            break;
                        case o.MirroredRepeatWrapping:
                            1 === Math.abs(Math.floor(e.x) % 2) ? e.x = Math.ceil(e.x) - e.x : e.x -= Math.floor(e.x)
                    }
                    if (0 > e.y || 1 < e.y) switch (this.wrapT) {
                        case o.RepeatWrapping:
                            e.y -= Math.floor(e.y);
                            break;
                        case o.ClampToEdgeWrapping:
                            e.y = 0 > e.y ? 0 : 1;
                            break;
                        case o.MirroredRepeatWrapping:
                            1 === Math.abs(Math.floor(e.y) % 2) ? e.y = Math.ceil(e.y) - e.y : e.y -= Math.floor(e.y)
                    }
                    this.flipY && (e.y = 1 - e.y)
                }
            }
        }, o.EventDispatcher.prototype.apply(o.Texture.prototype), o.TextureIdCount = 0, o.CanvasTexture = function(e, t, n, i, r, a, s, u, l) {
            o.Texture.call(this, e, t, n, i, r, a, s, u, l), this.needsUpdate = !0
        }, o.CanvasTexture.prototype = Object.create(o.Texture.prototype), o.CanvasTexture.prototype.constructor = o.CanvasTexture, o.CubeTexture = function(e, t, n, i, r, a, s, u, l) {
            t = void 0 !== t ? t : o.CubeReflectionMapping, o.Texture.call(this, e, t, n, i, r, a, s, u, l), this.images = e, this.flipY = !1
        }, o.CubeTexture.prototype = Object.create(o.Texture.prototype), o.CubeTexture.prototype.constructor = o.CubeTexture, o.CubeTexture.prototype.copy = function(e) {
            return o.Texture.prototype.copy.call(this, e), this.images = e.images, this
        }, o.CompressedTexture = function(e, t, n, i, r, a, s, u, l, c, h) {
            o.Texture.call(this, null, a, s, u, l, c, i, r, h), this.image = {
                width: t,
                height: n
            }, this.mipmaps = e, this.generateMipmaps = this.flipY = !1
        }, o.CompressedTexture.prototype = Object.create(o.Texture.prototype), o.CompressedTexture.prototype.constructor = o.CompressedTexture, o.DataTexture = function(e, t, n, i, r, a, s, u, l, c, h) {
            o.Texture.call(this, null, a, s, u, l, c, i, r, h), this.image = {
                data: e,
                width: t,
                height: n
            }, this.magFilter = void 0 !== l ? l : o.NearestFilter, this.minFilter = void 0 !== c ? c : o.NearestFilter, this.generateMipmaps = this.flipY = !1
        }, o.DataTexture.prototype = Object.create(o.Texture.prototype), o.DataTexture.prototype.constructor = o.DataTexture, o.VideoTexture = function(e, t, n, i, r, a, s, u, l) {
            function c() {
                requestAnimationFrame(c), e.readyState === e.HAVE_ENOUGH_DATA && (h.needsUpdate = !0)
            }
            o.Texture.call(this, e, t, n, i, r, a, s, u, l), this.generateMipmaps = !1;
            var h = this;
            c()
        }, o.VideoTexture.prototype = Object.create(o.Texture.prototype), o.VideoTexture.prototype.constructor = o.VideoTexture, o.Group = function() {
            o.Object3D.call(this), this.type = "Group"
        }, o.Group.prototype = Object.create(o.Object3D.prototype), o.Group.prototype.constructor = o.Group, o.Points = function(e, t) {
            o.Object3D.call(this), this.type = "Points", this.geometry = void 0 !== e ? e : new o.Geometry, this.material = void 0 !== t ? t : new o.PointsMaterial({
                color: 16777215 * Math.random()
            })
        }, o.Points.prototype = Object.create(o.Object3D.prototype), o.Points.prototype.constructor = o.Points, o.Points.prototype.raycast = function() {
            var e = new o.Matrix4,
                t = new o.Ray;
            return function(n, i) {
                function r(e, r) {
                    var o = t.distanceSqToPoint(e);
                    if (l > o) {
                        var s = t.closestPointToPoint(e);
                        s.applyMatrix4(a.matrixWorld);
                        var u = n.ray.origin.distanceTo(s);
                        u < n.near || u > n.far || i.push({
                            distance: u,
                            distanceToRay: Math.sqrt(o),
                            point: s.clone(),
                            index: r,
                            face: null,
                            object: a
                        })
                    }
                }
                var a = this,
                    s = a.geometry,
                    u = n.params.Points.threshold;
                if (e.getInverse(this.matrixWorld), t.copy(n.ray).applyMatrix4(e), null === s.boundingBox || !1 !== t.isIntersectionBox(s.boundingBox)) {
                    var u = u / ((this.scale.x + this.scale.y + this.scale.z) / 3),
                        l = u * u,
                        u = new o.Vector3;
                    if (s instanceof o.BufferGeometry) {
                        var c = s.index,
                            s = s.attributes.position.array;
                        if (null !== c)
                            for (var h = c.array, c = 0, d = h.length; d > c; c++) {
                                var f = h[c];
                                u.fromArray(s, 3 * f), r(u, f)
                            } else
                                for (c = 0, h = s.length / 3; h > c; c++) u.fromArray(s, 3 * c), r(u, c)
                    } else
                        for (u = s.vertices, c = 0, h = u.length; h > c; c++) r(u[c], c)
                }
            }
        }(), o.Points.prototype.clone = function() {
            return new this.constructor(this.geometry, this.material).copy(this)
        }, o.PointCloud = function(e, t) {
            return console.warn("THREE.PointCloud has been renamed to THREE.Points."), new o.Points(e, t)
        }, o.ParticleSystem = function(e, t) {
            return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."), new o.Points(e, t)
        }, o.Line = function(e, t, n) {
            return 1 === n ? (console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."), new o.LineSegments(e, t)) : (o.Object3D.call(this), this.type = "Line", this.geometry = void 0 !== e ? e : new o.Geometry, void(this.material = void 0 !== t ? t : new o.LineBasicMaterial({
                color: 16777215 * Math.random()
            })))
        }, o.Line.prototype = Object.create(o.Object3D.prototype), o.Line.prototype.constructor = o.Line, o.Line.prototype.raycast = function() {
            var e = new o.Matrix4,
                t = new o.Ray,
                n = new o.Sphere;
            return function(i, r) {
                var a = i.linePrecision,
                    a = a * a,
                    s = this.geometry;
                if (null === s.boundingSphere && s.computeBoundingSphere(), n.copy(s.boundingSphere), n.applyMatrix4(this.matrixWorld), !1 !== i.ray.isIntersectionSphere(n)) {
                    e.getInverse(this.matrixWorld), t.copy(i.ray).applyMatrix4(e);
                    var u = new o.Vector3,
                        l = new o.Vector3,
                        c = new o.Vector3,
                        h = new o.Vector3,
                        d = this instanceof o.LineSegments ? 2 : 1;
                    if (s instanceof o.BufferGeometry) {
                        var f = s.index,
                            p = s.attributes;
                        if (null !== f)
                            for (var s = f.array, p = p.position.array, f = 0, m = s.length - 1; m > f; f += d) {
                                var v = s[f + 1];
                                u.fromArray(p, 3 * s[f]), l.fromArray(p, 3 * v), v = t.distanceSqToSegment(u, l, h, c), v > a || (h.applyMatrix4(this.matrixWorld), v = i.ray.origin.distanceTo(h), v < i.near || v > i.far || r.push({
                                    distance: v,
                                    point: c.clone().applyMatrix4(this.matrixWorld),
                                    index: f,
                                    face: null,
                                    faceIndex: null,
                                    object: this
                                }))
                            } else
                                for (p = p.position.array, f = 0, m = p.length / 3 - 1; m > f; f += d) u.fromArray(p, 3 * f), l.fromArray(p, 3 * f + 3), v = t.distanceSqToSegment(u, l, h, c), v > a || (h.applyMatrix4(this.matrixWorld), v = i.ray.origin.distanceTo(h), v < i.near || v > i.far || r.push({
                                    distance: v,
                                    point: c.clone().applyMatrix4(this.matrixWorld),
                                    index: f,
                                    face: null,
                                    faceIndex: null,
                                    object: this
                                }))
                    } else if (s instanceof o.Geometry)
                        for (u = s.vertices, l = u.length, f = 0; l - 1 > f; f += d) v = t.distanceSqToSegment(u[f], u[f + 1], h, c), v > a || (h.applyMatrix4(this.matrixWorld), v = i.ray.origin.distanceTo(h), v < i.near || v > i.far || r.push({
                            distance: v,
                            point: c.clone().applyMatrix4(this.matrixWorld),
                            index: f,
                            face: null,
                            faceIndex: null,
                            object: this
                        }))
                }
            }
        }(), o.Line.prototype.clone = function() {
            return new this.constructor(this.geometry, this.material).copy(this)
        }, o.LineStrip = 0, o.LinePieces = 1, o.LineSegments = function(e, t) {
            o.Line.call(this, e, t), this.type = "LineSegments"
        }, o.LineSegments.prototype = Object.create(o.Line.prototype), o.LineSegments.prototype.constructor = o.LineSegments, o.Mesh = function(e, t) {
            o.Object3D.call(this), this.type = "Mesh", this.geometry = void 0 !== e ? e : new o.Geometry, this.material = void 0 !== t ? t : new o.MeshBasicMaterial({
                color: 16777215 * Math.random()
            }), this.updateMorphTargets()
        }, o.Mesh.prototype = Object.create(o.Object3D.prototype), o.Mesh.prototype.constructor = o.Mesh, o.Mesh.prototype.updateMorphTargets = function() {
            if (void 0 !== this.geometry.morphTargets && 0 < this.geometry.morphTargets.length) {
                this.morphTargetBase = -1, this.morphTargetInfluences = [], this.morphTargetDictionary = {};
                for (var e = 0, t = this.geometry.morphTargets.length; t > e; e++) this.morphTargetInfluences.push(0), this.morphTargetDictionary[this.geometry.morphTargets[e].name] = e
            }
        }, o.Mesh.prototype.getMorphTargetIndexByName = function(e) {
            return void 0 !== this.morphTargetDictionary[e] ? this.morphTargetDictionary[e] : (console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target " + e + " does not exist. Returning 0."), 0)
        }, o.Mesh.prototype.raycast = function() {
            function e(e, t, n, i, r, a, s) {
                return o.Triangle.barycoordFromPoint(e, t, n, i, v), r.multiplyScalar(v.x), a.multiplyScalar(v.y), s.multiplyScalar(v.z), r.add(a).add(s), r.clone()
            }

            function t(e, t, n, i, r, a, s) {
                var u = e.material;
                return null === (u.side === o.BackSide ? n.intersectTriangle(a, r, i, !0, s) : n.intersectTriangle(i, r, a, u.side !== o.DoubleSide, s)) ? null : (y.copy(s), y.applyMatrix4(e.matrixWorld), n = t.ray.origin.distanceTo(y), n < t.near || n > t.far ? null : {
                    distance: n,
                    point: y.clone(),
                    object: e
                })
            }

            function n(n, i, r, a, c, h, d, v) {
                return s.fromArray(a, 3 * h), u.fromArray(a, 3 * d), l.fromArray(a, 3 * v), (n = t(n, i, r, s, u, l, g)) && (c && (f.fromArray(c, 2 * h), p.fromArray(c, 2 * d), m.fromArray(c, 2 * v), n.uv = e(g, s, u, l, f, p, m)), n.face = new o.Face3(h, d, v, o.Triangle.normal(s, u, l)), n.faceIndex = h), n
            }
            var i = new o.Matrix4,
                r = new o.Ray,
                a = new o.Sphere,
                s = new o.Vector3,
                u = new o.Vector3,
                l = new o.Vector3,
                c = new o.Vector3,
                h = new o.Vector3,
                d = new o.Vector3,
                f = new o.Vector2,
                p = new o.Vector2,
                m = new o.Vector2,
                v = new o.Vector3,
                g = new o.Vector3,
                y = new o.Vector3;
            return function(v, y) {
                var _ = this.geometry,
                    x = this.material;
                if (void 0 !== x) {
                    null === _.boundingSphere && _.computeBoundingSphere();
                    var b = this.matrixWorld;
                    if (a.copy(_.boundingSphere), a.applyMatrix4(b), !1 !== v.ray.isIntersectionSphere(a) && (i.getInverse(b), r.copy(v.ray).applyMatrix4(i), null === _.boundingBox || !1 !== r.isIntersectionBox(_.boundingBox))) {
                        var w, T;
                        if (_ instanceof o.BufferGeometry) {
                            var E, S, x = _.index,
                                b = _.attributes,
                                _ = b.position.array;
                            if (void 0 !== b.uv && (w = b.uv.array), null !== x)
                                for (var b = x.array, M = 0, P = b.length; P > M; M += 3) x = b[M], E = b[M + 1], S = b[M + 2], (T = n(this, v, r, _, w, x, E, S)) && (T.faceIndex = Math.floor(M / 3), y.push(T));
                            else
                                for (M = 0, P = _.length; P > M; M += 9) x = M / 3, E = x + 1, S = x + 2, (T = n(this, v, r, _, w, x, E, S)) && (T.index = x, y.push(T))
                        } else if (_ instanceof o.Geometry) {
                            var A, C, b = x instanceof o.MeshFaceMaterial,
                                M = !0 === b ? x.materials : null,
                                P = _.vertices;
                            E = _.faces, S = _.faceVertexUvs[0], 0 < S.length && (w = S);
                            for (var R = 0, L = E.length; L > R; R++) {
                                var O = E[R];
                                if (T = !0 === b ? M[O.materialIndex] : x, void 0 !== T) {
                                    if (S = P[O.a], A = P[O.b], C = P[O.c], !0 === T.morphTargets) {
                                        T = _.morphTargets;
                                        var k = this.morphTargetInfluences;
                                        s.set(0, 0, 0), u.set(0, 0, 0), l.set(0, 0, 0);
                                        for (var D = 0, F = T.length; F > D; D++) {
                                            var B = k[D];
                                            if (0 !== B) {
                                                var I = T[D].vertices;
                                                s.addScaledVector(c.subVectors(I[O.a], S), B), u.addScaledVector(h.subVectors(I[O.b], A), B), l.addScaledVector(d.subVectors(I[O.c], C), B)
                                            }
                                        }
                                        s.add(S), u.add(A), l.add(C), S = s, A = u, C = l
                                    }(T = t(this, v, r, S, A, C, g)) && (w && (k = w[R], f.copy(k[0]), p.copy(k[1]), m.copy(k[2]), T.uv = e(g, S, A, C, f, p, m)), T.face = O, T.faceIndex = R, y.push(T))
                                }
                            }
                        }
                    }
                }
            }
        }(), o.Mesh.prototype.clone = function() {
            return new this.constructor(this.geometry, this.material).copy(this)
        }, o.Bone = function(e) {
            o.Object3D.call(this), this.type = "Bone", this.skin = e
        }, o.Bone.prototype = Object.create(o.Object3D.prototype), o.Bone.prototype.constructor = o.Bone, o.Bone.prototype.copy = function(e) {
            return o.Object3D.prototype.copy.call(this, e), this.skin = e.skin, this
        }, o.Skeleton = function(e, t, n) {
            if (this.useVertexTexture = void 0 !== n ? n : !0, this.identityMatrix = new o.Matrix4, e = e || [], this.bones = e.slice(0), this.useVertexTexture ? (e = Math.sqrt(4 * this.bones.length), e = o.Math.nextPowerOfTwo(Math.ceil(e)), this.boneTextureHeight = this.boneTextureWidth = e = Math.max(e, 4), this.boneMatrices = new Float32Array(this.boneTextureWidth * this.boneTextureHeight * 4), this.boneTexture = new o.DataTexture(this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, o.RGBAFormat, o.FloatType)) : this.boneMatrices = new Float32Array(16 * this.bones.length), void 0 === t) this.calculateInverses();
            else if (this.bones.length === t.length) this.boneInverses = t.slice(0);
            else
                for (console.warn("THREE.Skeleton bonInverses is the wrong length."), this.boneInverses = [], t = 0, e = this.bones.length; e > t; t++) this.boneInverses.push(new o.Matrix4)
        }, o.Skeleton.prototype.calculateInverses = function() {
            this.boneInverses = [];
            for (var e = 0, t = this.bones.length; t > e; e++) {
                var n = new o.Matrix4;
                this.bones[e] && n.getInverse(this.bones[e].matrixWorld), this.boneInverses.push(n)
            }
        }, o.Skeleton.prototype.pose = function() {
            for (var e, t = 0, n = this.bones.length; n > t; t++)(e = this.bones[t]) && e.matrixWorld.getInverse(this.boneInverses[t]);
            for (t = 0, n = this.bones.length; n > t; t++)(e = this.bones[t]) && (e.parent ? (e.matrix.getInverse(e.parent.matrixWorld), e.matrix.multiply(e.matrixWorld)) : e.matrix.copy(e.matrixWorld), e.matrix.decompose(e.position, e.quaternion, e.scale))
        }, o.Skeleton.prototype.update = function() {
            var e = new o.Matrix4;
            return function() {
                for (var t = 0, n = this.bones.length; n > t; t++) e.multiplyMatrices(this.bones[t] ? this.bones[t].matrixWorld : this.identityMatrix, this.boneInverses[t]), e.flattenToArrayOffset(this.boneMatrices, 16 * t);
                this.useVertexTexture && (this.boneTexture.needsUpdate = !0)
            }
        }(), o.Skeleton.prototype.clone = function() {
            return new o.Skeleton(this.bones, this.boneInverses, this.useVertexTexture)
        }, o.SkinnedMesh = function(e, t, n) {
            if (o.Mesh.call(this, e, t), this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new o.Matrix4, this.bindMatrixInverse = new o.Matrix4, e = [], this.geometry && void 0 !== this.geometry.bones) {
                for (var i, r = 0, a = this.geometry.bones.length; a > r; ++r) i = this.geometry.bones[r], t = new o.Bone(this), e.push(t), t.name = i.name, t.position.fromArray(i.pos), t.quaternion.fromArray(i.rotq), void 0 !== i.scl && t.scale.fromArray(i.scl);
                for (r = 0, a = this.geometry.bones.length; a > r; ++r) i = this.geometry.bones[r], -1 !== i.parent && null !== i.parent ? e[i.parent].add(e[r]) : this.add(e[r])
            }
            this.normalizeSkinWeights(), this.updateMatrixWorld(!0), this.bind(new o.Skeleton(e, void 0, n), this.matrixWorld)
        }, o.SkinnedMesh.prototype = Object.create(o.Mesh.prototype), o.SkinnedMesh.prototype.constructor = o.SkinnedMesh, o.SkinnedMesh.prototype.bind = function(e, t) {
            this.skeleton = e, void 0 === t && (this.updateMatrixWorld(!0), this.skeleton.calculateInverses(), t = this.matrixWorld), this.bindMatrix.copy(t), this.bindMatrixInverse.getInverse(t)
        }, o.SkinnedMesh.prototype.pose = function() {
            this.skeleton.pose()
        }, o.SkinnedMesh.prototype.normalizeSkinWeights = function() {
            if (this.geometry instanceof o.Geometry)
                for (var e = 0; e < this.geometry.skinIndices.length; e++) {
                    var t = this.geometry.skinWeights[e],
                        n = 1 / t.lengthManhattan();
                    1 / 0 !== n ? t.multiplyScalar(n) : t.set(1)
                }
        }, o.SkinnedMesh.prototype.updateMatrixWorld = function(e) {
            o.Mesh.prototype.updateMatrixWorld.call(this, !0), "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : console.warn("THREE.SkinnedMesh unrecognized bindMode: " + this.bindMode)
        }, o.SkinnedMesh.prototype.clone = function() {
            return new this.constructor(this.geometry, this.material, this.useVertexTexture).copy(this)
        }, o.LOD = function() {
            o.Object3D.call(this), this.type = "LOD", Object.defineProperties(this, {
                levels: {
                    enumerable: !0,
                    value: []
                },
                objects: {
                    get: function() {
                        return console.warn("THREE.LOD: .objects has been renamed to .levels."), this.levels
                    }
                }
            })
        }, o.LOD.prototype = Object.create(o.Object3D.prototype), o.LOD.prototype.constructor = o.LOD, o.LOD.prototype.addLevel = function(e, t) {
            void 0 === t && (t = 0), t = Math.abs(t);
            for (var n = this.levels, i = 0; i < n.length && !(t < n[i].distance); i++);
            n.splice(i, 0, {
                distance: t,
                object: e
            }), this.add(e)
        }, o.LOD.prototype.getObjectForDistance = function(e) {
            for (var t = this.levels, n = 1, i = t.length; i > n && !(e < t[n].distance); n++);
            return t[n - 1].object
        }, o.LOD.prototype.raycast = function() {
            var e = new o.Vector3;
            return function(t, n) {
                e.setFromMatrixPosition(this.matrixWorld);
                var i = t.ray.origin.distanceTo(e);
                this.getObjectForDistance(i).raycast(t, n)
            }
        }(), o.LOD.prototype.update = function() {
            var e = new o.Vector3,
                t = new o.Vector3;
            return function(n) {
                var i = this.levels;
                if (1 < i.length) {
                    e.setFromMatrixPosition(n.matrixWorld), t.setFromMatrixPosition(this.matrixWorld), n = e.distanceTo(t), i[0].object.visible = !0;
                    for (var r = 1, o = i.length; o > r && n >= i[r].distance; r++) i[r - 1].object.visible = !1, i[r].object.visible = !0;
                    for (; o > r; r++) i[r].object.visible = !1
                }
            }
        }(), o.LOD.prototype.copy = function(e) {
            o.Object3D.prototype.copy.call(this, e, !1), e = e.levels;
            for (var t = 0, n = e.length; n > t; t++) {
                var i = e[t];
                this.addLevel(i.object.clone(), i.distance)
            }
            return this
        }, o.LOD.prototype.toJSON = function(e) {
            e = o.Object3D.prototype.toJSON.call(this, e), e.object.levels = [];
            for (var t = this.levels, n = 0, i = t.length; i > n; n++) {
                var r = t[n];
                e.object.levels.push({
                    object: r.object.uuid,
                    distance: r.distance
                })
            }
            return e
        }, o.Sprite = function() {
            var e = new Uint16Array([0, 1, 2, 0, 2, 3]),
                t = new Float32Array([-.5, -.5, 0, .5, -.5, 0, .5, .5, 0, -.5, .5, 0]),
                n = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),
                i = new o.BufferGeometry;
            return i.setIndex(new o.BufferAttribute(e, 1)), i.addAttribute("position", new o.BufferAttribute(t, 3)), i.addAttribute("uv", new o.BufferAttribute(n, 2)),
                function(e) {
                    o.Object3D.call(this), this.type = "Sprite", this.geometry = i, this.material = void 0 !== e ? e : new o.SpriteMaterial
                }
        }(), o.Sprite.prototype = Object.create(o.Object3D.prototype), o.Sprite.prototype.constructor = o.Sprite, o.Sprite.prototype.raycast = function() {
            var e = new o.Vector3;
            return function(t, n) {
                e.setFromMatrixPosition(this.matrixWorld);
                var i = t.ray.distanceSqToPoint(e);
                i > this.scale.x * this.scale.y || n.push({
                    distance: Math.sqrt(i),
                    point: this.position,
                    face: null,
                    object: this
                })
            }
        }(), o.Sprite.prototype.clone = function() {
            return new this.constructor(this.material).copy(this)
        }, o.Particle = o.Sprite, o.LensFlare = function(e, t, n, i, r) {
            o.Object3D.call(this), this.lensFlares = [], this.positionScreen = new o.Vector3, this.customUpdateCallback = void 0, void 0 !== e && this.add(e, t, n, i, r)
        }, o.LensFlare.prototype = Object.create(o.Object3D.prototype), o.LensFlare.prototype.constructor = o.LensFlare, o.LensFlare.prototype.add = function(e, t, n, i, r, a) {
            void 0 === t && (t = -1), void 0 === n && (n = 0), void 0 === a && (a = 1), void 0 === r && (r = new o.Color(16777215)), void 0 === i && (i = o.NormalBlending), n = Math.min(n, Math.max(0, n)), this.lensFlares.push({
                texture: e,
                size: t,
                distance: n,
                x: 0,
                y: 0,
                z: 0,
                scale: 1,
                rotation: 0,
                opacity: a,
                color: r,
                blending: i
            })
        }, o.LensFlare.prototype.updateLensFlares = function() {
            var e, t, n = this.lensFlares.length,
                i = 2 * -this.positionScreen.x,
                r = 2 * -this.positionScreen.y;
            for (e = 0; n > e; e++) t = this.lensFlares[e], t.x = this.positionScreen.x + i * t.distance, t.y = this.positionScreen.y + r * t.distance, t.wantedRotation = t.x * Math.PI * .25, t.rotation += .25 * (t.wantedRotation - t.rotation)
        }, o.LensFlare.prototype.copy = function(e) {
            o.Object3D.prototype.copy.call(this, e), this.positionScreen.copy(e.positionScreen), this.customUpdateCallback = e.customUpdateCallback;
            for (var t = 0, n = e.lensFlares.length; n > t; t++) this.lensFlares.push(e.lensFlares[t]);
            return this
        }, o.Scene = function() {
            o.Object3D.call(this), this.type = "Scene", this.overrideMaterial = this.fog = null, this.autoUpdate = !0
        }, o.Scene.prototype = Object.create(o.Object3D.prototype), o.Scene.prototype.constructor = o.Scene, o.Scene.prototype.copy = function(e) {
            return o.Object3D.prototype.copy.call(this, e), null !== e.fog && (this.fog = e.fog.clone()), null !== e.overrideMaterial && (this.overrideMaterial = e.overrideMaterial.clone()), this.autoUpdate = e.autoUpdate, this.matrixAutoUpdate = e.matrixAutoUpdate, this
        }, o.Fog = function(e, t, n) {
            this.name = "", this.color = new o.Color(e), this.near = void 0 !== t ? t : 1, this.far = void 0 !== n ? n : 1e3
        }, o.Fog.prototype.clone = function() {
            return new o.Fog(this.color.getHex(), this.near, this.far)
        }, o.FogExp2 = function(e, t) {
            this.name = "", this.color = new o.Color(e), this.density = void 0 !== t ? t : 25e-5
        }, o.FogExp2.prototype.clone = function() {
            return new o.FogExp2(this.color.getHex(), this.density)
        }, o.ShaderChunk = {}, o.ShaderChunk.alphamap_fragment = "#ifdef USE_ALPHAMAP\n\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n", o.ShaderChunk.alphamap_pars_fragment = "#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n", o.ShaderChunk.alphatest_fragment = "#ifdef ALPHATEST\n\n	if ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n", o.ShaderChunk.aomap_fragment = "#ifdef USE_AOMAP\n\n	totalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n#endif\n", o.ShaderChunk.aomap_pars_fragment = "#ifdef USE_AOMAP\n\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n\n#endif", o.ShaderChunk.begin_vertex = "\nvec3 transformed = vec3( position );\n", o.ShaderChunk.beginnormal_vertex = "\nvec3 objectNormal = vec3( normal );\n", o.ShaderChunk.bumpmap_pars_fragment = "#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif\n", o.ShaderChunk.color_fragment = "#ifdef USE_COLOR\n\n	diffuseColor.rgb *= vColor;\n\n#endif", o.ShaderChunk.color_pars_fragment = "#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n", o.ShaderChunk.color_pars_vertex = "#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif", o.ShaderChunk.color_vertex = "#ifdef USE_COLOR\n\n	vColor.xyz = color.xyz;\n\n#endif", o.ShaderChunk.common = "#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n	return normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n	float distance = dot( planeNormal, point - pointOnPlane );\n\n	return - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n	if ( decayExponent > 0.0 ) {\n\n	  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n	}\n\n	return 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n\n	float fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\n\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n\n	return 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n\n	return ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n	vec3 halfDir = normalize( lightDir + viewDir );\n\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotLH = saturate( dot( lightDir, halfDir ) );\n\n	vec3 F = F_Schlick( specularColor, dotLH );\n\n	float G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n	float D = D_BlinnPhong( shininess, dotNH );\n\n	return F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n	#ifdef GAMMA_INPUT\n\n		return pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n	#else\n\n		return a;\n\n	#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n	#ifdef GAMMA_OUTPUT\n\n		return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n	#else\n\n		return a;\n\n	#endif\n\n}\n", o.ShaderChunk.defaultnormal_vertex = "#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n", o.ShaderChunk.displacementmap_vertex = "#ifdef USE_DISPLACEMENTMAP\n\n	transformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n", o.ShaderChunk.displacementmap_pars_vertex = "#ifdef USE_DISPLACEMENTMAP\n\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n\n#endif\n", o.ShaderChunk.emissivemap_fragment = "#ifdef USE_EMISSIVEMAP\n\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n	emissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n\n	totalEmissiveLight *= emissiveColor.rgb;\n\n#endif\n", o.ShaderChunk.emissivemap_pars_fragment = "#ifdef USE_EMISSIVEMAP\n\n	uniform sampler2D emissiveMap;\n\n#endif\n", o.ShaderChunk.envmap_fragment = "#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	envColor.xyz = inputToLinear( envColor.xyz );\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n", o.ShaderChunk.envmap_pars_fragment = "#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n", o.ShaderChunk.envmap_pars_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n", o.ShaderChunk.envmap_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n", o.ShaderChunk.fog_fragment = "#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	outgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif", o.ShaderChunk.fog_pars_fragment = "#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif", o.ShaderChunk.hemilight_fragment = "#if MAX_HEMI_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lightDir = hemisphereLightDirection[ i ];\n\n		float dotProduct = dot( normal, lightDir );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		totalAmbientLight += lightColor;\n\n	}\n\n#endif\n\n", o.ShaderChunk.lightmap_fragment = "#ifdef USE_LIGHTMAP\n\n	totalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n#endif\n", o.ShaderChunk.lightmap_pars_fragment = "#ifdef USE_LIGHTMAP\n\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n\n#endif", o.ShaderChunk.lights_lambert_pars_vertex = "#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n", o.ShaderChunk.lights_lambert_vertex = "vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\nvec3 normal = normalize( transformedNormal );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = pointLightColor[ i ];\n\n		vec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n		float dotProduct = dot( normal, lightDir );\n\n		vLightFront += lightColor * attenuation * saturate( dotProduct );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = spotLightColor[ i ];\n\n		vec3 lightPosition = spotLightPosition[ i ];\n		vec3 lVector = lightPosition - mvPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			attenuation *= spotEffect;\n\n\n			float dotProduct = dot( normal, lightDir );\n\n			vLightFront += lightColor * attenuation * saturate( dotProduct );\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 lightColor = directionalLightColor[ i ];\n\n		vec3 lightDir = directionalLightDirection[ i ];\n\n\n		float dotProduct = dot( normal, lightDir );\n\n		vLightFront += lightColor * saturate( dotProduct );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += lightColor * saturate( - dotProduct );\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lightDir = hemisphereLightDirection[ i ];\n\n\n		float dotProduct = dot( normal, lightDir );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			float hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n", o.ShaderChunk.lights_phong_fragment = "vec3 viewDir = normalize( vViewPosition );\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = pointLightColor[ i ];\n\n		vec3 lightPosition = pointLightPosition[ i ];\n		vec3 lVector = lightPosition + vViewPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n		float cosineTerm = saturate( dot( normal, lightDir ) );\n\n		totalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n		vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n		totalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = spotLightColor[ i ];\n\n		vec3 lightPosition = spotLightPosition[ i ];\n		vec3 lVector = lightPosition + vViewPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			attenuation *= spotEffect;\n\n\n			float cosineTerm = saturate( dot( normal, lightDir ) );\n\n			totalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n			vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n			totalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 lightColor = directionalLightColor[ i ];\n\n		vec3 lightDir = directionalLightDirection[ i ];\n\n\n		float cosineTerm = saturate( dot( normal, lightDir ) );\n\n		totalDiffuseLight += lightColor * cosineTerm;\n\n\n		vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n		totalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\n\n	}\n\n#endif\n", o.ShaderChunk.lights_phong_pars_fragment = "uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n	varying vec3 vNormal;\n\n#endif\n", o.ShaderChunk.lights_phong_pars_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\n#endif\n", o.ShaderChunk.lights_phong_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif\n", o.ShaderChunk.linear_to_gamma_fragment = "\n	outgoingLight = linearToOutput( outgoingLight );\n", o.ShaderChunk.logdepthbuf_fragment = "#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif", o.ShaderChunk.logdepthbuf_pars_fragment = "#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n#endif\n", o.ShaderChunk.logdepthbuf_pars_vertex = "#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif", o.ShaderChunk.logdepthbuf_vertex = "#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif", o.ShaderChunk.map_fragment = "#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	texelColor.xyz = inputToLinear( texelColor.xyz );\n\n	diffuseColor *= texelColor;\n\n#endif\n", o.ShaderChunk.map_pars_fragment = "#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif", o.ShaderChunk.map_particle_fragment = "#ifdef USE_MAP\n\n	diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n", o.ShaderChunk.map_particle_pars_fragment = "#ifdef USE_MAP\n\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n\n#endif\n", o.ShaderChunk.morphnormal_vertex = "#ifdef USE_MORPHNORMALS\n\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n", o.ShaderChunk.morphtarget_pars_vertex = "#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif", o.ShaderChunk.morphtarget_vertex = "#ifdef USE_MORPHTARGETS\n\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n#endif\n", o.ShaderChunk.normal_phong_fragment = "#ifndef FLAT_SHADED\n\n	vec3 normal = normalize( vNormal );\n\n	#ifdef DOUBLE_SIDED\n\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n	#endif\n\n#else\n\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n", o.ShaderChunk.normalmap_pars_fragment = "#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n", o.ShaderChunk.project_vertex = "#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n", o.ShaderChunk.shadowmap_fragment = "#ifdef USE_SHADOWMAP\n\n	for ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		float texelSizeY =  1.0 / shadowMapSize[ i ].y;\n\n		float shadow = 0.0;\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n		bool isPointLight = shadowDarkness[ i ] < 0.0;\n\n		if ( isPointLight ) {\n\n			float realShadowDarkness = abs( shadowDarkness[ i ] );\n\n			vec3 lightToPosition = vShadowCoord[ i ].xyz;\n\n	#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n			vec3 bd3D = normalize( lightToPosition );\n			float dp = length( lightToPosition );\n\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\n	#if defined( SHADOWMAP_TYPE_PCF )\n			const float Dr = 1.25;\n	#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			const float Dr = 2.25;\n	#endif\n\n			float os = Dr *  2.0 * texelSizeY;\n\n			const vec3 Gsd = vec3( - 1, 0, 1 );\n\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n			shadow *= realShadowDarkness * ( 1.0 / 21.0 );\n\n	#else \n			vec3 bd3D = normalize( lightToPosition );\n			float dp = length( lightToPosition );\n\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n			shadow *= realShadowDarkness;\n\n	#endif\n\n		} else {\n\n#endif \n			float texelSizeX =  1.0 / shadowMapSize[ i ].x;\n\n			vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\n			bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n			bool inFrustum = all( inFrustumVec );\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n			bool frustumTest = all( frustumTestVec );\n\n			if ( frustumTest ) {\n\n	#if defined( SHADOWMAP_TYPE_PCF )\n\n\n				/*\n					for ( float y = -1.25; y <= 1.25; y += 1.25 )\n						for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n							vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n							float fDepth = unpackDepth( rgbaDepth );\n							if ( fDepth < shadowCoord.z )\n								shadow += 1.0;\n					}\n					shadow /= 9.0;\n				*/\n\n				shadowCoord.z += shadowBias[ i ];\n\n				const float ShadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = texelSizeX;\n				float yPixelOffset = texelSizeY;\n\n				float dx0 = - 1.25 * xPixelOffset;\n				float dy0 = - 1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				float fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				shadow *= shadowDarkness[ i ];\n\n	#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\n				shadowCoord.z += shadowBias[ i ];\n\n				float xPixelOffset = texelSizeX;\n				float yPixelOffset = texelSizeY;\n\n				float dx0 = - 1.0 * xPixelOffset;\n				float dy0 = - 1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[ 0 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[ 0 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[ 0 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[ 1 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[ 1 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[ 1 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[ 2 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[ 2 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[ 2 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[ 0 ] = vec3( lessThan( depthKernel[ 0 ], shadowZ ) );\n				shadowKernel[ 0 ] *= vec3( 0.25 );\n\n				shadowKernel[ 1 ] = vec3( lessThan( depthKernel[ 1 ], shadowZ ) );\n				shadowKernel[ 1 ] *= vec3( 0.25 );\n\n				shadowKernel[ 2 ] = vec3( lessThan( depthKernel[ 2 ], shadowZ ) );\n				shadowKernel[ 2 ] *= vec3( 0.25 );\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[ i ].xy );\n\n				shadowKernel[ 0 ] = mix( shadowKernel[ 1 ], shadowKernel[ 0 ], fractionalCoord.x );\n				shadowKernel[ 1 ] = mix( shadowKernel[ 2 ], shadowKernel[ 1 ], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[ 0 ][ 1 ], shadowKernel[ 0 ][ 0 ], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[ 0 ][ 2 ], shadowKernel[ 0 ][ 1 ], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[ 1 ][ 1 ], shadowKernel[ 1 ][ 0 ], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[ 1 ][ 2 ], shadowKernel[ 1 ][ 1 ], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) ) * shadowDarkness[ i ];\n\n	#else \n				shadowCoord.z += shadowBias[ i ];\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n					shadow = shadowDarkness[ i ];\n\n	#endif\n\n			}\n\n#ifdef SHADOWMAP_DEBUG\n\n			if ( inFrustum ) {\n\n				if ( i == 0 ) {\n\n					outgoingLight *= vec3( 1.0, 0.5, 0.0 );\n\n				} else if ( i == 1 ) {\n\n					outgoingLight *= vec3( 0.0, 1.0, 0.8 );\n\n				} else {\n\n					outgoingLight *= vec3( 0.0, 0.5, 1.0 );\n\n				}\n\n			}\n\n#endif\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n		}\n\n#endif\n\n		shadowMask = shadowMask * vec3( 1.0 - shadow );\n\n	}\n\n#endif\n",
        o.ShaderChunk.shadowmap_pars_fragment = "#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n	#if defined(POINT_LIGHT_SHADOWS)\n\n\n		void adjustShadowValue1K( const float testDepth, const vec4 textureData, const float bias, inout float shadowValue ) {\n\n			const vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n			if ( testDepth >= dot( textureData, bitSh ) * 1000.0 + bias )\n				shadowValue += 1.0;\n\n		}\n\n\n		vec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\n			vec3 absV = abs( v );\n\n\n			float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n			absV *= scaleToCube;\n\n\n			v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\n\n			vec2 planar = v.xy;\n\n			float almostATexel = 1.5 * texelSizeY;\n			float almostOne = 1.0 - almostATexel;\n\n			if ( absV.z >= almostOne ) {\n\n				if ( v.z > 0.0 )\n					planar.x = 4.0 - v.x;\n\n			} else if ( absV.x >= almostOne ) {\n\n				float signX = sign( v.x );\n				planar.x = v.z * signX + 2.0 * signX;\n\n			} else if ( absV.y >= almostOne ) {\n\n				float signY = sign( v.y );\n				planar.x = v.x + 2.0 * signY + 2.0;\n				planar.y = v.z * signY - 2.0;\n\n			}\n\n\n			return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n		}\n\n	#endif\n\n#endif\n", o.ShaderChunk.shadowmap_pars_vertex = "#ifdef USE_SHADOWMAP\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n#endif", o.ShaderChunk.shadowmap_vertex = "#ifdef USE_SHADOWMAP\n\n	for ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n			vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif", o.ShaderChunk.skinbase_vertex = "#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif", o.ShaderChunk.skinning_pars_vertex = "#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n", o.ShaderChunk.skinning_vertex = "#ifdef USE_SKINNING\n\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n", o.ShaderChunk.skinnormal_vertex = "#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n", o.ShaderChunk.specularmap_fragment = "float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif", o.ShaderChunk.specularmap_pars_fragment = "#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif", o.ShaderChunk.uv2_pars_fragment = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n	varying vec2 vUv2;\n\n#endif", o.ShaderChunk.uv2_pars_vertex = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n\n#endif", o.ShaderChunk.uv2_vertex = "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n	vUv2 = uv2;\n\n#endif", o.ShaderChunk.uv_pars_fragment = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n	varying vec2 vUv;\n\n#endif", o.ShaderChunk.uv_pars_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n", o.ShaderChunk.uv_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif", o.ShaderChunk.worldpos_vertex = "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n	#endif\n\n#endif\n", o.UniformsUtils = {
            merge: function(e) {
                for (var t = {}, n = 0; n < e.length; n++) {
                    var i, r = this.clone(e[n]);
                    for (i in r) t[i] = r[i]
                }
                return t
            },
            clone: function(e) {
                var t, n = {};
                for (t in e) {
                    n[t] = {};
                    for (var i in e[t]) {
                        var r = e[t][i];
                        r instanceof o.Color || r instanceof o.Vector2 || r instanceof o.Vector3 || r instanceof o.Vector4 || r instanceof o.Matrix3 || r instanceof o.Matrix4 || r instanceof o.Texture ? n[t][i] = r.clone() : Array.isArray(r) ? n[t][i] = r.slice() : n[t][i] = r
                    }
                }
                return n
            }
        }, o.UniformsLib = {
            common: {
                diffuse: {
                    type: "c",
                    value: new o.Color(15658734)
                },
                opacity: {
                    type: "f",
                    value: 1
                },
                map: {
                    type: "t",
                    value: null
                },
                offsetRepeat: {
                    type: "v4",
                    value: new o.Vector4(0, 0, 1, 1)
                },
                specularMap: {
                    type: "t",
                    value: null
                },
                alphaMap: {
                    type: "t",
                    value: null
                },
                envMap: {
                    type: "t",
                    value: null
                },
                flipEnvMap: {
                    type: "f",
                    value: -1
                },
                reflectivity: {
                    type: "f",
                    value: 1
                },
                refractionRatio: {
                    type: "f",
                    value: .98
                }
            },
            aomap: {
                aoMap: {
                    type: "t",
                    value: null
                },
                aoMapIntensity: {
                    type: "f",
                    value: 1
                }
            },
            lightmap: {
                lightMap: {
                    type: "t",
                    value: null
                },
                lightMapIntensity: {
                    type: "f",
                    value: 1
                }
            },
            emissivemap: {
                emissiveMap: {
                    type: "t",
                    value: null
                }
            },
            bumpmap: {
                bumpMap: {
                    type: "t",
                    value: null
                },
                bumpScale: {
                    type: "f",
                    value: 1
                }
            },
            normalmap: {
                normalMap: {
                    type: "t",
                    value: null
                },
                normalScale: {
                    type: "v2",
                    value: new o.Vector2(1, 1)
                }
            },
            displacementmap: {
                displacementMap: {
                    type: "t",
                    value: null
                },
                displacementScale: {
                    type: "f",
                    value: 1
                },
                displacementBias: {
                    type: "f",
                    value: 0
                }
            },
            fog: {
                fogDensity: {
                    type: "f",
                    value: 25e-5
                },
                fogNear: {
                    type: "f",
                    value: 1
                },
                fogFar: {
                    type: "f",
                    value: 2e3
                },
                fogColor: {
                    type: "c",
                    value: new o.Color(16777215)
                }
            },
            lights: {
                ambientLightColor: {
                    type: "fv",
                    value: []
                },
                directionalLightDirection: {
                    type: "fv",
                    value: []
                },
                directionalLightColor: {
                    type: "fv",
                    value: []
                },
                hemisphereLightDirection: {
                    type: "fv",
                    value: []
                },
                hemisphereLightSkyColor: {
                    type: "fv",
                    value: []
                },
                hemisphereLightGroundColor: {
                    type: "fv",
                    value: []
                },
                pointLightColor: {
                    type: "fv",
                    value: []
                },
                pointLightPosition: {
                    type: "fv",
                    value: []
                },
                pointLightDistance: {
                    type: "fv1",
                    value: []
                },
                pointLightDecay: {
                    type: "fv1",
                    value: []
                },
                spotLightColor: {
                    type: "fv",
                    value: []
                },
                spotLightPosition: {
                    type: "fv",
                    value: []
                },
                spotLightDirection: {
                    type: "fv",
                    value: []
                },
                spotLightDistance: {
                    type: "fv1",
                    value: []
                },
                spotLightAngleCos: {
                    type: "fv1",
                    value: []
                },
                spotLightExponent: {
                    type: "fv1",
                    value: []
                },
                spotLightDecay: {
                    type: "fv1",
                    value: []
                }
            },
            points: {
                psColor: {
                    type: "c",
                    value: new o.Color(15658734)
                },
                opacity: {
                    type: "f",
                    value: 1
                },
                size: {
                    type: "f",
                    value: 1
                },
                scale: {
                    type: "f",
                    value: 1
                },
                map: {
                    type: "t",
                    value: null
                },
                offsetRepeat: {
                    type: "v4",
                    value: new o.Vector4(0, 0, 1, 1)
                },
                fogDensity: {
                    type: "f",
                    value: 25e-5
                },
                fogNear: {
                    type: "f",
                    value: 1
                },
                fogFar: {
                    type: "f",
                    value: 2e3
                },
                fogColor: {
                    type: "c",
                    value: new o.Color(16777215)
                }
            },
            shadowmap: {
                shadowMap: {
                    type: "tv",
                    value: []
                },
                shadowMapSize: {
                    type: "v2v",
                    value: []
                },
                shadowBias: {
                    type: "fv1",
                    value: []
                },
                shadowDarkness: {
                    type: "fv1",
                    value: []
                },
                shadowMatrix: {
                    type: "m4v",
                    value: []
                }
            }
        }, o.ShaderLib = {
            basic: {
                uniforms: o.UniformsUtils.merge([o.UniformsLib.common, o.UniformsLib.aomap, o.UniformsLib.fog, o.UniformsLib.shadowmap]),
                vertexShader: [o.ShaderChunk.common, o.ShaderChunk.uv_pars_vertex, o.ShaderChunk.uv2_pars_vertex, o.ShaderChunk.envmap_pars_vertex, o.ShaderChunk.color_pars_vertex, o.ShaderChunk.morphtarget_pars_vertex, o.ShaderChunk.skinning_pars_vertex, o.ShaderChunk.shadowmap_pars_vertex, o.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", o.ShaderChunk.uv_vertex, o.ShaderChunk.uv2_vertex, o.ShaderChunk.color_vertex, o.ShaderChunk.skinbase_vertex, "	#ifdef USE_ENVMAP", o.ShaderChunk.beginnormal_vertex, o.ShaderChunk.morphnormal_vertex, o.ShaderChunk.skinnormal_vertex, o.ShaderChunk.defaultnormal_vertex, "	#endif", o.ShaderChunk.begin_vertex, o.ShaderChunk.morphtarget_vertex, o.ShaderChunk.skinning_vertex, o.ShaderChunk.project_vertex, o.ShaderChunk.logdepthbuf_vertex, o.ShaderChunk.worldpos_vertex, o.ShaderChunk.envmap_vertex, o.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
                fragmentShader: ["uniform vec3 diffuse;\nuniform float opacity;", o.ShaderChunk.common, o.ShaderChunk.color_pars_fragment, o.ShaderChunk.uv_pars_fragment, o.ShaderChunk.uv2_pars_fragment, o.ShaderChunk.map_pars_fragment, o.ShaderChunk.alphamap_pars_fragment, o.ShaderChunk.aomap_pars_fragment, o.ShaderChunk.envmap_pars_fragment, o.ShaderChunk.fog_pars_fragment, o.ShaderChunk.shadowmap_pars_fragment, o.ShaderChunk.specularmap_pars_fragment, o.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	vec3 totalAmbientLight = vec3( 1.0 );\n	vec3 shadowMask = vec3( 1.0 );", o.ShaderChunk.logdepthbuf_fragment, o.ShaderChunk.map_fragment, o.ShaderChunk.color_fragment, o.ShaderChunk.alphamap_fragment, o.ShaderChunk.alphatest_fragment, o.ShaderChunk.specularmap_fragment, o.ShaderChunk.aomap_fragment, o.ShaderChunk.shadowmap_fragment, "	outgoingLight = diffuseColor.rgb * totalAmbientLight * shadowMask;", o.ShaderChunk.envmap_fragment, o.ShaderChunk.linear_to_gamma_fragment, o.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")
            },
            lambert: {
                uniforms: o.UniformsUtils.merge([o.UniformsLib.common, o.UniformsLib.fog, o.UniformsLib.lights, o.UniformsLib.shadowmap, {
                    emissive: {
                        type: "c",
                        value: new o.Color(0)
                    }
                }]),
                vertexShader: ["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif", o.ShaderChunk.common, o.ShaderChunk.uv_pars_vertex, o.ShaderChunk.uv2_pars_vertex, o.ShaderChunk.envmap_pars_vertex, o.ShaderChunk.lights_lambert_pars_vertex, o.ShaderChunk.color_pars_vertex, o.ShaderChunk.morphtarget_pars_vertex, o.ShaderChunk.skinning_pars_vertex, o.ShaderChunk.shadowmap_pars_vertex, o.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", o.ShaderChunk.uv_vertex, o.ShaderChunk.uv2_vertex, o.ShaderChunk.color_vertex, o.ShaderChunk.beginnormal_vertex, o.ShaderChunk.morphnormal_vertex, o.ShaderChunk.skinbase_vertex, o.ShaderChunk.skinnormal_vertex, o.ShaderChunk.defaultnormal_vertex, o.ShaderChunk.begin_vertex, o.ShaderChunk.morphtarget_vertex, o.ShaderChunk.skinning_vertex, o.ShaderChunk.project_vertex, o.ShaderChunk.logdepthbuf_vertex, o.ShaderChunk.worldpos_vertex, o.ShaderChunk.envmap_vertex, o.ShaderChunk.lights_lambert_vertex, o.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
                fragmentShader: ["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nuniform vec3 ambientLightColor;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif", o.ShaderChunk.common, o.ShaderChunk.color_pars_fragment, o.ShaderChunk.uv_pars_fragment, o.ShaderChunk.uv2_pars_fragment, o.ShaderChunk.map_pars_fragment, o.ShaderChunk.alphamap_pars_fragment, o.ShaderChunk.envmap_pars_fragment, o.ShaderChunk.fog_pars_fragment, o.ShaderChunk.shadowmap_pars_fragment, o.ShaderChunk.specularmap_pars_fragment, o.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	vec3 totalAmbientLight = ambientLightColor;\n	vec3 shadowMask = vec3( 1.0 );", o.ShaderChunk.logdepthbuf_fragment, o.ShaderChunk.map_fragment, o.ShaderChunk.color_fragment, o.ShaderChunk.alphamap_fragment, o.ShaderChunk.alphatest_fragment, o.ShaderChunk.specularmap_fragment, o.ShaderChunk.shadowmap_fragment, "	#ifdef DOUBLE_SIDED\n		if ( gl_FrontFacing )\n			outgoingLight += diffuseColor.rgb * ( vLightFront * shadowMask + totalAmbientLight ) + emissive;\n		else\n			outgoingLight += diffuseColor.rgb * ( vLightBack * shadowMask + totalAmbientLight ) + emissive;\n	#else\n		outgoingLight += diffuseColor.rgb * ( vLightFront * shadowMask + totalAmbientLight ) + emissive;\n	#endif", o.ShaderChunk.envmap_fragment, o.ShaderChunk.linear_to_gamma_fragment, o.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")
            },
            phong: {
                uniforms: o.UniformsUtils.merge([o.UniformsLib.common, o.UniformsLib.aomap, o.UniformsLib.lightmap, o.UniformsLib.emissivemap, o.UniformsLib.bumpmap, o.UniformsLib.normalmap, o.UniformsLib.displacementmap, o.UniformsLib.fog, o.UniformsLib.lights, o.UniformsLib.shadowmap, {
                    emissive: {
                        type: "c",
                        value: new o.Color(0)
                    },
                    specular: {
                        type: "c",
                        value: new o.Color(1118481)
                    },
                    shininess: {
                        type: "f",
                        value: 30
                    }
                }]),
                vertexShader: ["#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif", o.ShaderChunk.common, o.ShaderChunk.uv_pars_vertex, o.ShaderChunk.uv2_pars_vertex, o.ShaderChunk.displacementmap_pars_vertex, o.ShaderChunk.envmap_pars_vertex, o.ShaderChunk.lights_phong_pars_vertex, o.ShaderChunk.color_pars_vertex, o.ShaderChunk.morphtarget_pars_vertex, o.ShaderChunk.skinning_pars_vertex, o.ShaderChunk.shadowmap_pars_vertex, o.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", o.ShaderChunk.uv_vertex, o.ShaderChunk.uv2_vertex, o.ShaderChunk.color_vertex, o.ShaderChunk.beginnormal_vertex, o.ShaderChunk.morphnormal_vertex, o.ShaderChunk.skinbase_vertex, o.ShaderChunk.skinnormal_vertex, o.ShaderChunk.defaultnormal_vertex, "#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif", o.ShaderChunk.begin_vertex, o.ShaderChunk.displacementmap_vertex, o.ShaderChunk.morphtarget_vertex, o.ShaderChunk.skinning_vertex, o.ShaderChunk.project_vertex, o.ShaderChunk.logdepthbuf_vertex, "	vViewPosition = - mvPosition.xyz;", o.ShaderChunk.worldpos_vertex, o.ShaderChunk.envmap_vertex, o.ShaderChunk.lights_phong_vertex, o.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
                fragmentShader: ["#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;", o.ShaderChunk.common, o.ShaderChunk.color_pars_fragment, o.ShaderChunk.uv_pars_fragment, o.ShaderChunk.uv2_pars_fragment, o.ShaderChunk.map_pars_fragment, o.ShaderChunk.alphamap_pars_fragment, o.ShaderChunk.aomap_pars_fragment, o.ShaderChunk.lightmap_pars_fragment, o.ShaderChunk.emissivemap_pars_fragment, o.ShaderChunk.envmap_pars_fragment, o.ShaderChunk.fog_pars_fragment, o.ShaderChunk.lights_phong_pars_fragment, o.ShaderChunk.shadowmap_pars_fragment, o.ShaderChunk.bumpmap_pars_fragment, o.ShaderChunk.normalmap_pars_fragment, o.ShaderChunk.specularmap_pars_fragment, o.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	vec3 totalAmbientLight = ambientLightColor;\n	vec3 totalEmissiveLight = emissive;\n	vec3 shadowMask = vec3( 1.0 );", o.ShaderChunk.logdepthbuf_fragment, o.ShaderChunk.map_fragment, o.ShaderChunk.color_fragment, o.ShaderChunk.alphamap_fragment, o.ShaderChunk.alphatest_fragment, o.ShaderChunk.specularmap_fragment, o.ShaderChunk.normal_phong_fragment, o.ShaderChunk.lightmap_fragment, o.ShaderChunk.hemilight_fragment, o.ShaderChunk.aomap_fragment, o.ShaderChunk.emissivemap_fragment, o.ShaderChunk.lights_phong_fragment, o.ShaderChunk.shadowmap_fragment, "totalDiffuseLight *= shadowMask;\ntotalSpecularLight *= shadowMask;\n#ifdef METAL\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;\n#else\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;\n#endif", o.ShaderChunk.envmap_fragment, o.ShaderChunk.linear_to_gamma_fragment, o.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")
            },
            points: {
                uniforms: o.UniformsUtils.merge([o.UniformsLib.points, o.UniformsLib.shadowmap]),
                vertexShader: ["uniform float size;\nuniform float scale;", o.ShaderChunk.common, o.ShaderChunk.color_pars_vertex, o.ShaderChunk.shadowmap_pars_vertex, o.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", o.ShaderChunk.color_vertex, "	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n	#else\n		gl_PointSize = size;\n	#endif\n	gl_Position = projectionMatrix * mvPosition;", o.ShaderChunk.logdepthbuf_vertex, o.ShaderChunk.worldpos_vertex, o.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
                fragmentShader: ["uniform vec3 psColor;\nuniform float opacity;", o.ShaderChunk.common, o.ShaderChunk.color_pars_fragment, o.ShaderChunk.map_particle_pars_fragment, o.ShaderChunk.fog_pars_fragment, o.ShaderChunk.shadowmap_pars_fragment, o.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( psColor, opacity );\n	vec3 shadowMask = vec3( 1.0 );", o.ShaderChunk.logdepthbuf_fragment, o.ShaderChunk.map_particle_fragment, o.ShaderChunk.color_fragment, o.ShaderChunk.alphatest_fragment, o.ShaderChunk.shadowmap_fragment, "	outgoingLight = diffuseColor.rgb * shadowMask;", o.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")
            },
            dashed: {
                uniforms: o.UniformsUtils.merge([o.UniformsLib.common, o.UniformsLib.fog, {
                    scale: {
                        type: "f",
                        value: 1
                    },
                    dashSize: {
                        type: "f",
                        value: 1
                    },
                    totalSize: {
                        type: "f",
                        value: 2
                    }
                }]),
                vertexShader: ["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;", o.ShaderChunk.common, o.ShaderChunk.color_pars_vertex, o.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", o.ShaderChunk.color_vertex, "	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;", o.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;", o.ShaderChunk.common, o.ShaderChunk.color_pars_fragment, o.ShaderChunk.fog_pars_fragment, o.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );", o.ShaderChunk.logdepthbuf_fragment, o.ShaderChunk.color_fragment, "	outgoingLight = diffuseColor.rgb;", o.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")
            },
            depth: {
                uniforms: {
                    mNear: {
                        type: "f",
                        value: 1
                    },
                    mFar: {
                        type: "f",
                        value: 2e3
                    },
                    opacity: {
                        type: "f",
                        value: 1
                    }
                },
                vertexShader: [o.ShaderChunk.common, o.ShaderChunk.morphtarget_pars_vertex, o.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", o.ShaderChunk.begin_vertex, o.ShaderChunk.morphtarget_vertex, o.ShaderChunk.project_vertex, o.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform float mNear;\nuniform float mFar;\nuniform float opacity;", o.ShaderChunk.common, o.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", o.ShaderChunk.logdepthbuf_fragment, "	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	float color = 1.0 - smoothstep( mNear, mFar, depth );\n	gl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")
            },
            normal: {
                uniforms: {
                    opacity: {
                        type: "f",
                        value: 1
                    }
                },
                vertexShader: ["varying vec3 vNormal;", o.ShaderChunk.common, o.ShaderChunk.morphtarget_pars_vertex, o.ShaderChunk.logdepthbuf_pars_vertex, "void main() {\n	vNormal = normalize( normalMatrix * normal );", o.ShaderChunk.begin_vertex, o.ShaderChunk.morphtarget_vertex, o.ShaderChunk.project_vertex, o.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform float opacity;\nvarying vec3 vNormal;", o.ShaderChunk.common, o.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );", o.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
            },
            cube: {
                uniforms: {
                    tCube: {
                        type: "t",
                        value: null
                    },
                    tFlip: {
                        type: "f",
                        value: -1
                    }
                },
                vertexShader: ["varying vec3 vWorldPosition;", o.ShaderChunk.common, o.ShaderChunk.logdepthbuf_pars_vertex, "void main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", o.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;", o.ShaderChunk.common, o.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );", o.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
            },
            equirect: {
                uniforms: {
                    tEquirect: {
                        type: "t",
                        value: null
                    },
                    tFlip: {
                        type: "f",
                        value: -1
                    }
                },
                vertexShader: ["varying vec3 vWorldPosition;", o.ShaderChunk.common, o.ShaderChunk.logdepthbuf_pars_vertex, "void main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", o.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;", o.ShaderChunk.common, o.ShaderChunk.logdepthbuf_pars_fragment, "void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\nsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );", o.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
            },
            depthRGBA: {
                uniforms: {},
                vertexShader: [o.ShaderChunk.common, o.ShaderChunk.morphtarget_pars_vertex, o.ShaderChunk.skinning_pars_vertex, o.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", o.ShaderChunk.skinbase_vertex, o.ShaderChunk.begin_vertex, o.ShaderChunk.morphtarget_vertex, o.ShaderChunk.skinning_vertex, o.ShaderChunk.project_vertex, o.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: [o.ShaderChunk.common, o.ShaderChunk.logdepthbuf_pars_fragment, "vec4 pack_depth( const in float depth ) {\n	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n	res -= res.xxyz * bit_mask;\n	return res;\n}\nvoid main() {", o.ShaderChunk.logdepthbuf_fragment, "	#ifdef USE_LOGDEPTHBUF_EXT\n		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n	#else\n		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n	#endif\n}"].join("\n")
            },
            distanceRGBA: {
                uniforms: {
                    lightPos: {
                        type: "v3",
                        value: new o.Vector3(0, 0, 0)
                    }
                },
                vertexShader: ["varying vec4 vWorldPosition;", o.ShaderChunk.common, o.ShaderChunk.morphtarget_pars_vertex, o.ShaderChunk.skinning_pars_vertex, "void main() {", o.ShaderChunk.skinbase_vertex, o.ShaderChunk.begin_vertex, o.ShaderChunk.morphtarget_vertex, o.ShaderChunk.skinning_vertex, o.ShaderChunk.project_vertex, o.ShaderChunk.worldpos_vertex, "vWorldPosition = worldPosition;\n}"].join("\n"),
                fragmentShader: ["uniform vec3 lightPos;\nvarying vec4 vWorldPosition;", o.ShaderChunk.common, "vec4 pack1K ( float depth ) {\n   depth /= 1000.0;\n   const vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n	const vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n	vec4 res = fract( depth * bitSh );\n	res -= res.xxyz * bitMsk;\n	return res; \n}\nfloat unpack1K ( vec4 color ) {\n	const vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n	return dot( color, bitSh ) * 1000.0;\n}\nvoid main () {\n	gl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );\n}"].join("\n")
            }
        }, o.WebGLRenderer = function(e) {
            function t(e, t, n, i) {
                !0 === N && (e *= i, t *= i, n *= i), ye.clearColor(e, t, n, i)
            }

            function n() {
                we.init(), ye.viewport(re, oe, ae, se), t(V.r, V.g, V.b, j)
            }

            function i() {
                ne = J = null, te = "", ee = -1, pe = !0, we.reset()
            }

            function r(e) {
                e.preventDefault(), i(), n(), Te.clear()
            }

            function a(e) {
                e = e.target, e.removeEventListener("dispose", a);
                e: {
                    var t = Te.get(e);
                    if (e.image && t.__image__webglTextureCube) ye.deleteTexture(t.__image__webglTextureCube);
                    else {
                        if (void 0 === t.__webglInit) break e;
                        ye.deleteTexture(t.__webglTexture)
                    }
                    Te["delete"](e)
                }
                ve.textures--
            }

            function s(e) {
                e = e.target, e.removeEventListener("dispose", s);
                var t = Te.get(e),
                    n = Te.get(e.texture);
                if (e && void 0 !== n.__webglTexture) {
                    if (ye.deleteTexture(n.__webglTexture), e instanceof o.WebGLRenderTargetCube)
                        for (n = 0; 6 > n; n++) ye.deleteFramebuffer(t.__webglFramebuffer[n]), ye.deleteRenderbuffer(t.__webglRenderbuffer[n]);
                    else ye.deleteFramebuffer(t.__webglFramebuffer), ye.deleteRenderbuffer(t.__webglRenderbuffer);
                    Te["delete"](e.texture), Te["delete"](e)
                }
                ve.textures--
            }

            function u(e) {
                e = e.target, e.removeEventListener("dispose", u), l(e), Te["delete"](e)
            }

            function l(e) {
                var t = Te.get(e).program;
                e.program = void 0, void 0 !== t && Se.releaseProgram(t)
            }

            function c(e, t) {
                return t[0] - e[0]
            }

            function h(e, t) {
                return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.material.id !== t.material.id ? e.material.id - t.material.id : e.z !== t.z ? e.z - t.z : e.id - t.id
            }

            function d(e, t) {
                return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.z !== t.z ? t.z - e.z : e.id - t.id
            }

            function f(e, t, n, i, r) {
                var o;
                n.transparent ? (i = X, o = ++Y) : (i = H, o = ++W), o = i[o], void 0 !== o ? (o.id = e.id, o.object = e, o.geometry = t, o.material = n, o.z = de.z, o.group = r) : (o = {
                    id: e.id,
                    object: e,
                    geometry: t,
                    material: n,
                    z: de.z,
                    group: r
                }, i.push(o))
            }

            function p(e, t) {
                if (!1 !== e.visible) {
                    if (0 !== (e.channels.mask & t.channels.mask))
                        if (e instanceof o.Light) G.push(e);
                        else if (e instanceof o.Sprite) K.push(e);
                    else if (e instanceof o.LensFlare) Z.push(e);
                    else if (e instanceof o.ImmediateRenderObject) !0 === Q.sortObjects && (de.setFromMatrixPosition(e.matrixWorld), de.applyProjection(he)), f(e, null, e.material, de.z, null);
                    else if ((e instanceof o.Mesh || e instanceof o.Line || e instanceof o.Points) && (e instanceof o.SkinnedMesh && e.skeleton.update(), !1 === e.frustumCulled || !0 === ce.intersectsObject(e))) {
                        var n = e.material;
                        if (!0 === n.visible) {
                            !0 === Q.sortObjects && (de.setFromMatrixPosition(e.matrixWorld), de.applyProjection(he));
                            var i = Ee.update(e);
                            if (n instanceof o.MeshFaceMaterial)
                                for (var r = i.groups, a = n.materials, n = 0, s = r.length; s > n; n++) {
                                    var u = r[n],
                                        l = a[u.materialIndex];
                                    !0 === l.visible && f(e, i, l, de.z, u)
                                } else f(e, i, n, de.z, null)
                        }
                    }
                    for (i = e.children, n = 0, s = i.length; s > n; n++) p(i[n], t)
                }
            }

            function m(e, t, n, i, r) {
                for (var a = 0, s = e.length; s > a; a++) {
                    var u = e[a],
                        l = u.object,
                        c = u.geometry,
                        h = void 0 === r ? u.material : r,
                        u = u.group;
                    if (l.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse, l.matrixWorld), l.normalMatrix.getNormalMatrix(l.modelViewMatrix), l instanceof o.ImmediateRenderObject) {
                        v(h);
                        var d = g(t, n, i, h, l);
                        te = "", l.render(function(e) {
                            Q.renderBufferImmediate(e, d, h)
                        })
                    } else Q.renderBufferDirect(t, n, i, c, h, l, u)
                }
            }

            function v(e) {
                e.side !== o.DoubleSide ? we.enable(ye.CULL_FACE) : we.disable(ye.CULL_FACE), we.setFlipSided(e.side === o.BackSide), !0 === e.transparent ? we.setBlending(e.blending, e.blendEquation, e.blendSrc, e.blendDst, e.blendEquationAlpha, e.blendSrcAlpha, e.blendDstAlpha) : we.setBlending(o.NoBlending), we.setDepthFunc(e.depthFunc), we.setDepthTest(e.depthTest), we.setDepthWrite(e.depthWrite), we.setColorWrite(e.colorWrite), we.setPolygonOffset(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits)
            }

            function g(e, t, n, i, r) {
                ie = 0;
                var a = Te.get(i);
                if (i.needsUpdate || !a.program) {
                    e: {
                        var s = Te.get(i),
                            c = Se.getParameters(i, t, n, r),
                            h = Se.getProgramCode(i, c),
                            d = s.program,
                            f = !0;
                        if (void 0 === d) i.addEventListener("dispose", u);
                        else if (d.code !== h) l(i);
                        else {
                            if (void 0 !== c.shaderID) break e;
                            f = !1
                        }
                        if (f && (c.shaderID ? (d = o.ShaderLib[c.shaderID], s.__webglShader = {
                                name: i.type,
                                uniforms: o.UniformsUtils.clone(d.uniforms),
                                vertexShader: d.vertexShader,
                                fragmentShader: d.fragmentShader
                            }) : s.__webglShader = {
                                name: i.type,
                                uniforms: i.uniforms,
                                vertexShader: i.vertexShader,
                                fragmentShader: i.fragmentShader
                            }, i.__webglShader = s.__webglShader, d = Se.acquireProgram(i, c, h), s.program = d, i.program = d), c = d.getAttributes(), i.morphTargets)
                            for (h = i.numSupportedMorphTargets = 0; h < Q.maxMorphTargets; h++) 0 <= c["morphTarget" + h] && i.numSupportedMorphTargets++;
                        if (i.morphNormals)
                            for (h = i.numSupportedMorphNormals = 0; h < Q.maxMorphNormals; h++) 0 <= c["morphNormal" + h] && i.numSupportedMorphNormals++;s.uniformsList = [];
                        var p, c = s.program.getUniforms();
                        for (p in s.__webglShader.uniforms)(h = c[p]) && s.uniformsList.push([s.__webglShader.uniforms[p], h])
                    }
                    i.needsUpdate = !1
                }
                if (h = d = f = !1, s = a.program, p = s.getUniforms(), c = a.__webglShader.uniforms, s.id !== J && (ye.useProgram(s.program), J = s.id, h = d = f = !0), i.id !== ee && (-1 === ee && (h = !0), ee = i.id, d = !0), (f || e !== ne) && (ye.uniformMatrix4fv(p.projectionMatrix, !1, e.projectionMatrix.elements), be.logarithmicDepthBuffer && ye.uniform1f(p.logDepthBufFC, 2 / (Math.log(e.far + 1) / Math.LN2)), e !== ne && (ne = e), (i instanceof o.ShaderMaterial || i instanceof o.MeshPhongMaterial || i.envMap) && void 0 !== p.cameraPosition && (de.setFromMatrixPosition(e.matrixWorld), ye.uniform3f(p.cameraPosition, de.x, de.y, de.z)), (i instanceof o.MeshPhongMaterial || i instanceof o.MeshLambertMaterial || i instanceof o.MeshBasicMaterial || i instanceof o.ShaderMaterial || i.skinning) && void 0 !== p.viewMatrix && ye.uniformMatrix4fv(p.viewMatrix, !1, e.matrixWorldInverse.elements)), i.skinning && (r.bindMatrix && void 0 !== p.bindMatrix && ye.uniformMatrix4fv(p.bindMatrix, !1, r.bindMatrix.elements), r.bindMatrixInverse && void 0 !== p.bindMatrixInverse && ye.uniformMatrix4fv(p.bindMatrixInverse, !1, r.bindMatrixInverse.elements), be.floatVertexTextures && r.skeleton && r.skeleton.useVertexTexture ? (void 0 !== p.boneTexture && (f = _(), ye.uniform1i(p.boneTexture, f), Q.setTexture(r.skeleton.boneTexture, f)), void 0 !== p.boneTextureWidth && ye.uniform1i(p.boneTextureWidth, r.skeleton.boneTextureWidth), void 0 !== p.boneTextureHeight && ye.uniform1i(p.boneTextureHeight, r.skeleton.boneTextureHeight)) : r.skeleton && r.skeleton.boneMatrices && void 0 !== p.boneGlobalMatrices && ye.uniformMatrix4fv(p.boneGlobalMatrices, !1, r.skeleton.boneMatrices)), d) {
                    if (n && i.fog && (c.fogColor.value = n.color, n instanceof o.Fog ? (c.fogNear.value = n.near, c.fogFar.value = n.far) : n instanceof o.FogExp2 && (c.fogDensity.value = n.density)), i instanceof o.MeshPhongMaterial || i instanceof o.MeshLambertMaterial || i.lights) {
                        if (pe) {
                            var m, v, g, b, h = !0,
                                w = f = 0,
                                T = 0,
                                M = me,
                                P = e.matrixWorldInverse,
                                A = M.directional.colors,
                                C = M.directional.positions,
                                L = M.point.colors,
                                O = M.point.positions,
                                k = M.point.distances,
                                D = M.point.decays,
                                F = M.spot.colors,
                                B = M.spot.positions,
                                I = M.spot.distances,
                                U = M.spot.directions,
                                N = M.spot.anglesCos,
                                z = M.spot.exponents,
                                V = M.spot.decays,
                                j = M.hemi.skyColors,
                                G = M.hemi.groundColors,
                                H = M.hemi.positions,
                                W = 0,
                                X = 0,
                                Y = 0,
                                q = 0,
                                K = 0,
                                Z = 0,
                                $ = 0,
                                te = 0,
                                re = m = 0;
                            for (n = b = re = 0, d = t.length; d > n; n++) m = t[n], v = m.color, g = m.intensity, b = m.distance, m instanceof o.AmbientLight ? m.visible && (f += v.r, w += v.g, T += v.b) : m instanceof o.DirectionalLight ? (K += 1, m.visible && (fe.setFromMatrixPosition(m.matrixWorld), de.setFromMatrixPosition(m.target.matrixWorld), fe.sub(de), fe.transformDirection(P), m = 3 * W, C[m + 0] = fe.x, C[m + 1] = fe.y, C[m + 2] = fe.z, x(A, m, v, g), W += 1)) : m instanceof o.PointLight ? (Z += 1, m.visible && (re = 3 * X, x(L, re, v, g), de.setFromMatrixPosition(m.matrixWorld),
                                de.applyMatrix4(P), O[re + 0] = de.x, O[re + 1] = de.y, O[re + 2] = de.z, k[X] = b, D[X] = 0 === m.distance ? 0 : m.decay, X += 1)) : m instanceof o.SpotLight ? ($ += 1, m.visible && (re = 3 * Y, x(F, re, v, g), fe.setFromMatrixPosition(m.matrixWorld), de.copy(fe).applyMatrix4(P), B[re + 0] = de.x, B[re + 1] = de.y, B[re + 2] = de.z, I[Y] = b, de.setFromMatrixPosition(m.target.matrixWorld), fe.sub(de), fe.transformDirection(P), U[re + 0] = fe.x, U[re + 1] = fe.y, U[re + 2] = fe.z, N[Y] = Math.cos(m.angle), z[Y] = m.exponent, V[Y] = 0 === m.distance ? 0 : m.decay, Y += 1)) : m instanceof o.HemisphereLight && (te += 1, m.visible && (fe.setFromMatrixPosition(m.matrixWorld), fe.transformDirection(P), b = 3 * q, H[b + 0] = fe.x, H[b + 1] = fe.y, H[b + 2] = fe.z, v = m.color, m = m.groundColor, x(j, b, v, g), x(G, b, m, g), q += 1));
                            for (n = 3 * W, d = Math.max(A.length, 3 * K); d > n; n++) A[n] = 0;
                            for (n = 3 * X, d = Math.max(L.length, 3 * Z); d > n; n++) L[n] = 0;
                            for (n = 3 * Y, d = Math.max(F.length, 3 * $); d > n; n++) F[n] = 0;
                            for (n = 3 * q, d = Math.max(j.length, 3 * te); d > n; n++) j[n] = 0;
                            for (n = 3 * q, d = Math.max(G.length, 3 * te); d > n; n++) G[n] = 0;
                            M.directional.length = W, M.point.length = X, M.spot.length = Y, M.hemi.length = q, M.ambient[0] = f, M.ambient[1] = w, M.ambient[2] = T, pe = !1
                        }
                        h ? (h = me, c.ambientLightColor.value = h.ambient, c.directionalLightColor.value = h.directional.colors, c.directionalLightDirection.value = h.directional.positions, c.pointLightColor.value = h.point.colors, c.pointLightPosition.value = h.point.positions, c.pointLightDistance.value = h.point.distances, c.pointLightDecay.value = h.point.decays, c.spotLightColor.value = h.spot.colors, c.spotLightPosition.value = h.spot.positions, c.spotLightDistance.value = h.spot.distances, c.spotLightDirection.value = h.spot.directions, c.spotLightAngleCos.value = h.spot.anglesCos, c.spotLightExponent.value = h.spot.exponents, c.spotLightDecay.value = h.spot.decays, c.hemisphereLightSkyColor.value = h.hemi.skyColors, c.hemisphereLightGroundColor.value = h.hemi.groundColors, c.hemisphereLightDirection.value = h.hemi.positions, y(c, !0)) : y(c, !1)
                    }
                    if (i instanceof o.MeshBasicMaterial || i instanceof o.MeshLambertMaterial || i instanceof o.MeshPhongMaterial) {
                        c.opacity.value = i.opacity, c.diffuse.value = i.color, i.emissive && (c.emissive.value = i.emissive), c.map.value = i.map, c.specularMap.value = i.specularMap, c.alphaMap.value = i.alphaMap, i.aoMap && (c.aoMap.value = i.aoMap, c.aoMapIntensity.value = i.aoMapIntensity);
                        var oe;
                        i.map ? oe = i.map : i.specularMap ? oe = i.specularMap : i.displacementMap ? oe = i.displacementMap : i.normalMap ? oe = i.normalMap : i.bumpMap ? oe = i.bumpMap : i.alphaMap ? oe = i.alphaMap : i.emissiveMap && (oe = i.emissiveMap), void 0 !== oe && (oe instanceof o.WebGLRenderTarget && (oe = oe.texture), h = oe.offset, oe = oe.repeat, c.offsetRepeat.value.set(h.x, h.y, oe.x, oe.y)), c.envMap.value = i.envMap, c.flipEnvMap.value = i.envMap instanceof o.WebGLRenderTargetCube ? 1 : -1, c.reflectivity.value = i.reflectivity, c.refractionRatio.value = i.refractionRatio
                    }
                    if (i instanceof o.LineBasicMaterial ? (c.diffuse.value = i.color, c.opacity.value = i.opacity) : i instanceof o.LineDashedMaterial ? (c.diffuse.value = i.color, c.opacity.value = i.opacity, c.dashSize.value = i.dashSize, c.totalSize.value = i.dashSize + i.gapSize, c.scale.value = i.scale) : i instanceof o.PointsMaterial ? (c.psColor.value = i.color, c.opacity.value = i.opacity, c.size.value = i.size, c.scale.value = R.height / 2, c.map.value = i.map, null !== i.map && (e = i.map.offset, oe = i.map.repeat, c.offsetRepeat.value.set(e.x, e.y, oe.x, oe.y))) : i instanceof o.MeshPhongMaterial ? (c.specular.value = i.specular, c.shininess.value = Math.max(i.shininess, 1e-4), i.lightMap && (c.lightMap.value = i.lightMap, c.lightMapIntensity.value = i.lightMapIntensity), i.emissiveMap && (c.emissiveMap.value = i.emissiveMap), i.bumpMap && (c.bumpMap.value = i.bumpMap, c.bumpScale.value = i.bumpScale), i.normalMap && (c.normalMap.value = i.normalMap, c.normalScale.value.copy(i.normalScale)), i.displacementMap && (c.displacementMap.value = i.displacementMap, c.displacementScale.value = i.displacementScale, c.displacementBias.value = i.displacementBias)) : i instanceof o.MeshDepthMaterial ? (c.mNear.value = e.near, c.mFar.value = e.far, c.opacity.value = i.opacity) : i instanceof o.MeshNormalMaterial && (c.opacity.value = i.opacity), r.receiveShadow && !i._shadowPass && c.shadowMatrix)
                        for (e = i = 0, oe = t.length; oe > e; e++) h = t[e], !0 === h.castShadow && (h instanceof o.PointLight || h instanceof o.SpotLight || h instanceof o.DirectionalLight) && (n = h.shadow, h instanceof o.PointLight ? (de.setFromMatrixPosition(h.matrixWorld).negate(), n.matrix.identity().setPosition(de), c.shadowDarkness.value[i] = -n.darkness) : c.shadowDarkness.value[i] = n.darkness, c.shadowMatrix.value[i] = n.matrix, c.shadowMap.value[i] = n.map, c.shadowMapSize.value[i] = n.mapSize, c.shadowBias.value[i] = n.bias, i++);
                    for (t = a.uniformsList, a = 0, i = t.length; i > a; a++)
                        if (e = t[a][0], !1 !== e.needsUpdate) switch (c = e.type, n = e.value, oe = t[a][1], c) {
                            case "1i":
                                ye.uniform1i(oe, n);
                                break;
                            case "1f":
                                ye.uniform1f(oe, n);
                                break;
                            case "2f":
                                ye.uniform2f(oe, n[0], n[1]);
                                break;
                            case "3f":
                                ye.uniform3f(oe, n[0], n[1], n[2]);
                                break;
                            case "4f":
                                ye.uniform4f(oe, n[0], n[1], n[2], n[3]);
                                break;
                            case "1iv":
                                ye.uniform1iv(oe, n);
                                break;
                            case "3iv":
                                ye.uniform3iv(oe, n);
                                break;
                            case "1fv":
                                ye.uniform1fv(oe, n);
                                break;
                            case "2fv":
                                ye.uniform2fv(oe, n);
                                break;
                            case "3fv":
                                ye.uniform3fv(oe, n);
                                break;
                            case "4fv":
                                ye.uniform4fv(oe, n);
                                break;
                            case "Matrix3fv":
                                ye.uniformMatrix3fv(oe, !1, n);
                                break;
                            case "Matrix4fv":
                                ye.uniformMatrix4fv(oe, !1, n);
                                break;
                            case "i":
                                ye.uniform1i(oe, n);
                                break;
                            case "f":
                                ye.uniform1f(oe, n);
                                break;
                            case "v2":
                                ye.uniform2f(oe, n.x, n.y);
                                break;
                            case "v3":
                                ye.uniform3f(oe, n.x, n.y, n.z);
                                break;
                            case "v4":
                                ye.uniform4f(oe, n.x, n.y, n.z, n.w);
                                break;
                            case "c":
                                ye.uniform3f(oe, n.r, n.g, n.b);
                                break;
                            case "iv1":
                                ye.uniform1iv(oe, n);
                                break;
                            case "iv":
                                ye.uniform3iv(oe, n);
                                break;
                            case "fv1":
                                ye.uniform1fv(oe, n);
                                break;
                            case "fv":
                                ye.uniform3fv(oe, n);
                                break;
                            case "v2v":
                                for (void 0 === e._array && (e._array = new Float32Array(2 * n.length)), d = c = 0, h = n.length; h > c; c++, d += 2) e._array[d + 0] = n[c].x, e._array[d + 1] = n[c].y;
                                ye.uniform2fv(oe, e._array);
                                break;
                            case "v3v":
                                for (void 0 === e._array && (e._array = new Float32Array(3 * n.length)), d = c = 0, h = n.length; h > c; c++, d += 3) e._array[d + 0] = n[c].x, e._array[d + 1] = n[c].y, e._array[d + 2] = n[c].z;
                                ye.uniform3fv(oe, e._array);
                                break;
                            case "v4v":
                                for (void 0 === e._array && (e._array = new Float32Array(4 * n.length)), d = c = 0, h = n.length; h > c; c++, d += 4) e._array[d + 0] = n[c].x, e._array[d + 1] = n[c].y, e._array[d + 2] = n[c].z, e._array[d + 3] = n[c].w;
                                ye.uniform4fv(oe, e._array);
                                break;
                            case "m3":
                                ye.uniformMatrix3fv(oe, !1, n.elements);
                                break;
                            case "m3v":
                                for (void 0 === e._array && (e._array = new Float32Array(9 * n.length)), c = 0, h = n.length; h > c; c++) n[c].flattenToArrayOffset(e._array, 9 * c);
                                ye.uniformMatrix3fv(oe, !1, e._array);
                                break;
                            case "m4":
                                ye.uniformMatrix4fv(oe, !1, n.elements);
                                break;
                            case "m4v":
                                for (void 0 === e._array && (e._array = new Float32Array(16 * n.length)), c = 0, h = n.length; h > c; c++) n[c].flattenToArrayOffset(e._array, 16 * c);
                                ye.uniformMatrix4fv(oe, !1, e._array);
                                break;
                            case "t":
                                if (d = _(), ye.uniform1i(oe, d), !n) continue;
                                n instanceof o.CubeTexture || Array.isArray(n.image) && 6 === n.image.length ? E(n, d) : n instanceof o.WebGLRenderTargetCube ? S(n.texture, d) : n instanceof o.WebGLRenderTarget ? Q.setTexture(n.texture, d) : Q.setTexture(n, d);
                                break;
                            case "tv":
                                for (void 0 === e._array && (e._array = []), c = 0, h = e.value.length; h > c; c++) e._array[c] = _();
                                for (ye.uniform1iv(oe, e._array), c = 0, h = e.value.length; h > c; c++) n = e.value[c], d = e._array[c], n && (n instanceof o.CubeTexture || n.image instanceof Array && 6 === n.image.length ? E(n, d) : n instanceof o.WebGLRenderTarget ? Q.setTexture(n.texture, d) : n instanceof o.WebGLRenderTargetCube ? S(n.texture, d) : Q.setTexture(n, d));
                                break;
                            default:
                                console.warn("THREE.WebGLRenderer: Unknown uniform type: " + c)
                        }
                }
                return ye.uniformMatrix4fv(p.modelViewMatrix, !1, r.modelViewMatrix.elements), p.normalMatrix && ye.uniformMatrix3fv(p.normalMatrix, !1, r.normalMatrix.elements), void 0 !== p.modelMatrix && ye.uniformMatrix4fv(p.modelMatrix, !1, r.matrixWorld.elements), s
            }

            function y(e, t) {
                e.ambientLightColor.needsUpdate = t, e.directionalLightColor.needsUpdate = t, e.directionalLightDirection.needsUpdate = t, e.pointLightColor.needsUpdate = t, e.pointLightPosition.needsUpdate = t, e.pointLightDistance.needsUpdate = t, e.pointLightDecay.needsUpdate = t, e.spotLightColor.needsUpdate = t, e.spotLightPosition.needsUpdate = t, e.spotLightDistance.needsUpdate = t, e.spotLightDirection.needsUpdate = t, e.spotLightAngleCos.needsUpdate = t, e.spotLightExponent.needsUpdate = t, e.spotLightDecay.needsUpdate = t, e.hemisphereLightSkyColor.needsUpdate = t, e.hemisphereLightGroundColor.needsUpdate = t, e.hemisphereLightDirection.needsUpdate = t
            }

            function _() {
                var e = ie;
                return e >= be.maxTextures && console.warn("WebGLRenderer: trying to use " + e + " texture units while this GPU supports only " + be.maxTextures), ie += 1, e
            }

            function x(e, t, n, i) {
                e[t + 0] = n.r * i, e[t + 1] = n.g * i, e[t + 2] = n.b * i
            }

            function b(e, t, n) {
                n ? (ye.texParameteri(e, ye.TEXTURE_WRAP_S, C(t.wrapS)), ye.texParameteri(e, ye.TEXTURE_WRAP_T, C(t.wrapT)), ye.texParameteri(e, ye.TEXTURE_MAG_FILTER, C(t.magFilter)), ye.texParameteri(e, ye.TEXTURE_MIN_FILTER, C(t.minFilter))) : (ye.texParameteri(e, ye.TEXTURE_WRAP_S, ye.CLAMP_TO_EDGE), ye.texParameteri(e, ye.TEXTURE_WRAP_T, ye.CLAMP_TO_EDGE), t.wrapS === o.ClampToEdgeWrapping && t.wrapT === o.ClampToEdgeWrapping || console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.", t), ye.texParameteri(e, ye.TEXTURE_MAG_FILTER, A(t.magFilter)), ye.texParameteri(e, ye.TEXTURE_MIN_FILTER, A(t.minFilter)), t.minFilter !== o.NearestFilter && t.minFilter !== o.LinearFilter && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.", t)), !(n = xe.get("EXT_texture_filter_anisotropic")) || t.type === o.FloatType && null === xe.get("OES_texture_float_linear") || t.type === o.HalfFloatType && null === xe.get("OES_texture_half_float_linear") || !(1 < t.anisotropy || Te.get(t).__currentAnisotropy) || (ye.texParameterf(e, n.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(t.anisotropy, Q.getMaxAnisotropy())), Te.get(t).__currentAnisotropy = t.anisotropy)
            }

            function w(e, t) {
                if (e.width > t || e.height > t) {
                    var n = t / Math.max(e.width, e.height),
                        i = document.createElement("canvas");
                    return i.width = Math.floor(e.width * n), i.height = Math.floor(e.height * n), i.getContext("2d").drawImage(e, 0, 0, e.width, e.height, 0, 0, i.width, i.height), console.warn("THREE.WebGLRenderer: image is too big (" + e.width + "x" + e.height + "). Resized to " + i.width + "x" + i.height, e), i
                }
                return e
            }

            function T(e) {
                return o.Math.isPowerOfTwo(e.width) && o.Math.isPowerOfTwo(e.height)
            }

            function E(e, t) {
                var n = Te.get(e);
                if (6 === e.image.length)
                    if (0 < e.version && n.__version !== e.version) {
                        n.__image__webglTextureCube || (e.addEventListener("dispose", a), n.__image__webglTextureCube = ye.createTexture(), ve.textures++), we.activeTexture(ye.TEXTURE0 + t), we.bindTexture(ye.TEXTURE_CUBE_MAP, n.__image__webglTextureCube), ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL, e.flipY);
                        for (var i = e instanceof o.CompressedTexture, r = e.image[0] instanceof o.DataTexture, s = [], u = 0; 6 > u; u++) s[u] = !Q.autoScaleCubemaps || i || r ? r ? e.image[u].image : e.image[u] : w(e.image[u], be.maxCubemapSize);
                        var l = T(s[0]),
                            c = C(e.format),
                            h = C(e.type);
                        for (b(ye.TEXTURE_CUBE_MAP, e, l), u = 0; 6 > u; u++)
                            if (i)
                                for (var d, f = s[u].mipmaps, p = 0, m = f.length; m > p; p++) d = f[p], e.format !== o.RGBAFormat && e.format !== o.RGBFormat ? -1 < we.getCompressedTextureFormats().indexOf(c) ? we.compressedTexImage2D(ye.TEXTURE_CUBE_MAP_POSITIVE_X + u, p, c, d.width, d.height, 0, d.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()") : we.texImage2D(ye.TEXTURE_CUBE_MAP_POSITIVE_X + u, p, c, d.width, d.height, 0, c, h, d.data);
                            else r ? we.texImage2D(ye.TEXTURE_CUBE_MAP_POSITIVE_X + u, 0, c, s[u].width, s[u].height, 0, c, h, s[u].data) : we.texImage2D(ye.TEXTURE_CUBE_MAP_POSITIVE_X + u, 0, c, c, h, s[u]);
                        e.generateMipmaps && l && ye.generateMipmap(ye.TEXTURE_CUBE_MAP), n.__version = e.version, e.onUpdate && e.onUpdate(e)
                    } else we.activeTexture(ye.TEXTURE0 + t), we.bindTexture(ye.TEXTURE_CUBE_MAP, n.__image__webglTextureCube)
            }

            function S(e, t) {
                we.activeTexture(ye.TEXTURE0 + t), we.bindTexture(ye.TEXTURE_CUBE_MAP, Te.get(e).__webglTexture)
            }

            function M(e, t, n) {
                ye.bindFramebuffer(ye.FRAMEBUFFER, e), ye.framebufferTexture2D(ye.FRAMEBUFFER, ye.COLOR_ATTACHMENT0, n, Te.get(t.texture).__webglTexture, 0)
            }

            function P(e, t) {
                ye.bindRenderbuffer(ye.RENDERBUFFER, e), t.depthBuffer && !t.stencilBuffer ? (ye.renderbufferStorage(ye.RENDERBUFFER, ye.DEPTH_COMPONENT16, t.width, t.height), ye.framebufferRenderbuffer(ye.FRAMEBUFFER, ye.DEPTH_ATTACHMENT, ye.RENDERBUFFER, e)) : t.depthBuffer && t.stencilBuffer ? (ye.renderbufferStorage(ye.RENDERBUFFER, ye.DEPTH_STENCIL, t.width, t.height), ye.framebufferRenderbuffer(ye.FRAMEBUFFER, ye.DEPTH_STENCIL_ATTACHMENT, ye.RENDERBUFFER, e)) : ye.renderbufferStorage(ye.RENDERBUFFER, ye.RGBA4, t.width, t.height)
            }

            function A(e) {
                return e === o.NearestFilter || e === o.NearestMipMapNearestFilter || e === o.NearestMipMapLinearFilter ? ye.NEAREST : ye.LINEAR
            }

            function C(e) {
                var t;
                if (e === o.RepeatWrapping) return ye.REPEAT;
                if (e === o.ClampToEdgeWrapping) return ye.CLAMP_TO_EDGE;
                if (e === o.MirroredRepeatWrapping) return ye.MIRRORED_REPEAT;
                if (e === o.NearestFilter) return ye.NEAREST;
                if (e === o.NearestMipMapNearestFilter) return ye.NEAREST_MIPMAP_NEAREST;
                if (e === o.NearestMipMapLinearFilter) return ye.NEAREST_MIPMAP_LINEAR;
                if (e === o.LinearFilter) return ye.LINEAR;
                if (e === o.LinearMipMapNearestFilter) return ye.LINEAR_MIPMAP_NEAREST;
                if (e === o.LinearMipMapLinearFilter) return ye.LINEAR_MIPMAP_LINEAR;
                if (e === o.UnsignedByteType) return ye.UNSIGNED_BYTE;
                if (e === o.UnsignedShort4444Type) return ye.UNSIGNED_SHORT_4_4_4_4;
                if (e === o.UnsignedShort5551Type) return ye.UNSIGNED_SHORT_5_5_5_1;
                if (e === o.UnsignedShort565Type) return ye.UNSIGNED_SHORT_5_6_5;
                if (e === o.ByteType) return ye.BYTE;
                if (e === o.ShortType) return ye.SHORT;
                if (e === o.UnsignedShortType) return ye.UNSIGNED_SHORT;
                if (e === o.IntType) return ye.INT;
                if (e === o.UnsignedIntType) return ye.UNSIGNED_INT;
                if (e === o.FloatType) return ye.FLOAT;
                if (t = xe.get("OES_texture_half_float"), null !== t && e === o.HalfFloatType) return t.HALF_FLOAT_OES;
                if (e === o.AlphaFormat) return ye.ALPHA;
                if (e === o.RGBFormat) return ye.RGB;
                if (e === o.RGBAFormat) return ye.RGBA;
                if (e === o.LuminanceFormat) return ye.LUMINANCE;
                if (e === o.LuminanceAlphaFormat) return ye.LUMINANCE_ALPHA;
                if (e === o.AddEquation) return ye.FUNC_ADD;
                if (e === o.SubtractEquation) return ye.FUNC_SUBTRACT;
                if (e === o.ReverseSubtractEquation) return ye.FUNC_REVERSE_SUBTRACT;
                if (e === o.ZeroFactor) return ye.ZERO;
                if (e === o.OneFactor) return ye.ONE;
                if (e === o.SrcColorFactor) return ye.SRC_COLOR;
                if (e === o.OneMinusSrcColorFactor) return ye.ONE_MINUS_SRC_COLOR;
                if (e === o.SrcAlphaFactor) return ye.SRC_ALPHA;
                if (e === o.OneMinusSrcAlphaFactor) return ye.ONE_MINUS_SRC_ALPHA;
                if (e === o.DstAlphaFactor) return ye.DST_ALPHA;
                if (e === o.OneMinusDstAlphaFactor) return ye.ONE_MINUS_DST_ALPHA;
                if (e === o.DstColorFactor) return ye.DST_COLOR;
                if (e === o.OneMinusDstColorFactor) return ye.ONE_MINUS_DST_COLOR;
                if (e === o.SrcAlphaSaturateFactor) return ye.SRC_ALPHA_SATURATE;
                if (t = xe.get("WEBGL_compressed_texture_s3tc"), null !== t) {
                    if (e === o.RGB_S3TC_DXT1_Format) return t.COMPRESSED_RGB_S3TC_DXT1_EXT;
                    if (e === o.RGBA_S3TC_DXT1_Format) return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                    if (e === o.RGBA_S3TC_DXT3_Format) return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                    if (e === o.RGBA_S3TC_DXT5_Format) return t.COMPRESSED_RGBA_S3TC_DXT5_EXT
                }
                if (t = xe.get("WEBGL_compressed_texture_pvrtc"), null !== t) {
                    if (e === o.RGB_PVRTC_4BPPV1_Format) return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                    if (e === o.RGB_PVRTC_2BPPV1_Format) return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                    if (e === o.RGBA_PVRTC_4BPPV1_Format) return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                    if (e === o.RGBA_PVRTC_2BPPV1_Format) return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
                }
                if (t = xe.get("EXT_blend_minmax"), null !== t) {
                    if (e === o.MinEquation) return t.MIN_EXT;
                    if (e === o.MaxEquation) return t.MAX_EXT
                }
                return 0
            }
            console.log("THREE.WebGLRenderer", o.REVISION), e = e || {};
            var R = void 0 !== e.canvas ? e.canvas : document.createElement("canvas"),
                L = void 0 !== e.context ? e.context : null,
                O = R.width,
                k = R.height,
                D = 1,
                F = void 0 !== e.alpha ? e.alpha : !1,
                B = void 0 !== e.depth ? e.depth : !0,
                I = void 0 !== e.stencil ? e.stencil : !0,
                U = void 0 !== e.antialias ? e.antialias : !1,
                N = void 0 !== e.premultipliedAlpha ? e.premultipliedAlpha : !0,
                z = void 0 !== e.preserveDrawingBuffer ? e.preserveDrawingBuffer : !1,
                V = new o.Color(0),
                j = 0,
                G = [],
                H = [],
                W = -1,
                X = [],
                Y = -1,
                q = new Float32Array(8),
                K = [],
                Z = [];
            this.domElement = R, this.context = null, this.sortObjects = this.autoClearStencil = this.autoClearDepth = this.autoClearColor = this.autoClear = !0, this.gammaFactor = 2, this.gammaOutput = this.gammaInput = !1, this.maxMorphTargets = 8, this.maxMorphNormals = 4, this.autoScaleCubemaps = !0;
            var Q = this,
                J = null,
                $ = null,
                ee = -1,
                te = "",
                ne = null,
                ie = 0,
                re = 0,
                oe = 0,
                ae = R.width,
                se = R.height,
                ue = 0,
                le = 0,
                ce = new o.Frustum,
                he = new o.Matrix4,
                de = new o.Vector3,
                fe = new o.Vector3,
                pe = !0,
                me = {
                    ambient: [0, 0, 0],
                    directional: {
                        length: 0,
                        colors: [],
                        positions: []
                    },
                    point: {
                        length: 0,
                        colors: [],
                        positions: [],
                        distances: [],
                        decays: []
                    },
                    spot: {
                        length: 0,
                        colors: [],
                        positions: [],
                        distances: [],
                        directions: [],
                        anglesCos: [],
                        exponents: [],
                        decays: []
                    },
                    hemi: {
                        length: 0,
                        skyColors: [],
                        groundColors: [],
                        positions: []
                    }
                },
                ve = {
                    geometries: 0,
                    textures: 0
                },
                ge = {
                    calls: 0,
                    vertices: 0,
                    faces: 0,
                    points: 0
                };
            this.info = {
                render: ge,
                memory: ve,
                programs: null
            };
            var ye;
            try {
                if (F = {
                        alpha: F,
                        depth: B,
                        stencil: I,
                        antialias: U,
                        premultipliedAlpha: N,
                        preserveDrawingBuffer: z
                    }, ye = L || R.getContext("webgl", F) || R.getContext("experimental-webgl", F), null === ye) {
                    if (null !== R.getContext("webgl")) throw "Error creating WebGL context with your selected attributes.";
                    throw "Error creating WebGL context."
                }
                R.addEventListener("webglcontextlost", r, !1)
            } catch (_e) {
                console.error("THREE.WebGLRenderer: " + _e)
            }
            var xe = new o.WebGLExtensions(ye);
            xe.get("OES_texture_float"), xe.get("OES_texture_float_linear"), xe.get("OES_texture_half_float"), xe.get("OES_texture_half_float_linear"), xe.get("OES_standard_derivatives"), xe.get("ANGLE_instanced_arrays"), xe.get("OES_element_index_uint") && (o.BufferGeometry.MaxIndex = 4294967296);
            var be = new o.WebGLCapabilities(ye, xe, e),
                we = new o.WebGLState(ye, xe, C),
                Te = new o.WebGLProperties,
                Ee = new o.WebGLObjects(ye, Te, this.info),
                Se = new o.WebGLPrograms(this, be);
            this.info.programs = Se.programs;
            var Me = new o.WebGLBufferRenderer(ye, xe, ge),
                Pe = new o.WebGLIndexedBufferRenderer(ye, xe, ge);
            n(), this.context = ye, this.capabilities = be, this.extensions = xe, this.state = we;
            var Ae = new o.WebGLShadowMap(this, G, Ee);
            this.shadowMap = Ae;
            var Ce = new o.SpritePlugin(this, K),
                Re = new o.LensFlarePlugin(this, Z);
            this.getContext = function() {
                return ye
            }, this.getContextAttributes = function() {
                return ye.getContextAttributes()
            }, this.forceContextLoss = function() {
                xe.get("WEBGL_lose_context").loseContext()
            }, this.getMaxAnisotropy = function() {
                var e;
                return function() {
                    if (void 0 !== e) return e;
                    var t = xe.get("EXT_texture_filter_anisotropic");
                    return e = null !== t ? ye.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
                }
            }(), this.getPrecision = function() {
                return be.precision
            }, this.getPixelRatio = function() {
                return D
            }, this.setPixelRatio = function(e) {
                void 0 !== e && (D = e)
            }, this.getSize = function() {
                return {
                    width: O,
                    height: k
                }
            }, this.setSize = function(e, t, n) {
                O = e, k = t, R.width = e * D, R.height = t * D, !1 !== n && (R.style.width = e + "px", R.style.height = t + "px"), this.setViewport(0, 0, e, t)
            }, this.setViewport = function(e, t, n, i) {
                re = e * D, oe = t * D, ae = n * D, se = i * D, ye.viewport(re, oe, ae, se)
            }, this.getViewport = function(e) {
                e.x = re / D, e.y = oe / D, e.z = ae / D, e.w = se / D
            }, this.setScissor = function(e, t, n, i) {
                ye.scissor(e * D, t * D, n * D, i * D)
            }, this.enableScissorTest = function(e) {
                we.setScissorTest(e)
            }, this.getClearColor = function() {
                return V
            }, this.setClearColor = function(e, n) {
                V.set(e), j = void 0 !== n ? n : 1, t(V.r, V.g, V.b, j)
            }, this.getClearAlpha = function() {
                return j
            }, this.setClearAlpha = function(e) {
                j = e, t(V.r, V.g, V.b, j)
            }, this.clear = function(e, t, n) {
                var i = 0;
                (void 0 === e || e) && (i |= ye.COLOR_BUFFER_BIT), (void 0 === t || t) && (i |= ye.DEPTH_BUFFER_BIT), (void 0 === n || n) && (i |= ye.STENCIL_BUFFER_BIT), ye.clear(i)
            }, this.clearColor = function() {
                ye.clear(ye.COLOR_BUFFER_BIT)
            }, this.clearDepth = function() {
                ye.clear(ye.DEPTH_BUFFER_BIT)
            }, this.clearStencil = function() {
                ye.clear(ye.STENCIL_BUFFER_BIT)
            }, this.clearTarget = function(e, t, n, i) {
                this.setRenderTarget(e), this.clear(t, n, i)
            }, this.resetGLState = i, this.dispose = function() {
                R.removeEventListener("webglcontextlost", r, !1)
            }, this.renderBufferImmediate = function(e, t, n) {
                we.initAttributes();
                var i = Te.get(e);
                if (e.hasPositions && !i.position && (i.position = ye.createBuffer()), e.hasNormals && !i.normal && (i.normal = ye.createBuffer()), e.hasUvs && !i.uv && (i.uv = ye.createBuffer()), e.hasColors && !i.color && (i.color = ye.createBuffer()), t = t.getAttributes(), e.hasPositions && (ye.bindBuffer(ye.ARRAY_BUFFER, i.position), ye.bufferData(ye.ARRAY_BUFFER, e.positionArray, ye.DYNAMIC_DRAW), we.enableAttribute(t.position), ye.vertexAttribPointer(t.position, 3, ye.FLOAT, !1, 0, 0)), e.hasNormals) {
                    if (ye.bindBuffer(ye.ARRAY_BUFFER, i.normal), "MeshPhongMaterial" !== n.type && n.shading === o.FlatShading)
                        for (var r = 0, a = 3 * e.count; a > r; r += 9) {
                            var s = e.normalArray,
                                u = (s[r + 0] + s[r + 3] + s[r + 6]) / 3,
                                l = (s[r + 1] + s[r + 4] + s[r + 7]) / 3,
                                c = (s[r + 2] + s[r + 5] + s[r + 8]) / 3;
                            s[r + 0] = u, s[r + 1] = l, s[r + 2] = c, s[r + 3] = u, s[r + 4] = l, s[r + 5] = c, s[r + 6] = u, s[r + 7] = l, s[r + 8] = c
                        }
                    ye.bufferData(ye.ARRAY_BUFFER, e.normalArray, ye.DYNAMIC_DRAW), we.enableAttribute(t.normal), ye.vertexAttribPointer(t.normal, 3, ye.FLOAT, !1, 0, 0)
                }
                e.hasUvs && n.map && (ye.bindBuffer(ye.ARRAY_BUFFER, i.uv), ye.bufferData(ye.ARRAY_BUFFER, e.uvArray, ye.DYNAMIC_DRAW), we.enableAttribute(t.uv), ye.vertexAttribPointer(t.uv, 2, ye.FLOAT, !1, 0, 0)), e.hasColors && n.vertexColors !== o.NoColors && (ye.bindBuffer(ye.ARRAY_BUFFER, i.color), ye.bufferData(ye.ARRAY_BUFFER, e.colorArray, ye.DYNAMIC_DRAW), we.enableAttribute(t.color), ye.vertexAttribPointer(t.color, 3, ye.FLOAT, !1, 0, 0)), we.disableUnusedAttributes(), ye.drawArrays(ye.TRIANGLES, 0, e.count), e.count = 0
            }, this.renderBufferDirect = function(e, t, n, i, r, a, s) {
                v(r);
                var u = g(e, t, n, r, a),
                    l = !1;
                if (e = i.id + "_" + u.id + "_" + r.wireframe, e !== te && (te = e, l = !0), t = a.morphTargetInfluences, void 0 !== t) {
                    for (e = [], n = 0, l = t.length; l > n; n++) {
                        var h = t[n];
                        e.push([h, n])
                    }
                    e.sort(c), 8 < e.length && (e.length = 8);
                    var d = i.morphAttributes;
                    for (n = 0, l = e.length; l > n; n++) h = e[n], q[n] = h[0], 0 !== h[0] ? (t = h[1], !0 === r.morphTargets && d.position && i.addAttribute("morphTarget" + n, d.position[t]), !0 === r.morphNormals && d.normal && i.addAttribute("morphNormal" + n, d.normal[t])) : (!0 === r.morphTargets && i.removeAttribute("morphTarget" + n), !0 === r.morphNormals && i.removeAttribute("morphNormal" + n));
                    e = u.getUniforms(), null !== e.morphTargetInfluences && ye.uniform1fv(e.morphTargetInfluences, q), l = !0
                }
                if (t = i.index, n = i.attributes.position, !0 === r.wireframe && (t = Ee.getWireframeAttribute(i)), null !== t ? (e = Pe, e.setIndex(t)) : e = Me, l) {
                    var f, l = void 0;
                    if (i instanceof o.InstancedBufferGeometry && (f = xe.get("ANGLE_instanced_arrays"), null === f)) console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                    else {
                        void 0 === l && (l = 0), we.initAttributes();
                        var p, h = i.attributes,
                            u = u.getAttributes(),
                            d = r.defaultAttributeValues;
                        for (p in u) {
                            var m = u[p];
                            if (m >= 0) {
                                var y = h[p];
                                if (void 0 !== y) {
                                    var _ = y.itemSize,
                                        x = Ee.getAttributeBuffer(y);
                                    if (y instanceof o.InterleavedBufferAttribute) {
                                        var b = y.data,
                                            w = b.stride,
                                            y = y.offset;
                                        b instanceof o.InstancedInterleavedBuffer ? (we.enableAttributeAndDivisor(m, b.meshPerAttribute, f), void 0 === i.maxInstancedCount && (i.maxInstancedCount = b.meshPerAttribute * b.count)) : we.enableAttribute(m), ye.bindBuffer(ye.ARRAY_BUFFER, x), ye.vertexAttribPointer(m, _, ye.FLOAT, !1, w * b.array.BYTES_PER_ELEMENT, (l * w + y) * b.array.BYTES_PER_ELEMENT)
                                    } else y instanceof o.InstancedBufferAttribute ? (we.enableAttributeAndDivisor(m, y.meshPerAttribute, f), void 0 === i.maxInstancedCount && (i.maxInstancedCount = y.meshPerAttribute * y.count)) : we.enableAttribute(m), ye.bindBuffer(ye.ARRAY_BUFFER, x), ye.vertexAttribPointer(m, _, ye.FLOAT, !1, 0, l * _ * 4)
                                } else if (void 0 !== d && (_ = d[p], void 0 !== _)) switch (_.length) {
                                    case 2:
                                        ye.vertexAttrib2fv(m, _);
                                        break;
                                    case 3:
                                        ye.vertexAttrib3fv(m, _);
                                        break;
                                    case 4:
                                        ye.vertexAttrib4fv(m, _);
                                        break;
                                    default:
                                        ye.vertexAttrib1fv(m, _)
                                }
                            }
                        }
                        we.disableUnusedAttributes()
                    }
                    null !== t && ye.bindBuffer(ye.ELEMENT_ARRAY_BUFFER, Ee.getAttributeBuffer(t))
                }
                f = 1 / 0, null !== t ? f = t.count : void 0 !== n && (f = n.count), p = i.drawRange.start, t = i.drawRange.count, n = null !== s ? s.start : 0, l = null !== s ? s.count : 1 / 0, s = Math.max(0, p, n), f = Math.min(0 + f, p + t, n + l) - 1, f = Math.max(0, f - s + 1), a instanceof o.Mesh ? (!0 === r.wireframe ? (we.setLineWidth(r.wireframeLinewidth * D), e.setMode(ye.LINES)) : e.setMode(ye.TRIANGLES), i instanceof o.InstancedBufferGeometry && 0 < i.maxInstancedCount ? e.renderInstances(i) : e.render(s, f)) : a instanceof o.Line ? (i = r.linewidth, void 0 === i && (i = 1), we.setLineWidth(i * D), a instanceof o.LineSegments ? e.setMode(ye.LINES) : e.setMode(ye.LINE_STRIP), e.render(s, f)) : a instanceof o.Points && (e.setMode(ye.POINTS), e.render(s, f))
            }, this.render = function(e, t, n, i) {
                if (!1 == t instanceof o.Camera) console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
                else {
                    var r = e.fog;
                    te = "", ee = -1, ne = null, pe = !0, !0 === e.autoUpdate && e.updateMatrixWorld(), null === t.parent && t.updateMatrixWorld(), t.matrixWorldInverse.getInverse(t.matrixWorld), he.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), ce.setFromMatrix(he), G.length = 0, Y = W = -1, K.length = 0, Z.length = 0, p(e, t), H.length = W + 1, X.length = Y + 1, !0 === Q.sortObjects && (H.sort(h), X.sort(d)), Ae.render(e), ge.calls = 0, ge.vertices = 0, ge.faces = 0, ge.points = 0, this.setRenderTarget(n), (this.autoClear || i) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil), e.overrideMaterial ? (i = e.overrideMaterial, m(H, t, G, r, i), m(X, t, G, r, i)) : (we.setBlending(o.NoBlending), m(H, t, G, r), m(X, t, G, r)), Ce.render(e, t), Re.render(e, t, ue, le), n && (e = n.texture, t = T(n), e.generateMipmaps && t && e.minFilter !== o.NearestFilter && e.minFilter !== o.LinearFilter && (e = n instanceof o.WebGLRenderTargetCube ? ye.TEXTURE_CUBE_MAP : ye.TEXTURE_2D, n = Te.get(n.texture).__webglTexture, we.bindTexture(e, n), ye.generateMipmap(e), we.bindTexture(e, null))), we.setDepthTest(!0), we.setDepthWrite(!0), we.setColorWrite(!0)
                }
            }, this.setFaceCulling = function(e, t) {
                e === o.CullFaceNone ? we.disable(ye.CULL_FACE) : (t === o.FrontFaceDirectionCW ? ye.frontFace(ye.CW) : ye.frontFace(ye.CCW), e === o.CullFaceBack ? ye.cullFace(ye.BACK) : e === o.CullFaceFront ? ye.cullFace(ye.FRONT) : ye.cullFace(ye.FRONT_AND_BACK), we.enable(ye.CULL_FACE))
            }, this.setTexture = function(e, t) {
                var n = Te.get(e);
                if (0 < e.version && n.__version !== e.version) {
                    var i = e.image;
                    if (void 0 === i) console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined", e);
                    else if (!1 === i.complete) console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete", e);
                    else {
                        if (void 0 === n.__webglInit && (n.__webglInit = !0, e.addEventListener("dispose", a), n.__webglTexture = ye.createTexture(), ve.textures++), we.activeTexture(ye.TEXTURE0 + t), we.bindTexture(ye.TEXTURE_2D, n.__webglTexture), ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL, e.flipY), ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.premultiplyAlpha), ye.pixelStorei(ye.UNPACK_ALIGNMENT, e.unpackAlignment), e.image = w(e.image, be.maxTextureSize), (e.wrapS !== o.ClampToEdgeWrapping || e.wrapT !== o.ClampToEdgeWrapping || e.minFilter !== o.NearestFilter && e.minFilter !== o.LinearFilter) && !1 === T(e.image)) {
                            if (i = e.image, i instanceof HTMLImageElement || i instanceof HTMLCanvasElement) {
                                var r = document.createElement("canvas");
                                r.width = o.Math.nearestPowerOfTwo(i.width), r.height = o.Math.nearestPowerOfTwo(i.height), r.getContext("2d").drawImage(i, 0, 0, r.width, r.height), console.warn("THREE.WebGLRenderer: image is not power of two (" + i.width + "x" + i.height + "). Resized to " + r.width + "x" + r.height, i), i = r
                            }
                            e.image = i
                        }
                        var s = e.image,
                            i = T(s),
                            r = C(e.format),
                            u = C(e.type);
                        b(ye.TEXTURE_2D, e, i);
                        var l = e.mipmaps;
                        if (e instanceof o.DataTexture)
                            if (0 < l.length && i) {
                                for (var c = 0, h = l.length; h > c; c++) s = l[c], we.texImage2D(ye.TEXTURE_2D, c, r, s.width, s.height, 0, r, u, s.data);
                                e.generateMipmaps = !1
                            } else we.texImage2D(ye.TEXTURE_2D, 0, r, s.width, s.height, 0, r, u, s.data);
                        else if (e instanceof o.CompressedTexture)
                            for (c = 0, h = l.length; h > c; c++) s = l[c], e.format !== o.RGBAFormat && e.format !== o.RGBFormat ? -1 < we.getCompressedTextureFormats().indexOf(r) ? we.compressedTexImage2D(ye.TEXTURE_2D, c, r, s.width, s.height, 0, s.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : we.texImage2D(ye.TEXTURE_2D, c, r, s.width, s.height, 0, r, u, s.data);
                        else if (0 < l.length && i) {
                            for (c = 0, h = l.length; h > c; c++) s = l[c], we.texImage2D(ye.TEXTURE_2D, c, r, r, u, s);
                            e.generateMipmaps = !1
                        } else we.texImage2D(ye.TEXTURE_2D, 0, r, r, u, e.image);
                        e.generateMipmaps && i && ye.generateMipmap(ye.TEXTURE_2D), n.__version = e.version, e.onUpdate && e.onUpdate(e)
                    }
                } else we.activeTexture(ye.TEXTURE0 + t), we.bindTexture(ye.TEXTURE_2D, n.__webglTexture)
            }, this.setRenderTarget = function(e) {
                var t = e instanceof o.WebGLRenderTargetCube;
                if (e && void 0 === Te.get(e).__webglFramebuffer) {
                    var n = Te.get(e),
                        i = Te.get(e.texture);
                    void 0 === e.depthBuffer && (e.depthBuffer = !0), void 0 === e.stencilBuffer && (e.stencilBuffer = !0), e.addEventListener("dispose", s), i.__webglTexture = ye.createTexture(), ve.textures++;
                    var r = T(e),
                        a = C(e.texture.format),
                        u = C(e.texture.type);
                    if (t) {
                        for (n.__webglFramebuffer = [], n.__webglRenderbuffer = [], we.bindTexture(ye.TEXTURE_CUBE_MAP, i.__webglTexture), b(ye.TEXTURE_CUBE_MAP, e.texture, r), i = 0; 6 > i; i++) n.__webglFramebuffer[i] = ye.createFramebuffer(), n.__webglRenderbuffer[i] = ye.createRenderbuffer(), we.texImage2D(ye.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, a, e.width, e.height, 0, a, u, null), M(n.__webglFramebuffer[i], e, ye.TEXTURE_CUBE_MAP_POSITIVE_X + i), P(n.__webglRenderbuffer[i], e);
                        e.texture.generateMipmaps && r && ye.generateMipmap(ye.TEXTURE_CUBE_MAP)
                    } else n.__webglFramebuffer = ye.createFramebuffer(), n.__webglRenderbuffer = e.shareDepthFrom ? e.shareDepthFrom.__webglRenderbuffer : ye.createRenderbuffer(), we.bindTexture(ye.TEXTURE_2D, i.__webglTexture), b(ye.TEXTURE_2D, e.texture, r), we.texImage2D(ye.TEXTURE_2D, 0, a, e.width, e.height, 0, a, u, null), M(n.__webglFramebuffer, e, ye.TEXTURE_2D), e.shareDepthFrom ? e.depthBuffer && !e.stencilBuffer ? ye.framebufferRenderbuffer(ye.FRAMEBUFFER, ye.DEPTH_ATTACHMENT, ye.RENDERBUFFER, n.__webglRenderbuffer) : e.depthBuffer && e.stencilBuffer && ye.framebufferRenderbuffer(ye.FRAMEBUFFER, ye.DEPTH_STENCIL_ATTACHMENT, ye.RENDERBUFFER, n.__webglRenderbuffer) : P(n.__webglRenderbuffer, e), e.texture.generateMipmaps && r && ye.generateMipmap(ye.TEXTURE_2D);
                    t ? we.bindTexture(ye.TEXTURE_CUBE_MAP, null) : we.bindTexture(ye.TEXTURE_2D, null), ye.bindRenderbuffer(ye.RENDERBUFFER, null), ye.bindFramebuffer(ye.FRAMEBUFFER, null)
                }
                e ? (n = Te.get(e), i = t ? n.__webglFramebuffer[e.activeCubeFace] : n.__webglFramebuffer, n = e.width, r = e.height, u = a = 0) : (i = null, n = ae, r = se, a = re, u = oe), i !== $ && (ye.bindFramebuffer(ye.FRAMEBUFFER, i), ye.viewport(a, u, n, r), $ = i), t && (i = Te.get(e.texture), ye.framebufferTexture2D(ye.FRAMEBUFFER, ye.COLOR_ATTACHMENT0, ye.TEXTURE_CUBE_MAP_POSITIVE_X + e.activeCubeFace, i.__webglTexture, 0)), ue = n, le = r
            }, this.readRenderTargetPixels = function(e, t, n, i, r, a) {
                if (!1 == e instanceof o.WebGLRenderTarget) console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
                else {
                    var s = Te.get(e).__webglFramebuffer;
                    if (s) {
                        var u = !1;
                        s !== $ && (ye.bindFramebuffer(ye.FRAMEBUFFER, s), u = !0);
                        try {
                            var l = e.texture;
                            l.format !== o.RGBAFormat && C(l.format) !== ye.getParameter(ye.IMPLEMENTATION_COLOR_READ_FORMAT) ? console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.") : l.type === o.UnsignedByteType || C(l.type) === ye.getParameter(ye.IMPLEMENTATION_COLOR_READ_TYPE) || l.type === o.FloatType && xe.get("WEBGL_color_buffer_float") || l.type === o.HalfFloatType && xe.get("EXT_color_buffer_half_float") ? ye.checkFramebufferStatus(ye.FRAMEBUFFER) === ye.FRAMEBUFFER_COMPLETE ? ye.readPixels(t, n, i, r, C(l.format), C(l.type), a) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.") : console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")
                        } finally {
                            u && ye.bindFramebuffer(ye.FRAMEBUFFER, $)
                        }
                    }
                }
            }, this.supportsFloatTextures = function() {
                return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."), xe.get("OES_texture_float")
            }, this.supportsHalfFloatTextures = function() {
                return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."), xe.get("OES_texture_half_float")
            }, this.supportsStandardDerivatives = function() {
                return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."), xe.get("OES_standard_derivatives")
            }, this.supportsCompressedTextureS3TC = function() {
                return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."), xe.get("WEBGL_compressed_texture_s3tc")
            }, this.supportsCompressedTexturePVRTC = function() {
                return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),
                    xe.get("WEBGL_compressed_texture_pvrtc")
            }, this.supportsBlendMinMax = function() {
                return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."), xe.get("EXT_blend_minmax")
            }, this.supportsVertexTextures = function() {
                return be.vertexTextures
            }, this.supportsInstancedArrays = function() {
                return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."), xe.get("ANGLE_instanced_arrays")
            }, this.initMaterial = function() {
                console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")
            }, this.addPrePlugin = function() {
                console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")
            }, this.addPostPlugin = function() {
                console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")
            }, this.updateShadowMap = function() {
                console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")
            }, Object.defineProperties(this, {
                shadowMapEnabled: {
                    get: function() {
                        return Ae.enabled
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."), Ae.enabled = e
                    }
                },
                shadowMapType: {
                    get: function() {
                        return Ae.type
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."), Ae.type = e
                    }
                },
                shadowMapCullFace: {
                    get: function() {
                        return Ae.cullFace
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."), Ae.cullFace = e
                    }
                },
                shadowMapDebug: {
                    get: function() {
                        return Ae.debug
                    },
                    set: function(e) {
                        console.warn("THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug."), Ae.debug = e
                    }
                }
            })
        }, o.WebGLRenderTarget = function(e, t, n) {
            this.uuid = o.Math.generateUUID(), this.width = e, this.height = t, n = n || {}, void 0 === n.minFilter && (n.minFilter = o.LinearFilter), this.texture = new o.Texture(void 0, void 0, n.wrapS, n.wrapT, n.magFilter, n.minFilter, n.format, n.type, n.anisotropy), this.depthBuffer = void 0 !== n.depthBuffer ? n.depthBuffer : !0, this.stencilBuffer = void 0 !== n.stencilBuffer ? n.stencilBuffer : !0, this.shareDepthFrom = void 0 !== n.shareDepthFrom ? n.shareDepthFrom : null
        }, o.WebGLRenderTarget.prototype = {
            constructor: o.WebGLRenderTarget,
            get wrapS() {
                return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."), this.texture.wrapS
            },
            set wrapS(e) {
                console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."), this.texture.wrapS = e
            },
            get wrapT() {
                return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."), this.texture.wrapT
            },
            set wrapT(e) {
                console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."), this.texture.wrapT = e
            },
            get magFilter() {
                return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."), this.texture.magFilter
            },
            set magFilter(e) {
                console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."), this.texture.magFilter = e
            },
            get minFilter() {
                return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."), this.texture.minFilter
            },
            set minFilter(e) {
                console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."), this.texture.minFilter = e
            },
            get anisotropy() {
                return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."), this.texture.anisotropy
            },
            set anisotropy(e) {
                console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."), this.texture.anisotropy = e
            },
            get offset() {
                return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."), this.texture.offset
            },
            set offset(e) {
                console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."), this.texture.offset = e
            },
            get repeat() {
                return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."), this.texture.repeat
            },
            set repeat(e) {
                console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."), this.texture.repeat = e
            },
            get format() {
                return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."), this.texture.format
            },
            set format(e) {
                console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."), this.texture.format = e
            },
            get type() {
                return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."), this.texture.type
            },
            set type(e) {
                console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."), this.texture.type = e
            },
            get generateMipmaps() {
                return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."), this.texture.generateMipmaps
            },
            set generateMipmaps(e) {
                console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."), this.texture.generateMipmaps = e
            },
            setSize: function(e, t) {
                (this.width !== e || this.height !== t) && (this.width = e, this.height = t, this.dispose())
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                return this.width = e.width, this.height = e.height, this.texture = e.texture.clone(), this.depthBuffer = e.depthBuffer, this.stencilBuffer = e.stencilBuffer, this.shareDepthFrom = e.shareDepthFrom, this
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        }, o.EventDispatcher.prototype.apply(o.WebGLRenderTarget.prototype), o.WebGLRenderTargetCube = function(e, t, n) {
            o.WebGLRenderTarget.call(this, e, t, n), this.activeCubeFace = 0
        }, o.WebGLRenderTargetCube.prototype = Object.create(o.WebGLRenderTarget.prototype), o.WebGLRenderTargetCube.prototype.constructor = o.WebGLRenderTargetCube, o.WebGLBufferRenderer = function(e, t, n) {
            var i;
            this.setMode = function(e) {
                i = e
            }, this.render = function(t, r) {
                e.drawArrays(i, t, r), n.calls++, n.vertices += r, i === e.TRIANGLES && (n.faces += r / 3)
            }, this.renderInstances = function(e) {
                var n = t.get("ANGLE_instanced_arrays");
                if (null === n) console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                else {
                    var r = e.attributes.position;
                    r instanceof o.InterleavedBufferAttribute ? n.drawArraysInstancedANGLE(i, 0, r.data.count, e.maxInstancedCount) : n.drawArraysInstancedANGLE(i, 0, r.count, e.maxInstancedCount)
                }
            }
        }, o.WebGLIndexedBufferRenderer = function(e, t, n) {
            var i, r, o;
            this.setMode = function(e) {
                i = e
            }, this.setIndex = function(n) {
                n.array instanceof Uint32Array && t.get("OES_element_index_uint") ? (r = e.UNSIGNED_INT, o = 4) : (r = e.UNSIGNED_SHORT, o = 2)
            }, this.render = function(t, a) {
                e.drawElements(i, a, r, t * o), n.calls++, n.vertices += a, i === e.TRIANGLES && (n.faces += a / 3)
            }, this.renderInstances = function(e) {
                var n = t.get("ANGLE_instanced_arrays");
                null === n ? console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.") : n.drawElementsInstancedANGLE(i, e.index.array.length, r, 0, e.maxInstancedCount)
            }
        }, o.WebGLExtensions = function(e) {
            var t = {};
            this.get = function(n) {
                if (void 0 !== t[n]) return t[n];
                var i;
                switch (n) {
                    case "EXT_texture_filter_anisotropic":
                        i = e.getExtension("EXT_texture_filter_anisotropic") || e.getExtension("MOZ_EXT_texture_filter_anisotropic") || e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                        break;
                    case "WEBGL_compressed_texture_s3tc":
                        i = e.getExtension("WEBGL_compressed_texture_s3tc") || e.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                        break;
                    case "WEBGL_compressed_texture_pvrtc":
                        i = e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                        break;
                    default:
                        i = e.getExtension(n)
                }
                return null === i && console.warn("THREE.WebGLRenderer: " + n + " extension not supported."), t[n] = i
            }
        }, o.WebGLCapabilities = function(e, t, n) {
            function i(t) {
                if ("highp" === t) {
                    if (0 < e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.HIGH_FLOAT).precision && 0 < e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_FLOAT).precision) return "highp";
                    t = "mediump"
                }
                return "mediump" === t && 0 < e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.MEDIUM_FLOAT).precision && 0 < e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.MEDIUM_FLOAT).precision ? "mediump" : "lowp"
            }
            this.getMaxPrecision = i, this.precision = void 0 !== n.precision ? n.precision : "highp", this.logarithmicDepthBuffer = void 0 !== n.logarithmicDepthBuffer ? n.logarithmicDepthBuffer : !1, this.maxTextures = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS), this.maxVertexTextures = e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS), this.maxTextureSize = e.getParameter(e.MAX_TEXTURE_SIZE), this.maxCubemapSize = e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE), this.maxAttributes = e.getParameter(e.MAX_VERTEX_ATTRIBS), this.maxVertexUniforms = e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS), this.maxVaryings = e.getParameter(e.MAX_VARYING_VECTORS), this.maxFragmentUniforms = e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS), this.vertexTextures = 0 < this.maxVertexTextures, this.floatFragmentTextures = !!t.get("OES_texture_float"), this.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures, n = i(this.precision), n !== this.precision && (console.warn("THREE.WebGLRenderer:", this.precision, "not supported, using", n, "instead."), this.precision = n), this.logarithmicDepthBuffer && (this.logarithmicDepthBuffer = !!t.get("EXT_frag_depth"))
        }, o.WebGLGeometries = function(e, t, n) {
            function i(e) {
                e = e.target;
                var o, s = a[e.id].attributes;
                for (o in s) r(s[o]);
                e.removeEventListener("dispose", i), delete a[e.id], o = t.get(e), o.wireframe && r(o.wireframe), n.memory.geometries--
            }

            function r(n) {
                var i;
                i = n instanceof o.InterleavedBufferAttribute ? t.get(n.data).__webglBuffer : t.get(n).__webglBuffer, void 0 !== i && (e.deleteBuffer(i), n instanceof o.InterleavedBufferAttribute ? t["delete"](n.data) : t["delete"](n))
            }
            var a = {};
            this.get = function(e) {
                var t = e.geometry;
                if (void 0 !== a[t.id]) return a[t.id];
                t.addEventListener("dispose", i);
                var r;
                return t instanceof o.BufferGeometry ? r = t : t instanceof o.Geometry && (void 0 === t._bufferGeometry && (t._bufferGeometry = (new o.BufferGeometry).setFromObject(e)), r = t._bufferGeometry), a[t.id] = r, n.memory.geometries++, r
            }
        }, o.WebGLObjects = function(e, t, n) {
            function i(n, i) {
                var r = n instanceof o.InterleavedBufferAttribute ? n.data : n,
                    a = t.get(r);
                void 0 === a.__webglBuffer ? (a.__webglBuffer = e.createBuffer(), e.bindBuffer(i, a.__webglBuffer), e.bufferData(i, r.array, r.dynamic ? e.DYNAMIC_DRAW : e.STATIC_DRAW), a.version = r.version) : a.version !== r.version && (e.bindBuffer(i, a.__webglBuffer), !1 === r.dynamic || -1 === r.updateRange.count ? e.bufferSubData(i, 0, r.array) : 0 === r.updateRange.count ? console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.") : (e.bufferSubData(i, r.updateRange.offset * r.array.BYTES_PER_ELEMENT, r.array.subarray(r.updateRange.offset, r.updateRange.offset + r.updateRange.count)), r.updateRange.count = 0), a.version = r.version)
            }

            function r(e, t, n) {
                if (t > n) {
                    var i = t;
                    t = n, n = i
                }
                return i = e[t], void 0 === i ? (e[t] = [n], !0) : -1 === i.indexOf(n) ? (i.push(n), !0) : !1
            }
            var a = new o.WebGLGeometries(e, t, n);
            this.getAttributeBuffer = function(e) {
                return e instanceof o.InterleavedBufferAttribute ? t.get(e.data).__webglBuffer : t.get(e).__webglBuffer
            }, this.getWireframeAttribute = function(n) {
                var a = t.get(n);
                if (void 0 !== a.wireframe) return a.wireframe;
                var s = [],
                    u = n.index,
                    l = n.attributes;
                if (n = l.position, null !== u)
                    for (var l = {}, u = u.array, c = 0, h = u.length; h > c; c += 3) {
                        var d = u[c + 0],
                            f = u[c + 1],
                            p = u[c + 2];
                        r(l, d, f) && s.push(d, f), r(l, f, p) && s.push(f, p), r(l, p, d) && s.push(p, d)
                    } else
                        for (u = l.position.array, c = 0, h = u.length / 3 - 1; h > c; c += 3) d = c + 0, f = c + 1, p = c + 2, s.push(d, f, f, p, p, d);
                return s = new o.BufferAttribute(new(65535 < n.count ? Uint32Array : Uint16Array)(s), 1), i(s, e.ELEMENT_ARRAY_BUFFER), a.wireframe = s
            }, this.update = function(t) {
                var n = a.get(t);
                t.geometry instanceof o.Geometry && n.updateFromObject(t), t = n.index;
                var r = n.attributes;
                null !== t && i(t, e.ELEMENT_ARRAY_BUFFER);
                for (var s in r) i(r[s], e.ARRAY_BUFFER);
                t = n.morphAttributes;
                for (s in t)
                    for (var r = t[s], u = 0, l = r.length; l > u; u++) i(r[u], e.ARRAY_BUFFER);
                return n
            }
        }, o.WebGLProgram = function() {
            function e(e) {
                var t, n = [];
                for (t in e) {
                    var i = e[t];
                    !1 !== i && n.push("#define " + t + " " + i)
                }
                return n.join("\n")
            }

            function t(e) {
                return "" !== e
            }
            var n = 0;
            return function(i, r, a, s) {
                var u = i.context,
                    l = a.defines,
                    c = a.__webglShader.vertexShader,
                    h = a.__webglShader.fragmentShader,
                    d = "SHADOWMAP_TYPE_BASIC";
                s.shadowMapType === o.PCFShadowMap ? d = "SHADOWMAP_TYPE_PCF" : s.shadowMapType === o.PCFSoftShadowMap && (d = "SHADOWMAP_TYPE_PCF_SOFT");
                var f = "ENVMAP_TYPE_CUBE",
                    p = "ENVMAP_MODE_REFLECTION",
                    m = "ENVMAP_BLENDING_MULTIPLY";
                if (s.envMap) {
                    switch (a.envMap.mapping) {
                        case o.CubeReflectionMapping:
                        case o.CubeRefractionMapping:
                            f = "ENVMAP_TYPE_CUBE";
                            break;
                        case o.EquirectangularReflectionMapping:
                        case o.EquirectangularRefractionMapping:
                            f = "ENVMAP_TYPE_EQUIREC";
                            break;
                        case o.SphericalReflectionMapping:
                            f = "ENVMAP_TYPE_SPHERE"
                    }
                    switch (a.envMap.mapping) {
                        case o.CubeRefractionMapping:
                        case o.EquirectangularRefractionMapping:
                            p = "ENVMAP_MODE_REFRACTION"
                    }
                    switch (a.combine) {
                        case o.MultiplyOperation:
                            m = "ENVMAP_BLENDING_MULTIPLY";
                            break;
                        case o.MixOperation:
                            m = "ENVMAP_BLENDING_MIX";
                            break;
                        case o.AddOperation:
                            m = "ENVMAP_BLENDING_ADD"
                    }
                }
                var v = 0 < i.gammaFactor ? i.gammaFactor : 1,
                    g = e(l),
                    y = u.createProgram();
                a instanceof o.RawShaderMaterial ? i = l = "" : (l = ["precision " + s.precision + " float;", "precision " + s.precision + " int;", "#define SHADER_NAME " + a.__webglShader.name, g, s.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", i.gammaInput ? "#define GAMMA_INPUT" : "", i.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define GAMMA_FACTOR " + v, "#define MAX_DIR_LIGHTS " + s.maxDirLights, "#define MAX_POINT_LIGHTS " + s.maxPointLights, "#define MAX_SPOT_LIGHTS " + s.maxSpotLights, "#define MAX_HEMI_LIGHTS " + s.maxHemiLights, "#define MAX_SHADOWS " + s.maxShadows, "#define MAX_BONES " + s.maxBones, s.map ? "#define USE_MAP" : "", s.envMap ? "#define USE_ENVMAP" : "", s.envMap ? "#define " + p : "", s.lightMap ? "#define USE_LIGHTMAP" : "", s.aoMap ? "#define USE_AOMAP" : "", s.emissiveMap ? "#define USE_EMISSIVEMAP" : "", s.bumpMap ? "#define USE_BUMPMAP" : "", s.normalMap ? "#define USE_NORMALMAP" : "", s.displacementMap && s.supportsVertexTextures ? "#define USE_DISPLACEMENTMAP" : "", s.specularMap ? "#define USE_SPECULARMAP" : "", s.alphaMap ? "#define USE_ALPHAMAP" : "", s.vertexColors ? "#define USE_COLOR" : "", s.flatShading ? "#define FLAT_SHADED" : "", s.skinning ? "#define USE_SKINNING" : "", s.useVertexTexture ? "#define BONE_TEXTURE" : "", s.morphTargets ? "#define USE_MORPHTARGETS" : "", s.morphNormals && !1 === s.flatShading ? "#define USE_MORPHNORMALS" : "", s.doubleSided ? "#define DOUBLE_SIDED" : "", s.flipSided ? "#define FLIP_SIDED" : "", s.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", s.shadowMapEnabled ? "#define " + d : "", s.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", 0 < s.pointLightShadows ? "#define POINT_LIGHT_SHADOWS" : "", s.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", s.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", s.logarithmicDepthBuffer && i.extensions.get("EXT_frag_depth") ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_COLOR", "	attribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "	attribute vec3 morphTarget0;", "	attribute vec3 morphTarget1;", "	attribute vec3 morphTarget2;", "	attribute vec3 morphTarget3;", "	#ifdef USE_MORPHNORMALS", "		attribute vec3 morphNormal0;", "		attribute vec3 morphNormal1;", "		attribute vec3 morphNormal2;", "		attribute vec3 morphNormal3;", "	#else", "		attribute vec3 morphTarget4;", "		attribute vec3 morphTarget5;", "		attribute vec3 morphTarget6;", "		attribute vec3 morphTarget7;", "	#endif", "#endif", "#ifdef USE_SKINNING", "	attribute vec4 skinIndex;", "	attribute vec4 skinWeight;", "#endif", "\n"].filter(t).join("\n"), i = [s.bumpMap || s.normalMap || s.flatShading || a.derivatives ? "#extension GL_OES_standard_derivatives : enable" : "", s.logarithmicDepthBuffer && i.extensions.get("EXT_frag_depth") ? "#extension GL_EXT_frag_depth : enable" : "", "precision " + s.precision + " float;", "precision " + s.precision + " int;", "#define SHADER_NAME " + a.__webglShader.name, g, "#define MAX_DIR_LIGHTS " + s.maxDirLights, "#define MAX_POINT_LIGHTS " + s.maxPointLights, "#define MAX_SPOT_LIGHTS " + s.maxSpotLights, "#define MAX_HEMI_LIGHTS " + s.maxHemiLights, "#define MAX_SHADOWS " + s.maxShadows, s.alphaTest ? "#define ALPHATEST " + s.alphaTest : "", i.gammaInput ? "#define GAMMA_INPUT" : "", i.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define GAMMA_FACTOR " + v, s.useFog && s.fog ? "#define USE_FOG" : "", s.useFog && s.fogExp ? "#define FOG_EXP2" : "", s.map ? "#define USE_MAP" : "", s.envMap ? "#define USE_ENVMAP" : "", s.envMap ? "#define " + f : "", s.envMap ? "#define " + p : "", s.envMap ? "#define " + m : "", s.lightMap ? "#define USE_LIGHTMAP" : "", s.aoMap ? "#define USE_AOMAP" : "", s.emissiveMap ? "#define USE_EMISSIVEMAP" : "", s.bumpMap ? "#define USE_BUMPMAP" : "", s.normalMap ? "#define USE_NORMALMAP" : "", s.specularMap ? "#define USE_SPECULARMAP" : "", s.alphaMap ? "#define USE_ALPHAMAP" : "", s.vertexColors ? "#define USE_COLOR" : "", s.flatShading ? "#define FLAT_SHADED" : "", s.metal ? "#define METAL" : "", s.doubleSided ? "#define DOUBLE_SIDED" : "", s.flipSided ? "#define FLIP_SIDED" : "", s.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", s.shadowMapEnabled ? "#define " + d : "", s.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", 0 < s.pointLightShadows ? "#define POINT_LIGHT_SHADOWS" : "", s.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", s.logarithmicDepthBuffer && i.extensions.get("EXT_frag_depth") ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", "\n"].filter(t).join("\n")), h = i + h, c = o.WebGLShader(u, u.VERTEX_SHADER, l + c), h = o.WebGLShader(u, u.FRAGMENT_SHADER, h), u.attachShader(y, c), u.attachShader(y, h), void 0 !== a.index0AttributeName ? u.bindAttribLocation(y, 0, a.index0AttributeName) : !0 === s.morphTargets && u.bindAttribLocation(y, 0, "position"), u.linkProgram(y), s = u.getProgramInfoLog(y), d = u.getShaderInfoLog(c), f = u.getShaderInfoLog(h), m = p = !0, !1 === u.getProgramParameter(y, u.LINK_STATUS) ? (p = !1, console.error("THREE.WebGLProgram: shader error: ", u.getError(), "gl.VALIDATE_STATUS", u.getProgramParameter(y, u.VALIDATE_STATUS), "gl.getProgramInfoLog", s, d, f)) : "" !== s ? console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", s) : ("" === d || "" === f) && (m = !1), m && (this.diagnostics = {
                    runnable: p,
                    material: a,
                    programLog: s,
                    vertexShader: {
                        log: d,
                        prefix: l
                    },
                    fragmentShader: {
                        log: f,
                        prefix: i
                    }
                }), u.deleteShader(c), u.deleteShader(h);
                var _;
                this.getUniforms = function() {
                    if (void 0 === _) {
                        for (var e = {}, t = u.getProgramParameter(y, u.ACTIVE_UNIFORMS), n = 0; t > n; n++) {
                            var i = u.getActiveUniform(y, n).name,
                                r = u.getUniformLocation(y, i),
                                o = i.lastIndexOf("[0]"); - 1 !== o && o === i.length - 3 && (e[i.substr(0, o)] = r), e[i] = r
                        }
                        _ = e
                    }
                    return _
                };
                var x;
                return this.getAttributes = function() {
                    if (void 0 === x) {
                        for (var e = {}, t = u.getProgramParameter(y, u.ACTIVE_ATTRIBUTES), n = 0; t > n; n++) {
                            var i = u.getActiveAttrib(y, n).name;
                            e[i] = u.getAttribLocation(y, i)
                        }
                        x = e
                    }
                    return x
                }, this.destroy = function() {
                    u.deleteProgram(y), this.program = void 0
                }, Object.defineProperties(this, {
                    uniforms: {
                        get: function() {
                            return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."), this.getUniforms()
                        }
                    },
                    attributes: {
                        get: function() {
                            return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."), this.getAttributes()
                        }
                    }
                }), this.id = n++, this.code = r, this.usedTimes = 1, this.program = y, this.vertexShader = c, this.fragmentShader = h, this
            }
        }(), o.WebGLPrograms = function(e, t) {
            var n = [],
                i = {
                    MeshDepthMaterial: "depth",
                    MeshNormalMaterial: "normal",
                    MeshBasicMaterial: "basic",
                    MeshLambertMaterial: "lambert",
                    MeshPhongMaterial: "phong",
                    LineBasicMaterial: "basic",
                    LineDashedMaterial: "dashed",
                    PointsMaterial: "points"
                },
                r = "precision supportsVertexTextures map envMap envMapMode lightMap aoMap emissiveMap bumpMap normalMap displacementMap specularMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals maxDirLights maxPointLights maxSpotLights maxHemiLights maxShadows shadowMapEnabled pointLightShadows shadowMapType shadowMapDebug alphaTest metal doubleSided flipSided".split(" ");
            this.getParameters = function(n, r, a, s) {
                var u, l, c, h, d, f = i[n.type];
                u = d = h = c = l = 0;
                for (var p = r.length; p > u; u++) {
                    var m = r[u];
                    !1 !== m.visible && (m instanceof o.DirectionalLight && l++, m instanceof o.PointLight && c++, m instanceof o.SpotLight && h++, m instanceof o.HemisphereLight && d++)
                }
                for (var m = u = p = 0, v = r.length; v > m; m++) {
                    var g = r[m];
                    g.castShadow && ((g instanceof o.SpotLight || g instanceof o.DirectionalLight) && p++, g instanceof o.PointLight && (p++, u++))
                }
                return r = p, t.floatVertexTextures && s && s.skeleton && s.skeleton.useVertexTexture ? p = 1024 : (p = Math.floor((t.maxVertexUniforms - 20) / 4), void 0 !== s && s instanceof o.SkinnedMesh && (p = Math.min(s.skeleton.bones.length, p), p < s.skeleton.bones.length && console.warn("WebGLRenderer: too many bones - " + s.skeleton.bones.length + ", this GPU supports just " + p + " (try OpenGL instead of ANGLE)"))), m = e.getPrecision(), null !== n.precision && (m = t.getMaxPrecision(n.precision), m !== n.precision && console.warn("THREE.WebGLRenderer.initMaterial:", n.precision, "not supported, using", m, "instead.")), {
                    shaderID: f,
                    precision: m,
                    supportsVertexTextures: t.vertexTextures,
                    map: !!n.map,
                    envMap: !!n.envMap,
                    envMapMode: n.envMap && n.envMap.mapping,
                    lightMap: !!n.lightMap,
                    aoMap: !!n.aoMap,
                    emissiveMap: !!n.emissiveMap,
                    bumpMap: !!n.bumpMap,
                    normalMap: !!n.normalMap,
                    displacementMap: !!n.displacementMap,
                    specularMap: !!n.specularMap,
                    alphaMap: !!n.alphaMap,
                    combine: n.combine,
                    vertexColors: n.vertexColors,
                    fog: a,
                    useFog: n.fog,
                    fogExp: a instanceof o.FogExp2,
                    flatShading: n.shading === o.FlatShading,
                    sizeAttenuation: n.sizeAttenuation,
                    logarithmicDepthBuffer: t.logarithmicDepthBuffer,
                    skinning: n.skinning,
                    maxBones: p,
                    useVertexTexture: t.floatVertexTextures && s && s.skeleton && s.skeleton.useVertexTexture,
                    morphTargets: n.morphTargets,
                    morphNormals: n.morphNormals,
                    maxMorphTargets: e.maxMorphTargets,
                    maxMorphNormals: e.maxMorphNormals,
                    maxDirLights: l,
                    maxPointLights: c,
                    maxSpotLights: h,
                    maxHemiLights: d,
                    maxShadows: r,
                    pointLightShadows: u,
                    shadowMapEnabled: e.shadowMap.enabled && s.receiveShadow && r > 0,
                    shadowMapType: e.shadowMap.type,
                    shadowMapDebug: e.shadowMap.debug,
                    alphaTest: n.alphaTest,
                    metal: n.metal,
                    doubleSided: n.side === o.DoubleSide,
                    flipSided: n.side === o.BackSide
                }
            }, this.getProgramCode = function(e, t) {
                var n = [];
                if (t.shaderID ? n.push(t.shaderID) : (n.push(e.fragmentShader), n.push(e.vertexShader)), void 0 !== e.defines)
                    for (var i in e.defines) n.push(i), n.push(e.defines[i]);
                for (i = 0; i < r.length; i++) {
                    var o = r[i];
                    n.push(o), n.push(t[o])
                }
                return n.join()
            }, this.acquireProgram = function(t, i, r) {
                for (var a, s = 0, u = n.length; u > s; s++) {
                    var l = n[s];
                    if (l.code === r) {
                        a = l, ++a.usedTimes;
                        break
                    }
                }
                return void 0 === a && (a = new o.WebGLProgram(e, r, t, i), n.push(a)), a
            }, this.releaseProgram = function(e) {
                if (0 === --e.usedTimes) {
                    var t = n.indexOf(e);
                    n[t] = n[n.length - 1], n.pop(), e.destroy()
                }
            }, this.programs = n
        }, o.WebGLProperties = function() {
            var e = {};
            this.get = function(t) {
                t = t.uuid;
                var n = e[t];
                return void 0 === n && (n = {}, e[t] = n), n
            }, this["delete"] = function(t) {
                delete e[t.uuid]
            }, this.clear = function() {
                e = {}
            }
        }, o.WebGLShader = function() {
            function e(e) {
                e = e.split("\n");
                for (var t = 0; t < e.length; t++) e[t] = t + 1 + ": " + e[t];
                return e.join("\n")
            }
            return function(t, n, i) {
                var r = t.createShader(n);
                return t.shaderSource(r, i), t.compileShader(r), !1 === t.getShaderParameter(r, t.COMPILE_STATUS) && console.error("THREE.WebGLShader: Shader couldn't compile."), "" !== t.getShaderInfoLog(r) && console.warn("THREE.WebGLShader: gl.getShaderInfoLog()", n === t.VERTEX_SHADER ? "vertex" : "fragment", t.getShaderInfoLog(r), e(i)), r
            }
        }(), o.WebGLShadowMap = function(e, t, n) {
            function i(e, t, n, i) {
                var r = e.geometry,
                    a = null,
                    a = f,
                    s = e.customDepthMaterial;
                return n && (a = p, s = e.customDistanceMaterial), s ? a = s : (e = e instanceof o.SkinnedMesh && t.skinning, s = 0, void 0 !== r.morphTargets && 0 < r.morphTargets.length && t.morphTargets && (s |= 1), e && (s |= 2), a = a[s]), a.visible = t.visible, a.wireframe = t.wireframe, a.wireframeLinewidth = t.wireframeLinewidth, n && void 0 !== a.uniforms.lightPos && a.uniforms.lightPos.value.copy(i), a
            }

            function r(e, t) {
                if (!1 !== e.visible) {
                    (e instanceof o.Mesh || e instanceof o.Line || e instanceof o.Points) && e.castShadow && (!1 === e.frustumCulled || !0 === u.intersectsObject(e)) && !0 === e.material.visible && (e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse, e.matrixWorld), d.push(e));
                    for (var n = e.children, i = 0, a = n.length; a > i; i++) r(n[i], t)
                }
            }
            var a = e.context,
                s = e.state,
                u = new o.Frustum,
                l = new o.Matrix4;
            new o.Vector3, new o.Vector3;
            for (var c = new o.Vector3, h = new o.Vector3, d = [], f = Array(4), p = Array(4), m = [new o.Vector3(1, 0, 0), new o.Vector3(-1, 0, 0), new o.Vector3(0, 0, 1), new o.Vector3(0, 0, -1), new o.Vector3(0, 1, 0), new o.Vector3(0, -1, 0)], v = [new o.Vector3(0, 1, 0), new o.Vector3(0, 1, 0), new o.Vector3(0, 1, 0), new o.Vector3(0, 1, 0), new o.Vector3(0, 0, 1), new o.Vector3(0, 0, -1)], g = [new o.Vector4, new o.Vector4, new o.Vector4, new o.Vector4, new o.Vector4, new o.Vector4], y = new o.Vector4, _ = o.ShaderLib.depthRGBA, x = o.UniformsUtils.clone(_.uniforms), b = o.ShaderLib.distanceRGBA, w = o.UniformsUtils.clone(b.uniforms), T = 0; 4 !== T; ++T) {
                var E = 0 !== (1 & T),
                    S = 0 !== (2 & T),
                    M = new o.ShaderMaterial({
                        uniforms: x,
                        vertexShader: _.vertexShader,
                        fragmentShader: _.fragmentShader,
                        morphTargets: E,
                        skinning: S
                    });
                M._shadowPass = !0, f[T] = M, E = new o.ShaderMaterial({
                    uniforms: w,
                    vertexShader: b.vertexShader,
                    fragmentShader: b.fragmentShader,
                    morphTargets: E,
                    skinning: S
                }), E._shadowPass = !0, p[T] = E
            }
            var P = this;
            this.enabled = !1, this.autoUpdate = !0, this.needsUpdate = !1, this.type = o.PCFShadowMap, this.cullFace = o.CullFaceFront, this.render = function(f) {
                var p, _;
                if (!1 !== P.enabled && (!1 !== P.autoUpdate || !1 !== P.needsUpdate)) {
                    a.clearColor(1, 1, 1, 1), s.disable(a.BLEND), s.enable(a.CULL_FACE), a.frontFace(a.CCW), a.cullFace(P.cullFace === o.CullFaceFront ? a.FRONT : a.BACK), s.setDepthTest(!0), e.getViewport(y);
                    for (var x = 0, b = t.length; b > x; x++) {
                        var w = t[x];
                        if (!0 === w.castShadow) {
                            var T = w.shadow,
                                E = T.camera,
                                S = T.mapSize;
                            if (w instanceof o.PointLight) {
                                p = 6, _ = !0;
                                var M = S.x / 4,
                                    A = S.y / 2;
                                g[0].set(2 * M, A, M, A), g[1].set(0, A, M, A), g[2].set(3 * M, A, M, A), g[3].set(M, A, M, A), g[4].set(3 * M, 0, M, A), g[5].set(M, 0, M, A)
                            } else p = 1, _ = !1;
                            for (null === T.map && (M = o.LinearFilter, P.type === o.PCFSoftShadowMap && (M = o.NearestFilter), T.map = new o.WebGLRenderTarget(S.x, S.y, {
                                    minFilter: M,
                                    magFilter: M,
                                    format: o.RGBAFormat
                                }), T.matrix = new o.Matrix4, w instanceof o.SpotLight && (E.aspect = S.x / S.y), E.updateProjectionMatrix()), S = T.map, T = T.matrix, h.setFromMatrixPosition(w.matrixWorld), E.position.copy(h), e.setRenderTarget(S), e.clear(), S = 0; p > S; S++)
                                for (_ ? (c.copy(E.position), c.add(m[S]), E.up.copy(v[S]), E.lookAt(c), M = g[S], e.setViewport(M.x, M.y, M.z, M.w)) : (c.setFromMatrixPosition(w.target.matrixWorld), E.lookAt(c)), E.updateMatrixWorld(), E.matrixWorldInverse.getInverse(E.matrixWorld), T.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), T.multiply(E.projectionMatrix), T.multiply(E.matrixWorldInverse), l.multiplyMatrices(E.projectionMatrix, E.matrixWorldInverse), u.setFromMatrix(l), d.length = 0, r(f, E), M = 0, A = d.length; A > M; M++) {
                                    var C = d[M],
                                        R = n.update(C),
                                        L = C.material;
                                    if (L instanceof o.MeshFaceMaterial)
                                        for (var O = R.groups, L = L.materials, k = 0, D = O.length; D > k; k++) {
                                            var F = O[k],
                                                B = L[F.materialIndex];
                                            !0 === B.visible && (B = i(C, B, _, h), e.renderBufferDirect(E, t, null, R, B, C, F))
                                        } else B = i(C, L, _, h), e.renderBufferDirect(E, t, null, R, B, C, null)
                                }
                            e.resetGLState()
                        }
                    }
                    e.setViewport(y.x, y.y, y.z, y.w), f = e.getClearColor(), p = e.getClearAlpha(), e.setClearColor(f, p), s.enable(a.BLEND), P.cullFace === o.CullFaceFront && a.cullFace(a.BACK), e.resetGLState(), P.needsUpdate = !1
                }
            }
        }, o.WebGLState = function(e, t, n) {
            var i = this,
                r = new Uint8Array(16),
                a = new Uint8Array(16),
                s = new Uint8Array(16),
                u = {},
                l = null,
                c = null,
                h = null,
                d = null,
                f = null,
                p = null,
                m = null,
                v = null,
                g = null,
                y = null,
                _ = null,
                x = null,
                b = null,
                w = null,
                T = null,
                E = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),
                S = void 0,
                M = {};
            this.init = function() {
                e.clearColor(0, 0, 0, 1), e.clearDepth(1), e.clearStencil(0), this.enable(e.DEPTH_TEST), e.depthFunc(e.LEQUAL), e.frontFace(e.CCW), e.cullFace(e.BACK), this.enable(e.CULL_FACE), this.enable(e.BLEND), e.blendEquation(e.FUNC_ADD), e.blendFunc(e.SRC_ALPHA, e.ONE_MINUS_SRC_ALPHA)
            }, this.initAttributes = function() {
                for (var e = 0, t = r.length; t > e; e++) r[e] = 0
            }, this.enableAttribute = function(n) {
                r[n] = 1, 0 === a[n] && (e.enableVertexAttribArray(n), a[n] = 1), 0 !== s[n] && (t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n, 0), s[n] = 0)
            }, this.enableAttributeAndDivisor = function(t, n, i) {
                r[t] = 1, 0 === a[t] && (e.enableVertexAttribArray(t), a[t] = 1), s[t] !== n && (i.vertexAttribDivisorANGLE(t, n), s[t] = n)
            }, this.disableUnusedAttributes = function() {
                for (var t = 0, n = a.length; n > t; t++) a[t] !== r[t] && (e.disableVertexAttribArray(t), a[t] = 0)
            }, this.enable = function(t) {
                !0 !== u[t] && (e.enable(t), u[t] = !0)
            }, this.disable = function(t) {
                !1 !== u[t] && (e.disable(t), u[t] = !1)
            }, this.getCompressedTextureFormats = function() {
                if (null === l && (l = [], t.get("WEBGL_compressed_texture_pvrtc") || t.get("WEBGL_compressed_texture_s3tc")))
                    for (var n = e.getParameter(e.COMPRESSED_TEXTURE_FORMATS), i = 0; i < n.length; i++) l.push(n[i]);
                return l
            }, this.setBlending = function(t, i, r, a, s, u, l) {
                t !== c && (t === o.NoBlending ? this.disable(e.BLEND) : t === o.AdditiveBlending ? (this.enable(e.BLEND), e.blendEquation(e.FUNC_ADD), e.blendFunc(e.SRC_ALPHA, e.ONE)) : t === o.SubtractiveBlending ? (this.enable(e.BLEND), e.blendEquation(e.FUNC_ADD), e.blendFunc(e.ZERO, e.ONE_MINUS_SRC_COLOR)) : t === o.MultiplyBlending ? (this.enable(e.BLEND), e.blendEquation(e.FUNC_ADD), e.blendFunc(e.ZERO, e.SRC_COLOR)) : t === o.CustomBlending ? this.enable(e.BLEND) : (this.enable(e.BLEND), e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD), e.blendFuncSeparate(e.SRC_ALPHA, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA)), c = t), t === o.CustomBlending ? (s = s || i, u = u || r, l = l || a, (i !== h || s !== p) && (e.blendEquationSeparate(n(i), n(s)), h = i, p = s), (r !== d || a !== f || u !== m || l !== v) && (e.blendFuncSeparate(n(r), n(a), n(u), n(l)), d = r, f = a, m = u, v = l)) : v = m = p = f = d = h = null
            }, this.setDepthFunc = function(t) {
                if (g !== t) {
                    if (t) switch (t) {
                        case o.NeverDepth:
                            e.depthFunc(e.NEVER);
                            break;
                        case o.AlwaysDepth:
                            e.depthFunc(e.ALWAYS);
                            break;
                        case o.LessDepth:
                            e.depthFunc(e.LESS);
                            break;
                        case o.LessEqualDepth:
                            e.depthFunc(e.LEQUAL);
                            break;
                        case o.EqualDepth:
                            e.depthFunc(e.EQUAL);
                            break;
                        case o.GreaterEqualDepth:
                            e.depthFunc(e.GEQUAL);
                            break;
                        case o.GreaterDepth:
                            e.depthFunc(e.GREATER);
                            break;
                        case o.NotEqualDepth:
                            e.depthFunc(e.NOTEQUAL);
                            break;
                        default:
                            e.depthFunc(e.LEQUAL)
                    } else e.depthFunc(e.LEQUAL);
                    g = t
                }
            }, this.setDepthTest = function(t) {
                t ? this.enable(e.DEPTH_TEST) : this.disable(e.DEPTH_TEST)
            }, this.setDepthWrite = function(t) {
                y !== t && (e.depthMask(t), y = t)
            }, this.setColorWrite = function(t) {
                _ !== t && (e.colorMask(t, t, t, t), _ = t)
            }, this.setFlipSided = function(t) {
                x !== t && (t ? e.frontFace(e.CW) : e.frontFace(e.CCW), x = t)
            }, this.setLineWidth = function(t) {
                t !== b && (e.lineWidth(t), b = t)
            }, this.setPolygonOffset = function(t, n, i) {
                t ? this.enable(e.POLYGON_OFFSET_FILL) : this.disable(e.POLYGON_OFFSET_FILL), !t || w === n && T === i || (e.polygonOffset(n, i), w = n, T = i)
            }, this.setScissorTest = function(t) {
                t ? this.enable(e.SCISSOR_TEST) : this.disable(e.SCISSOR_TEST)
            }, this.activeTexture = function(t) {
                void 0 === t && (t = e.TEXTURE0 + E - 1), S !== t && (e.activeTexture(t), S = t)
            }, this.bindTexture = function(t, n) {
                void 0 === S && i.activeTexture();
                var r = M[S];
                void 0 === r && (r = {
                    type: void 0,
                    texture: void 0
                }, M[S] = r), (r.type !== t || r.texture !== n) && (e.bindTexture(t, n), r.type = t, r.texture = n)
            }, this.compressedTexImage2D = function() {
                try {
                    e.compressedTexImage2D.apply(e, arguments)
                } catch (t) {
                    console.error(t)
                }
            }, this.texImage2D = function() {
                try {
                    e.texImage2D.apply(e, arguments)
                } catch (t) {
                    console.error(t)
                }
            }, this.reset = function() {
                for (var t = 0; t < a.length; t++) 1 === a[t] && (e.disableVertexAttribArray(t), a[t] = 0);
                u = {}, x = _ = y = c = l = null
            }
        }, o.LensFlarePlugin = function(e, t) {
            var n, i, r, a, s, u, l, c, h, d, f, p, m, v, g, y, _ = e.context,
                x = e.state;
            this.render = function(b, w, T, E) {
                if (0 !== t.length) {
                    b = new o.Vector3;
                    var S = E / T,
                        M = .5 * T,
                        P = .5 * E,
                        A = 16 / E,
                        C = new o.Vector2(A * S, A),
                        R = new o.Vector3(1, 1, 0),
                        L = new o.Vector2(1, 1);
                    if (void 0 === m) {
                        var A = new Float32Array([-1, -1, 0, 0, 1, -1, 1, 0, 1, 1, 1, 1, -1, 1, 0, 1]),
                            O = new Uint16Array([0, 1, 2, 0, 2, 3]);
                        f = _.createBuffer(), p = _.createBuffer(), _.bindBuffer(_.ARRAY_BUFFER, f), _.bufferData(_.ARRAY_BUFFER, A, _.STATIC_DRAW), _.bindBuffer(_.ELEMENT_ARRAY_BUFFER, p), _.bufferData(_.ELEMENT_ARRAY_BUFFER, O, _.STATIC_DRAW), g = _.createTexture(), y = _.createTexture(), x.bindTexture(_.TEXTURE_2D, g), _.texImage2D(_.TEXTURE_2D, 0, _.RGB, 16, 16, 0, _.RGB, _.UNSIGNED_BYTE, null), _.texParameteri(_.TEXTURE_2D, _.TEXTURE_WRAP_S, _.CLAMP_TO_EDGE), _.texParameteri(_.TEXTURE_2D, _.TEXTURE_WRAP_T, _.CLAMP_TO_EDGE), _.texParameteri(_.TEXTURE_2D, _.TEXTURE_MAG_FILTER, _.NEAREST), _.texParameteri(_.TEXTURE_2D, _.TEXTURE_MIN_FILTER, _.NEAREST), x.bindTexture(_.TEXTURE_2D, y), _.texImage2D(_.TEXTURE_2D, 0, _.RGBA, 16, 16, 0, _.RGBA, _.UNSIGNED_BYTE, null), _.texParameteri(_.TEXTURE_2D, _.TEXTURE_WRAP_S, _.CLAMP_TO_EDGE), _.texParameteri(_.TEXTURE_2D, _.TEXTURE_WRAP_T, _.CLAMP_TO_EDGE), _.texParameteri(_.TEXTURE_2D, _.TEXTURE_MAG_FILTER, _.NEAREST), _.texParameteri(_.TEXTURE_2D, _.TEXTURE_MIN_FILTER, _.NEAREST);
                        var A = (v = 0 < _.getParameter(_.MAX_VERTEX_TEXTURE_IMAGE_UNITS)) ? {
                                vertexShader: "uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
                                fragmentShader: "uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"
                            } : {
                                vertexShader: "uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
                                fragmentShader: "precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"
                            },
                            O = _.createProgram(),
                            k = _.createShader(_.FRAGMENT_SHADER),
                            D = _.createShader(_.VERTEX_SHADER),
                            F = "precision " + e.getPrecision() + " float;\n";
                        _.shaderSource(k, F + A.fragmentShader), _.shaderSource(D, F + A.vertexShader), _.compileShader(k), _.compileShader(D), _.attachShader(O, k), _.attachShader(O, D), _.linkProgram(O), m = O, h = _.getAttribLocation(m, "position"), d = _.getAttribLocation(m, "uv"), n = _.getUniformLocation(m, "renderType"), i = _.getUniformLocation(m, "map"), r = _.getUniformLocation(m, "occlusionMap"), a = _.getUniformLocation(m, "opacity"), s = _.getUniformLocation(m, "color"), u = _.getUniformLocation(m, "scale"), l = _.getUniformLocation(m, "rotation"), c = _.getUniformLocation(m, "screenPosition")
                    }
                    for (_.useProgram(m), x.initAttributes(), x.enableAttribute(h), x.enableAttribute(d), x.disableUnusedAttributes(), _.uniform1i(r, 0), _.uniform1i(i, 1), _.bindBuffer(_.ARRAY_BUFFER, f), _.vertexAttribPointer(h, 2, _.FLOAT, !1, 16, 0), _.vertexAttribPointer(d, 2, _.FLOAT, !1, 16, 8), _.bindBuffer(_.ELEMENT_ARRAY_BUFFER, p), x.disable(_.CULL_FACE), _.depthMask(!1), O = 0, k = t.length; k > O; O++)
                        if (A = 16 / E, C.set(A * S, A), D = t[O], b.set(D.matrixWorld.elements[12], D.matrixWorld.elements[13], D.matrixWorld.elements[14]), b.applyMatrix4(w.matrixWorldInverse), b.applyProjection(w.projectionMatrix), R.copy(b), L.x = R.x * M + M, L.y = R.y * P + P, v || 0 < L.x && L.x < T && 0 < L.y && L.y < E) {
                            x.activeTexture(_.TEXTURE0), x.bindTexture(_.TEXTURE_2D, null), x.activeTexture(_.TEXTURE1), x.bindTexture(_.TEXTURE_2D, g), _.copyTexImage2D(_.TEXTURE_2D, 0, _.RGB, L.x - 8, L.y - 8, 16, 16, 0), _.uniform1i(n, 0), _.uniform2f(u, C.x, C.y), _.uniform3f(c, R.x, R.y, R.z), x.disable(_.BLEND), x.enable(_.DEPTH_TEST), _.drawElements(_.TRIANGLES, 6, _.UNSIGNED_SHORT, 0), x.activeTexture(_.TEXTURE0), x.bindTexture(_.TEXTURE_2D, y), _.copyTexImage2D(_.TEXTURE_2D, 0, _.RGBA, L.x - 8, L.y - 8, 16, 16, 0), _.uniform1i(n, 1), x.disable(_.DEPTH_TEST), x.activeTexture(_.TEXTURE1), x.bindTexture(_.TEXTURE_2D, g), _.drawElements(_.TRIANGLES, 6, _.UNSIGNED_SHORT, 0), D.positionScreen.copy(R), D.customUpdateCallback ? D.customUpdateCallback(D) : D.updateLensFlares(), _.uniform1i(n, 2), x.enable(_.BLEND);
                            for (var F = 0, B = D.lensFlares.length; B > F; F++) {
                                var I = D.lensFlares[F];
                                .001 < I.opacity && .001 < I.scale && (R.x = I.x, R.y = I.y, R.z = I.z, A = I.size * I.scale / E, C.x = A * S, C.y = A, _.uniform3f(c, R.x, R.y, R.z), _.uniform2f(u, C.x, C.y), _.uniform1f(l, I.rotation), _.uniform1f(a, I.opacity), _.uniform3f(s, I.color.r, I.color.g, I.color.b), x.setBlending(I.blending, I.blendEquation, I.blendSrc, I.blendDst), e.setTexture(I.texture, 1), _.drawElements(_.TRIANGLES, 6, _.UNSIGNED_SHORT, 0))
                            }
                        }
                    x.enable(_.CULL_FACE), x.enable(_.DEPTH_TEST), _.depthMask(!0), e.resetGLState()
                }
            }
        }, o.SpritePlugin = function(e, t) {
            function n(e, t) {
                return e.z !== t.z ? t.z - e.z : t.id - e.id
            }
            var i, r, a, s, u, l, c, h, d, f, p, m, v, g, y, _, x, b, w, T, E, S = e.context,
                M = e.state,
                P = new o.Vector3,
                A = new o.Quaternion,
                C = new o.Vector3;
            this.render = function(R, L) {
                if (0 !== t.length) {
                    if (void 0 === T) {
                        var O = new Float32Array([-.5, -.5, 0, 0, .5, -.5, 1, 0, .5, .5, 1, 1, -.5, .5, 0, 1]),
                            k = new Uint16Array([0, 1, 2, 0, 2, 3]);
                        b = S.createBuffer(), w = S.createBuffer(), S.bindBuffer(S.ARRAY_BUFFER, b), S.bufferData(S.ARRAY_BUFFER, O, S.STATIC_DRAW), S.bindBuffer(S.ELEMENT_ARRAY_BUFFER, w), S.bufferData(S.ELEMENT_ARRAY_BUFFER, k, S.STATIC_DRAW);
                        var O = S.createProgram(),
                            k = S.createShader(S.VERTEX_SHADER),
                            D = S.createShader(S.FRAGMENT_SHADER);
                        S.shaderSource(k, ["precision " + e.getPrecision() + " float;", "uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")), S.shaderSource(D, ["precision " + e.getPrecision() + " float;", "uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")), S.compileShader(k), S.compileShader(D), S.attachShader(O, k), S.attachShader(O, D), S.linkProgram(O), T = O, _ = S.getAttribLocation(T, "position"), x = S.getAttribLocation(T, "uv"), i = S.getUniformLocation(T, "uvOffset"), r = S.getUniformLocation(T, "uvScale"), a = S.getUniformLocation(T, "rotation"), s = S.getUniformLocation(T, "scale"), u = S.getUniformLocation(T, "color"), l = S.getUniformLocation(T, "map"), c = S.getUniformLocation(T, "opacity"), h = S.getUniformLocation(T, "modelViewMatrix"), d = S.getUniformLocation(T, "projectionMatrix"), f = S.getUniformLocation(T, "fogType"), p = S.getUniformLocation(T, "fogDensity"), m = S.getUniformLocation(T, "fogNear"), v = S.getUniformLocation(T, "fogFar"), g = S.getUniformLocation(T, "fogColor"), y = S.getUniformLocation(T, "alphaTest"), O = document.createElement("canvas"), O.width = 8, O.height = 8, k = O.getContext("2d"), k.fillStyle = "white", k.fillRect(0, 0, 8, 8), E = new o.Texture(O), E.needsUpdate = !0
                    }
                    S.useProgram(T), M.initAttributes(), M.enableAttribute(_), M.enableAttribute(x), M.disableUnusedAttributes(), M.disable(S.CULL_FACE), M.enable(S.BLEND), S.bindBuffer(S.ARRAY_BUFFER, b), S.vertexAttribPointer(_, 2, S.FLOAT, !1, 16, 0), S.vertexAttribPointer(x, 2, S.FLOAT, !1, 16, 8), S.bindBuffer(S.ELEMENT_ARRAY_BUFFER, w), S.uniformMatrix4fv(d, !1, L.projectionMatrix.elements), M.activeTexture(S.TEXTURE0), S.uniform1i(l, 0), k = O = 0, (D = R.fog) ? (S.uniform3f(g, D.color.r, D.color.g, D.color.b), D instanceof o.Fog ? (S.uniform1f(m, D.near), S.uniform1f(v, D.far), S.uniform1i(f, 1), k = O = 1) : D instanceof o.FogExp2 && (S.uniform1f(p, D.density), S.uniform1i(f, 2), k = O = 2)) : (S.uniform1i(f, 0), k = O = 0);
                    for (var D = 0, F = t.length; F > D; D++) {
                        var B = t[D];
                        B.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse, B.matrixWorld), B.z = -B.modelViewMatrix.elements[14]
                    }
                    t.sort(n);
                    for (var I = [], D = 0, F = t.length; F > D; D++) {
                        var B = t[D],
                            U = B.material;
                        S.uniform1f(y, U.alphaTest), S.uniformMatrix4fv(h, !1, B.modelViewMatrix.elements), B.matrixWorld.decompose(P, A, C), I[0] = C.x, I[1] = C.y, B = 0, R.fog && U.fog && (B = k), O !== B && (S.uniform1i(f, B), O = B), null !== U.map ? (S.uniform2f(i, U.map.offset.x, U.map.offset.y), S.uniform2f(r, U.map.repeat.x, U.map.repeat.y)) : (S.uniform2f(i, 0, 0), S.uniform2f(r, 1, 1)), S.uniform1f(c, U.opacity), S.uniform3f(u, U.color.r, U.color.g, U.color.b), S.uniform1f(a, U.rotation), S.uniform2fv(s, I), M.setBlending(U.blending, U.blendEquation, U.blendSrc, U.blendDst), M.setDepthTest(U.depthTest), M.setDepthWrite(U.depthWrite), U.map && U.map.image && U.map.image.width ? e.setTexture(U.map, 0) : e.setTexture(E, 0), S.drawElements(S.TRIANGLES, 6, S.UNSIGNED_SHORT, 0)
                    }
                    M.enable(S.CULL_FACE), e.resetGLState()
                }
            }
        }, o.CurveUtils = {
            tangentQuadraticBezier: function(e, t, n, i) {
                return 2 * (1 - e) * (n - t) + 2 * e * (i - n)
            },
            tangentCubicBezier: function(e, t, n, i, r) {
                return -3 * t * (1 - e) * (1 - e) + 3 * n * (1 - e) * (1 - e) - 6 * e * n * (1 - e) + 6 * e * i * (1 - e) - 3 * e * e * i + 3 * e * e * r
            },
            tangentSpline: function(e, t, n, i, r) {
                return 6 * e * e - 6 * e + (3 * e * e - 4 * e + 1) + (-6 * e * e + 6 * e) + (3 * e * e - 2 * e)
            },
            interpolate: function(e, t, n, i, r) {
                e = .5 * (n - e), i = .5 * (i - t);
                var o = r * r;
                return (2 * t - 2 * n + e + i) * r * o + (-3 * t + 3 * n - 2 * e - i) * o + e * r + t
            }
        }, o.GeometryUtils = {
            merge: function(e, t, n) {
                console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
                var i;
                t instanceof o.Mesh && (t.matrixAutoUpdate && t.updateMatrix(), i = t.matrix, t = t.geometry), e.merge(t, i, n)
            },
            center: function(e) {
                return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."), e.center()
            }
        }, o.ImageUtils = {
            crossOrigin: void 0,
            loadTexture: function(e, t, n, i) {
                var r = new o.TextureLoader;
                return r.setCrossOrigin(this.crossOrigin), e = r.load(e, n, void 0, i), t && (e.mapping = t), e
            },
            loadTextureCube: function(e, t, n, i) {
                console.warn("THREE.ImageUtils.loadTextureCube is being deprecated. Use THREE.CubeTextureLoader() instead.");
                var r = new o.CubeTextureLoader;
                return r.setCrossOrigin(this.crossOrigin), e = r.load(e, n, void 0, i), t && (e.mapping = t), e
            },
            loadCompressedTexture: function() {
                console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")
            },
            loadCompressedTextureCube: function() {
                console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")
            }
        }, o.SceneUtils = {
            createMultiMaterialObject: function(e, t) {
                for (var n = new o.Group, i = 0, r = t.length; r > i; i++) n.add(new o.Mesh(e, t[i]));
                return n
            },
            detach: function(e, t, n) {
                e.applyMatrix(t.matrixWorld), t.remove(e), n.add(e)
            },
            attach: function(e, t, n) {
                var i = new o.Matrix4;
                i.getInverse(n.matrixWorld), e.applyMatrix(i), t.remove(e), n.add(e)
            }
        }, o.ShapeUtils = {
            area: function(e) {
                for (var t = e.length, n = 0, i = t - 1, r = 0; t > r; i = r++) n += e[i].x * e[r].y - e[r].x * e[i].y;
                return .5 * n
            },
            triangulate: function() {
                return function(e, t) {
                    var n = e.length;
                    if (3 > n) return null;
                    var i, r, a, s = [],
                        u = [],
                        l = [];
                    if (0 < o.ShapeUtils.area(e))
                        for (r = 0; n > r; r++) u[r] = r;
                    else
                        for (r = 0; n > r; r++) u[r] = n - 1 - r;
                    var c = 2 * n;
                    for (r = n - 1; n > 2;) {
                        if (0 >= c--) {
                            console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");
                            break
                        }
                        i = r, i >= n && (i = 0), r = i + 1, r >= n && (r = 0), a = r + 1, a >= n && (a = 0);
                        var h;
                        e: {
                            var d = h = void 0,
                                f = void 0,
                                p = void 0,
                                m = void 0,
                                v = void 0,
                                g = void 0,
                                y = void 0,
                                _ = void 0,
                                d = e[u[i]].x,
                                f = e[u[i]].y,
                                p = e[u[r]].x,
                                m = e[u[r]].y,
                                v = e[u[a]].x,
                                g = e[u[a]].y;
                            if (Number.EPSILON > (p - d) * (g - f) - (m - f) * (v - d)) h = !1;
                            else {
                                var x = void 0,
                                    b = void 0,
                                    w = void 0,
                                    T = void 0,
                                    E = void 0,
                                    S = void 0,
                                    M = void 0,
                                    P = void 0,
                                    A = void 0,
                                    C = void 0,
                                    A = P = M = _ = y = void 0,
                                    x = v - p,
                                    b = g - m,
                                    w = d - v,
                                    T = f - g,
                                    E = p - d,
                                    S = m - f;
                                for (h = 0; n > h; h++)
                                    if (y = e[u[h]].x, _ = e[u[h]].y, !(y === d && _ === f || y === p && _ === m || y === v && _ === g) && (M = y - d, P = _ - f, A = y - p, C = _ - m, y -= v, _ -= g, A = x * C - b * A, M = E * P - S * M, P = w * _ - T * y, A >= -Number.EPSILON && P >= -Number.EPSILON && M >= -Number.EPSILON)) {
                                        h = !1;
                                        break e
                                    }
                                h = !0
                            }
                        }
                        if (h) {
                            for (s.push([e[u[i]], e[u[r]], e[u[a]]]), l.push([u[i], u[r], u[a]]), i = r, a = r + 1; n > a; i++, a++) u[i] = u[a];
                            n--, c = 2 * n
                        }
                    }
                    return t ? l : s
                }
            }(),
            triangulateShape: function(e, t) {
                function n(e, t, n) {
                    return e.x !== t.x ? e.x < t.x ? e.x <= n.x && n.x <= t.x : t.x <= n.x && n.x <= e.x : e.y < t.y ? e.y <= n.y && n.y <= t.y : t.y <= n.y && n.y <= e.y
                }

                function i(e, t, i, r, o) {
                    var a = t.x - e.x,
                        s = t.y - e.y,
                        u = r.x - i.x,
                        l = r.y - i.y,
                        c = e.x - i.x,
                        h = e.y - i.y,
                        d = s * u - a * l,
                        f = s * c - a * h;
                    if (Math.abs(d) > Number.EPSILON) {
                        if (d > 0) {
                            if (0 > f || f > d) return [];
                            if (u = l * c - u * h, 0 > u || u > d) return []
                        } else {
                            if (f > 0 || d > f) return [];
                            if (u = l * c - u * h, u > 0 || d > u) return []
                        }
                        return 0 === u ? !o || 0 !== f && f !== d ? [e] : [] : u === d ? !o || 0 !== f && f !== d ? [t] : [] : 0 === f ? [i] : f === d ? [r] : (o = u / d, [{
                            x: e.x + o * a,
                            y: e.y + o * s
                        }])
                    }
                    return 0 !== f || l * c !== u * h ? [] : (s = 0 === a && 0 === s, u = 0 === u && 0 === l, s && u ? e.x !== i.x || e.y !== i.y ? [] : [e] : s ? n(i, r, e) ? [e] : [] : u ? n(e, t, i) ? [i] : [] : (0 !== a ? (e.x < t.x ? (a = e, u = e.x, s = t, e = t.x) : (a = t, u = t.x, s = e, e = e.x), i.x < r.x ? (t = i, d = i.x, l = r, i = r.x) : (t = r, d = r.x, l = i, i = i.x)) : (e.y < t.y ? (a = e, u = e.y, s = t, e = t.y) : (a = t, u = t.y, s = e, e = e.y), i.y < r.y ? (t = i, d = i.y, l = r, i = r.y) : (t = r, d = r.y, l = i, i = i.y)), d >= u ? d > e ? [] : e === d ? o ? [] : [t] : i >= e ? [t, s] : [t, l] : u > i ? [] : u === i ? o ? [] : [a] : i >= e ? [a, s] : [a, l]))
                }

                function r(e, t, n, i) {
                    var r = t.x - e.x,
                        o = t.y - e.y;
                    t = n.x - e.x, n = n.y - e.y;
                    var a = i.x - e.x;
                    return i = i.y - e.y, e = r * n - o * t, r = r * i - o * a, Math.abs(e) > Number.EPSILON ? (t = a * n - i * t, e > 0 ? r >= 0 && t >= 0 : r >= 0 || t >= 0) : r > 0
                }
                var a, s, u, l, c, h = {};
                for (u = e.concat(), a = 0, s = t.length; s > a; a++) Array.prototype.push.apply(u, t[a]);
                for (a = 0, s = u.length; s > a; a++) c = u[a].x + ":" + u[a].y, void 0 !== h[c] && console.warn("THREE.Shape: Duplicate point", c), h[c] = a;
                a = function(e, t) {
                    function n(e, t) {
                        var n = v.length - 1,
                            i = e - 1;
                        0 > i && (i = n);
                        var o = e + 1;
                        return o > n && (o = 0), (n = r(v[e], v[i], v[o], s[t])) ? (n = s.length - 1, i = t - 1, 0 > i && (i = n), o = t + 1, o > n && (o = 0), (n = r(s[t], s[i], s[o], v[e])) ? !0 : !1) : !1
                    }

                    function o(e, t) {
                        var n, r;
                        for (n = 0; n < v.length; n++)
                            if (r = n + 1, r %= v.length, r = i(e, t, v[n], v[r], !0), 0 < r.length) return !0;
                        return !1
                    }

                    function a(e, n) {
                        var r, o, a, s;
                        for (r = 0; r < g.length; r++)
                            for (o = t[g[r]], a = 0; a < o.length; a++)
                                if (s = a + 1, s %= o.length, s = i(e, n, o[a], o[s], !0), 0 < s.length) return !0;
                        return !1
                    }
                    var s, u, l, c, h, d, f, p, m, v = e.concat(),
                        g = [],
                        y = [],
                        _ = 0;
                    for (u = t.length; u > _; _++) g.push(_);
                    f = 0;
                    for (var x = 2 * g.length; 0 < g.length;) {
                        if (x--, 0 > x) {
                            console.log("Infinite Loop! Holes left:" + g.length + ", Probably Hole outside Shape!");
                            break
                        }
                        for (l = f; l < v.length; l++) {
                            for (c = v[l], u = -1, _ = 0; _ < g.length; _++)
                                if (h = g[_], d = c.x + ":" + c.y + ":" + h, void 0 === y[d]) {
                                    for (s = t[h], p = 0; p < s.length; p++)
                                        if (h = s[p], n(l, p) && !o(c, h) && !a(c, h)) {
                                            u = p, g.splice(_, 1), f = v.slice(0, l + 1), h = v.slice(l), p = s.slice(u), m = s.slice(0, u + 1), v = f.concat(p).concat(m).concat(h), f = l;
                                            break
                                        }
                                    if (u >= 0) break;
                                    y[d] = !0
                                }
                            if (u >= 0) break
                        }
                    }
                    return v
                }(e, t);
                var d = o.ShapeUtils.triangulate(a, !1);
                for (a = 0, s = d.length; s > a; a++)
                    for (l = d[a], u = 0; 3 > u; u++) c = l[u].x + ":" + l[u].y, c = h[c], void 0 !== c && (l[u] = c);
                return d.concat()
            },
            isClockWise: function(e) {
                return 0 > o.ShapeUtils.area(e)
            },
            b2: function() {
                return function(e, t, n, i) {
                    var r = 1 - e;
                    return r * r * t + 2 * (1 - e) * e * n + e * e * i
                }
            }(),
            b3: function() {
                return function(e, t, n, i, r) {
                    var o = 1 - e,
                        a = 1 - e;
                    return o * o * o * t + 3 * a * a * e * n + 3 * (1 - e) * e * e * i + e * e * e * r
                }
            }()
        }, o.Audio = function(e) {
            o.Object3D.call(this), this.type = "Audio", this.context = e.context, this.source = this.context.createBufferSource(), this.source.onended = this.onEnded.bind(this), this.gain = this.context.createGain(), this.gain.connect(this.context.destination), this.panner = this.context.createPanner(), this.panner.connect(this.gain), this.autoplay = !1, this.startTime = 0, this.playbackRate = 1, this.isPlaying = !1
        }, o.Audio.prototype = Object.create(o.Object3D.prototype), o.Audio.prototype.constructor = o.Audio, o.Audio.prototype.load = function(e) {
            var t = this,
                n = new XMLHttpRequest;
            return n.open("GET", e, !0), n.responseType = "arraybuffer", n.onload = function(e) {
                t.context.decodeAudioData(this.response, function(e) {
                    t.source.buffer = e, t.autoplay && t.play()
                })
            }, n.send(), this
        }, o.Audio.prototype.play = function() {
            if (!0 === this.isPlaying) console.warn("THREE.Audio: Audio is already playing.");
            else {
                var e = this.context.createBufferSource();
                e.buffer = this.source.buffer, e.loop = this.source.loop, e.onended = this.source.onended, e.start(0, this.startTime), e.playbackRate.value = this.playbackRate, this.isPlaying = !0, this.source = e, this.connect()
            }
        }, o.Audio.prototype.pause = function() {
            this.source.stop(), this.startTime = this.context.currentTime
        }, o.Audio.prototype.stop = function() {
            this.source.stop(), this.startTime = 0
        }, o.Audio.prototype.connect = function() {
            void 0 !== this.filter ? (this.source.connect(this.filter), this.filter.connect(this.panner)) : this.source.connect(this.panner)
        }, o.Audio.prototype.disconnect = function() {
            void 0 !== this.filter ? (this.source.disconnect(this.filter), this.filter.disconnect(this.panner)) : this.source.disconnect(this.panner)
        }, o.Audio.prototype.setFilter = function(e) {
            !0 === this.isPlaying ? (this.disconnect(), this.filter = e, this.connect()) : this.filter = e
        }, o.Audio.prototype.getFilter = function() {
            return this.filter
        }, o.Audio.prototype.setPlaybackRate = function(e) {
            this.playbackRate = e, !0 === this.isPlaying && (this.source.playbackRate.value = this.playbackRate)
        }, o.Audio.prototype.getPlaybackRate = function() {
            return this.playbackRate
        }, o.Audio.prototype.onEnded = function() {
            this.isPlaying = !1
        }, o.Audio.prototype.setLoop = function(e) {
            this.source.loop = e
        }, o.Audio.prototype.getLoop = function() {
            return this.source.loop
        }, o.Audio.prototype.setRefDistance = function(e) {
            this.panner.refDistance = e
        }, o.Audio.prototype.getRefDistance = function() {
            return this.panner.refDistance
        }, o.Audio.prototype.setRolloffFactor = function(e) {
            this.panner.rolloffFactor = e
        }, o.Audio.prototype.getRolloffFactor = function() {
            return this.panner.rolloffFactor
        }, o.Audio.prototype.setVolume = function(e) {
            this.gain.gain.value = e
        }, o.Audio.prototype.getVolume = function() {
            return this.gain.gain.value
        }, o.Audio.prototype.updateMatrixWorld = function() {
            var e = new o.Vector3;
            return function(t) {
                o.Object3D.prototype.updateMatrixWorld.call(this, t), e.setFromMatrixPosition(this.matrixWorld), this.panner.setPosition(e.x, e.y, e.z)
            }
        }(), o.AudioListener = function() {
            o.Object3D.call(this), this.type = "AudioListener", this.context = new(window.AudioContext || window.webkitAudioContext)
        }, o.AudioListener.prototype = Object.create(o.Object3D.prototype), o.AudioListener.prototype.constructor = o.AudioListener, o.AudioListener.prototype.updateMatrixWorld = function() {
            var e = new o.Vector3,
                t = new o.Quaternion,
                n = new o.Vector3,
                i = new o.Vector3;
            return function(r) {
                o.Object3D.prototype.updateMatrixWorld.call(this, r), r = this.context.listener;
                var a = this.up;
                this.matrixWorld.decompose(e, t, n), i.set(0, 0, -1).applyQuaternion(t), r.setPosition(e.x, e.y, e.z), r.setOrientation(i.x, i.y, i.z, a.x, a.y, a.z)
            }
        }(), o.Curve = function() {}, o.Curve.prototype = {
            constructor: o.Curve,
            getPoint: function(e) {
                return console.warn("THREE.Curve: Warning, getPoint() not implemented!"), null
            },
            getPointAt: function(e) {
                return e = this.getUtoTmapping(e), this.getPoint(e)
            },
            getPoints: function(e) {
                e || (e = 5);
                var t, n = [];
                for (t = 0; e >= t; t++) n.push(this.getPoint(t / e));
                return n
            },
            getSpacedPoints: function(e) {
                e || (e = 5);
                var t, n = [];
                for (t = 0; e >= t; t++) n.push(this.getPointAt(t / e));
                return n
            },
            getLength: function() {
                var e = this.getLengths();
                return e[e.length - 1]
            },
            getLengths: function(e) {
                if (e || (e = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200), this.cacheArcLengths && this.cacheArcLengths.length === e + 1 && !this.needsUpdate) return this.cacheArcLengths;
                this.needsUpdate = !1;
                var t, n, i = [],
                    r = this.getPoint(0),
                    o = 0;
                for (i.push(0), n = 1; e >= n; n++) t = this.getPoint(n / e), o += t.distanceTo(r), i.push(o), r = t;
                return this.cacheArcLengths = i
            },
            updateArcLengths: function() {
                this.needsUpdate = !0, this.getLengths()
            },
            getUtoTmapping: function(e, t) {
                var n, i = this.getLengths(),
                    r = 0,
                    o = i.length;
                n = t ? t : e * i[o - 1];
                for (var a, s = 0, u = o - 1; u >= s;)
                    if (r = Math.floor(s + (u - s) / 2), a = i[r] - n, 0 > a) s = r + 1;
                    else {
                        if (!(a > 0)) {
                            u = r;
                            break
                        }
                        u = r - 1
                    }
                return r = u, i[r] === n ? r / (o - 1) : (s = i[r], i = (r + (n - s) / (i[r + 1] - s)) / (o - 1))
            },
            getTangent: function(e) {
                var t = e - 1e-4;
                return e += 1e-4, 0 > t && (t = 0), e > 1 && (e = 1), t = this.getPoint(t), this.getPoint(e).clone().sub(t).normalize()
            },
            getTangentAt: function(e) {
                return e = this.getUtoTmapping(e), this.getTangent(e)
            }
        }, o.Curve.Utils = o.CurveUtils, o.Curve.create = function(e, t) {
            return e.prototype = Object.create(o.Curve.prototype), e.prototype.constructor = e, e.prototype.getPoint = t, e
        }, o.CurvePath = function() {
            this.curves = [], this.autoClose = !1
        }, o.CurvePath.prototype = Object.create(o.Curve.prototype), o.CurvePath.prototype.constructor = o.CurvePath, o.CurvePath.prototype.add = function(e) {
            this.curves.push(e)
        }, o.CurvePath.prototype.closePath = function() {
            var e = this.curves[0].getPoint(0),
                t = this.curves[this.curves.length - 1].getPoint(1);
            e.equals(t) || this.curves.push(new o.LineCurve(t, e))
        }, o.CurvePath.prototype.getPoint = function(e) {
            for (var t = e * this.getLength(), n = this.getCurveLengths(), i = 0; i < n.length;) {
                if (n[i] >= t) return e = this.curves[i], t = 1 - (n[i] - t) / e.getLength(), e.getPointAt(t);
                i++
            }
            return null
        }, o.CurvePath.prototype.getLength = function() {
            var e = this.getCurveLengths();
            return e[e.length - 1]
        }, o.CurvePath.prototype.getCurveLengths = function() {
            if (this.cacheLengths && this.cacheLengths.length === this.curves.length) return this.cacheLengths;
            for (var e = [], t = 0, n = 0, i = this.curves.length; i > n; n++) t += this.curves[n].getLength(), e.push(t);
            return this.cacheLengths = e
        }, o.CurvePath.prototype.createPointsGeometry = function(e) {
            return e = this.getPoints(e, !0), this.createGeometry(e)
        }, o.CurvePath.prototype.createSpacedPointsGeometry = function(e) {
            return e = this.getSpacedPoints(e, !0), this.createGeometry(e)
        }, o.CurvePath.prototype.createGeometry = function(e) {
            for (var t = new o.Geometry, n = 0, i = e.length; i > n; n++) {
                var r = e[n];
                t.vertices.push(new o.Vector3(r.x, r.y, r.z || 0))
            }
            return t
        }, o.Path = function(e) {
            o.CurvePath.call(this), this.actions = [], e && this.fromPoints(e)
        }, o.Path.prototype = Object.create(o.CurvePath.prototype), o.Path.prototype.constructor = o.Path, o.Path.prototype.fromPoints = function(e) {
            this.moveTo(e[0].x, e[0].y);
            for (var t = 1, n = e.length; n > t; t++) this.lineTo(e[t].x, e[t].y)
        }, o.Path.prototype.moveTo = function(e, t) {
            this.actions.push({
                action: "moveTo",
                args: [e, t]
            })
        }, o.Path.prototype.lineTo = function(e, t) {
            var n = this.actions[this.actions.length - 1].args,
                n = new o.LineCurve(new o.Vector2(n[n.length - 2], n[n.length - 1]), new o.Vector2(e, t));
            this.curves.push(n), this.actions.push({
                action: "lineTo",
                args: [e, t]
            })
        }, o.Path.prototype.quadraticCurveTo = function(e, t, n, i) {
            var r = this.actions[this.actions.length - 1].args,
                r = new o.QuadraticBezierCurve(new o.Vector2(r[r.length - 2], r[r.length - 1]), new o.Vector2(e, t), new o.Vector2(n, i));
            this.curves.push(r), this.actions.push({
                action: "quadraticCurveTo",
                args: [e, t, n, i]
            })
        }, o.Path.prototype.bezierCurveTo = function(e, t, n, i, r, a) {
            var s = this.actions[this.actions.length - 1].args,
                s = new o.CubicBezierCurve(new o.Vector2(s[s.length - 2], s[s.length - 1]), new o.Vector2(e, t), new o.Vector2(n, i), new o.Vector2(r, a));
            this.curves.push(s), this.actions.push({
                action: "bezierCurveTo",
                args: [e, t, n, i, r, a]
            })
        }, o.Path.prototype.splineThru = function(e) {
            var t = Array.prototype.slice.call(arguments),
                n = this.actions[this.actions.length - 1].args,
                n = [new o.Vector2(n[n.length - 2], n[n.length - 1])];
            Array.prototype.push.apply(n, e), n = new o.SplineCurve(n), this.curves.push(n), this.actions.push({
                action: "splineThru",
                args: t
            })
        }, o.Path.prototype.arc = function(e, t, n, i, r, o) {
            var a = this.actions[this.actions.length - 1].args;
            this.absarc(e + a[a.length - 2], t + a[a.length - 1], n, i, r, o)
        }, o.Path.prototype.absarc = function(e, t, n, i, r, o) {
            this.absellipse(e, t, n, n, i, r, o)
        }, o.Path.prototype.ellipse = function(e, t, n, i, r, o, a, s) {
            var u = this.actions[this.actions.length - 1].args;
            this.absellipse(e + u[u.length - 2], t + u[u.length - 1], n, i, r, o, a, s)
        }, o.Path.prototype.absellipse = function(e, t, n, i, r, a, s, u) {
            var l = [e, t, n, i, r, a, s, u || 0];
            e = new o.EllipseCurve(e, t, n, i, r, a, s, u), this.curves.push(e), e = e.getPoint(1), l.push(e.x), l.push(e.y), this.actions.push({
                action: "ellipse",
                args: l
            })
        }, o.Path.prototype.getSpacedPoints = function(e, t) {
            e || (e = 40);
            for (var n = [], i = 0; e > i; i++) n.push(this.getPoint(i / e));
            return n
        }, o.Path.prototype.getPoints = function(e, t) {
            e = e || 12;
            for (var n, i, r, a, s, u, l, c, h, d, f = o.ShapeUtils.b2, p = o.ShapeUtils.b3, m = [], v = 0, g = this.actions.length; g > v; v++) {
                h = this.actions[v];
                var y = h.args;
                switch (h.action) {
                    case "moveTo":
                        m.push(new o.Vector2(y[0], y[1]));
                        break;
                    case "lineTo":
                        m.push(new o.Vector2(y[0], y[1]));
                        break;
                    case "quadraticCurveTo":
                        for (n = y[2], i = y[3], s = y[0], u = y[1], 0 < m.length ? (h = m[m.length - 1], l = h.x, c = h.y) : (h = this.actions[v - 1].args, l = h[h.length - 2], c = h[h.length - 1]), y = 1; e >= y; y++) d = y / e, h = f(d, l, s, n), d = f(d, c, u, i), m.push(new o.Vector2(h, d));
                        break;
                    case "bezierCurveTo":
                        for (n = y[4], i = y[5], s = y[0], u = y[1], r = y[2], a = y[3], 0 < m.length ? (h = m[m.length - 1], l = h.x, c = h.y) : (h = this.actions[v - 1].args, l = h[h.length - 2], c = h[h.length - 1]), y = 1; e >= y; y++) d = y / e, h = p(d, l, s, r, n), d = p(d, c, u, a, i), m.push(new o.Vector2(h, d));
                        break;
                    case "splineThru":
                        for (h = this.actions[v - 1].args, d = [new o.Vector2(h[h.length - 2], h[h.length - 1])], h = e * y[0].length, d = d.concat(y[0]), d = new o.SplineCurve(d), y = 1; h >= y; y++) m.push(d.getPointAt(y / h));
                        break;
                    case "arc":
                        for (n = y[0], i = y[1], u = y[2], r = y[3], h = y[4], s = !!y[5], l = h - r, c = 2 * e, y = 1; c >= y; y++) d = y / c, s || (d = 1 - d), d = r + d * l, h = n + u * Math.cos(d), d = i + u * Math.sin(d), m.push(new o.Vector2(h, d));
                        break;
                    case "ellipse":
                        n = y[0], i = y[1], u = y[2], a = y[3], r = y[4], h = y[5], s = !!y[6];
                        var _ = y[7];
                        l = h - r, c = 2 * e;
                        var x, b;
                        for (0 !== _ && (x = Math.cos(_), b = Math.sin(_)), y = 1; c >= y; y++) {
                            if (d = y / c, s || (d = 1 - d), d = r + d * l, h = n + u * Math.cos(d), d = i + a * Math.sin(d), 0 !== _) {
                                var w = h;
                                h = (w - n) * x - (d - i) * b + n, d = (w - n) * b + (d - i) * x + i
                            }
                            m.push(new o.Vector2(h, d))
                        }
                }
            }
            return f = m[m.length - 1], Math.abs(f.x - m[0].x) < Number.EPSILON && Math.abs(f.y - m[0].y) < Number.EPSILON && m.splice(m.length - 1, 1), t && m.push(m[0]), m
        }, o.Path.prototype.toShapes = function(e, t) {
            function n(e) {
                for (var t = [], n = 0, i = e.length; i > n; n++) {
                    var r = e[n],
                        a = new o.Shape;
                    a.actions = r.actions, a.curves = r.curves, t.push(a)
                }
                return t
            }

            function i(e, t) {
                for (var n = t.length, i = !1, r = n - 1, o = 0; n > o; r = o++) {
                    var a = t[r],
                        s = t[o],
                        u = s.x - a.x,
                        l = s.y - a.y;
                    if (Math.abs(l) > Number.EPSILON) {
                        if (0 > l && (a = t[o], u = -u, s = t[r], l = -l), !(e.y < a.y || e.y > s.y))
                            if (e.y === a.y) {
                                if (e.x === a.x) return !0
                            } else {
                                if (r = l * (e.x - a.x) - u * (e.y - a.y), 0 === r) return !0;
                                0 > r || (i = !i)
                            }
                    } else if (e.y === a.y && (s.x <= e.x && e.x <= a.x || a.x <= e.x && e.x <= s.x)) return !0
                }
                return i
            }
            var r = o.ShapeUtils.isClockWise,
                a = function(e) {
                    for (var t = [], n = new o.Path, i = 0, r = e.length; r > i; i++) {
                        var a = e[i],
                            s = a.args,
                            a = a.action;
                        "moveTo" === a && 0 !== n.actions.length && (t.push(n), n = new o.Path), n[a].apply(n, s)
                    }
                    return 0 !== n.actions.length && t.push(n), t
                }(this.actions);
            if (0 === a.length) return [];
            if (!0 === t) return n(a);
            var s, u, l, c = [];
            if (1 === a.length) return u = a[0], l = new o.Shape, l.actions = u.actions, l.curves = u.curves, c.push(l), c;
            var h = !r(a[0].getPoints()),
                h = e ? !h : h;
            l = [];
            var d, f = [],
                p = [],
                m = 0;
            f[m] = void 0, p[m] = [];
            for (var v = 0, g = a.length; g > v; v++) u = a[v], d = u.getPoints(), s = r(d), (s = e ? !s : s) ? (!h && f[m] && m++, f[m] = {
                s: new o.Shape,
                p: d
            }, f[m].s.actions = u.actions, f[m].s.curves = u.curves, h && m++, p[m] = []) : p[m].push({
                h: u,
                p: d[0]
            });
            if (!f[0]) return n(a);
            if (1 < f.length) {
                for (v = !1, u = [], r = 0, a = f.length; a > r; r++) l[r] = [];
                for (r = 0, a = f.length; a > r; r++)
                    for (s = p[r], h = 0; h < s.length; h++) {
                        for (m = s[h], d = !0, g = 0; g < f.length; g++) i(m.p, f[g].p) && (r !== g && u.push({
                            froms: r,
                            tos: g,
                            hole: h
                        }), d ? (d = !1, l[g].push(m)) : v = !0);
                        d && l[r].push(m)
                    }
                0 < u.length && (v || (p = l))
            }
            for (v = 0, r = f.length; r > v; v++)
                for (l = f[v].s, c.push(l), u = p[v], a = 0, s = u.length; s > a; a++) l.holes.push(u[a].h);
            return c
        }, o.Shape = function() {
            o.Path.apply(this, arguments), this.holes = []
        }, o.Shape.prototype = Object.create(o.Path.prototype), o.Shape.prototype.constructor = o.Shape, o.Shape.prototype.extrude = function(e) {
            return new o.ExtrudeGeometry(this, e)
        }, o.Shape.prototype.makeGeometry = function(e) {
            return new o.ShapeGeometry(this, e)
        }, o.Shape.prototype.getPointsHoles = function(e) {
            for (var t = [], n = 0, i = this.holes.length; i > n; n++) t[n] = this.holes[n].getPoints(e);
            return t
        }, o.Shape.prototype.extractAllPoints = function(e) {
            return {
                shape: this.getPoints(e),
                holes: this.getPointsHoles(e)
            }
        }, o.Shape.prototype.extractPoints = function(e) {
            return this.extractAllPoints(e)
        }, o.Shape.Utils = o.ShapeUtils, o.LineCurve = function(e, t) {
            this.v1 = e, this.v2 = t
        }, o.LineCurve.prototype = Object.create(o.Curve.prototype), o.LineCurve.prototype.constructor = o.LineCurve, o.LineCurve.prototype.getPoint = function(e) {
            var t = this.v2.clone().sub(this.v1);
            return t.multiplyScalar(e).add(this.v1), t
        }, o.LineCurve.prototype.getPointAt = function(e) {
            return this.getPoint(e)
        }, o.LineCurve.prototype.getTangent = function(e) {
            return this.v2.clone().sub(this.v1).normalize()
        }, o.QuadraticBezierCurve = function(e, t, n) {
            this.v0 = e, this.v1 = t, this.v2 = n
        }, o.QuadraticBezierCurve.prototype = Object.create(o.Curve.prototype), o.QuadraticBezierCurve.prototype.constructor = o.QuadraticBezierCurve, o.QuadraticBezierCurve.prototype.getPoint = function(e) {
            var t = o.ShapeUtils.b2;
            return new o.Vector2(t(e, this.v0.x, this.v1.x, this.v2.x), t(e, this.v0.y, this.v1.y, this.v2.y))
        }, o.QuadraticBezierCurve.prototype.getTangent = function(e) {
            var t = o.CurveUtils.tangentQuadraticBezier;
            return new o.Vector2(t(e, this.v0.x, this.v1.x, this.v2.x), t(e, this.v0.y, this.v1.y, this.v2.y)).normalize()
        }, o.CubicBezierCurve = function(e, t, n, i) {
            this.v0 = e, this.v1 = t, this.v2 = n, this.v3 = i
        }, o.CubicBezierCurve.prototype = Object.create(o.Curve.prototype), o.CubicBezierCurve.prototype.constructor = o.CubicBezierCurve, o.CubicBezierCurve.prototype.getPoint = function(e) {
            var t = o.ShapeUtils.b3;
            return new o.Vector2(t(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x), t(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y))
        }, o.CubicBezierCurve.prototype.getTangent = function(e) {
            var t = o.CurveUtils.tangentCubicBezier;
            return new o.Vector2(t(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x), t(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y)).normalize()
        }, o.SplineCurve = function(e) {
            this.points = void 0 == e ? [] : e
        }, o.SplineCurve.prototype = Object.create(o.Curve.prototype), o.SplineCurve.prototype.constructor = o.SplineCurve, o.SplineCurve.prototype.getPoint = function(e) {
            var t = this.points;
            e *= t.length - 1;
            var n = Math.floor(e);
            e -= n;
            var i = t[0 === n ? n : n - 1],
                r = t[n],
                a = t[n > t.length - 2 ? t.length - 1 : n + 1],
                t = t[n > t.length - 3 ? t.length - 1 : n + 2],
                n = o.CurveUtils.interpolate;
            return new o.Vector2(n(i.x, r.x, a.x, t.x, e), n(i.y, r.y, a.y, t.y, e))
        }, o.EllipseCurve = function(e, t, n, i, r, o, a, s) {
            this.aX = e, this.aY = t, this.xRadius = n, this.yRadius = i, this.aStartAngle = r, this.aEndAngle = o, this.aClockwise = a, this.aRotation = s || 0
        }, o.EllipseCurve.prototype = Object.create(o.Curve.prototype), o.EllipseCurve.prototype.constructor = o.EllipseCurve, o.EllipseCurve.prototype.getPoint = function(e) {
            var t = this.aEndAngle - this.aStartAngle;
            0 > t && (t += 2 * Math.PI), t > 2 * Math.PI && (t -= 2 * Math.PI), t = !0 === this.aClockwise ? this.aEndAngle + (1 - e) * (2 * Math.PI - t) : this.aStartAngle + e * t, e = this.aX + this.xRadius * Math.cos(t);
            var n = this.aY + this.yRadius * Math.sin(t);
            if (0 !== this.aRotation) {
                var t = Math.cos(this.aRotation),
                    i = Math.sin(this.aRotation),
                    r = e;
                e = (r - this.aX) * t - (n - this.aY) * i + this.aX, n = (r - this.aX) * i + (n - this.aY) * t + this.aY
            }
            return new o.Vector2(e, n)
        }, o.ArcCurve = function(e, t, n, i, r, a) {
            o.EllipseCurve.call(this, e, t, n, n, i, r, a)
        }, o.ArcCurve.prototype = Object.create(o.EllipseCurve.prototype), o.ArcCurve.prototype.constructor = o.ArcCurve, o.LineCurve3 = o.Curve.create(function(e, t) {
            this.v1 = e, this.v2 = t
        }, function(e) {
            var t = new o.Vector3;
            return t.subVectors(this.v2, this.v1), t.multiplyScalar(e), t.add(this.v1), t
        }), o.QuadraticBezierCurve3 = o.Curve.create(function(e, t, n) {
            this.v0 = e, this.v1 = t, this.v2 = n
        }, function(e) {
            var t = o.ShapeUtils.b2;
            return new o.Vector3(t(e, this.v0.x, this.v1.x, this.v2.x), t(e, this.v0.y, this.v1.y, this.v2.y), t(e, this.v0.z, this.v1.z, this.v2.z))
        }), o.CubicBezierCurve3 = o.Curve.create(function(e, t, n, i) {
            this.v0 = e, this.v1 = t, this.v2 = n, this.v3 = i
        }, function(e) {
            var t = o.ShapeUtils.b3;
            return new o.Vector3(t(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x), t(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y), t(e, this.v0.z, this.v1.z, this.v2.z, this.v3.z))
        }), o.SplineCurve3 = o.Curve.create(function(e) {
            console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"), this.points = void 0 == e ? [] : e
        }, function(e) {
            var t = this.points;
            e *= t.length - 1;
            var n = Math.floor(e);
            e -= n;
            var i = t[0 == n ? n : n - 1],
                r = t[n],
                a = t[n > t.length - 2 ? t.length - 1 : n + 1],
                t = t[n > t.length - 3 ? t.length - 1 : n + 2],
                n = o.CurveUtils.interpolate;
            return new o.Vector3(n(i.x, r.x, a.x, t.x, e), n(i.y, r.y, a.y, t.y, e), n(i.z, r.z, a.z, t.z, e))
        }), o.CatmullRomCurve3 = function() {
            function e() {}
            var t = new o.Vector3,
                n = new e,
                i = new e,
                r = new e;
            return e.prototype.init = function(e, t, n, i) {
                this.c0 = e, this.c1 = n, this.c2 = -3 * e + 3 * t - 2 * n - i, this.c3 = 2 * e - 2 * t + n + i
            }, e.prototype.initNonuniformCatmullRom = function(e, t, n, i, r, o, a) {
                e = ((t - e) / r - (n - e) / (r + o) + (n - t) / o) * o, i = ((n - t) / o - (i - t) / (o + a) + (i - n) / a) * o, this.init(t, n, e, i)
            }, e.prototype.initCatmullRom = function(e, t, n, i, r) {
                this.init(t, n, r * (n - e), r * (i - t))
            }, e.prototype.calc = function(e) {
                var t = e * e;
                return this.c0 + this.c1 * e + this.c2 * t + this.c3 * t * e
            }, o.Curve.create(function(e) {
                this.points = e || []
            }, function(e) {
                var a, s, u = this.points;
                s = u.length, 2 > s && console.log("duh, you need at least 2 points"), e *= s - 1, a = Math.floor(e), e -= a, 0 === e && a === s - 1 && (a = s - 2, e = 1);
                var l, c, h;
                if (0 === a ? (t.subVectors(u[0], u[1]).add(u[0]), l = t) : l = u[a - 1], c = u[a], h = u[a + 1], s > a + 2 ? u = u[a + 2] : (t.subVectors(u[s - 1], u[s - 2]).add(u[s - 2]), u = t), void 0 === this.type || "centripetal" === this.type || "chordal" === this.type) {
                    var d = "chordal" === this.type ? .5 : .25;
                    s = Math.pow(l.distanceToSquared(c), d), a = Math.pow(c.distanceToSquared(h), d), d = Math.pow(h.distanceToSquared(u), d), 1e-4 > a && (a = 1), 1e-4 > s && (s = a), 1e-4 > d && (d = a), n.initNonuniformCatmullRom(l.x, c.x, h.x, u.x, s, a, d), i.initNonuniformCatmullRom(l.y, c.y, h.y, u.y, s, a, d), r.initNonuniformCatmullRom(l.z, c.z, h.z, u.z, s, a, d)
                } else "catmullrom" === this.type && (s = void 0 !== this.tension ? this.tension : .5, n.initCatmullRom(l.x, c.x, h.x, u.x, s), i.initCatmullRom(l.y, c.y, h.y, u.y, s), r.initCatmullRom(l.z, c.z, h.z, u.z, s));
                return new o.Vector3(n.calc(e), i.calc(e), r.calc(e))
            })
        }(), o.ClosedSplineCurve3 = o.Curve.create(function(e) {
            this.points = void 0 == e ? [] : e
        }, function(e) {
            var t = this.points;
            e *= t.length - 0;
            var n = Math.floor(e);
            e -= n;
            var n = n + (n > 0 ? 0 : (Math.floor(Math.abs(n) / t.length) + 1) * t.length),
                i = t[(n - 1) % t.length],
                r = t[n % t.length],
                a = t[(n + 1) % t.length],
                t = t[(n + 2) % t.length],
                n = o.CurveUtils.interpolate;
            return new o.Vector3(n(i.x, r.x, a.x, t.x, e), n(i.y, r.y, a.y, t.y, e), n(i.z, r.z, a.z, t.z, e))
        }), o.BoxGeometry = function(e, t, n, i, r, a) {
            function s(e, t, n, i, r, a, s, l) {
                var c, h = u.widthSegments,
                    d = u.heightSegments,
                    f = r / 2,
                    p = a / 2,
                    m = u.vertices.length;
                "x" === e && "y" === t || "y" === e && "x" === t ? c = "z" : "x" === e && "z" === t || "z" === e && "x" === t ? (c = "y", d = u.depthSegments) : ("z" === e && "y" === t || "y" === e && "z" === t) && (c = "x", h = u.depthSegments);
                var v = h + 1,
                    g = d + 1,
                    y = r / h,
                    _ = a / d,
                    x = new o.Vector3;
                for (x[c] = s > 0 ? 1 : -1, r = 0; g > r; r++)
                    for (a = 0; v > a; a++) {
                        var b = new o.Vector3;
                        b[e] = (a * y - f) * n, b[t] = (r * _ - p) * i, b[c] = s, u.vertices.push(b)
                    }
                for (r = 0; d > r; r++)
                    for (a = 0; h > a; a++) p = a + v * r, e = a + v * (r + 1), t = a + 1 + v * (r + 1), n = a + 1 + v * r, i = new o.Vector2(a / h, 1 - r / d), s = new o.Vector2(a / h, 1 - (r + 1) / d), c = new o.Vector2((a + 1) / h, 1 - (r + 1) / d), f = new o.Vector2((a + 1) / h, 1 - r / d), p = new o.Face3(p + m, e + m, n + m), p.normal.copy(x), p.vertexNormals.push(x.clone(), x.clone(), x.clone()), p.materialIndex = l, u.faces.push(p), u.faceVertexUvs[0].push([i, s, f]), p = new o.Face3(e + m, t + m, n + m), p.normal.copy(x), p.vertexNormals.push(x.clone(), x.clone(), x.clone()), p.materialIndex = l, u.faces.push(p), u.faceVertexUvs[0].push([s.clone(), c, f.clone()])
            }
            o.Geometry.call(this), this.type = "BoxGeometry", this.parameters = {
                width: e,
                height: t,
                depth: n,
                widthSegments: i,
                heightSegments: r,
                depthSegments: a
            }, this.widthSegments = i || 1, this.heightSegments = r || 1, this.depthSegments = a || 1;
            var u = this;
            i = e / 2, r = t / 2, a = n / 2, s("z", "y", -1, -1, n, t, i, 0), s("z", "y", 1, -1, n, t, -i, 1), s("x", "z", 1, 1, e, n, r, 2), s("x", "z", 1, -1, e, n, -r, 3), s("x", "y", 1, -1, e, t, a, 4), s("x", "y", -1, -1, e, t, -a, 5), this.mergeVertices()
        }, o.BoxGeometry.prototype = Object.create(o.Geometry.prototype), o.BoxGeometry.prototype.constructor = o.BoxGeometry, o.BoxGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.BoxGeometry(e.width, e.height, e.depth, e.widthSegments, e.heightSegments, e.depthSegments)
        }, o.CubeGeometry = o.BoxGeometry, o.CircleGeometry = function(e, t, n, i) {
            o.Geometry.call(this), this.type = "CircleGeometry", this.parameters = {
                radius: e,
                segments: t,
                thetaStart: n,
                thetaLength: i
            }, this.fromBufferGeometry(new o.CircleBufferGeometry(e, t, n, i))
        }, o.CircleGeometry.prototype = Object.create(o.Geometry.prototype), o.CircleGeometry.prototype.constructor = o.CircleGeometry, o.CircleGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.CircleGeometry(e.radius, e.segments, e.thetaStart, e.thetaLength)
        }, o.CircleBufferGeometry = function(e, t, n, i) {
            o.BufferGeometry.call(this), this.type = "CircleBufferGeometry", this.parameters = {
                radius: e,
                segments: t,
                thetaStart: n,
                thetaLength: i
            }, e = e || 50, t = void 0 !== t ? Math.max(3, t) : 8, n = void 0 !== n ? n : 0, i = void 0 !== i ? i : 2 * Math.PI;
            var r = t + 2,
                a = new Float32Array(3 * r),
                s = new Float32Array(3 * r),
                r = new Float32Array(2 * r);
            s[2] = 1, r[0] = .5, r[1] = .5;
            for (var u = 0, l = 3, c = 2; t >= u; u++, l += 3, c += 2) {
                var h = n + u / t * i;
                a[l] = e * Math.cos(h), a[l + 1] = e * Math.sin(h), s[l + 2] = 1, r[c] = (a[l] / e + 1) / 2, r[c + 1] = (a[l + 1] / e + 1) / 2
            }
            for (n = [], l = 1; t >= l; l++) n.push(l, l + 1, 0);
            this.setIndex(new o.BufferAttribute(new Uint16Array(n), 1)), this.addAttribute("position", new o.BufferAttribute(a, 3)), this.addAttribute("normal", new o.BufferAttribute(s, 3)), this.addAttribute("uv", new o.BufferAttribute(r, 2)), this.boundingSphere = new o.Sphere(new o.Vector3, e)
        }, o.CircleBufferGeometry.prototype = Object.create(o.BufferGeometry.prototype), o.CircleBufferGeometry.prototype.constructor = o.CircleBufferGeometry, o.CircleBufferGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.CircleBufferGeometry(e.radius, e.segments, e.thetaStart, e.thetaLength)
        }, o.CylinderGeometry = function(e, t, n, i, r, a, s, u) {
            o.Geometry.call(this), this.type = "CylinderGeometry", this.parameters = {
                radiusTop: e,
                radiusBottom: t,
                height: n,
                radialSegments: i,
                heightSegments: r,
                openEnded: a,
                thetaStart: s,
                thetaLength: u
            }, e = void 0 !== e ? e : 20, t = void 0 !== t ? t : 20, n = void 0 !== n ? n : 100, i = i || 8, r = r || 1, a = void 0 !== a ? a : !1, s = void 0 !== s ? s : 0, u = void 0 !== u ? u : 2 * Math.PI;
            var l, c, h = n / 2,
                d = [],
                f = [];
            for (c = 0; r >= c; c++) {
                var p = [],
                    m = [],
                    v = c / r,
                    g = v * (t - e) + e;
                for (l = 0; i >= l; l++) {
                    var y = l / i,
                        _ = new o.Vector3;
                    _.x = g * Math.sin(y * u + s), _.y = -v * n + h, _.z = g * Math.cos(y * u + s), this.vertices.push(_), p.push(this.vertices.length - 1), m.push(new o.Vector2(y, 1 - v))
                }
                d.push(p), f.push(m)
            }
            for (n = (t - e) / n, l = 0; i > l; l++)
                for (0 !== e ? (s = this.vertices[d[0][l]].clone(), u = this.vertices[d[0][l + 1]].clone()) : (s = this.vertices[d[1][l]].clone(), u = this.vertices[d[1][l + 1]].clone()), s.setY(Math.sqrt(s.x * s.x + s.z * s.z) * n).normalize(), u.setY(Math.sqrt(u.x * u.x + u.z * u.z) * n).normalize(), c = 0; r > c; c++) {
                    var p = d[c][l],
                        m = d[c + 1][l],
                        v = d[c + 1][l + 1],
                        g = d[c][l + 1],
                        y = s.clone(),
                        _ = s.clone(),
                        x = u.clone(),
                        b = u.clone(),
                        w = f[c][l].clone(),
                        T = f[c + 1][l].clone(),
                        E = f[c + 1][l + 1].clone(),
                        S = f[c][l + 1].clone();
                    this.faces.push(new o.Face3(p, m, g, [y, _, b])), this.faceVertexUvs[0].push([w, T, S]), this.faces.push(new o.Face3(m, v, g, [_.clone(), x, b.clone()])), this.faceVertexUvs[0].push([T.clone(), E, S.clone()])
                }
            if (!1 === a && e > 0)
                for (this.vertices.push(new o.Vector3(0, h, 0)), l = 0; i > l; l++) p = d[0][l], m = d[0][l + 1], v = this.vertices.length - 1, y = new o.Vector3(0, 1, 0), _ = new o.Vector3(0, 1, 0), x = new o.Vector3(0, 1, 0), w = f[0][l].clone(), T = f[0][l + 1].clone(), E = new o.Vector2(T.x, 0), this.faces.push(new o.Face3(p, m, v, [y, _, x], void 0, 1)), this.faceVertexUvs[0].push([w, T, E]);
            if (!1 === a && t > 0)
                for (this.vertices.push(new o.Vector3(0, -h, 0)), l = 0; i > l; l++) p = d[r][l + 1], m = d[r][l], v = this.vertices.length - 1, y = new o.Vector3(0, -1, 0), _ = new o.Vector3(0, -1, 0), x = new o.Vector3(0, -1, 0), w = f[r][l + 1].clone(), T = f[r][l].clone(), E = new o.Vector2(T.x, 1), this.faces.push(new o.Face3(p, m, v, [y, _, x], void 0, 2)), this.faceVertexUvs[0].push([w, T, E]);
            this.computeFaceNormals()
        }, o.CylinderGeometry.prototype = Object.create(o.Geometry.prototype), o.CylinderGeometry.prototype.constructor = o.CylinderGeometry, o.CylinderGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.CylinderGeometry(e.radiusTop, e.radiusBottom, e.height, e.radialSegments, e.heightSegments, e.openEnded, e.thetaStart, e.thetaLength)
        }, o.EdgesGeometry = function(e, t) {
            function n(e, t) {
                return e - t
            }
            o.BufferGeometry.call(this);
            var i, r = Math.cos(o.Math.degToRad(void 0 !== t ? t : 1)),
                a = [0, 0],
                s = {},
                u = ["a", "b", "c"];
            e instanceof o.BufferGeometry ? (i = new o.Geometry, i.fromBufferGeometry(e)) : i = e.clone(), i.mergeVertices(), i.computeFaceNormals();
            var l = i.vertices;
            i = i.faces;
            for (var c = 0, h = i.length; h > c; c++)
                for (var d = i[c], f = 0; 3 > f; f++) {
                    a[0] = d[u[f]], a[1] = d[u[(f + 1) % 3]], a.sort(n);
                    var p = a.toString();
                    void 0 === s[p] ? s[p] = {
                        vert1: a[0],
                        vert2: a[1],
                        face1: c,
                        face2: void 0
                    } : s[p].face2 = c
                }
            a = [];
            for (p in s) u = s[p], (void 0 === u.face2 || i[u.face1].normal.dot(i[u.face2].normal) <= r) && (c = l[u.vert1], a.push(c.x), a.push(c.y), a.push(c.z), c = l[u.vert2], a.push(c.x), a.push(c.y), a.push(c.z));
            this.addAttribute("position", new o.BufferAttribute(new Float32Array(a), 3))
        }, o.EdgesGeometry.prototype = Object.create(o.BufferGeometry.prototype), o.EdgesGeometry.prototype.constructor = o.EdgesGeometry, o.ExtrudeGeometry = function(e, t) {
            "undefined" != typeof e && (o.Geometry.call(this), this.type = "ExtrudeGeometry", e = Array.isArray(e) ? e : [e], this.addShapeList(e, t), this.computeFaceNormals())
        }, o.ExtrudeGeometry.prototype = Object.create(o.Geometry.prototype), o.ExtrudeGeometry.prototype.constructor = o.ExtrudeGeometry, o.ExtrudeGeometry.prototype.addShapeList = function(e, t) {
            for (var n = e.length, i = 0; n > i; i++) this.addShape(e[i], t)
        }, o.ExtrudeGeometry.prototype.addShape = function(e, t) {
            function n(e, t, n) {
                return t || console.error("THREE.ExtrudeGeometry: vec does not exist"), t.clone().multiplyScalar(n).add(e)
            }

            function i(e, t, n) {
                var i = 1,
                    i = e.x - t.x,
                    r = e.y - t.y,
                    a = n.x - e.x,
                    s = n.y - e.y,
                    u = i * i + r * r;
                if (Math.abs(i * s - r * a) > Number.EPSILON) {
                    var l = Math.sqrt(u),
                        c = Math.sqrt(a * a + s * s),
                        u = t.x - r / l;
                    if (t = t.y + i / l, a = ((n.x - s / c - u) * s - (n.y + a / c - t) * a) / (i * s - r * a), n = u + i * a - e.x, e = t + r * a - e.y, i = n * n + e * e, 2 >= i) return new o.Vector2(n, e);
                    i = Math.sqrt(i / 2)
                } else e = !1, i > Number.EPSILON ? a > Number.EPSILON && (e = !0) : i < -Number.EPSILON ? a < -Number.EPSILON && (e = !0) : Math.sign(r) === Math.sign(s) && (e = !0), e ? (n = -r, e = i, i = Math.sqrt(u)) : (n = i, e = r, i = Math.sqrt(u / 2));
                return new o.Vector2(n / i, e / i)
            }

            function r(e, t) {
                var n, i;
                for (N = e.length; 0 <= --N;) {
                    n = N, i = N - 1, 0 > i && (i = e.length - 1);
                    for (var r = 0, a = _ + 2 * v, r = 0; a > r; r++) {
                        var s = I * r,
                            u = I * (r + 1),
                            l = t + n + s,
                            s = t + i + s,
                            c = t + i + u,
                            u = t + n + u,
                            l = l + P,
                            s = s + P,
                            c = c + P,
                            u = u + P;
                        M.faces.push(new o.Face3(l, s, u, null, null, 1)), M.faces.push(new o.Face3(s, c, u, null, null, 1)), l = w.generateSideWallUV(M, l, s, c, u), M.faceVertexUvs[0].push([l[0], l[1], l[3]]), M.faceVertexUvs[0].push([l[1], l[2], l[3]])
                    }
                }
            }

            function a(e, t, n) {
                M.vertices.push(new o.Vector3(e, t, n))
            }

            function s(e, t, n) {
                e += P, t += P, n += P, M.faces.push(new o.Face3(e, t, n, null, null, 0)), e = w.generateTopUV(M, e, t, n), M.faceVertexUvs[0].push(e)
            }
            var u, l, c, h, d, f = void 0 !== t.amount ? t.amount : 100,
                p = void 0 !== t.bevelThickness ? t.bevelThickness : 6,
                m = void 0 !== t.bevelSize ? t.bevelSize : p - 2,
                v = void 0 !== t.bevelSegments ? t.bevelSegments : 3,
                g = void 0 !== t.bevelEnabled ? t.bevelEnabled : !0,
                y = void 0 !== t.curveSegments ? t.curveSegments : 12,
                _ = void 0 !== t.steps ? t.steps : 1,
                x = t.extrudePath,
                b = !1,
                w = void 0 !== t.UVGenerator ? t.UVGenerator : o.ExtrudeGeometry.WorldUVGenerator;
            x && (u = x.getSpacedPoints(_), b = !0, g = !1, l = void 0 !== t.frames ? t.frames : new o.TubeGeometry.FrenetFrames(x, _, !1), c = new o.Vector3, h = new o.Vector3, d = new o.Vector3), g || (m = p = v = 0);
            var T, E, S, M = this,
                P = this.vertices.length,
                x = e.extractPoints(y),
                y = x.shape,
                A = x.holes;
            if (x = !o.ShapeUtils.isClockWise(y)) {
                for (y = y.reverse(), E = 0, S = A.length; S > E; E++) T = A[E], o.ShapeUtils.isClockWise(T) && (A[E] = T.reverse());
                x = !1
            }
            var C = o.ShapeUtils.triangulateShape(y, A),
                R = y;
            for (E = 0, S = A.length; S > E; E++) T = A[E], y = y.concat(T);
            var L, O, k, D, F, B, I = y.length,
                U = C.length,
                x = [],
                N = 0;
            for (k = R.length, L = k - 1, O = N + 1; k > N; N++, L++, O++) L === k && (L = 0), O === k && (O = 0), x[N] = i(R[N], R[L], R[O]);
            var z, V = [],
                j = x.concat();
            for (E = 0, S = A.length; S > E; E++) {
                for (T = A[E], z = [], N = 0, k = T.length, L = k - 1, O = N + 1; k > N; N++, L++, O++) L === k && (L = 0), O === k && (O = 0), z[N] = i(T[N], T[L], T[O]);
                V.push(z), j = j.concat(z)
            }
            for (L = 0; v > L; L++) {
                for (k = L / v, D = p * (1 - k), O = m * Math.sin(k * Math.PI / 2), N = 0, k = R.length; k > N; N++) F = n(R[N], x[N], O), a(F.x, F.y, -D);
                for (E = 0, S = A.length; S > E; E++)
                    for (T = A[E], z = V[E], N = 0, k = T.length; k > N; N++) F = n(T[N], z[N], O), a(F.x, F.y, -D)
            }
            for (O = m, N = 0; I > N; N++) F = g ? n(y[N], j[N], O) : y[N], b ? (h.copy(l.normals[0]).multiplyScalar(F.x), c.copy(l.binormals[0]).multiplyScalar(F.y), d.copy(u[0]).add(h).add(c), a(d.x, d.y, d.z)) : a(F.x, F.y, 0);
            for (k = 1; _ >= k; k++)
                for (N = 0; I > N; N++) F = g ? n(y[N], j[N], O) : y[N], b ? (h.copy(l.normals[k]).multiplyScalar(F.x), c.copy(l.binormals[k]).multiplyScalar(F.y), d.copy(u[k]).add(h).add(c), a(d.x, d.y, d.z)) : a(F.x, F.y, f / _ * k);
            for (L = v - 1; L >= 0; L--) {
                for (k = L / v, D = p * (1 - k), O = m * Math.sin(k * Math.PI / 2), N = 0, k = R.length; k > N; N++) F = n(R[N], x[N], O), a(F.x, F.y, f + D);
                for (E = 0, S = A.length; S > E; E++)
                    for (T = A[E], z = V[E], N = 0, k = T.length; k > N; N++) F = n(T[N], z[N], O), b ? a(F.x, F.y + u[_ - 1].y, u[_ - 1].x + D) : a(F.x, F.y, f + D)
            }! function() {
                if (g) {
                    var e;
                    for (e = 0 * I, N = 0; U > N; N++) B = C[N], s(B[2] + e, B[1] + e, B[0] + e);
                    for (e = _ + 2 * v, e *= I, N = 0; U > N; N++) B = C[N], s(B[0] + e, B[1] + e, B[2] + e)
                } else {
                    for (N = 0; U > N; N++) B = C[N], s(B[2], B[1], B[0]);
                    for (N = 0; U > N; N++) B = C[N], s(B[0] + I * _, B[1] + I * _, B[2] + I * _)
                }
            }(),
            function() {
                var e = 0;
                for (r(R, e), e += R.length, E = 0, S = A.length; S > E; E++) T = A[E], r(T, e), e += T.length
            }()
        }, o.ExtrudeGeometry.WorldUVGenerator = {
            generateTopUV: function(e, t, n, i) {
                return e = e.vertices, t = e[t], n = e[n], i = e[i], [new o.Vector2(t.x, t.y), new o.Vector2(n.x, n.y), new o.Vector2(i.x, i.y)]
            },
            generateSideWallUV: function(e, t, n, i, r) {
                return e = e.vertices, t = e[t], n = e[n], i = e[i], r = e[r], .01 > Math.abs(t.y - n.y) ? [new o.Vector2(t.x, 1 - t.z), new o.Vector2(n.x, 1 - n.z), new o.Vector2(i.x, 1 - i.z), new o.Vector2(r.x, 1 - r.z)] : [new o.Vector2(t.y, 1 - t.z), new o.Vector2(n.y, 1 - n.z), new o.Vector2(i.y, 1 - i.z), new o.Vector2(r.y, 1 - r.z)]
            }
        }, o.ShapeGeometry = function(e, t) {
            o.Geometry.call(this), this.type = "ShapeGeometry", !1 === Array.isArray(e) && (e = [e]), this.addShapeList(e, t), this.computeFaceNormals()
        }, o.ShapeGeometry.prototype = Object.create(o.Geometry.prototype), o.ShapeGeometry.prototype.constructor = o.ShapeGeometry, o.ShapeGeometry.prototype.addShapeList = function(e, t) {
            for (var n = 0, i = e.length; i > n; n++) this.addShape(e[n], t);
            return this
        }, o.ShapeGeometry.prototype.addShape = function(e, t) {
            void 0 === t && (t = {});
            var n, i, r, a = t.material,
                s = void 0 === t.UVGenerator ? o.ExtrudeGeometry.WorldUVGenerator : t.UVGenerator,
                u = this.vertices.length;
            n = e.extractPoints(void 0 !== t.curveSegments ? t.curveSegments : 12);
            var l = n.shape,
                c = n.holes;
            if (!o.ShapeUtils.isClockWise(l))
                for (l = l.reverse(), n = 0, i = c.length; i > n; n++) r = c[n], o.ShapeUtils.isClockWise(r) && (c[n] = r.reverse());
            var h = o.ShapeUtils.triangulateShape(l, c);
            for (n = 0, i = c.length; i > n; n++) r = c[n], l = l.concat(r);
            for (c = l.length, i = h.length, n = 0; c > n; n++) r = l[n], this.vertices.push(new o.Vector3(r.x, r.y, 0));
            for (n = 0; i > n; n++) c = h[n], l = c[0] + u, r = c[1] + u, c = c[2] + u, this.faces.push(new o.Face3(l, r, c, null, null, a)), this.faceVertexUvs[0].push(s.generateTopUV(this, l, r, c))
        }, o.LatheGeometry = function(e, t, n, i) {
            o.Geometry.call(this), this.type = "LatheGeometry", this.parameters = {
                points: e,
                segments: t,
                phiStart: n,
                phiLength: i
            }, t = t || 12, n = n || 0, i = i || 2 * Math.PI;
            for (var r = 1 / (e.length - 1), a = 1 / t, s = 0, u = t; u >= s; s++)
                for (var l = n + s * a * i, c = Math.cos(l), h = Math.sin(l), l = 0, d = e.length; d > l; l++) {
                    var f = e[l],
                        p = new o.Vector3;
                    p.x = c * f.x - h * f.y, p.y = h * f.x + c * f.y, p.z = f.z, this.vertices.push(p)
                }
            for (n = e.length, s = 0, u = t; u > s; s++)
                for (l = 0, d = e.length - 1; d > l; l++) {
                    t = h = l + n * s, i = h + n;
                    var c = h + 1 + n,
                        h = h + 1,
                        f = s * a,
                        p = l * r,
                        m = f + a,
                        v = p + r;
                    this.faces.push(new o.Face3(t, i, h)), this.faceVertexUvs[0].push([new o.Vector2(f, p), new o.Vector2(m, p), new o.Vector2(f, v)]), this.faces.push(new o.Face3(i, c, h)), this.faceVertexUvs[0].push([new o.Vector2(m, p), new o.Vector2(m, v), new o.Vector2(f, v)])
                }
            this.mergeVertices(), this.computeFaceNormals(), this.computeVertexNormals()
        }, o.LatheGeometry.prototype = Object.create(o.Geometry.prototype), o.LatheGeometry.prototype.constructor = o.LatheGeometry, o.PlaneGeometry = function(e, t, n, i) {
            o.Geometry.call(this), this.type = "PlaneGeometry", this.parameters = {
                width: e,
                height: t,
                widthSegments: n,
                heightSegments: i
            }, this.fromBufferGeometry(new o.PlaneBufferGeometry(e, t, n, i))
        }, o.PlaneGeometry.prototype = Object.create(o.Geometry.prototype), o.PlaneGeometry.prototype.constructor = o.PlaneGeometry, o.PlaneGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.PlaneGeometry(e.width, e.height, e.widthSegments, e.heightSegments)
        }, o.PlaneBufferGeometry = function(e, t, n, i) {
            o.BufferGeometry.call(this), this.type = "PlaneBufferGeometry", this.parameters = {
                width: e,
                height: t,
                widthSegments: n,
                heightSegments: i
            };
            var r = e / 2,
                a = t / 2;
            n = Math.floor(n) || 1, i = Math.floor(i) || 1;
            var s = n + 1,
                u = i + 1,
                l = e / n,
                c = t / i;
            t = new Float32Array(s * u * 3), e = new Float32Array(s * u * 3);
            for (var h = new Float32Array(s * u * 2), d = 0, f = 0, p = 0; u > p; p++)
                for (var m = p * c - a, v = 0; s > v; v++) t[d] = v * l - r, t[d + 1] = -m, e[d + 2] = 1, h[f] = v / n, h[f + 1] = 1 - p / i, d += 3, f += 2;
            for (d = 0, r = new(65535 < t.length / 3 ? Uint32Array : Uint16Array)(n * i * 6), p = 0; i > p; p++)
                for (v = 0; n > v; v++) a = v + s * (p + 1), u = v + 1 + s * (p + 1), l = v + 1 + s * p, r[d] = v + s * p, r[d + 1] = a, r[d + 2] = l, r[d + 3] = a, r[d + 4] = u, r[d + 5] = l, d += 6;
            this.setIndex(new o.BufferAttribute(r, 1)), this.addAttribute("position", new o.BufferAttribute(t, 3)), this.addAttribute("normal", new o.BufferAttribute(e, 3)), this.addAttribute("uv", new o.BufferAttribute(h, 2))
        }, o.PlaneBufferGeometry.prototype = Object.create(o.BufferGeometry.prototype), o.PlaneBufferGeometry.prototype.constructor = o.PlaneBufferGeometry, o.PlaneBufferGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.PlaneBufferGeometry(e.width, e.height, e.widthSegments, e.heightSegments)
        }, o.RingGeometry = function(e, t, n, i, r, a) {
            o.Geometry.call(this), this.type = "RingGeometry", this.parameters = {
                innerRadius: e,
                outerRadius: t,
                thetaSegments: n,
                phiSegments: i,
                thetaStart: r,
                thetaLength: a
            }, e = e || 0, t = t || 50, r = void 0 !== r ? r : 0, a = void 0 !== a ? a : 2 * Math.PI, n = void 0 !== n ? Math.max(3, n) : 8, i = void 0 !== i ? Math.max(1, i) : 8;
            var s, u = [],
                l = e,
                c = (t - e) / i;
            for (e = 0; i + 1 > e; e++) {
                for (s = 0; n + 1 > s; s++) {
                    var h = new o.Vector3,
                        d = r + s / n * a;
                    h.x = l * Math.cos(d), h.y = l * Math.sin(d), this.vertices.push(h), u.push(new o.Vector2((h.x / t + 1) / 2, (h.y / t + 1) / 2))
                }
                l += c
            }
            for (t = new o.Vector3(0, 0, 1), e = 0; i > e; e++)
                for (r = e * (n + 1), s = 0; n > s; s++) a = d = s + r, c = d + n + 1, h = d + n + 2, this.faces.push(new o.Face3(a, c, h, [t.clone(), t.clone(), t.clone()])), this.faceVertexUvs[0].push([u[a].clone(), u[c].clone(), u[h].clone()]), a = d, c = d + n + 2, h = d + 1, this.faces.push(new o.Face3(a, c, h, [t.clone(), t.clone(), t.clone()])), this.faceVertexUvs[0].push([u[a].clone(), u[c].clone(), u[h].clone()]);
            this.computeFaceNormals(), this.boundingSphere = new o.Sphere(new o.Vector3, l)
        }, o.RingGeometry.prototype = Object.create(o.Geometry.prototype), o.RingGeometry.prototype.constructor = o.RingGeometry, o.RingGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.RingGeometry(e.innerRadius, e.outerRadius, e.thetaSegments, e.phiSegments, e.thetaStart, e.thetaLength)
        }, o.SphereGeometry = function(e, t, n, i, r, a, s) {
            o.Geometry.call(this), this.type = "SphereGeometry", this.parameters = {
                radius: e,
                widthSegments: t,
                heightSegments: n,
                phiStart: i,
                phiLength: r,
                thetaStart: a,
                thetaLength: s
            }, this.fromBufferGeometry(new o.SphereBufferGeometry(e, t, n, i, r, a, s))
        }, o.SphereGeometry.prototype = Object.create(o.Geometry.prototype), o.SphereGeometry.prototype.constructor = o.SphereGeometry, o.SphereGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.SphereGeometry(e.radius, e.widthSegments, e.heightSegments, e.phiStart, e.phiLength, e.thetaStart, e.thetaLength)
        }, o.SphereBufferGeometry = function(e, t, n, i, r, a, s) {
            o.BufferGeometry.call(this), this.type = "SphereBufferGeometry", this.parameters = {
                radius: e,
                widthSegments: t,
                heightSegments: n,
                phiStart: i,
                phiLength: r,
                thetaStart: a,
                thetaLength: s
            }, e = e || 50, t = Math.max(3, Math.floor(t) || 8), n = Math.max(2, Math.floor(n) || 6), i = void 0 !== i ? i : 0, r = void 0 !== r ? r : 2 * Math.PI, a = void 0 !== a ? a : 0, s = void 0 !== s ? s : Math.PI;
            for (var u = a + s, l = (t + 1) * (n + 1), c = new o.BufferAttribute(new Float32Array(3 * l), 3), h = new o.BufferAttribute(new Float32Array(3 * l), 3), l = new o.BufferAttribute(new Float32Array(2 * l), 2), d = 0, f = [], p = new o.Vector3, m = 0; n >= m; m++) {
                for (var v = [], g = m / n, y = 0; t >= y; y++) {
                    var _ = y / t,
                        x = -e * Math.cos(i + _ * r) * Math.sin(a + g * s),
                        b = e * Math.cos(a + g * s),
                        w = e * Math.sin(i + _ * r) * Math.sin(a + g * s);
                    p.set(x, b, w).normalize(), c.setXYZ(d, x, b, w), h.setXYZ(d, p.x, p.y, p.z), l.setXY(d, _, 1 - g), v.push(d), d++
                }
                f.push(v)
            }
            for (i = [], m = 0; n > m; m++)
                for (y = 0; t > y; y++) r = f[m][y + 1], s = f[m][y], d = f[m + 1][y], p = f[m + 1][y + 1], (0 !== m || a > 0) && i.push(r, s, p), (m !== n - 1 || u < Math.PI) && i.push(s, d, p);
            this.setIndex(new(65535 < c.count ? o.Uint32Attribute : o.Uint16Attribute)(i, 1)), this.addAttribute("position", c), this.addAttribute("normal", h), this.addAttribute("uv", l), this.boundingSphere = new o.Sphere(new o.Vector3, e)
        }, o.SphereBufferGeometry.prototype = Object.create(o.BufferGeometry.prototype), o.SphereBufferGeometry.prototype.constructor = o.SphereBufferGeometry, o.SphereBufferGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.SphereBufferGeometry(e.radius, e.widthSegments, e.heightSegments, e.phiStart, e.phiLength, e.thetaStart, e.thetaLength)
        }, o.TorusGeometry = function(e, t, n, i, r) {
            o.Geometry.call(this), this.type = "TorusGeometry", this.parameters = {
                radius: e,
                tube: t,
                radialSegments: n,
                tubularSegments: i,
                arc: r
            }, e = e || 100, t = t || 40, n = n || 8, i = i || 6, r = r || 2 * Math.PI;
            for (var a = new o.Vector3, s = [], u = [], l = 0; n >= l; l++)
                for (var c = 0; i >= c; c++) {
                    var h = c / i * r,
                        d = l / n * Math.PI * 2;
                    a.x = e * Math.cos(h), a.y = e * Math.sin(h);
                    var f = new o.Vector3;
                    f.x = (e + t * Math.cos(d)) * Math.cos(h), f.y = (e + t * Math.cos(d)) * Math.sin(h), f.z = t * Math.sin(d), this.vertices.push(f), s.push(new o.Vector2(c / i, l / n)), u.push(f.clone().sub(a).normalize())
                }
            for (l = 1; n >= l; l++)
                for (c = 1; i >= c; c++) e = (i + 1) * l + c - 1, t = (i + 1) * (l - 1) + c - 1, r = (i + 1) * (l - 1) + c, a = (i + 1) * l + c, h = new o.Face3(e, t, a, [u[e].clone(), u[t].clone(), u[a].clone()]), this.faces.push(h), this.faceVertexUvs[0].push([s[e].clone(), s[t].clone(), s[a].clone()]), h = new o.Face3(t, r, a, [u[t].clone(), u[r].clone(), u[a].clone()]), this.faces.push(h), this.faceVertexUvs[0].push([s[t].clone(), s[r].clone(), s[a].clone()]);
            this.computeFaceNormals()
        }, o.TorusGeometry.prototype = Object.create(o.Geometry.prototype), o.TorusGeometry.prototype.constructor = o.TorusGeometry, o.TorusGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.TorusGeometry(e.radius, e.tube, e.radialSegments, e.tubularSegments, e.arc)
        }, o.TorusKnotGeometry = function(e, t, n, i, r, a, s) {
            function u(e, t, n, i, r) {
                var a = Math.cos(e),
                    s = Math.sin(e);
                return e *= t / n, t = Math.cos(e), a *= i * (2 + t) * .5, s = i * (2 + t) * s * .5, i = r * i * Math.sin(e) * .5, new o.Vector3(a, s, i)
            }
            o.Geometry.call(this), this.type = "TorusKnotGeometry", this.parameters = {
                radius: e,
                tube: t,
                radialSegments: n,
                tubularSegments: i,
                p: r,
                q: a,
                heightScale: s
            }, e = e || 100, t = t || 40, n = n || 64, i = i || 8, r = r || 2, a = a || 3, s = s || 1;
            for (var l = Array(n), c = new o.Vector3, h = new o.Vector3, d = new o.Vector3, f = 0; n > f; ++f) {
                l[f] = Array(i);
                var p = f / n * 2 * r * Math.PI,
                    m = u(p, a, r, e, s),
                    p = u(p + .01, a, r, e, s);
                for (c.subVectors(p, m), h.addVectors(p, m), d.crossVectors(c, h), h.crossVectors(d, c), d.normalize(), h.normalize(), p = 0; i > p; ++p) {
                    var v = p / i * 2 * Math.PI,
                        g = -t * Math.cos(v),
                        v = t * Math.sin(v),
                        y = new o.Vector3;
                    y.x = m.x + g * h.x + v * d.x, y.y = m.y + g * h.y + v * d.y, y.z = m.z + g * h.z + v * d.z, l[f][p] = this.vertices.push(y) - 1
                }
            }
            for (f = 0; n > f; ++f)
                for (p = 0; i > p; ++p) r = (f + 1) % n, a = (p + 1) % i, e = l[f][p], t = l[r][p], r = l[r][a], a = l[f][a], s = new o.Vector2(f / n, p / i), c = new o.Vector2((f + 1) / n, p / i), h = new o.Vector2((f + 1) / n, (p + 1) / i), d = new o.Vector2(f / n, (p + 1) / i), this.faces.push(new o.Face3(e, t, a)), this.faceVertexUvs[0].push([s, c, d]), this.faces.push(new o.Face3(t, r, a)), this.faceVertexUvs[0].push([c.clone(), h, d.clone()]);
            this.computeFaceNormals(), this.computeVertexNormals()
        }, o.TorusKnotGeometry.prototype = Object.create(o.Geometry.prototype), o.TorusKnotGeometry.prototype.constructor = o.TorusKnotGeometry, o.TorusKnotGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.TorusKnotGeometry(e.radius, e.tube, e.radialSegments, e.tubularSegments, e.p, e.q, e.heightScale)
        }, o.TubeGeometry = function(e, t, n, i, r, a) {
            o.Geometry.call(this), this.type = "TubeGeometry", this.parameters = {
                path: e,
                segments: t,
                radius: n,
                radialSegments: i,
                closed: r,
                taper: a
            }, t = t || 64, n = n || 1, i = i || 8, r = r || !1, a = a || o.TubeGeometry.NoTaper;
            var s, u, l, c, h, d, f, p, m, v, g = [],
                y = t + 1,
                _ = new o.Vector3;
            for (p = new o.TubeGeometry.FrenetFrames(e, t, r), m = p.normals, v = p.binormals, this.tangents = p.tangents, this.normals = m, this.binormals = v, p = 0; y > p; p++)
                for (g[p] = [], l = p / (y - 1), f = e.getPointAt(l), s = m[p], u = v[p], h = n * a(l), l = 0; i > l; l++) c = l / i * 2 * Math.PI, d = -h * Math.cos(c), c = h * Math.sin(c), _.copy(f), _.x += d * s.x + c * u.x, _.y += d * s.y + c * u.y, _.z += d * s.z + c * u.z, g[p][l] = this.vertices.push(new o.Vector3(_.x, _.y, _.z)) - 1;
            for (p = 0; t > p; p++)
                for (l = 0; i > l; l++) a = r ? (p + 1) % t : p + 1, y = (l + 1) % i, e = g[p][l], n = g[a][l], a = g[a][y], y = g[p][y], _ = new o.Vector2(p / t, l / i), m = new o.Vector2((p + 1) / t, l / i), v = new o.Vector2((p + 1) / t, (l + 1) / i), s = new o.Vector2(p / t, (l + 1) / i), this.faces.push(new o.Face3(e, n, y)), this.faceVertexUvs[0].push([_, m, s]), this.faces.push(new o.Face3(n, a, y)), this.faceVertexUvs[0].push([m.clone(), v, s.clone()]);
            this.computeFaceNormals(), this.computeVertexNormals()
        }, o.TubeGeometry.prototype = Object.create(o.Geometry.prototype), o.TubeGeometry.prototype.constructor = o.TubeGeometry, o.TubeGeometry.prototype.clone = function() {
            return new this.constructor(this.parameters.path, this.parameters.segments, this.parameters.radius, this.parameters.radialSegments, this.parameters.closed, this.parameters.taper)
        }, o.TubeGeometry.NoTaper = function(e) {
            return 1
        }, o.TubeGeometry.SinusoidalTaper = function(e) {
            return Math.sin(Math.PI * e)
        }, o.TubeGeometry.FrenetFrames = function(e, t, n) {
            var i = new o.Vector3,
                r = [],
                a = [],
                s = [],
                u = new o.Vector3,
                l = new o.Matrix4;
            t += 1;
            var c, h, d;
            for (this.tangents = r, this.normals = a, this.binormals = s, c = 0; t > c; c++) h = c / (t - 1), r[c] = e.getTangentAt(h), r[c].normalize();
            for (a[0] = new o.Vector3, s[0] = new o.Vector3, e = Number.MAX_VALUE, c = Math.abs(r[0].x), h = Math.abs(r[0].y), d = Math.abs(r[0].z), e >= c && (e = c, i.set(1, 0, 0)), e >= h && (e = h, i.set(0, 1, 0)), e >= d && i.set(0, 0, 1), u.crossVectors(r[0], i).normalize(), a[0].crossVectors(r[0], u), s[0].crossVectors(r[0], a[0]), c = 1; t > c; c++) a[c] = a[c - 1].clone(), s[c] = s[c - 1].clone(), u.crossVectors(r[c - 1], r[c]), u.length() > Number.EPSILON && (u.normalize(), i = Math.acos(o.Math.clamp(r[c - 1].dot(r[c]), -1, 1)), a[c].applyMatrix4(l.makeRotationAxis(u, i))), s[c].crossVectors(r[c], a[c]);
            if (n)
                for (i = Math.acos(o.Math.clamp(a[0].dot(a[t - 1]), -1, 1)), i /= t - 1, 0 < r[0].dot(u.crossVectors(a[0], a[t - 1])) && (i = -i), c = 1; t > c; c++) a[c].applyMatrix4(l.makeRotationAxis(r[c], i * c)), s[c].crossVectors(r[c], a[c])
        }, o.PolyhedronGeometry = function(e, t, n, i) {
            function r(e) {
                var t = e.normalize().clone();
                t.index = l.vertices.push(t) - 1;
                var n = Math.atan2(e.z, -e.x) / 2 / Math.PI + .5;
                return e = Math.atan2(-e.y, Math.sqrt(e.x * e.x + e.z * e.z)) / Math.PI + .5, t.uv = new o.Vector2(n, 1 - e), t
            }

            function a(e, t, n, i) {
                i = new o.Face3(e.index, t.index, n.index, [e.clone(), t.clone(), n.clone()], void 0, i), l.faces.push(i), g.copy(e).add(t).add(n).divideScalar(3), i = Math.atan2(g.z, -g.x), l.faceVertexUvs[0].push([u(e.uv, e, i), u(t.uv, t, i), u(n.uv, n, i)])
            }

            function s(e, t) {
                for (var n = Math.pow(2, t), i = r(l.vertices[e.a]), o = r(l.vertices[e.b]), s = r(l.vertices[e.c]), u = [], c = e.materialIndex, h = 0; n >= h; h++) {
                    u[h] = [];
                    for (var d = r(i.clone().lerp(s, h / n)), f = r(o.clone().lerp(s, h / n)), p = n - h, m = 0; p >= m; m++) u[h][m] = 0 === m && h === n ? d : r(d.clone().lerp(f, m / p))
                }
                for (h = 0; n > h; h++)
                    for (m = 0; 2 * (n - h) - 1 > m; m++) i = Math.floor(m / 2), 0 === m % 2 ? a(u[h][i + 1], u[h + 1][i], u[h][i], c) : a(u[h][i + 1], u[h + 1][i + 1], u[h + 1][i], c)
            }

            function u(e, t, n) {
                return 0 > n && 1 === e.x && (e = new o.Vector2(e.x - 1, e.y)), 0 === t.x && 0 === t.z && (e = new o.Vector2(n / 2 / Math.PI + .5, e.y)), e.clone()
            }
            o.Geometry.call(this), this.type = "PolyhedronGeometry", this.parameters = {
                vertices: e,
                indices: t,
                radius: n,
                detail: i
            }, n = n || 1, i = i || 0;
            for (var l = this, c = 0, h = e.length; h > c; c += 3) r(new o.Vector3(e[c], e[c + 1], e[c + 2]));
            e = this.vertices;
            for (var d = [], f = c = 0, h = t.length; h > c; c += 3, f++) {
                var p = e[t[c]],
                    m = e[t[c + 1]],
                    v = e[t[c + 2]];
                d[f] = new o.Face3(p.index, m.index, v.index, [p.clone(), m.clone(), v.clone()], void 0, f)
            }
            for (var g = new o.Vector3, c = 0, h = d.length; h > c; c++) s(d[c], i);
            for (c = 0, h = this.faceVertexUvs[0].length; h > c; c++) t = this.faceVertexUvs[0][c], i = t[0].x, e = t[1].x, d = t[2].x, f = Math.max(i, e, d), p = Math.min(i, e, d), f > .9 && .1 > p && (.2 > i && (t[0].x += 1), .2 > e && (t[1].x += 1), .2 > d && (t[2].x += 1));
            for (c = 0, h = this.vertices.length; h > c; c++) this.vertices[c].multiplyScalar(n);
            this.mergeVertices(), this.computeFaceNormals(), this.boundingSphere = new o.Sphere(new o.Vector3, n)
        }, o.PolyhedronGeometry.prototype = Object.create(o.Geometry.prototype), o.PolyhedronGeometry.prototype.constructor = o.PolyhedronGeometry, o.PolyhedronGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.PolyhedronGeometry(e.vertices, e.indices, e.radius, e.detail)
        }, o.DodecahedronGeometry = function(e, t) {
            var n = (1 + Math.sqrt(5)) / 2,
                i = 1 / n;
            o.PolyhedronGeometry.call(this, [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -i, -n, 0, -i, n, 0, i, -n, 0, i, n, -i, -n, 0, -i, n, 0, i, -n, 0, i, n, 0, -n, 0, -i, n, 0, -i, -n, 0, i, n, 0, i], [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9], e, t), this.type = "DodecahedronGeometry", this.parameters = {
                radius: e,
                detail: t
            }
        }, o.DodecahedronGeometry.prototype = Object.create(o.PolyhedronGeometry.prototype), o.DodecahedronGeometry.prototype.constructor = o.DodecahedronGeometry, o.DodecahedronGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.DodecahedronGeometry(e.radius, e.detail)
        }, o.IcosahedronGeometry = function(e, t) {
            var n = (1 + Math.sqrt(5)) / 2;
            o.PolyhedronGeometry.call(this, [-1, n, 0, 1, n, 0, -1, -n, 0, 1, -n, 0, 0, -1, n, 0, 1, n, 0, -1, -n, 0, 1, -n, n, 0, -1, n, 0, 1, -n, 0, -1, -n, 0, 1], [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1], e, t), this.type = "IcosahedronGeometry", this.parameters = {
                radius: e,
                detail: t
            }
        }, o.IcosahedronGeometry.prototype = Object.create(o.PolyhedronGeometry.prototype), o.IcosahedronGeometry.prototype.constructor = o.IcosahedronGeometry, o.IcosahedronGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.IcosahedronGeometry(e.radius, e.detail)
        }, o.OctahedronGeometry = function(e, t) {
            o.PolyhedronGeometry.call(this, [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1], [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2], e, t), this.type = "OctahedronGeometry", this.parameters = {
                radius: e,
                detail: t
            }
        }, o.OctahedronGeometry.prototype = Object.create(o.PolyhedronGeometry.prototype), o.OctahedronGeometry.prototype.constructor = o.OctahedronGeometry, o.OctahedronGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.OctahedronGeometry(e.radius, e.detail)
        }, o.TetrahedronGeometry = function(e, t) {
            o.PolyhedronGeometry.call(this, [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1], [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1], e, t), this.type = "TetrahedronGeometry", this.parameters = {
                radius: e,
                detail: t
            }
        }, o.TetrahedronGeometry.prototype = Object.create(o.PolyhedronGeometry.prototype), o.TetrahedronGeometry.prototype.constructor = o.TetrahedronGeometry, o.TetrahedronGeometry.prototype.clone = function() {
            var e = this.parameters;
            return new o.TetrahedronGeometry(e.radius, e.detail)
        }, o.ParametricGeometry = function(e, t, n) {
            o.Geometry.call(this), this.type = "ParametricGeometry", this.parameters = {
                func: e,
                slices: t,
                stacks: n
            };
            var i, r, a, s, u = this.vertices,
                l = this.faces,
                c = this.faceVertexUvs[0],
                h = t + 1;
            for (i = 0; n >= i; i++)
                for (s = i / n, r = 0; t >= r; r++) a = r / t, a = e(a, s), u.push(a);
            var d, f, p, m;
            for (i = 0; n > i; i++)
                for (r = 0; t > r; r++) e = i * h + r, u = i * h + r + 1, s = (i + 1) * h + r + 1, a = (i + 1) * h + r, d = new o.Vector2(r / t, i / n), f = new o.Vector2((r + 1) / t, i / n), p = new o.Vector2((r + 1) / t, (i + 1) / n), m = new o.Vector2(r / t, (i + 1) / n), l.push(new o.Face3(e, u, a)), c.push([d, f, m]), l.push(new o.Face3(u, s, a)), c.push([f.clone(), p, m.clone()]);
            this.computeFaceNormals(), this.computeVertexNormals()
        }, o.ParametricGeometry.prototype = Object.create(o.Geometry.prototype), o.ParametricGeometry.prototype.constructor = o.ParametricGeometry, o.WireframeGeometry = function(e) {
            function t(e, t) {
                return e - t
            }
            o.BufferGeometry.call(this);
            var n = [0, 0],
                i = {},
                r = ["a", "b", "c"];
            if (e instanceof o.Geometry) {
                var a = e.vertices,
                    s = e.faces,
                    u = 0,
                    l = new Uint32Array(6 * s.length);
                e = 0;
                for (var c = s.length; c > e; e++)
                    for (var h = s[e], d = 0; 3 > d; d++) {
                        n[0] = h[r[d]], n[1] = h[r[(d + 1) % 3]], n.sort(t);
                        var f = n.toString();
                        void 0 === i[f] && (l[2 * u] = n[0], l[2 * u + 1] = n[1], i[f] = !0, u++)
                    }
                for (n = new Float32Array(6 * u), e = 0, c = u; c > e; e++)
                    for (d = 0; 2 > d; d++) i = a[l[2 * e + d]], u = 6 * e + 3 * d, n[u + 0] = i.x, n[u + 1] = i.y, n[u + 2] = i.z;
                this.addAttribute("position", new o.BufferAttribute(n, 3))
            } else if (e instanceof o.BufferGeometry) {
                if (null !== e.index) {
                    for (c = e.index.array, a = e.attributes.position, r = e.drawcalls, u = 0, 0 === r.length && e.addGroup(0, c.length), l = new Uint32Array(2 * c.length), s = 0, h = r.length; h > s; ++s) {
                        e = r[s], d = e.start, f = e.count, e = d;
                        for (var p = d + f; p > e; e += 3)
                            for (d = 0; 3 > d; d++) n[0] = c[e + d], n[1] = c[e + (d + 1) % 3], n.sort(t), f = n.toString(), void 0 === i[f] && (l[2 * u] = n[0], l[2 * u + 1] = n[1], i[f] = !0, u++)
                    }
                    for (n = new Float32Array(6 * u), e = 0, c = u; c > e; e++)
                        for (d = 0; 2 > d; d++) u = 6 * e + 3 * d, i = l[2 * e + d], n[u + 0] = a.getX(i), n[u + 1] = a.getY(i), n[u + 2] = a.getZ(i)
                } else
                    for (a = e.attributes.position.array, u = a.length / 3, l = u / 3, n = new Float32Array(6 * u), e = 0, c = l; c > e; e++)
                        for (d = 0; 3 > d; d++) u = 18 * e + 6 * d, l = 9 * e + 3 * d, n[u + 0] = a[l], n[u + 1] = a[l + 1], n[u + 2] = a[l + 2], i = 9 * e + (d + 1) % 3 * 3, n[u + 3] = a[i], n[u + 4] = a[i + 1], n[u + 5] = a[i + 2];
                this.addAttribute("position", new o.BufferAttribute(n, 3))
            }
        }, o.WireframeGeometry.prototype = Object.create(o.BufferGeometry.prototype), o.WireframeGeometry.prototype.constructor = o.WireframeGeometry, o.AxisHelper = function(e) {
            e = e || 1;
            var t = new Float32Array([0, 0, 0, e, 0, 0, 0, 0, 0, 0, e, 0, 0, 0, 0, 0, 0, e]),
                n = new Float32Array([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1]);
            e = new o.BufferGeometry, e.addAttribute("position", new o.BufferAttribute(t, 3)),
                e.addAttribute("color", new o.BufferAttribute(n, 3)), t = new o.LineBasicMaterial({
                    vertexColors: o.VertexColors
                }), o.LineSegments.call(this, e, t)
        }, o.AxisHelper.prototype = Object.create(o.LineSegments.prototype), o.AxisHelper.prototype.constructor = o.AxisHelper, o.ArrowHelper = function() {
            var e = new o.Geometry;
            e.vertices.push(new o.Vector3(0, 0, 0), new o.Vector3(0, 1, 0));
            var t = new o.CylinderGeometry(0, .5, 1, 5, 1);
            return t.translate(0, -.5, 0),
                function(n, i, r, a, s, u) {
                    o.Object3D.call(this), void 0 === a && (a = 16776960), void 0 === r && (r = 1), void 0 === s && (s = .2 * r), void 0 === u && (u = .2 * s), this.position.copy(i), r > s && (this.line = new o.Line(e, new o.LineBasicMaterial({
                        color: a
                    })), this.line.matrixAutoUpdate = !1, this.add(this.line)), this.cone = new o.Mesh(t, new o.MeshBasicMaterial({
                        color: a
                    })), this.cone.matrixAutoUpdate = !1, this.add(this.cone), this.setDirection(n), this.setLength(r, s, u)
                }
        }(), o.ArrowHelper.prototype = Object.create(o.Object3D.prototype), o.ArrowHelper.prototype.constructor = o.ArrowHelper, o.ArrowHelper.prototype.setDirection = function() {
            var e, t = new o.Vector3;
            return function(n) {
                .99999 < n.y ? this.quaternion.set(0, 0, 0, 1) : -.99999 > n.y ? this.quaternion.set(1, 0, 0, 0) : (t.set(n.z, 0, -n.x).normalize(), e = Math.acos(n.y), this.quaternion.setFromAxisAngle(t, e))
            }
        }(), o.ArrowHelper.prototype.setLength = function(e, t, n) {
            void 0 === t && (t = .2 * e), void 0 === n && (n = .2 * t), e > t && (this.line.scale.set(1, e - t, 1), this.line.updateMatrix()), this.cone.scale.set(n, t, n), this.cone.position.y = e, this.cone.updateMatrix()
        }, o.ArrowHelper.prototype.setColor = function(e) {
            void 0 !== this.line && this.line.material.color.set(e), this.cone.material.color.set(e)
        }, o.BoxHelper = function(e) {
            var t = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]),
                n = new Float32Array(24),
                i = new o.BufferGeometry;
            i.setIndex(new o.BufferAttribute(t, 1)), i.addAttribute("position", new o.BufferAttribute(n, 3)), o.LineSegments.call(this, i, new o.LineBasicMaterial({
                color: 16776960
            })), void 0 !== e && this.update(e)
        }, o.BoxHelper.prototype = Object.create(o.LineSegments.prototype), o.BoxHelper.prototype.constructor = o.BoxHelper, o.BoxHelper.prototype.update = function() {
            var e = new o.Box3;
            return function(t) {
                if (e.setFromObject(t), !e.empty()) {
                    t = e.min;
                    var n = e.max,
                        i = this.geometry.attributes.position,
                        r = i.array;
                    r[0] = n.x, r[1] = n.y, r[2] = n.z, r[3] = t.x, r[4] = n.y, r[5] = n.z, r[6] = t.x, r[7] = t.y, r[8] = n.z, r[9] = n.x, r[10] = t.y, r[11] = n.z, r[12] = n.x, r[13] = n.y, r[14] = t.z, r[15] = t.x, r[16] = n.y, r[17] = t.z, r[18] = t.x, r[19] = t.y, r[20] = t.z, r[21] = n.x, r[22] = t.y, r[23] = t.z, i.needsUpdate = !0, this.geometry.computeBoundingSphere()
                }
            }
        }(), o.BoundingBoxHelper = function(e, t) {
            var n = void 0 !== t ? t : 8947848;
            this.object = e, this.box = new o.Box3, o.Mesh.call(this, new o.BoxGeometry(1, 1, 1), new o.MeshBasicMaterial({
                color: n,
                wireframe: !0
            }))
        }, o.BoundingBoxHelper.prototype = Object.create(o.Mesh.prototype), o.BoundingBoxHelper.prototype.constructor = o.BoundingBoxHelper, o.BoundingBoxHelper.prototype.update = function() {
            this.box.setFromObject(this.object), this.box.size(this.scale), this.box.center(this.position)
        }, o.CameraHelper = function(e) {
            function t(e, t, i) {
                n(e, i), n(t, i)
            }

            function n(e, t) {
                i.vertices.push(new o.Vector3), i.colors.push(new o.Color(t)), void 0 === a[e] && (a[e] = []), a[e].push(i.vertices.length - 1)
            }
            var i = new o.Geometry,
                r = new o.LineBasicMaterial({
                    color: 16777215,
                    vertexColors: o.FaceColors
                }),
                a = {};
            t("n1", "n2", 16755200), t("n2", "n4", 16755200), t("n4", "n3", 16755200), t("n3", "n1", 16755200), t("f1", "f2", 16755200), t("f2", "f4", 16755200), t("f4", "f3", 16755200), t("f3", "f1", 16755200), t("n1", "f1", 16755200), t("n2", "f2", 16755200), t("n3", "f3", 16755200), t("n4", "f4", 16755200), t("p", "n1", 16711680), t("p", "n2", 16711680), t("p", "n3", 16711680), t("p", "n4", 16711680), t("u1", "u2", 43775), t("u2", "u3", 43775), t("u3", "u1", 43775), t("c", "t", 16777215), t("p", "c", 3355443), t("cn1", "cn2", 3355443), t("cn3", "cn4", 3355443), t("cf1", "cf2", 3355443), t("cf3", "cf4", 3355443), o.LineSegments.call(this, i, r), this.camera = e, this.camera.updateProjectionMatrix(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.pointMap = a, this.update()
        }, o.CameraHelper.prototype = Object.create(o.LineSegments.prototype), o.CameraHelper.prototype.constructor = o.CameraHelper, o.CameraHelper.prototype.update = function() {
            function e(e, o, a, s) {
                if (i.set(o, a, s).unproject(r), e = n[e], void 0 !== e)
                    for (o = 0, a = e.length; a > o; o++) t.vertices[e[o]].copy(i)
            }
            var t, n, i = new o.Vector3,
                r = new o.Camera;
            return function() {
                t = this.geometry, n = this.pointMap, r.projectionMatrix.copy(this.camera.projectionMatrix), e("c", 0, 0, -1), e("t", 0, 0, 1), e("n1", -1, -1, -1), e("n2", 1, -1, -1), e("n3", -1, 1, -1), e("n4", 1, 1, -1), e("f1", -1, -1, 1), e("f2", 1, -1, 1), e("f3", -1, 1, 1), e("f4", 1, 1, 1), e("u1", .7, 1.1, -1), e("u2", -.7, 1.1, -1), e("u3", 0, 2, -1), e("cf1", -1, 0, 1), e("cf2", 1, 0, 1), e("cf3", 0, -1, 1), e("cf4", 0, 1, 1), e("cn1", -1, 0, -1), e("cn2", 1, 0, -1), e("cn3", 0, -1, -1), e("cn4", 0, 1, -1), t.verticesNeedUpdate = !0
            }
        }(), o.DirectionalLightHelper = function(e, t) {
            o.Object3D.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, t = t || 1;
            var n = new o.Geometry;
            n.vertices.push(new o.Vector3(-t, t, 0), new o.Vector3(t, t, 0), new o.Vector3(t, -t, 0), new o.Vector3(-t, -t, 0), new o.Vector3(-t, t, 0));
            var i = new o.LineBasicMaterial({
                fog: !1
            });
            i.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.lightPlane = new o.Line(n, i), this.add(this.lightPlane), n = new o.Geometry, n.vertices.push(new o.Vector3, new o.Vector3), i = new o.LineBasicMaterial({
                fog: !1
            }), i.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine = new o.Line(n, i), this.add(this.targetLine), this.update()
        }, o.DirectionalLightHelper.prototype = Object.create(o.Object3D.prototype), o.DirectionalLightHelper.prototype.constructor = o.DirectionalLightHelper, o.DirectionalLightHelper.prototype.dispose = function() {
            this.lightPlane.geometry.dispose(), this.lightPlane.material.dispose(), this.targetLine.geometry.dispose(), this.targetLine.material.dispose()
        }, o.DirectionalLightHelper.prototype.update = function() {
            var e = new o.Vector3,
                t = new o.Vector3,
                n = new o.Vector3;
            return function() {
                e.setFromMatrixPosition(this.light.matrixWorld), t.setFromMatrixPosition(this.light.target.matrixWorld), n.subVectors(t, e), this.lightPlane.lookAt(n), this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine.geometry.vertices[1].copy(n), this.targetLine.geometry.verticesNeedUpdate = !0, this.targetLine.material.color.copy(this.lightPlane.material.color)
            }
        }(), o.EdgesHelper = function(e, t, n) {
            t = void 0 !== t ? t : 16777215, o.LineSegments.call(this, new o.EdgesGeometry(e.geometry, n), new o.LineBasicMaterial({
                color: t
            })), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1
        }, o.EdgesHelper.prototype = Object.create(o.LineSegments.prototype), o.EdgesHelper.prototype.constructor = o.EdgesHelper, o.FaceNormalsHelper = function(e, t, n, i) {
            this.object = e, this.size = void 0 !== t ? t : 1, e = void 0 !== n ? n : 16776960, i = void 0 !== i ? i : 1, t = 0, n = this.object.geometry, n instanceof o.Geometry ? t = n.faces.length : console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."), n = new o.BufferGeometry, t = new o.Float32Attribute(6 * t, 3), n.addAttribute("position", t), o.LineSegments.call(this, n, new o.LineBasicMaterial({
                color: e,
                linewidth: i
            })), this.matrixAutoUpdate = !1, this.update()
        }, o.FaceNormalsHelper.prototype = Object.create(o.LineSegments.prototype), o.FaceNormalsHelper.prototype.constructor = o.FaceNormalsHelper, o.FaceNormalsHelper.prototype.update = function() {
            var e = new o.Vector3,
                t = new o.Vector3,
                n = new o.Matrix3;
            return function() {
                this.object.updateMatrixWorld(!0), n.getNormalMatrix(this.object.matrixWorld);
                for (var i = this.object.matrixWorld, r = this.geometry.attributes.position, o = this.object.geometry, a = o.vertices, o = o.faces, s = 0, u = 0, l = o.length; l > u; u++) {
                    var c = o[u],
                        h = c.normal;
                    e.copy(a[c.a]).add(a[c.b]).add(a[c.c]).divideScalar(3).applyMatrix4(i), t.copy(h).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e), r.setXYZ(s, e.x, e.y, e.z), s += 1, r.setXYZ(s, t.x, t.y, t.z), s += 1
                }
                return r.needsUpdate = !0, this
            }
        }(), o.GridHelper = function(e, t) {
            var n = new o.Geometry,
                i = new o.LineBasicMaterial({
                    vertexColors: o.VertexColors
                });
            this.color1 = new o.Color(4473924), this.color2 = new o.Color(8947848);
            for (var r = -e; e >= r; r += t) {
                n.vertices.push(new o.Vector3(-e, 0, r), new o.Vector3(e, 0, r), new o.Vector3(r, 0, -e), new o.Vector3(r, 0, e));
                var a = 0 === r ? this.color1 : this.color2;
                n.colors.push(a, a, a, a)
            }
            o.LineSegments.call(this, n, i)
        }, o.GridHelper.prototype = Object.create(o.LineSegments.prototype), o.GridHelper.prototype.constructor = o.GridHelper, o.GridHelper.prototype.setColors = function(e, t) {
            this.color1.set(e), this.color2.set(t), this.geometry.colorsNeedUpdate = !0
        }, o.HemisphereLightHelper = function(e, t) {
            o.Object3D.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.colors = [new o.Color, new o.Color];
            var n = new o.SphereGeometry(t, 4, 2);
            n.rotateX(-Math.PI / 2);
            for (var i = 0; 8 > i; i++) n.faces[i].color = this.colors[4 > i ? 0 : 1];
            i = new o.MeshBasicMaterial({
                vertexColors: o.FaceColors,
                wireframe: !0
            }), this.lightSphere = new o.Mesh(n, i), this.add(this.lightSphere), this.update()
        }, o.HemisphereLightHelper.prototype = Object.create(o.Object3D.prototype), o.HemisphereLightHelper.prototype.constructor = o.HemisphereLightHelper, o.HemisphereLightHelper.prototype.dispose = function() {
            this.lightSphere.geometry.dispose(), this.lightSphere.material.dispose()
        }, o.HemisphereLightHelper.prototype.update = function() {
            var e = new o.Vector3;
            return function() {
                this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity), this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity), this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()), this.lightSphere.geometry.colorsNeedUpdate = !0
            }
        }(), o.PointLightHelper = function(e, t) {
            this.light = e, this.light.updateMatrixWorld();
            var n = new o.SphereGeometry(t, 4, 2),
                i = new o.MeshBasicMaterial({
                    wireframe: !0,
                    fog: !1
                });
            i.color.copy(this.light.color).multiplyScalar(this.light.intensity), o.Mesh.call(this, n, i), this.matrix = this.light.matrixWorld, this.matrixAutoUpdate = !1
        }, o.PointLightHelper.prototype = Object.create(o.Mesh.prototype), o.PointLightHelper.prototype.constructor = o.PointLightHelper, o.PointLightHelper.prototype.dispose = function() {
            this.geometry.dispose(), this.material.dispose()
        }, o.PointLightHelper.prototype.update = function() {
            this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
        }, o.SkeletonHelper = function(e) {
            this.bones = this.getBoneList(e);
            for (var t = new o.Geometry, n = 0; n < this.bones.length; n++) this.bones[n].parent instanceof o.Bone && (t.vertices.push(new o.Vector3), t.vertices.push(new o.Vector3), t.colors.push(new o.Color(0, 0, 1)), t.colors.push(new o.Color(0, 1, 0)));
            t.dynamic = !0, n = new o.LineBasicMaterial({
                vertexColors: o.VertexColors,
                depthTest: !1,
                depthWrite: !1,
                transparent: !0
            }), o.LineSegments.call(this, t, n), this.root = e, this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.update()
        }, o.SkeletonHelper.prototype = Object.create(o.LineSegments.prototype), o.SkeletonHelper.prototype.constructor = o.SkeletonHelper, o.SkeletonHelper.prototype.getBoneList = function(e) {
            var t = [];
            e instanceof o.Bone && t.push(e);
            for (var n = 0; n < e.children.length; n++) t.push.apply(t, this.getBoneList(e.children[n]));
            return t
        }, o.SkeletonHelper.prototype.update = function() {
            for (var e = this.geometry, t = (new o.Matrix4).getInverse(this.root.matrixWorld), n = new o.Matrix4, i = 0, r = 0; r < this.bones.length; r++) {
                var a = this.bones[r];
                a.parent instanceof o.Bone && (n.multiplyMatrices(t, a.matrixWorld), e.vertices[i].setFromMatrixPosition(n), n.multiplyMatrices(t, a.parent.matrixWorld), e.vertices[i + 1].setFromMatrixPosition(n), i += 2)
            }
            e.verticesNeedUpdate = !0, e.computeBoundingSphere()
        }, o.SpotLightHelper = function(e) {
            o.Object3D.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, e = new o.CylinderGeometry(0, 1, 1, 8, 1, !0), e.translate(0, -.5, 0), e.rotateX(-Math.PI / 2);
            var t = new o.MeshBasicMaterial({
                wireframe: !0,
                fog: !1
            });
            this.cone = new o.Mesh(e, t), this.add(this.cone), this.update()
        }, o.SpotLightHelper.prototype = Object.create(o.Object3D.prototype), o.SpotLightHelper.prototype.constructor = o.SpotLightHelper, o.SpotLightHelper.prototype.dispose = function() {
            this.cone.geometry.dispose(), this.cone.material.dispose()
        }, o.SpotLightHelper.prototype.update = function() {
            var e = new o.Vector3,
                t = new o.Vector3;
            return function() {
                var n = this.light.distance ? this.light.distance : 1e4,
                    i = n * Math.tan(this.light.angle);
                this.cone.scale.set(i, i, n), e.setFromMatrixPosition(this.light.matrixWorld), t.setFromMatrixPosition(this.light.target.matrixWorld), this.cone.lookAt(t.sub(e)), this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
            }
        }(), o.VertexNormalsHelper = function(e, t, n, i) {
            this.object = e, this.size = void 0 !== t ? t : 1, e = void 0 !== n ? n : 16711680, i = void 0 !== i ? i : 1, t = 0, n = this.object.geometry, n instanceof o.Geometry ? t = 3 * n.faces.length : n instanceof o.BufferGeometry && (t = n.attributes.normal.count), n = new o.BufferGeometry, t = new o.Float32Attribute(6 * t, 3), n.addAttribute("position", t), o.LineSegments.call(this, n, new o.LineBasicMaterial({
                color: e,
                linewidth: i
            })), this.matrixAutoUpdate = !1, this.update()
        }, o.VertexNormalsHelper.prototype = Object.create(o.LineSegments.prototype), o.VertexNormalsHelper.prototype.constructor = o.VertexNormalsHelper, o.VertexNormalsHelper.prototype.update = function() {
            var e = new o.Vector3,
                t = new o.Vector3,
                n = new o.Matrix3;
            return function() {
                var i = ["a", "b", "c"];
                this.object.updateMatrixWorld(!0), n.getNormalMatrix(this.object.matrixWorld);
                var r = this.object.matrixWorld,
                    a = this.geometry.attributes.position,
                    s = this.object.geometry;
                if (s instanceof o.Geometry)
                    for (var u = s.vertices, l = s.faces, c = s = 0, h = l.length; h > c; c++)
                        for (var d = l[c], f = 0, p = d.vertexNormals.length; p > f; f++) {
                            var m = d.vertexNormals[f];
                            e.copy(u[d[i[f]]]).applyMatrix4(r), t.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e), a.setXYZ(s, e.x, e.y, e.z), s += 1, a.setXYZ(s, t.x, t.y, t.z), s += 1
                        } else if (s instanceof o.BufferGeometry)
                            for (i = s.attributes.position, u = s.attributes.normal, f = s = 0, p = i.count; p > f; f++) e.set(i.getX(f), i.getY(f), i.getZ(f)).applyMatrix4(r), t.set(u.getX(f), u.getY(f), u.getZ(f)), t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e), a.setXYZ(s, e.x, e.y, e.z), s += 1, a.setXYZ(s, t.x, t.y, t.z), s += 1;
                return a.needsUpdate = !0, this
            }
        }(), o.WireframeHelper = function(e, t) {
            var n = void 0 !== t ? t : 16777215;
            o.LineSegments.call(this, new o.WireframeGeometry(e.geometry), new o.LineBasicMaterial({
                color: n
            })), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1
        }, o.WireframeHelper.prototype = Object.create(o.LineSegments.prototype), o.WireframeHelper.prototype.constructor = o.WireframeHelper, o.ImmediateRenderObject = function(e) {
            o.Object3D.call(this), this.material = e, this.render = function(e) {}
        }, o.ImmediateRenderObject.prototype = Object.create(o.Object3D.prototype), o.ImmediateRenderObject.prototype.constructor = o.ImmediateRenderObject, o.MorphBlendMesh = function(e, t) {
            o.Mesh.call(this, e, t), this.animationsMap = {}, this.animationsList = [];
            var n = this.geometry.morphTargets.length;
            this.createAnimation("__default", 0, n - 1, n / 1), this.setAnimationWeight("__default", 1)
        }, o.MorphBlendMesh.prototype = Object.create(o.Mesh.prototype), o.MorphBlendMesh.prototype.constructor = o.MorphBlendMesh, o.MorphBlendMesh.prototype.createAnimation = function(e, t, n, i) {
            t = {
                start: t,
                end: n,
                length: n - t + 1,
                fps: i,
                duration: (n - t) / i,
                lastFrame: 0,
                currentFrame: 0,
                active: !1,
                time: 0,
                direction: 1,
                weight: 1,
                directionBackwards: !1,
                mirroredLoop: !1
            }, this.animationsMap[e] = t, this.animationsList.push(t)
        }, o.MorphBlendMesh.prototype.autoCreateAnimations = function(e) {
            for (var t, n = /([a-z]+)_?(\d+)/, i = {}, r = this.geometry, o = 0, a = r.morphTargets.length; a > o; o++) {
                var s = r.morphTargets[o].name.match(n);
                if (s && 1 < s.length) {
                    var u = s[1];
                    i[u] || (i[u] = {
                        start: 1 / 0,
                        end: -(1 / 0)
                    }), s = i[u], o < s.start && (s.start = o), o > s.end && (s.end = o), t || (t = u)
                }
            }
            for (u in i) s = i[u], this.createAnimation(u, s.start, s.end, e);
            this.firstAnimation = t
        }, o.MorphBlendMesh.prototype.setAnimationDirectionForward = function(e) {
            (e = this.animationsMap[e]) && (e.direction = 1, e.directionBackwards = !1)
        }, o.MorphBlendMesh.prototype.setAnimationDirectionBackward = function(e) {
            (e = this.animationsMap[e]) && (e.direction = -1, e.directionBackwards = !0)
        }, o.MorphBlendMesh.prototype.setAnimationFPS = function(e, t) {
            var n = this.animationsMap[e];
            n && (n.fps = t, n.duration = (n.end - n.start) / n.fps)
        }, o.MorphBlendMesh.prototype.setAnimationDuration = function(e, t) {
            var n = this.animationsMap[e];
            n && (n.duration = t, n.fps = (n.end - n.start) / n.duration)
        }, o.MorphBlendMesh.prototype.setAnimationWeight = function(e, t) {
            var n = this.animationsMap[e];
            n && (n.weight = t)
        }, o.MorphBlendMesh.prototype.setAnimationTime = function(e, t) {
            var n = this.animationsMap[e];
            n && (n.time = t)
        }, o.MorphBlendMesh.prototype.getAnimationTime = function(e) {
            var t = 0;
            return (e = this.animationsMap[e]) && (t = e.time), t
        }, o.MorphBlendMesh.prototype.getAnimationDuration = function(e) {
            var t = -1;
            return (e = this.animationsMap[e]) && (t = e.duration), t
        }, o.MorphBlendMesh.prototype.playAnimation = function(e) {
            var t = this.animationsMap[e];
            t ? (t.time = 0, t.active = !0) : console.warn("THREE.MorphBlendMesh: animation[" + e + "] undefined in .playAnimation()")
        }, o.MorphBlendMesh.prototype.stopAnimation = function(e) {
            (e = this.animationsMap[e]) && (e.active = !1)
        }, o.MorphBlendMesh.prototype.update = function(e) {
            for (var t = 0, n = this.animationsList.length; n > t; t++) {
                var i = this.animationsList[t];
                if (i.active) {
                    var r = i.duration / i.length;
                    i.time += i.direction * e, i.mirroredLoop ? (i.time > i.duration || 0 > i.time) && (i.direction *= -1, i.time > i.duration && (i.time = i.duration, i.directionBackwards = !0), 0 > i.time && (i.time = 0, i.directionBackwards = !1)) : (i.time %= i.duration, 0 > i.time && (i.time += i.duration));
                    var a = i.start + o.Math.clamp(Math.floor(i.time / r), 0, i.length - 1),
                        s = i.weight;
                    a !== i.currentFrame && (this.morphTargetInfluences[i.lastFrame] = 0, this.morphTargetInfluences[i.currentFrame] = 1 * s, this.morphTargetInfluences[a] = 0, i.lastFrame = i.currentFrame, i.currentFrame = a), r = i.time % r / r, i.directionBackwards && (r = 1 - r), i.currentFrame !== i.lastFrame ? (this.morphTargetInfluences[i.currentFrame] = r * s, this.morphTargetInfluences[i.lastFrame] = (1 - r) * s) : this.morphTargetInfluences[i.currentFrame] = s
                }
            }
        }
}, function(e, t) {
    "use strict";
    var n = function() {
        function e(e, t, n) {
            return e = document.createElement(e), e.id = t, e.style.cssText = n, e
        }

        function t(t, n, i) {
            var r = e("div", t, "padding:0 0 3px 3px;text-align:left;background:" + i),
                o = e("div", t + "Text", "font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:" + n);
            for (o.innerHTML = t.toUpperCase(), r.appendChild(o), t = e("div", t + "Graph", "width:74px;height:30px;background:" + n), r.appendChild(t), n = 0; 74 > n; n++) t.appendChild(e("span", "", "width:1px;height:30px;float:left;opacity:0.9;background:" + i));
            return r
        }

        function n(e) {
            for (var t = l.children, n = 0; n < t.length; n++) t[n].style.display = n === e ? "block" : "none";
            u = e
        }

        function i(e, t) {
            e.appendChild(e.firstChild).style.height = Math.min(30, 30 - 30 * t) + "px"
        }
        var r = self.performance && self.performance.now ? self.performance.now.bind(performance) : Date.now,
            o = r(),
            a = o,
            s = 0,
            u = 0,
            l = e("div", "stats", "width:80px;opacity:0.9;cursor:pointer");
        l.addEventListener("mousedown", function(e) {
            e.preventDefault(), n(++u % l.children.length)
        }, !1);
        var c = 0,
            h = 1 / 0,
            d = 0,
            f = t("fps", "#0ff", "#002"),
            p = f.children[0],
            m = f.children[1];
        l.appendChild(f);
        var v = 0,
            g = 1 / 0,
            y = 0,
            f = t("ms", "#0f0", "#020"),
            _ = f.children[0],
            x = f.children[1];
        if (l.appendChild(f), self.performance && self.performance.memory) {
            var b = 0,
                w = 1 / 0,
                T = 0,
                f = t("mb", "#f08", "#201"),
                E = f.children[0],
                S = f.children[1];
            l.appendChild(f)
        }
        return n(u), {
            REVISION: 14,
            domElement: l,
            setMode: n,
            begin: function() {
                o = r()
            },
            end: function() {
                var e = r();
                if (v = e - o, g = Math.min(g, v), y = Math.max(y, v), _.textContent = (0 | v) + " MS (" + (0 | g) + "-" + (0 | y) + ")", i(x, v / 200), s++, e > a + 1e3 && (c = Math.round(1e3 * s / (e - a)), h = Math.min(h, c), d = Math.max(d, c), p.textContent = c + " FPS (" + h + "-" + d + ")", i(m, c / 100), a = e, s = 0, void 0 !== b)) {
                    var t = performance.memory.usedJSHeapSize,
                        n = performance.memory.jsHeapSizeLimit;
                    b = Math.round(9.54e-7 * t), w = Math.min(w, b), T = Math.max(T, b), E.textContent = b + " MB (" + w + "-" + T + ")", i(S, t / n)
                }
                return e
            },
            update: function() {
                o = this.end()
            }
        }
    };
    "object" == typeof e && (e.exports = n)
}, function(e, t, n) {
    var i, i;
    ! function(t) {
        e.exports = t()
    }(function() {
        return function e(t, n, r) {
            function o(s, u) {
                if (!n[s]) {
                    if (!t[s]) {
                        var l = "function" == typeof i && i;
                        if (!u && l) return i(s, !0);
                        if (a) return a(s, !0);
                        var c = new Error("Cannot find module '" + s + "'");
                        throw c.code = "MODULE_NOT_FOUND", c
                    }
                    var h = n[s] = {
                        exports: {}
                    };
                    t[s][0].call(h.exports, function(e) {
                        var n = t[s][1][e];
                        return o(n ? n : e)
                    }, h, h.exports, e, t, n, r)
                }
                return n[s].exports
            }
            for (var a = "function" == typeof i && i, s = 0; s < r.length; s++) o(r[s]);
            return o
        }({
            1: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../geometry/Vertices"),
                    o = e("../geometry/Vector"),
                    a = e("../core/Sleeping"),
                    s = (e("../render/Render"), e("../core/Common")),
                    u = e("../geometry/Bounds"),
                    l = e("../geometry/Axes");
                ! function() {
                    i._inertiaScale = 4, i._nextCollidingGroupId = 1, i._nextNonCollidingGroupId = -1, i._nextCategory = 1, i.create = function(t) {
                        var n = {
                                id: s.nextId(),
                                type: "body",
                                label: "Body",
                                parts: [],
                                angle: 0,
                                vertices: r.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),
                                position: {
                                    x: 0,
                                    y: 0
                                },
                                force: {
                                    x: 0,
                                    y: 0
                                },
                                torque: 0,
                                positionImpulse: {
                                    x: 0,
                                    y: 0
                                },
                                constraintImpulse: {
                                    x: 0,
                                    y: 0,
                                    angle: 0
                                },
                                totalContacts: 0,
                                speed: 0,
                                angularSpeed: 0,
                                velocity: {
                                    x: 0,
                                    y: 0
                                },
                                angularVelocity: 0,
                                isStatic: !1,
                                isSleeping: !1,
                                motion: 0,
                                sleepThreshold: 60,
                                density: .001,
                                restitution: 0,
                                friction: .1,
                                frictionStatic: .5,
                                frictionAir: .01,
                                collisionFilter: {
                                    category: 1,
                                    mask: 4294967295,
                                    group: 0
                                },
                                slop: .05,
                                timeScale: 1,
                                render: {
                                    visible: !0,
                                    sprite: {
                                        xScale: 1,
                                        yScale: 1,
                                        xOffset: 0,
                                        yOffset: 0
                                    },
                                    lineWidth: 1.5
                                }
                            },
                            i = s.extend(n, t);
                        return e(i, t), i
                    }, i.nextGroup = function(e) {
                        return e ? i._nextNonCollidingGroupId-- : i._nextCollidingGroupId++
                    }, i.nextCategory = function() {
                        return i._nextCategory = i._nextCategory << 1, i._nextCategory
                    };
                    var e = function(e, t) {
                        i.set(e, {
                            bounds: e.bounds || u.create(e.vertices),
                            positionPrev: e.positionPrev || o.clone(e.position),
                            anglePrev: e.anglePrev || e.angle,
                            vertices: e.vertices,
                            parts: e.parts || [e],
                            isStatic: e.isStatic,
                            isSleeping: e.isSleeping,
                            parent: e.parent || e
                        }), r.rotate(e.vertices, e.angle, e.position), l.rotate(e.axes, e.angle), u.update(e.bounds, e.vertices, e.velocity), i.set(e, {
                            axes: t.axes || e.axes,
                            area: t.area || e.area,
                            mass: t.mass || e.mass,
                            inertia: t.inertia || e.inertia
                        });
                        var n = e.isStatic ? "#eeeeee" : s.choose(["#556270", "#4ECDC4", "#C7F464", "#FF6B6B", "#C44D58"]),
                            a = s.shadeColor(n, -20);
                        e.render.fillStyle = e.render.fillStyle || n, e.render.strokeStyle = e.render.strokeStyle || a, e.render.sprite.xOffset += -(e.bounds.min.x - e.position.x) / (e.bounds.max.x - e.bounds.min.x), e.render.sprite.yOffset += -(e.bounds.min.y - e.position.y) / (e.bounds.max.y - e.bounds.min.y)
                    };
                    i.set = function(e, t, n) {
                        var r;
                        "string" == typeof t && (r = t, t = {}, t[r] = n);
                        for (r in t)
                            if (n = t[r], t.hasOwnProperty(r)) switch (r) {
                                case "isStatic":
                                    i.setStatic(e, n);
                                    break;
                                case "isSleeping":
                                    a.set(e, n);
                                    break;
                                case "mass":
                                    i.setMass(e, n);
                                    break;
                                case "density":
                                    i.setDensity(e, n);
                                    break;
                                case "inertia":
                                    i.setInertia(e, n);
                                    break;
                                case "vertices":
                                    i.setVertices(e, n);
                                    break;
                                case "position":
                                    i.setPosition(e, n);
                                    break;
                                case "angle":
                                    i.setAngle(e, n);
                                    break;
                                case "velocity":
                                    i.setVelocity(e, n);
                                    break;
                                case "angularVelocity":
                                    i.setAngularVelocity(e, n);
                                    break;
                                case "parts":
                                    i.setParts(e, n);
                                    break;
                                default:
                                    e[r] = n
                            }
                    }, i.setStatic = function(e, t) {
                        for (var n = 0; n < e.parts.length; n++) {
                            var i = e.parts[n];
                            i.isStatic = t, t && (i.restitution = 0, i.friction = 1, i.mass = i.inertia = i.density = 1 / 0, i.inverseMass = i.inverseInertia = 0, i.positionPrev.x = i.position.x, i.positionPrev.y = i.position.y, i.anglePrev = i.angle, i.angularVelocity = 0, i.speed = 0, i.angularSpeed = 0, i.motion = 0)
                        }
                    }, i.setMass = function(e, t) {
                        e.mass = t, e.inverseMass = 1 / e.mass, e.density = e.mass / e.area
                    }, i.setDensity = function(e, t) {
                        i.setMass(e, t * e.area), e.density = t
                    }, i.setInertia = function(e, t) {
                        e.inertia = t, e.inverseInertia = 1 / e.inertia
                    }, i.setVertices = function(e, t) {
                        t[0].body === e ? e.vertices = t : e.vertices = r.create(t, e), e.axes = l.fromVertices(e.vertices), e.area = r.area(e.vertices), i.setMass(e, e.density * e.area);
                        var n = r.centre(e.vertices);
                        r.translate(e.vertices, n, -1), i.setInertia(e, i._inertiaScale * r.inertia(e.vertices, e.mass)), r.translate(e.vertices, e.position), u.update(e.bounds, e.vertices, e.velocity)
                    }, i.setParts = function(e, n, o) {
                        var a;
                        for (n = n.slice(0), e.parts.length = 0, e.parts.push(e), e.parent = e, a = 0; a < n.length; a++) {
                            var s = n[a];
                            s !== e && (s.parent = e, e.parts.push(s))
                        }
                        if (1 !== e.parts.length) {
                            if (o = "undefined" != typeof o ? o : !0) {
                                var u = [];
                                for (a = 0; a < n.length; a++) u = u.concat(n[a].vertices);
                                r.clockwiseSort(u);
                                var l = r.hull(u),
                                    c = r.centre(l);
                                i.setVertices(e, l), r.translate(e.vertices, c)
                            }
                            var h = t(e);
                            e.area = h.area, e.parent = e, e.position.x = h.centre.x, e.position.y = h.centre.y, e.positionPrev.x = h.centre.x, e.positionPrev.y = h.centre.y, i.setMass(e, h.mass), i.setInertia(e, h.inertia), i.setPosition(e, h.centre)
                        }
                    }, i.setPosition = function(e, t) {
                        var n = o.sub(t, e.position);
                        e.positionPrev.x += n.x, e.positionPrev.y += n.y;
                        for (var i = 0; i < e.parts.length; i++) {
                            var a = e.parts[i];
                            a.position.x += n.x, a.position.y += n.y, r.translate(a.vertices, n), u.update(a.bounds, a.vertices, e.velocity)
                        }
                    }, i.setAngle = function(e, t) {
                        var n = t - e.angle;
                        e.anglePrev += n;
                        for (var i = 0; i < e.parts.length; i++) {
                            var a = e.parts[i];
                            a.angle += n, r.rotate(a.vertices, n, e.position), l.rotate(a.axes, n), u.update(a.bounds, a.vertices, e.velocity), i > 0 && o.rotateAbout(a.position, n, e.position, a.position)
                        }
                    }, i.setVelocity = function(e, t) {
                        e.positionPrev.x = e.position.x - t.x, e.positionPrev.y = e.position.y - t.y, e.velocity.x = t.x, e.velocity.y = t.y, e.speed = o.magnitude(e.velocity)
                    }, i.setAngularVelocity = function(e, t) {
                        e.anglePrev = e.angle - t, e.angularVelocity = t, e.angularSpeed = Math.abs(e.angularVelocity)
                    }, i.translate = function(e, t) {
                        i.setPosition(e, o.add(e.position, t))
                    }, i.rotate = function(e, t) {
                        i.setAngle(e, e.angle + t)
                    }, i.scale = function(e, n, o, a) {
                        for (var s = 0; s < e.parts.length; s++) {
                            var c = e.parts[s];
                            r.scale(c.vertices, n, o, e.position), c.axes = l.fromVertices(c.vertices), e.isStatic || (c.area = r.area(c.vertices), i.setMass(c, e.density * c.area), r.translate(c.vertices, {
                                x: -c.position.x,
                                y: -c.position.y
                            }), i.setInertia(c, r.inertia(c.vertices, c.mass)), r.translate(c.vertices, {
                                x: c.position.x,
                                y: c.position.y
                            })), u.update(c.bounds, c.vertices, e.velocity)
                        }
                        if (!e.isStatic) {
                            var h = t(e);
                            e.area = h.area, i.setMass(e, h.mass), i.setInertia(e, h.inertia)
                        }
                    }, i.update = function(e, t, n, i) {
                        var a = Math.pow(t * n * e.timeScale, 2),
                            s = 1 - e.frictionAir * n * e.timeScale,
                            c = e.position.x - e.positionPrev.x,
                            h = e.position.y - e.positionPrev.y;
                        e.velocity.x = c * s * i + e.force.x / e.mass * a, e.velocity.y = h * s * i + e.force.y / e.mass * a, e.positionPrev.x = e.position.x, e.positionPrev.y = e.position.y, e.position.x += e.velocity.x, e.position.y += e.velocity.y, e.angularVelocity = (e.angle - e.anglePrev) * s * i + e.torque / e.inertia * a, e.anglePrev = e.angle, e.angle += e.angularVelocity, e.speed = o.magnitude(e.velocity), e.angularSpeed = Math.abs(e.angularVelocity);
                        for (var d = 0; d < e.parts.length; d++) {
                            var f = e.parts[d];
                            r.translate(f.vertices, e.velocity), d > 0 && (f.position.x += e.velocity.x, f.position.y += e.velocity.y), 0 !== e.angularVelocity && (r.rotate(f.vertices, e.angularVelocity, e.position), l.rotate(f.axes, e.angularVelocity), d > 0 && o.rotateAbout(f.position, e.angularVelocity, e.position, f.position)), u.update(f.bounds, f.vertices, e.velocity)
                        }
                    }, i.applyForce = function(e, t, n) {
                        e.force.x += n.x, e.force.y += n.y;
                        var i = {
                            x: t.x - e.position.x,
                            y: t.y - e.position.y
                        };
                        e.torque += i.x * n.y - i.y * n.x
                    };
                    var t = function(e) {
                        for (var t = {
                                mass: 0,
                                area: 0,
                                inertia: 0,
                                centre: {
                                    x: 0,
                                    y: 0
                                }
                            }, n = 1 === e.parts.length ? 0 : 1; n < e.parts.length; n++) {
                            var i = e.parts[n];
                            t.mass += i.mass, t.area += i.area, t.inertia += i.inertia, t.centre = o.add(t.centre, o.mult(i.position, i.mass !== 1 / 0 ? i.mass : 1))
                        }
                        return t.centre = o.div(t.centre, t.mass !== 1 / 0 ? t.mass : e.parts.length), t
                    }
                }()
            }, {
                "../core/Common": 14,
                "../core/Sleeping": 20,
                "../geometry/Axes": 23,
                "../geometry/Bounds": 24,
                "../geometry/Vector": 26,
                "../geometry/Vertices": 27,
                "../render/Render": 29
            }],
            2: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../core/Events"),
                    o = e("../core/Common"),
                    a = e("./Body");
                ! function() {
                    i.create = function(e) {
                        return o.extend({
                            id: o.nextId(),
                            type: "composite",
                            parent: null,
                            isModified: !1,
                            bodies: [],
                            constraints: [],
                            composites: [],
                            label: "Composite"
                        }, e)
                    }, i.setModified = function(e, t, n, r) {
                        if (e.isModified = t, n && e.parent && i.setModified(e.parent, t, n, r), r)
                            for (var o = 0; o < e.composites.length; o++) {
                                var a = e.composites[o];
                                i.setModified(a, t, n, r)
                            }
                    }, i.add = function(e, t) {
                        var n = [].concat(t);
                        r.trigger(e, "beforeAdd", {
                            object: t
                        });
                        for (var a = 0; a < n.length; a++) {
                            var s = n[a];
                            switch (s.type) {
                                case "body":
                                    if (s.parent !== s) {
                                        o.log("Composite.add: skipped adding a compound body part (you must add its parent instead)", "warn");
                                        break
                                    }
                                    i.addBody(e, s);
                                    break;
                                case "constraint":
                                    i.addConstraint(e, s);
                                    break;
                                case "composite":
                                    i.addComposite(e, s);
                                    break;
                                case "mouseConstraint":
                                    i.addConstraint(e, s.constraint)
                            }
                        }
                        return r.trigger(e, "afterAdd", {
                            object: t
                        }), e
                    }, i.remove = function(e, t, n) {
                        var o = [].concat(t);
                        r.trigger(e, "beforeRemove", {
                            object: t
                        });
                        for (var a = 0; a < o.length; a++) {
                            var s = o[a];
                            switch (s.type) {
                                case "body":
                                    i.removeBody(e, s, n);
                                    break;
                                case "constraint":
                                    i.removeConstraint(e, s, n);
                                    break;
                                case "composite":
                                    i.removeComposite(e, s, n);
                                    break;
                                case "mouseConstraint":
                                    i.removeConstraint(e, s.constraint)
                            }
                        }
                        return r.trigger(e, "afterRemove", {
                            object: t
                        }), e
                    }, i.addComposite = function(e, t) {
                        return e.composites.push(t), t.parent = e, i.setModified(e, !0, !0, !1), e
                    }, i.removeComposite = function(e, t, n) {
                        var r = o.indexOf(e.composites, t);
                        if (-1 !== r && (i.removeCompositeAt(e, r), i.setModified(e, !0, !0, !1)), n)
                            for (var a = 0; a < e.composites.length; a++) i.removeComposite(e.composites[a], t, !0);
                        return e
                    }, i.removeCompositeAt = function(e, t) {
                        return e.composites.splice(t, 1), i.setModified(e, !0, !0, !1), e
                    }, i.addBody = function(e, t) {
                        return e.bodies.push(t), i.setModified(e, !0, !0, !1), e
                    }, i.removeBody = function(e, t, n) {
                        var r = o.indexOf(e.bodies, t);
                        if (-1 !== r && (i.removeBodyAt(e, r), i.setModified(e, !0, !0, !1)), n)
                            for (var a = 0; a < e.composites.length; a++) i.removeBody(e.composites[a], t, !0);
                        return e
                    }, i.removeBodyAt = function(e, t) {
                        return e.bodies.splice(t, 1), i.setModified(e, !0, !0, !1), e
                    }, i.addConstraint = function(e, t) {
                        return e.constraints.push(t), i.setModified(e, !0, !0, !1), e
                    }, i.removeConstraint = function(e, t, n) {
                        var r = o.indexOf(e.constraints, t);
                        if (-1 !== r && i.removeConstraintAt(e, r), n)
                            for (var a = 0; a < e.composites.length; a++) i.removeConstraint(e.composites[a], t, !0);
                        return e
                    }, i.removeConstraintAt = function(e, t) {
                        return e.constraints.splice(t, 1), i.setModified(e, !0, !0, !1), e
                    }, i.clear = function(e, t, n) {
                        if (n)
                            for (var r = 0; r < e.composites.length; r++) i.clear(e.composites[r], t, !0);
                        return t ? e.bodies = e.bodies.filter(function(e) {
                            return e.isStatic
                        }) : e.bodies.length = 0, e.constraints.length = 0, e.composites.length = 0, i.setModified(e, !0, !0, !1), e
                    }, i.allBodies = function(e) {
                        for (var t = [].concat(e.bodies), n = 0; n < e.composites.length; n++) t = t.concat(i.allBodies(e.composites[n]));
                        return t
                    }, i.allConstraints = function(e) {
                        for (var t = [].concat(e.constraints), n = 0; n < e.composites.length; n++) t = t.concat(i.allConstraints(e.composites[n]));
                        return t
                    }, i.allComposites = function(e) {
                        for (var t = [].concat(e.composites), n = 0; n < e.composites.length; n++) t = t.concat(i.allComposites(e.composites[n]));
                        return t
                    }, i.get = function(e, t, n) {
                        var r, o;
                        switch (n) {
                            case "body":
                                r = i.allBodies(e);
                                break;
                            case "constraint":
                                r = i.allConstraints(e);
                                break;
                            case "composite":
                                r = i.allComposites(e).concat(e)
                        }
                        return r ? (o = r.filter(function(e) {
                            return e.id.toString() === t.toString()
                        }), 0 === o.length ? null : o[0]) : null
                    }, i.move = function(e, t, n) {
                        return i.remove(e, t), i.add(n, t), e
                    }, i.rebase = function(e) {
                        for (var t = i.allBodies(e).concat(i.allConstraints(e)).concat(i.allComposites(e)), n = 0; n < t.length; n++) t[n].id = o.nextId();
                        return i.setModified(e, !0, !0, !1), e
                    }, i.translate = function(e, t, n) {
                        for (var r = n ? i.allBodies(e) : e.bodies, o = 0; o < r.length; o++) a.translate(r[o], t);
                        return i.setModified(e, !0, !0, !1), e
                    }, i.rotate = function(e, t, n, r) {
                        for (var o = Math.cos(t), s = Math.sin(t), u = r ? i.allBodies(e) : e.bodies, l = 0; l < u.length; l++) {
                            var c = u[l],
                                h = c.position.x - n.x,
                                d = c.position.y - n.y;
                            a.setPosition(c, {
                                x: n.x + (h * o - d * s),
                                y: n.y + (h * s + d * o)
                            }), a.rotate(c, t)
                        }
                        return i.setModified(e, !0, !0, !1), e
                    }, i.scale = function(e, t, n, r, o) {
                        for (var s = o ? i.allBodies(e) : e.bodies, u = 0; u < s.length; u++) {
                            var l = s[u],
                                c = l.position.x - r.x,
                                h = l.position.y - r.y;
                            a.setPosition(l, {
                                x: r.x + c * t,
                                y: r.y + h * n
                            }), a.scale(l, t, n)
                        }
                        return i.setModified(e, !0, !0, !1), e
                    }
                }()
            }, {
                "../core/Common": 14,
                "../core/Events": 16,
                "./Body": 1
            }],
            3: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("./Composite"),
                    o = (e("../constraint/Constraint"), e("../core/Common"));
                ! function() {
                    i.create = function(e) {
                        var t = r.create(),
                            n = {
                                label: "World",
                                gravity: {
                                    x: 0,
                                    y: 1,
                                    scale: .001
                                },
                                bounds: {
                                    min: {
                                        x: -(1 / 0),
                                        y: -(1 / 0)
                                    },
                                    max: {
                                        x: 1 / 0,
                                        y: 1 / 0
                                    }
                                }
                            };
                        return o.extend(t, n, e)
                    }
                }()
            }, {
                "../constraint/Constraint": 12,
                "../core/Common": 14,
                "./Composite": 2
            }],
            4: [function(e, t, n) {
                var i = {};
                t.exports = i,
                    function() {
                        i.create = function(e) {
                            return {
                                id: i.id(e),
                                vertex: e,
                                normalImpulse: 0,
                                tangentImpulse: 0
                            }
                        }, i.id = function(e) {
                            return e.body.id + "_" + e.index
                        }
                    }()
            }, {}],
            5: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("./SAT"),
                    o = e("./Pair"),
                    a = e("../geometry/Bounds");
                ! function() {
                    i.collisions = function(e, t) {
                        for (var n = [], s = t.pairs.table, u = 0; u < e.length; u++) {
                            var l = e[u][0],
                                c = e[u][1];
                            if ((!l.isStatic && !l.isSleeping || !c.isStatic && !c.isSleeping) && i.canCollide(l.collisionFilter, c.collisionFilter) && a.overlaps(l.bounds, c.bounds))
                                for (var h = l.parts.length > 1 ? 1 : 0; h < l.parts.length; h++)
                                    for (var d = l.parts[h], f = c.parts.length > 1 ? 1 : 0; f < c.parts.length; f++) {
                                        var p = c.parts[f];
                                        if (d === l && p === c || a.overlaps(d.bounds, p.bounds)) {
                                            var m, v = o.id(d, p),
                                                g = s[v];
                                            m = g && g.isActive ? g.collision : null;
                                            var y = r.collides(d, p, m);
                                            y.collided && n.push(y)
                                        }
                                    }
                        }
                        return n
                    }, i.canCollide = function(e, t) {
                        return e.group === t.group && 0 !== e.group ? e.group > 0 : 0 !== (e.mask & t.category) && 0 !== (t.mask & e.category)
                    }
                }()
            }, {
                "../geometry/Bounds": 24,
                "./Pair": 7,
                "./SAT": 11
            }],
            6: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("./Pair"),
                    o = e("./Detector"),
                    a = e("../core/Common");
                ! function() {
                    i.create = function(e) {
                        var t = {
                            controller: i,
                            detector: o.collisions,
                            buckets: {},
                            pairs: {},
                            pairsList: [],
                            bucketWidth: 48,
                            bucketHeight: 48
                        };
                        return a.extend(t, e)
                    }, i.update = function(n, i, r, o) {
                        var a, d, f, p, m, v = r.world,
                            g = n.buckets,
                            y = !1;
                        for (a = 0; a < i.length; a++) {
                            var _ = i[a];
                            if ((!_.isSleeping || o) && !(_.bounds.max.x < 0 || _.bounds.min.x > v.bounds.width || _.bounds.max.y < 0 || _.bounds.min.y > v.bounds.height)) {
                                var x = t(n, _);
                                if (!_.region || x.id !== _.region.id || o) {
                                    (!_.region || o) && (_.region = x);
                                    var b = e(x, _.region);
                                    for (d = b.startCol; d <= b.endCol; d++)
                                        for (f = b.startRow; f <= b.endRow; f++) {
                                            m = s(d, f), p = g[m];
                                            var w = d >= x.startCol && d <= x.endCol && f >= x.startRow && f <= x.endRow,
                                                T = d >= _.region.startCol && d <= _.region.endCol && f >= _.region.startRow && f <= _.region.endRow;
                                            !w && T && T && p && c(n, p, _), (_.region === x || w && !T || o) && (p || (p = u(g, m)), l(n, p, _))
                                        }
                                    _.region = x, y = !0
                                }
                            }
                        }
                        y && (n.pairsList = h(n))
                    }, i.clear = function(e) {
                        e.buckets = {}, e.pairs = {}, e.pairsList = []
                    };
                    var e = function(e, t) {
                            var i = Math.min(e.startCol, t.startCol),
                                r = Math.max(e.endCol, t.endCol),
                                o = Math.min(e.startRow, t.startRow),
                                a = Math.max(e.endRow, t.endRow);
                            return n(i, r, o, a)
                        },
                        t = function(e, t) {
                            var i = t.bounds,
                                r = Math.floor(i.min.x / e.bucketWidth),
                                o = Math.floor(i.max.x / e.bucketWidth),
                                a = Math.floor(i.min.y / e.bucketHeight),
                                s = Math.floor(i.max.y / e.bucketHeight);
                            return n(r, o, a, s)
                        },
                        n = function(e, t, n, i) {
                            return {
                                id: e + "," + t + "," + n + "," + i,
                                startCol: e,
                                endCol: t,
                                startRow: n,
                                endRow: i
                            }
                        },
                        s = function(e, t) {
                            return e + "," + t
                        },
                        u = function(e, t) {
                            var n = e[t] = [];
                            return n
                        },
                        l = function(e, t, n) {
                            for (var i = 0; i < t.length; i++) {
                                var o = t[i];
                                if (!(n.id === o.id || n.isStatic && o.isStatic)) {
                                    var a = r.id(n, o),
                                        s = e.pairs[a];
                                    s ? s[2] += 1 : e.pairs[a] = [n, o, 1]
                                }
                            }
                            t.push(n)
                        },
                        c = function(e, t, n) {
                            t.splice(a.indexOf(t, n), 1);
                            for (var i = 0; i < t.length; i++) {
                                var o = t[i],
                                    s = r.id(n, o),
                                    u = e.pairs[s];
                                u && (u[2] -= 1)
                            }
                        },
                        h = function(e) {
                            var t, n, i = [];
                            t = a.keys(e.pairs);
                            for (var r = 0; r < t.length; r++) n = e.pairs[t[r]], n[2] > 0 ? i.push(n) : delete e.pairs[t[r]];
                            return i
                        }
                }()
            }, {
                "../core/Common": 14,
                "./Detector": 5,
                "./Pair": 7
            }],
            7: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("./Contact");
                ! function() {
                    i.create = function(e, t) {
                        var n = e.bodyA,
                            r = e.bodyB,
                            o = e.parentA,
                            a = e.parentB,
                            s = {
                                id: i.id(n, r),
                                bodyA: n,
                                bodyB: r,
                                contacts: {},
                                activeContacts: [],
                                separation: 0,
                                isActive: !0,
                                timeCreated: t,
                                timeUpdated: t,
                                inverseMass: o.inverseMass + a.inverseMass,
                                friction: Math.min(o.friction, a.friction),
                                frictionStatic: Math.max(o.frictionStatic, a.frictionStatic),
                                restitution: Math.max(o.restitution, a.restitution),
                                slop: Math.max(o.slop, a.slop)
                            };
                        return i.update(s, e, t), s
                    }, i.update = function(e, t, n) {
                        var o = e.contacts,
                            a = t.supports,
                            s = e.activeContacts,
                            u = t.parentA,
                            l = t.parentB;
                        if (e.collision = t, e.inverseMass = u.inverseMass + l.inverseMass, e.friction = Math.min(u.friction, l.friction), e.frictionStatic = Math.max(u.frictionStatic, l.frictionStatic), e.restitution = Math.max(u.restitution, l.restitution), e.slop = Math.max(u.slop, l.slop), s.length = 0, t.collided) {
                            for (var c = 0; c < a.length; c++) {
                                var h = a[c],
                                    d = r.id(h),
                                    f = o[d];
                                f ? s.push(f) : s.push(o[d] = r.create(h))
                            }
                            e.separation = t.depth, i.setActive(e, !0, n)
                        } else e.isActive === !0 && i.setActive(e, !1, n)
                    }, i.setActive = function(e, t, n) {
                        t ? (e.isActive = !0, e.timeUpdated = n) : (e.isActive = !1, e.activeContacts.length = 0)
                    }, i.id = function(e, t) {
                        return e.id < t.id ? e.id + "_" + t.id : t.id + "_" + e.id
                    }
                }()
            }, {
                "./Contact": 4
            }],
            8: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("./Pair"),
                    o = e("../core/Common");
                ! function() {
                    var e = 1e3;
                    i.create = function(e) {
                        return o.extend({
                            table: {},
                            list: [],
                            collisionStart: [],
                            collisionActive: [],
                            collisionEnd: []
                        }, e)
                    }, i.update = function(e, t, n) {
                        var i, a, s, u, l = e.list,
                            c = e.table,
                            h = e.collisionStart,
                            d = e.collisionEnd,
                            f = e.collisionActive,
                            p = [];
                        for (h.length = 0, d.length = 0, f.length = 0, u = 0; u < t.length; u++) i = t[u], i.collided && (a = r.id(i.bodyA, i.bodyB), p.push(a), s = c[a], s ? (s.isActive ? f.push(s) : h.push(s), r.update(s, i, n)) : (s = r.create(i, n), c[a] = s, h.push(s), l.push(s)));
                        for (u = 0; u < l.length; u++) s = l[u], s.isActive && -1 === o.indexOf(p, s.id) && (r.setActive(s, !1, n), d.push(s))
                    }, i.removeOld = function(t, n) {
                        var i, r, o, a, s = t.list,
                            u = t.table,
                            l = [];
                        for (a = 0; a < s.length; a++) i = s[a], r = i.collision, r.bodyA.isSleeping || r.bodyB.isSleeping ? i.timeUpdated = n : n - i.timeUpdated > e && l.push(a);
                        for (a = 0; a < l.length; a++) o = l[a] - a, i = s[o], delete u[i.id], s.splice(o, 1)
                    }, i.clear = function(e) {
                        return e.table = {}, e.list.length = 0, e.collisionStart.length = 0, e.collisionActive.length = 0, e.collisionEnd.length = 0, e
                    }
                }()
            }, {
                "../core/Common": 14,
                "./Pair": 7
            }],
            9: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../geometry/Vector"),
                    o = e("./SAT"),
                    a = e("../geometry/Bounds"),
                    s = e("../factory/Bodies"),
                    u = e("../geometry/Vertices");
                ! function() {
                    i.ray = function(e, t, n, i) {
                        i = i || 1e-100;
                        for (var u = r.angle(t, n), l = r.magnitude(r.sub(t, n)), c = .5 * (n.x + t.x), h = .5 * (n.y + t.y), d = s.rectangle(c, h, l, i, {
                                angle: u
                            }), f = [], p = 0; p < e.length; p++) {
                            var m = e[p];
                            if (a.overlaps(m.bounds, d.bounds))
                                for (var v = 1 === m.parts.length ? 0 : 1; v < m.parts.length; v++) {
                                    var g = m.parts[v];
                                    if (a.overlaps(g.bounds, d.bounds)) {
                                        var y = o.collides(g, d);
                                        if (y.collided) {
                                            y.body = y.bodyA = y.bodyB = m, f.push(y);
                                            break
                                        }
                                    }
                                }
                        }
                        return f
                    }, i.region = function(e, t, n) {
                        for (var i = [], r = 0; r < e.length; r++) {
                            var o = e[r],
                                s = a.overlaps(o.bounds, t);
                            (s && !n || !s && n) && i.push(o)
                        }
                        return i
                    }, i.point = function(e, t) {
                        for (var n = [], i = 0; i < e.length; i++) {
                            var r = e[i];
                            if (a.contains(r.bounds, t))
                                for (var o = 1 === r.parts.length ? 0 : 1; o < r.parts.length; o++) {
                                    var s = r.parts[o];
                                    if (a.contains(s.bounds, t) && u.contains(s.vertices, t)) {
                                        n.push(r);
                                        break
                                    }
                                }
                        }
                        return n
                    }
                }()
            }, {
                "../factory/Bodies": 21,
                "../geometry/Bounds": 24,
                "../geometry/Vector": 26,
                "../geometry/Vertices": 27,
                "./SAT": 11
            }],
            10: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../geometry/Vertices"),
                    o = e("../geometry/Vector"),
                    a = e("../core/Common"),
                    s = e("../geometry/Bounds");
                ! function() {
                    i._restingThresh = 4, i._restingThreshTangent = 6, i._positionDampen = .9, i._positionWarming = .8, i._frictionNormalMultiplier = 5, i.preSolvePosition = function(e) {
                        var t, n, i;
                        for (t = 0; t < e.length; t++) n = e[t], n.isActive && (i = n.activeContacts.length, n.collision.parentA.totalContacts += i, n.collision.parentB.totalContacts += i)
                    }, i.solvePosition = function(e, t) {
                        var n, r, a, s, u, l, c, h, d, f = o._temp[0],
                            p = o._temp[1],
                            m = o._temp[2],
                            v = o._temp[3];
                        for (n = 0; n < e.length; n++) r = e[n], r.isActive && (a = r.collision, s = a.parentA, u = a.parentB, l = a.normal, c = o.sub(o.add(u.positionImpulse, u.position, f), o.add(s.positionImpulse, o.sub(u.position, a.penetration, p), m), v), r.separation = o.dot(l, c));
                        for (n = 0; n < e.length; n++) r = e[n], !r.isActive || r.separation < 0 || (a = r.collision, s = a.parentA, u = a.parentB, l = a.normal, d = (r.separation - r.slop) * t, (s.isStatic || u.isStatic) && (d *= 2), s.isStatic || s.isSleeping || (h = i._positionDampen / s.totalContacts, s.positionImpulse.x += l.x * d * h, s.positionImpulse.y += l.y * d * h), u.isStatic || u.isSleeping || (h = i._positionDampen / u.totalContacts, u.positionImpulse.x -= l.x * d * h, u.positionImpulse.y -= l.y * d * h))
                    }, i.postSolvePosition = function(e) {
                        for (var t = 0; t < e.length; t++) {
                            var n = e[t];
                            if (n.totalContacts = 0, 0 !== n.positionImpulse.x || 0 !== n.positionImpulse.y) {
                                for (var a = 0; a < n.parts.length; a++) {
                                    var u = n.parts[a];
                                    r.translate(u.vertices, n.positionImpulse), s.update(u.bounds, u.vertices, n.velocity), u.position.x += n.positionImpulse.x, u.position.y += n.positionImpulse.y
                                }
                                n.positionPrev.x += n.positionImpulse.x, n.positionPrev.y += n.positionImpulse.y, o.dot(n.positionImpulse, n.velocity) < 0 ? (n.positionImpulse.x = 0, n.positionImpulse.y = 0) : (n.positionImpulse.x *= i._positionWarming, n.positionImpulse.y *= i._positionWarming)
                            }
                        }
                    }, i.preSolveVelocity = function(e) {
                        var t, n, i, r, a, s, u, l, c, h, d, f, p, m, v = o._temp[0],
                            g = o._temp[1];
                        for (t = 0; t < e.length; t++)
                            if (i = e[t], i.isActive)
                                for (r = i.activeContacts, a = i.collision, s = a.parentA, u = a.parentB, l = a.normal, c = a.tangent, n = 0; n < r.length; n++) h = r[n], d = h.vertex, f = h.normalImpulse, p = h.tangentImpulse, (0 !== f || 0 !== p) && (v.x = l.x * f + c.x * p, v.y = l.y * f + c.y * p, s.isStatic || s.isSleeping || (m = o.sub(d, s.position, g), s.positionPrev.x += v.x * s.inverseMass, s.positionPrev.y += v.y * s.inverseMass, s.anglePrev += o.cross(m, v) * s.inverseInertia), u.isStatic || u.isSleeping || (m = o.sub(d, u.position, g), u.positionPrev.x -= v.x * u.inverseMass, u.positionPrev.y -= v.y * u.inverseMass, u.anglePrev -= o.cross(m, v) * u.inverseInertia))
                    }, i.solveVelocity = function(e, t) {
                        for (var n = t * t, r = o._temp[0], s = o._temp[1], u = o._temp[2], l = o._temp[3], c = o._temp[4], h = o._temp[5], d = 0; d < e.length; d++) {
                            var f = e[d];
                            if (f.isActive) {
                                var p = f.collision,
                                    m = p.parentA,
                                    v = p.parentB,
                                    g = p.normal,
                                    y = p.tangent,
                                    _ = f.activeContacts,
                                    x = 1 / _.length;
                                m.velocity.x = m.position.x - m.positionPrev.x, m.velocity.y = m.position.y - m.positionPrev.y, v.velocity.x = v.position.x - v.positionPrev.x, v.velocity.y = v.position.y - v.positionPrev.y, m.angularVelocity = m.angle - m.anglePrev, v.angularVelocity = v.angle - v.anglePrev;
                                for (var b = 0; b < _.length; b++) {
                                    var w = _[b],
                                        T = w.vertex,
                                        E = o.sub(T, m.position, s),
                                        S = o.sub(T, v.position, u),
                                        M = o.add(m.velocity, o.mult(o.perp(E), m.angularVelocity), l),
                                        P = o.add(v.velocity, o.mult(o.perp(S), v.angularVelocity), c),
                                        A = o.sub(M, P, h),
                                        C = o.dot(g, A),
                                        R = o.dot(y, A),
                                        L = Math.abs(R),
                                        O = a.sign(R),
                                        k = (1 + f.restitution) * C,
                                        D = a.clamp(f.separation + C, 0, 1) * i._frictionNormalMultiplier,
                                        F = R,
                                        B = 1 / 0;
                                    L > f.friction * f.frictionStatic * D * n && (B = L, F = a.clamp(f.friction * O * n, -B, B));
                                    var I = o.cross(E, g),
                                        U = o.cross(S, g),
                                        N = x / (m.inverseMass + v.inverseMass + m.inverseInertia * I * I + v.inverseInertia * U * U);
                                    if (k *= N, F *= N, 0 > C && C * C > i._restingThresh * n) w.normalImpulse = 0;
                                    else {
                                        var z = w.normalImpulse;
                                        w.normalImpulse = Math.min(w.normalImpulse + k, 0), k = w.normalImpulse - z
                                    }
                                    if (R * R > i._restingThreshTangent * n) w.tangentImpulse = 0;
                                    else {
                                        var V = w.tangentImpulse;
                                        w.tangentImpulse = a.clamp(w.tangentImpulse + F, -B, B), F = w.tangentImpulse - V
                                    }
                                    r.x = g.x * k + y.x * F, r.y = g.y * k + y.y * F, m.isStatic || m.isSleeping || (m.positionPrev.x += r.x * m.inverseMass, m.positionPrev.y += r.y * m.inverseMass, m.anglePrev += o.cross(E, r) * m.inverseInertia), v.isStatic || v.isSleeping || (v.positionPrev.x -= r.x * v.inverseMass, v.positionPrev.y -= r.y * v.inverseMass, v.anglePrev -= o.cross(S, r) * v.inverseInertia)
                                }
                            }
                        }
                    }
                }()
            }, {
                "../core/Common": 14,
                "../geometry/Bounds": 24,
                "../geometry/Vector": 26,
                "../geometry/Vertices": 27
            }],
            11: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../geometry/Vertices"),
                    o = e("../geometry/Vector");
                ! function() {
                    i.collides = function(t, i, a) {
                        var s, u, l, c, h = a,
                            d = !1;
                        if (h) {
                            var f = t.parent,
                                p = i.parent,
                                m = f.speed * f.speed + f.angularSpeed * f.angularSpeed + p.speed * p.speed + p.angularSpeed * p.angularSpeed;
                            d = h && h.collided && .2 > m, c = h
                        } else c = {
                            collided: !1,
                            bodyA: t,
                            bodyB: i
                        };
                        if (h && d) {
                            var v = c.axisBody,
                                g = v === t ? i : t,
                                y = [v.axes[h.axisNumber]];
                            if (l = e(v.vertices, g.vertices, y), c.reused = !0, l.overlap <= 0) return c.collided = !1, c
                        } else {
                            if (s = e(t.vertices, i.vertices, t.axes), s.overlap <= 0) return c.collided = !1, c;
                            if (u = e(i.vertices, t.vertices, i.axes), u.overlap <= 0) return c.collided = !1, c;
                            s.overlap < u.overlap ? (l = s, c.axisBody = t) : (l = u, c.axisBody = i), c.axisNumber = l.axisNumber
                        }
                        c.bodyA = t.id < i.id ? t : i, c.bodyB = t.id < i.id ? i : t, c.collided = !0, c.normal = l.axis, c.depth = l.overlap, c.parentA = c.bodyA.parent, c.parentB = c.bodyB.parent, t = c.bodyA, i = c.bodyB, o.dot(c.normal, o.sub(i.position, t.position)) > 0 && (c.normal = o.neg(c.normal)), c.tangent = o.perp(c.normal), c.penetration = {
                            x: c.normal.x * c.depth,
                            y: c.normal.y * c.depth
                        };
                        var _ = n(t, i, c.normal),
                            x = c.supports || [];
                        if (x.length = 0, r.contains(t.vertices, _[0]) && x.push(_[0]), r.contains(t.vertices, _[1]) && x.push(_[1]), x.length < 2) {
                            var b = n(i, t, o.neg(c.normal));
                            r.contains(i.vertices, b[0]) && x.push(b[0]), x.length < 2 && r.contains(i.vertices, b[1]) && x.push(b[1])
                        }
                        return x.length < 1 && (x = [_[0]]), c.supports = x, c
                    };
                    var e = function(e, n, i) {
                            for (var r, a, s = o._temp[0], u = o._temp[1], l = {
                                    overlap: Number.MAX_VALUE
                                }, c = 0; c < i.length; c++) {
                                if (a = i[c], t(s, e, a), t(u, n, a), r = Math.min(s.max - u.min, u.max - s.min), 0 >= r) return l.overlap = r, l;
                                r < l.overlap && (l.overlap = r, l.axis = a, l.axisNumber = c)
                            }
                            return l
                        },
                        t = function(e, t, n) {
                            for (var i = o.dot(t[0], n), r = i, a = 1; a < t.length; a += 1) {
                                var s = o.dot(t[a], n);
                                s > r ? r = s : i > s && (i = s)
                            }
                            e.min = i, e.max = r
                        },
                        n = function(e, t, n) {
                            for (var i, r, a, s, u = Number.MAX_VALUE, l = o._temp[0], c = t.vertices, h = e.position, d = 0; d < c.length; d++) r = c[d], l.x = r.x - h.x, l.y = r.y - h.y, i = -o.dot(n, l), u > i && (u = i, a = r);
                            var f = a.index - 1 >= 0 ? a.index - 1 : c.length - 1;
                            r = c[f], l.x = r.x - h.x, l.y = r.y - h.y, u = -o.dot(n, l), s = r;
                            var p = (a.index + 1) % c.length;
                            return r = c[p], l.x = r.x - h.x, l.y = r.y - h.y, i = -o.dot(n, l), u > i && (s = r), [a, s]
                        }
                }()
            }, {
                "../geometry/Vector": 26,
                "../geometry/Vertices": 27
            }],
            12: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../geometry/Vertices"),
                    o = e("../geometry/Vector"),
                    a = e("../core/Sleeping"),
                    s = e("../geometry/Bounds"),
                    u = e("../geometry/Axes"),
                    l = e("../core/Common");
                ! function() {
                    var e = 1e-6,
                        t = .001;
                    i.create = function(t) {
                        var n = t;
                        n.bodyA && !n.pointA && (n.pointA = {
                            x: 0,
                            y: 0
                        }), n.bodyB && !n.pointB && (n.pointB = {
                            x: 0,
                            y: 0
                        });
                        var i = n.bodyA ? o.add(n.bodyA.position, n.pointA) : n.pointA,
                            r = n.bodyB ? o.add(n.bodyB.position, n.pointB) : n.pointB,
                            a = o.magnitude(o.sub(i, r));
                        n.length = n.length || a || e;
                        var s = {
                            visible: !0,
                            lineWidth: 2,
                            strokeStyle: "#666"
                        };
                        return n.render = l.extend(s, n.render), n.id = n.id || l.nextId(), n.label = n.label || "Constraint", n.type = "constraint", n.stiffness = n.stiffness || 1, n.angularStiffness = n.angularStiffness || 0, n.angleA = n.bodyA ? n.bodyA.angle : n.angleA, n.angleB = n.bodyB ? n.bodyB.angle : n.angleB, n
                    }, i.solveAll = function(e, t) {
                        for (var n = 0; n < e.length; n++) i.solve(e[n], t)
                    }, i.solve = function(n, i) {
                        var r = n.bodyA,
                            a = n.bodyB,
                            s = n.pointA,
                            u = n.pointB;
                        r && !r.isStatic && (n.pointA = o.rotate(s, r.angle - n.angleA), n.angleA = r.angle), a && !a.isStatic && (n.pointB = o.rotate(u, a.angle - n.angleB), n.angleB = a.angle);
                        var l = s,
                            c = u;
                        if (r && (l = o.add(r.position, s)), a && (c = o.add(a.position, u)), l && c) {
                            var h = o.sub(l, c),
                                d = o.magnitude(h);
                            0 === d && (d = e);
                            var f = (d - n.length) / d,
                                p = o.div(h, d),
                                m = o.mult(h, .5 * f * n.stiffness * i * i);
                            if (!(Math.abs(1 - d / n.length) < t * i)) {
                                var v, g, y, _, x, b, w, T;
                                r && !r.isStatic ? (y = {
                                    x: l.x - r.position.x + m.x,
                                    y: l.y - r.position.y + m.y
                                }, r.velocity.x = r.position.x - r.positionPrev.x, r.velocity.y = r.position.y - r.positionPrev.y, r.angularVelocity = r.angle - r.anglePrev, v = o.add(r.velocity, o.mult(o.perp(y), r.angularVelocity)), x = o.dot(y, p), w = r.inverseMass + r.inverseInertia * x * x) : (v = {
                                    x: 0,
                                    y: 0
                                }, w = r ? r.inverseMass : 0), a && !a.isStatic ? (_ = {
                                    x: c.x - a.position.x - m.x,
                                    y: c.y - a.position.y - m.y
                                }, a.velocity.x = a.position.x - a.positionPrev.x, a.velocity.y = a.position.y - a.positionPrev.y, a.angularVelocity = a.angle - a.anglePrev, g = o.add(a.velocity, o.mult(o.perp(_), a.angularVelocity)), b = o.dot(_, p), T = a.inverseMass + a.inverseInertia * b * b) : (g = {
                                    x: 0,
                                    y: 0
                                }, T = a ? a.inverseMass : 0);
                                var E = o.sub(g, v),
                                    S = o.dot(p, E) / (w + T);
                                S > 0 && (S = 0);
                                var M, P = {
                                    x: p.x * S,
                                    y: p.y * S
                                };
                                r && !r.isStatic && (M = o.cross(y, P) * r.inverseInertia * (1 - n.angularStiffness), r.constraintImpulse.x -= m.x, r.constraintImpulse.y -= m.y, r.constraintImpulse.angle += M, r.position.x -= m.x, r.position.y -= m.y, r.angle += M), a && !a.isStatic && (M = o.cross(_, P) * a.inverseInertia * (1 - n.angularStiffness), a.constraintImpulse.x += m.x, a.constraintImpulse.y += m.y, a.constraintImpulse.angle -= M, a.position.x += m.x, a.position.y += m.y, a.angle -= M)
                            }
                        }
                    }, i.postSolveAll = function(e) {
                        for (var t = 0; t < e.length; t++) {
                            var n = e[t],
                                i = n.constraintImpulse;
                            if (0 !== i.x || 0 !== i.y || 0 !== i.angle) {
                                a.set(n, !1);
                                for (var l = 0; l < n.parts.length; l++) {
                                    var c = n.parts[l];
                                    r.translate(c.vertices, i), l > 0 && (c.position.x += i.x, c.position.y += i.y), 0 !== i.angle && (r.rotate(c.vertices, i.angle, n.position), u.rotate(c.axes, i.angle), l > 0 && o.rotateAbout(c.position, i.angle, n.position, c.position)), s.update(c.bounds, c.vertices, n.velocity)
                                }
                                i.angle = 0, i.x = 0, i.y = 0
                            }
                        }
                    }
                }()
            }, {
                "../core/Common": 14,
                "../core/Sleeping": 20,
                "../geometry/Axes": 23,
                "../geometry/Bounds": 24,
                "../geometry/Vector": 26,
                "../geometry/Vertices": 27
            }],
            13: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../geometry/Vertices"),
                    o = e("../core/Sleeping"),
                    a = e("../core/Mouse"),
                    s = e("../core/Events"),
                    u = e("../collision/Detector"),
                    l = e("./Constraint"),
                    c = e("../body/Composite"),
                    h = e("../core/Common"),
                    d = e("../geometry/Bounds");
                ! function() {
                    i.create = function(t, n) {
                        var r = (t ? t.mouse : null) || (n ? n.mouse : null);
                        r || (t && t.render && t.render.canvas ? r = a.create(t.render.canvas) : (r = a.create(), h.log("MouseConstraint.create: options.mouse was undefined, engine.render.canvas was undefined, may not function as expected", "warn")));
                        var o = l.create({
                                label: "Mouse Constraint",
                                pointA: r.position,
                                pointB: {
                                    x: 0,
                                    y: 0
                                },
                                length: .01,
                                stiffness: .1,
                                angularStiffness: 1,
                                render: {
                                    strokeStyle: "#90EE90",
                                    lineWidth: 3
                                }
                            }),
                            u = {
                                type: "mouseConstraint",
                                mouse: r,
                                body: null,
                                constraint: o,
                                collisionFilter: {
                                    category: 1,
                                    mask: 4294967295,
                                    group: 0
                                }
                            },
                            d = h.extend(u, n);
                        return s.on(t, "tick", function() {
                            var n = c.allBodies(t.world);
                            i.update(d, n), e(d)
                        }), d
                    }, i.update = function(e, t) {
                        var n = e.mouse,
                            i = e.constraint,
                            a = e.body;
                        if (0 === n.button) {
                            if (i.bodyB) o.set(i.bodyB, !1), i.pointA = n.position;
                            else
                                for (var l = 0; l < t.length; l++)
                                    if (a = t[l], d.contains(a.bounds, n.position) && u.canCollide(a.collisionFilter, e.collisionFilter))
                                        for (var c = a.parts.length > 1 ? 1 : 0; c < a.parts.length; c++) {
                                            var h = a.parts[c];
                                            if (r.contains(h.vertices, n.position)) {
                                                i.pointA = n.position, i.bodyB = e.body = a, i.pointB = {
                                                    x: n.position.x - a.position.x,
                                                    y: n.position.y - a.position.y
                                                }, i.angleB = a.angle, o.set(a, !1), s.trigger(e, "startdrag", {
                                                    mouse: n,
                                                    body: a
                                                });
                                                break
                                            }
                                        }
                        } else i.bodyB = e.body = null, i.pointB = null, a && s.trigger(e, "enddrag", {
                            mouse: n,
                            body: a
                        })
                    };
                    var e = function(e) {
                        var t = e.mouse,
                            n = t.sourceEvents;
                        n.mousemove && s.trigger(e, "mousemove", {
                            mouse: t
                        }), n.mousedown && s.trigger(e, "mousedown", {
                            mouse: t
                        }), n.mouseup && s.trigger(e, "mouseup", {
                            mouse: t
                        }), a.clearSourceEvents(t)
                    }
                }()
            }, {
                "../body/Composite": 2,
                "../collision/Detector": 5,
                "../core/Common": 14,
                "../core/Events": 16,
                "../core/Mouse": 18,
                "../core/Sleeping": 20,
                "../geometry/Bounds": 24,
                "../geometry/Vertices": 27,
                "./Constraint": 12
            }],
            14: [function(e, t, n) {
                var i = {};
                t.exports = i,
                    function() {
                        i._nextId = 0, i._seed = 0, i.extend = function(e, t) {
                            var n, r, o;
                            "boolean" == typeof t ? (n = 2, o = t) : (n = 1, o = !0), r = Array.prototype.slice.call(arguments, n);
                            for (var a = 0; a < r.length; a++) {
                                var s = r[a];
                                if (s)
                                    for (var u in s) o && s[u] && s[u].constructor === Object ? e[u] && e[u].constructor !== Object ? e[u] = s[u] : (e[u] = e[u] || {}, i.extend(e[u], o, s[u])) : e[u] = s[u]
                            }
                            return e
                        }, i.clone = function(e, t) {
                            return i.extend({}, t, e)
                        }, i.keys = function(e) {
                            if (Object.keys) return Object.keys(e);
                            var t = [];
                            for (var n in e) t.push(n);
                            return t
                        }, i.values = function(e) {
                            var t = [];
                            if (Object.keys) {
                                for (var n = Object.keys(e), i = 0; i < n.length; i++) t.push(e[n[i]]);
                                return t
                            }
                            for (var r in e) t.push(e[r]);
                            return t
                        }, i.shadeColor = function(e, t) {
                            var n = parseInt(e.slice(1), 16),
                                i = Math.round(2.55 * t),
                                r = (n >> 16) + i,
                                o = (n >> 8 & 255) + i,
                                a = (255 & n) + i;
                            return "#" + (16777216 + 65536 * (255 > r ? 1 > r ? 0 : r : 255) + 256 * (255 > o ? 1 > o ? 0 : o : 255) + (255 > a ? 1 > a ? 0 : a : 255)).toString(16).slice(1)
                        }, i.shuffle = function(e) {
                            for (var t = e.length - 1; t > 0; t--) {
                                var n = Math.floor(i.random() * (t + 1)),
                                    r = e[t];
                                e[t] = e[n], e[n] = r
                            }
                            return e
                        }, i.choose = function(e) {
                            return e[Math.floor(i.random() * e.length)]
                        }, i.isElement = function(e) {
                            try {
                                return e instanceof HTMLElement
                            } catch (t) {
                                return "object" == typeof e && 1 === e.nodeType && "object" == typeof e.style && "object" == typeof e.ownerDocument
                            }
                        }, i.isArray = function(e) {
                            return "[object Array]" === Object.prototype.toString.call(e)
                        }, i.clamp = function(e, t, n) {
                            return t > e ? t : e > n ? n : e
                        }, i.sign = function(e) {
                            return 0 > e ? -1 : 1
                        }, i.now = function() {
                            var e = window.performance || {};
                            return e.now = function() {
                                return e.now || e.webkitNow || e.msNow || e.oNow || e.mozNow || function() {
                                    return +new Date
                                }
                            }(), e.now()
                        }, i.random = function(t, n) {
                            return t = "undefined" != typeof t ? t : 0, n = "undefined" != typeof n ? n : 1, t + e() * (n - t)
                        }, i.colorToNumber = function(e) {
                            return e = e.replace("#", ""), 3 == e.length && (e = e.charAt(0) + e.charAt(0) + e.charAt(1) + e.charAt(1) + e.charAt(2) + e.charAt(2)), parseInt(e, 16)
                        }, i.log = function(e, t) {
                            if (console && console.log && console.warn) switch (t) {
                                case "warn":
                                    console.warn("Matter.js:", e);
                                    break;
                                case "error":
                                    console.log("Matter.js:", e)
                            }
                        }, i.nextId = function() {
                            return i._nextId++
                        }, i.indexOf = function(e, t) {
                            if (e.indexOf) return e.indexOf(t);
                            for (var n = 0; n < e.length; n++)
                                if (e[n] === t) return n;
                            return -1
                        };
                        var e = function() {
                            return i._seed = (9301 * i._seed + 49297) % 233280, i._seed / 233280
                        }
                    }()
            }, {}],
            15: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../body/World"),
                    o = e("./Sleeping"),
                    a = e("../collision/Resolver"),
                    s = e("../render/Render"),
                    u = e("../collision/Pairs"),
                    l = (e("./Metrics"), e("../collision/Grid")),
                    c = e("./Events"),
                    h = e("../body/Composite"),
                    d = e("../constraint/Constraint"),
                    f = e("./Common"),
                    p = e("../body/Body");
                ! function() {
                    i.create = function(e, t) {
                        t = f.isElement(e) ? t : e, e = f.isElement(e) ? e : null;
                        var n = {
                                positionIterations: 6,
                                velocityIterations: 4,
                                constraintIterations: 2,
                                enableSleeping: !1,
                                events: [],
                                timing: {
                                    timestamp: 0,
                                    timeScale: 1
                                },
                                broadphase: {
                                    controller: l
                                }
                            },
                            i = f.extend(n, t);
                        if (e || i.render) {
                            var o = {
                                element: e,
                                controller: s
                            };
                            i.render = f.extend(o, i.render)
                        }
                        return i.render && i.render.controller && (i.render = i.render.controller.create(i.render)), i.world = r.create(i.world), i.pairs = u.create(), i.broadphase = i.broadphase.controller.create(i.broadphase), i.metrics = i.metrics || {
                            extended: !1
                        }, i
                    }, i.update = function(i, r, s) {
                        s = "undefined" != typeof s ? s : 1;
                        var l, f = i.world,
                            p = i.timing,
                            m = i.broadphase,
                            v = [];
                        p.timestamp += r * p.timeScale;
                        var g = {
                            timestamp: p.timestamp
                        };
                        c.trigger(i, "beforeUpdate", g);
                        var y = h.allBodies(f),
                            _ = h.allConstraints(f);
                        for (i.enableSleeping && o.update(y, p.timeScale), t(y, f.gravity), n(y, r, p.timeScale, s, f.bounds), l = 0; l < i.constraintIterations; l++) d.solveAll(_, p.timeScale);
                        d.postSolveAll(y), m.controller ? (f.isModified && m.controller.clear(m), m.controller.update(m, y, i, f.isModified), v = m.pairsList) : v = y;
                        var x = m.detector(v, i),
                            b = i.pairs,
                            w = p.timestamp;
                        for (u.update(b, x, w), u.removeOld(b, w), i.enableSleeping && o.afterCollisions(b.list, p.timeScale), b.collisionStart.length > 0 && c.trigger(i, "collisionStart", {
                                pairs: b.collisionStart
                            }), a.preSolvePosition(b.list), l = 0; l < i.positionIterations; l++) a.solvePosition(b.list, p.timeScale);
                        for (a.postSolvePosition(y), a.preSolveVelocity(b.list), l = 0; l < i.velocityIterations; l++) a.solveVelocity(b.list, p.timeScale);
                        return b.collisionActive.length > 0 && c.trigger(i, "collisionActive", {
                            pairs: b.collisionActive
                        }), b.collisionEnd.length > 0 && c.trigger(i, "collisionEnd", {
                            pairs: b.collisionEnd
                        }), e(y), f.isModified && h.setModified(f, !1, !1, !0), c.trigger(i, "afterUpdate", g), i
                    }, i.merge = function(e, t) {
                        if (f.extend(e, t), t.world) {
                            e.world = t.world, i.clear(e);
                            for (var n = h.allBodies(e.world), r = 0; r < n.length; r++) {
                                var a = n[r];
                                o.set(a, !1), a.id = f.nextId()
                            }
                        }
                    }, i.clear = function(e) {
                        var t = e.world;
                        u.clear(e.pairs);
                        var n = e.broadphase;
                        if (n.controller) {
                            var i = h.allBodies(t);
                            n.controller.clear(n), n.controller.update(n, i, e, !0)
                        }
                    };
                    var e = function(e) {
                            for (var t = 0; t < e.length; t++) {
                                var n = e[t];
                                n.force.x = 0, n.force.y = 0, n.torque = 0
                            }
                        },
                        t = function(e, t) {
                            var n = "undefined" != typeof t.scale ? t.scale : .001;
                            if ((0 !== t.x || 0 !== t.y) && 0 !== n)
                                for (var i = 0; i < e.length; i++) {
                                    var r = e[i];
                                    r.isStatic || r.isSleeping || (r.force.y += r.mass * t.y * n, r.force.x += r.mass * t.x * n)
                                }
                        },
                        n = function(e, t, n, i, r) {
                            for (var o = 0; o < e.length; o++) {
                                var a = e[o];
                                a.isStatic || a.isSleeping || p.update(a, t, n, i)
                            }
                        }
                }()
            }, {
                "../body/Body": 1,
                "../body/Composite": 2,
                "../body/World": 3,
                "../collision/Grid": 6,
                "../collision/Pairs": 8,
                "../collision/Resolver": 10,
                "../constraint/Constraint": 12,
                "../render/Render": 29,
                "./Common": 14,
                "./Events": 16,
                "./Metrics": 17,
                "./Sleeping": 20
            }],
            16: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("./Common");
                ! function() {
                    i.on = function(e, t, n) {
                        for (var i, r = t.split(" "), o = 0; o < r.length; o++) i = r[o], e.events = e.events || {}, e.events[i] = e.events[i] || [], e.events[i].push(n);
                        return n
                    }, i.off = function(e, t, n) {
                        if (!t) return void(e.events = {});
                        "function" == typeof t && (n = t, t = r.keys(e.events).join(" "));
                        for (var i = t.split(" "), o = 0; o < i.length; o++) {
                            var a = e.events[i[o]],
                                s = [];
                            if (n && a)
                                for (var u = 0; u < a.length; u++) a[u] !== n && s.push(a[u]);
                            e.events[i[o]] = s
                        }
                    }, i.trigger = function(e, t, n) {
                        var i, o, a, s;
                        if (e.events) {
                            n || (n = {}), i = t.split(" ");
                            for (var u = 0; u < i.length; u++)
                                if (o = i[u], a = e.events[o]) {
                                    s = r.clone(n, !1), s.name = o, s.source = e;
                                    for (var l = 0; l < a.length; l++) a[l].apply(e, [s])
                                }
                        }
                    }
                }()
            }, {
                "./Common": 14
            }],
            17: [function(e, t, n) {}, {
                "../body/Composite": 2,
                "./Common": 14
            }],
            18: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../core/Common");
                ! function() {
                    i.create = function(t) {
                        var n = {};
                        return t || r.log("Mouse.create: element was undefined, defaulting to document.body", "warn"), n.element = t || document.body, n.absolute = {
                            x: 0,
                            y: 0
                        }, n.position = {
                            x: 0,
                            y: 0
                        }, n.mousedownPosition = {
                            x: 0,
                            y: 0
                        }, n.mouseupPosition = {
                            x: 0,
                            y: 0
                        }, n.offset = {
                            x: 0,
                            y: 0
                        }, n.scale = {
                            x: 1,
                            y: 1
                        }, n.wheelDelta = 0, n.button = -1, n.pixelRatio = n.element.getAttribute("data-pixel-ratio") || 1, n.sourceEvents = {
                            mousemove: null,
                            mousedown: null,
                            mouseup: null,
                            mousewheel: null
                        }, n.mousemove = function(t) {
                            var i = e(t, n.element, n.pixelRatio),
                                r = t.changedTouches;
                            r && (n.button = 0, t.preventDefault()), n.absolute.x = i.x, n.absolute.y = i.y, n.position.x = n.absolute.x * n.scale.x + n.offset.x, n.position.y = n.absolute.y * n.scale.y + n.offset.y, n.sourceEvents.mousemove = t
                        }, n.mousedown = function(t) {
                            var i = e(t, n.element, n.pixelRatio),
                                r = t.changedTouches;
                            r ? (n.button = 0, t.preventDefault()) : n.button = t.button, n.absolute.x = i.x, n.absolute.y = i.y, n.position.x = n.absolute.x * n.scale.x + n.offset.x, n.position.y = n.absolute.y * n.scale.y + n.offset.y, n.mousedownPosition.x = n.position.x, n.mousedownPosition.y = n.position.y, n.sourceEvents.mousedown = t
                        }, n.mouseup = function(t) {
                            var i = e(t, n.element, n.pixelRatio),
                                r = t.changedTouches;
                            r && t.preventDefault(), n.button = -1, n.absolute.x = i.x, n.absolute.y = i.y, n.position.x = n.absolute.x * n.scale.x + n.offset.x, n.position.y = n.absolute.y * n.scale.y + n.offset.y, n.mouseupPosition.x = n.position.x, n.mouseupPosition.y = n.position.y, n.sourceEvents.mouseup = t
                        }, n.mousewheel = function(e) {
                            n.wheelDelta = Math.max(-1, Math.min(1, e.wheelDelta || -e.detail)), e.preventDefault()
                        }, i.setElement(n, n.element), n
                    }, i.setElement = function(e, t) {
                        e.element = t, t.addEventListener("mousemove", e.mousemove), t.addEventListener("mousedown", e.mousedown), t.addEventListener("mouseup", e.mouseup), t.addEventListener("mousewheel", e.mousewheel), t.addEventListener("DOMMouseScroll", e.mousewheel), t.addEventListener("touchmove", e.mousemove), t.addEventListener("touchstart", e.mousedown), t.addEventListener("touchend", e.mouseup)
                    }, i.clearSourceEvents = function(e) {
                        e.sourceEvents.mousemove = null, e.sourceEvents.mousedown = null, e.sourceEvents.mouseup = null, e.sourceEvents.mousewheel = null, e.wheelDelta = 0
                    }, i.setOffset = function(e, t) {
                        e.offset.x = t.x, e.offset.y = t.y, e.position.x = e.absolute.x * e.scale.x + e.offset.x, e.position.y = e.absolute.y * e.scale.y + e.offset.y
                    }, i.setScale = function(e, t) {
                        e.scale.x = t.x, e.scale.y = t.y, e.position.x = e.absolute.x * e.scale.x + e.offset.x, e.position.y = e.absolute.y * e.scale.y + e.offset.y
                    };
                    var e = function(e, t, n) {
                        var i, r, o = t.getBoundingClientRect(),
                            a = document.documentElement || document.body.parentNode || document.body,
                            s = void 0 !== window.pageXOffset ? window.pageXOffset : a.scrollLeft,
                            u = void 0 !== window.pageYOffset ? window.pageYOffset : a.scrollTop,
                            l = e.changedTouches;
                        return l ? (i = l[0].pageX - o.left - s, r = l[0].pageY - o.top - u) : (i = e.pageX - o.left - s, r = e.pageY - o.top - u), {
                            x: i / (t.clientWidth / t.width * n),
                            y: r / (t.clientHeight / t.height * n)
                        }
                    }
                }()
            }, {
                "../core/Common": 14
            }],
            19: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("./Events"),
                    o = e("./Engine"),
                    a = e("./Common");
                ! function() {
                    var e, t;
                    "undefined" != typeof window && (e = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || function(e) {
                        window.setTimeout(function() {
                            e(a.now())
                        }, 1e3 / 60)
                    }, t = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame), i.create = function(e) {
                        var t = {
                                fps: 60,
                                correction: 1,
                                deltaSampleSize: 60,
                                counterTimestamp: 0,
                                frameCounter: 0,
                                deltaHistory: [],
                                timePrev: null,
                                timeScalePrev: 1,
                                frameRequestId: null,
                                isFixed: !1,
                                enabled: !0
                            },
                            n = a.extend(t, e);
                        return n.delta = n.delta || 1e3 / n.fps, n.deltaMin = n.deltaMin || 1e3 / n.fps, n.deltaMax = n.deltaMax || 1e3 / (.5 * n.fps), n.fps = 1e3 / n.delta, n
                    }, i.run = function(t, n) {
                        return "undefined" != typeof t.positionIterations && (n = t, t = i.create()),
                            function r(o) {
                                t.frameRequestId = e(r), o && t.enabled && i.tick(t, n, o)
                            }(), t
                    }, i.tick = function(e, t, n) {
                        var i, a = t.timing,
                            s = 1,
                            u = {
                                timestamp: a.timestamp
                            };
                        r.trigger(e, "beforeTick", u), r.trigger(t, "beforeTick", u), e.isFixed ? i = e.delta : (i = n - e.timePrev || e.delta, e.timePrev = n, e.deltaHistory.push(i), e.deltaHistory = e.deltaHistory.slice(-e.deltaSampleSize), i = Math.min.apply(null, e.deltaHistory), i = i < e.deltaMin ? e.deltaMin : i, i = i > e.deltaMax ? e.deltaMax : i, s = i / e.delta, e.delta = i), 0 !== e.timeScalePrev && (s *= a.timeScale / e.timeScalePrev), 0 === a.timeScale && (s = 0), e.timeScalePrev = a.timeScale, e.correction = s, e.frameCounter += 1, n - e.counterTimestamp >= 1e3 && (e.fps = e.frameCounter * ((n - e.counterTimestamp) / 1e3), e.counterTimestamp = n, e.frameCounter = 0), r.trigger(e, "tick", u), r.trigger(t, "tick", u), t.world.isModified && t.render && t.render.controller && t.render.controller.clear && t.render.controller.clear(t.render), r.trigger(e, "beforeUpdate", u), o.update(t, i, s), r.trigger(e, "afterUpdate", u), t.render && t.render.controller && (r.trigger(e, "beforeRender", u), r.trigger(t, "beforeRender", u), t.render.controller.world(t), r.trigger(e, "afterRender", u), r.trigger(t, "afterRender", u)), r.trigger(e, "afterTick", u), r.trigger(t, "afterTick", u)
                    }, i.stop = function(e) {
                        t(e.frameRequestId)
                    }, i.start = function(e, t) {
                        i.run(e, t)
                    }
                }()
            }, {
                "./Common": 14,
                "./Engine": 15,
                "./Events": 16
            }],
            20: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("./Events");
                ! function() {
                    i._motionWakeThreshold = .18, i._motionSleepThreshold = .08, i._minBias = .9, i.update = function(e, t) {
                        for (var n = t * t * t, r = 0; r < e.length; r++) {
                            var o = e[r],
                                a = o.speed * o.speed + o.angularSpeed * o.angularSpeed;
                            if (0 === o.force.x && 0 === o.force.y) {
                                var s = Math.min(o.motion, a),
                                    u = Math.max(o.motion, a);
                                o.motion = i._minBias * s + (1 - i._minBias) * u, o.sleepThreshold > 0 && o.motion < i._motionSleepThreshold * n ? (o.sleepCounter += 1, o.sleepCounter >= o.sleepThreshold && i.set(o, !0)) : o.sleepCounter > 0 && (o.sleepCounter -= 1)
                            } else i.set(o, !1)
                        }
                    }, i.afterCollisions = function(e, t) {
                        for (var n = t * t * t, r = 0; r < e.length; r++) {
                            var o = e[r];
                            if (o.isActive) {
                                var a = o.collision,
                                    s = a.bodyA.parent,
                                    u = a.bodyB.parent;
                                if (!(s.isSleeping && u.isSleeping || s.isStatic || u.isStatic) && (s.isSleeping || u.isSleeping)) {
                                    var l = s.isSleeping && !s.isStatic ? s : u,
                                        c = l === s ? u : s;
                                    !l.isStatic && c.motion > i._motionWakeThreshold * n && i.set(l, !1)
                                }
                            }
                        }
                    }, i.set = function(e, t) {
                        var n = e.isSleeping;
                        t ? (e.isSleeping = !0, e.sleepCounter = e.sleepThreshold, e.positionImpulse.x = 0, e.positionImpulse.y = 0, e.positionPrev.x = e.position.x, e.positionPrev.y = e.position.y, e.anglePrev = e.angle, e.speed = 0, e.angularSpeed = 0, e.motion = 0, n || r.trigger(e, "sleepStart")) : (e.isSleeping = !1, e.sleepCounter = 0, n && r.trigger(e, "sleepEnd"))
                    }
                }()
            }, {
                "./Events": 16
            }],
            21: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../geometry/Vertices"),
                    o = e("../core/Common"),
                    a = e("../body/Body"),
                    s = e("../geometry/Bounds"),
                    u = e("../geometry/Vector");
                ! function() {
                    i.rectangle = function(e, t, n, i, s) {
                        s = s || {};
                        var u = {
                            label: "Rectangle Body",
                            position: {
                                x: e,
                                y: t
                            },
                            vertices: r.fromPath("L 0 0 L " + n + " 0 L " + n + " " + i + " L 0 " + i)
                        };
                        if (s.chamfer) {
                            var l = s.chamfer;
                            u.vertices = r.chamfer(u.vertices, l.radius, l.quality, l.qualityMin, l.qualityMax), delete s.chamfer
                        }
                        return a.create(o.extend({}, u, s))
                    }, i.trapezoid = function(e, t, n, i, s, u) {
                        u = u || {}, s *= .5;
                        var l, c = (1 - 2 * s) * n,
                            h = n * s,
                            d = h + c,
                            f = d + h;
                        l = .5 > s ? "L 0 0 L " + h + " " + -i + " L " + d + " " + -i + " L " + f + " 0" : "L 0 0 L " + d + " " + -i + " L " + f + " 0";
                        var p = {
                            label: "Trapezoid Body",
                            position: {
                                x: e,
                                y: t
                            },
                            vertices: r.fromPath(l)
                        };
                        if (u.chamfer) {
                            var m = u.chamfer;
                            p.vertices = r.chamfer(p.vertices, m.radius, m.quality, m.qualityMin, m.qualityMax), delete u.chamfer
                        }
                        return a.create(o.extend({}, p, u))
                    }, i.circle = function(e, t, n, r, o) {
                        r = r || {}, r.label = "Circle Body", o = o || 25;
                        var a = Math.ceil(Math.max(10, Math.min(o, n)));
                        return a % 2 === 1 && (a += 1), r.circleRadius = n, i.polygon(e, t, a, n, r)
                    }, i.polygon = function(e, t, n, s, u) {
                        if (u = u || {}, 3 > n) return i.circle(e, t, s, u);
                        for (var l = 2 * Math.PI / n, c = "", h = .5 * l, d = 0; n > d; d += 1) {
                            var f = h + d * l,
                                p = Math.cos(f) * s,
                                m = Math.sin(f) * s;
                            c += "L " + p.toFixed(3) + " " + m.toFixed(3) + " "
                        }
                        var v = {
                            label: "Polygon Body",
                            position: {
                                x: e,
                                y: t
                            },
                            vertices: r.fromPath(c)
                        };
                        if (u.chamfer) {
                            var g = u.chamfer;
                            v.vertices = r.chamfer(v.vertices, g.radius, g.quality, g.qualityMin, g.qualityMax), delete u.chamfer
                        }
                        return a.create(o.extend({}, v, u))
                    }, i.fromVertices = function(e, t, n, i, l, c, h) {
                        var d, f, p, m, v, g, y, _, x;
                        for (i = i || {}, f = [], l = "undefined" != typeof l ? l : !1, c = "undefined" != typeof c ? c : .01, h = "undefined" != typeof h ? h : 10, window.decomp || o.log("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull.", "warn"), o.isArray(n[0]) || (n = [n]), _ = 0; _ < n.length; _ += 1)
                            if (m = n[_], p = r.isConvex(m),
                                p || !window.decomp) m = p ? r.clockwiseSort(m) : r.hull(m), f.push({
                                position: {
                                    x: e,
                                    y: t
                                },
                                vertices: m
                            });
                            else {
                                var b = new decomp.Polygon;
                                for (v = 0; v < m.length; v++) b.vertices.push([m[v].x, m[v].y]);
                                b.makeCCW(), c !== !1 && b.removeCollinearPoints(c);
                                var w = b.quickDecomp();
                                for (v = 0; v < w.length; v++) {
                                    var T = w[v],
                                        E = [];
                                    for (g = 0; g < T.vertices.length; g++) E.push({
                                        x: T.vertices[g][0],
                                        y: T.vertices[g][1]
                                    });
                                    h > 0 && r.area(E) < h || f.push({
                                        position: r.centre(E),
                                        vertices: E
                                    })
                                }
                            }
                        for (v = 0; v < f.length; v++) f[v] = a.create(o.extend(f[v], i));
                        if (l) {
                            var S = 5;
                            for (v = 0; v < f.length; v++) {
                                var M = f[v];
                                for (g = v + 1; g < f.length; g++) {
                                    var P = f[g];
                                    if (s.overlaps(M.bounds, P.bounds)) {
                                        var A = M.vertices,
                                            C = P.vertices;
                                        for (y = 0; y < M.vertices.length; y++)
                                            for (x = 0; x < P.vertices.length; x++) {
                                                var R = u.magnitudeSquared(u.sub(A[(y + 1) % A.length], C[x])),
                                                    L = u.magnitudeSquared(u.sub(A[y], C[(x + 1) % C.length]));
                                                S > R && S > L && (A[y].isInternal = !0, C[x].isInternal = !0)
                                            }
                                    }
                                }
                            }
                        }
                        return f.length > 1 ? (d = a.create(o.extend({
                            parts: f.slice(0)
                        }, i)), a.setPosition(d, {
                            x: e,
                            y: t
                        }), d) : f[0]
                    }
                }()
            }, {
                "../body/Body": 1,
                "../core/Common": 14,
                "../geometry/Bounds": 24,
                "../geometry/Vector": 26,
                "../geometry/Vertices": 27
            }],
            22: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../body/Composite"),
                    o = e("../constraint/Constraint"),
                    a = e("../core/Common"),
                    s = e("../body/Body"),
                    u = e("./Bodies");
                ! function() {
                    i.stack = function(e, t, n, i, o, a, u) {
                        for (var l, c = r.create({
                                label: "Stack"
                            }), h = e, d = t, f = 0, p = 0; i > p; p++) {
                            for (var m = 0, v = 0; n > v; v++) {
                                var g = u(h, d, v, p, l, f);
                                if (g) {
                                    var y = g.bounds.max.y - g.bounds.min.y,
                                        _ = g.bounds.max.x - g.bounds.min.x;
                                    y > m && (m = y), s.translate(g, {
                                        x: .5 * _,
                                        y: .5 * y
                                    }), h = g.bounds.max.x + o, r.addBody(c, g), l = g, f += 1
                                } else h += o
                            }
                            d += m + a, h = e
                        }
                        return c
                    }, i.chain = function(e, t, n, i, s, u) {
                        for (var l = e.bodies, c = 1; c < l.length; c++) {
                            var h = l[c - 1],
                                d = l[c],
                                f = h.bounds.max.y - h.bounds.min.y,
                                p = h.bounds.max.x - h.bounds.min.x,
                                m = d.bounds.max.y - d.bounds.min.y,
                                v = d.bounds.max.x - d.bounds.min.x,
                                g = {
                                    bodyA: h,
                                    pointA: {
                                        x: p * t,
                                        y: f * n
                                    },
                                    bodyB: d,
                                    pointB: {
                                        x: v * i,
                                        y: m * s
                                    }
                                },
                                y = a.extend(g, u);
                            r.addConstraint(e, o.create(y))
                        }
                        return e.label += " Chain", e
                    }, i.mesh = function(e, t, n, i, s) {
                        var u, l, c, h, d, f = e.bodies;
                        for (u = 0; n > u; u++) {
                            for (l = 1; t > l; l++) c = f[l - 1 + u * t], h = f[l + u * t], r.addConstraint(e, o.create(a.extend({
                                bodyA: c,
                                bodyB: h
                            }, s)));
                            if (u > 0)
                                for (l = 0; t > l; l++) c = f[l + (u - 1) * t], h = f[l + u * t], r.addConstraint(e, o.create(a.extend({
                                    bodyA: c,
                                    bodyB: h
                                }, s))), i && l > 0 && (d = f[l - 1 + (u - 1) * t], r.addConstraint(e, o.create(a.extend({
                                    bodyA: d,
                                    bodyB: h
                                }, s)))), i && t - 1 > l && (d = f[l + 1 + (u - 1) * t], r.addConstraint(e, o.create(a.extend({
                                    bodyA: d,
                                    bodyB: h
                                }, s))))
                        }
                        return e.label += " Mesh", e
                    }, i.pyramid = function(e, t, n, r, o, a, u) {
                        return i.stack(e, t, n, r, o, a, function(t, i, a, l, c, h) {
                            var d = Math.min(r, Math.ceil(n / 2)),
                                f = c ? c.bounds.max.x - c.bounds.min.x : 0;
                            if (!(l > d)) {
                                l = d - l;
                                var p = l,
                                    m = n - 1 - l;
                                if (!(p > a || a > m)) {
                                    1 === h && s.translate(c, {
                                        x: (a + (n % 2 === 1 ? 1 : -1)) * f,
                                        y: 0
                                    });
                                    var v = c ? a * f : 0;
                                    return u(e + v + a * o, i, a, l, c, h)
                                }
                            }
                        })
                    }, i.newtonsCradle = function(e, t, n, i, a) {
                        for (var s = r.create({
                                label: "Newtons Cradle"
                            }), l = 0; n > l; l++) {
                            var c = 1.9,
                                h = u.circle(e + l * (i * c), t + a, i, {
                                    inertia: 1 / 0,
                                    restitution: 1,
                                    friction: 0,
                                    frictionAir: 1e-4,
                                    slop: 1
                                }),
                                d = o.create({
                                    pointA: {
                                        x: e + l * (i * c),
                                        y: t
                                    },
                                    bodyB: h
                                });
                            r.addBody(s, h), r.addConstraint(s, d)
                        }
                        return s
                    }, i.car = function(e, t, n, i, a) {
                        var l = s.nextGroup(!0),
                            c = -20,
                            h = .5 * -n + c,
                            d = .5 * n - c,
                            f = 0,
                            p = r.create({
                                label: "Car"
                            }),
                            m = u.trapezoid(e, t, n, i, .3, {
                                collisionFilter: {
                                    group: l
                                },
                                friction: .01,
                                chamfer: {
                                    radius: 10
                                }
                            }),
                            v = u.circle(e + h, t + f, a, {
                                collisionFilter: {
                                    group: l
                                },
                                friction: .8,
                                density: .01
                            }),
                            g = u.circle(e + d, t + f, a, {
                                collisionFilter: {
                                    group: l
                                },
                                friction: .8,
                                density: .01
                            }),
                            y = o.create({
                                bodyA: m,
                                pointA: {
                                    x: h,
                                    y: f
                                },
                                bodyB: v,
                                stiffness: .2
                            }),
                            _ = o.create({
                                bodyA: m,
                                pointA: {
                                    x: d,
                                    y: f
                                },
                                bodyB: g,
                                stiffness: .2
                            });
                        return r.addBody(p, m), r.addBody(p, v), r.addBody(p, g), r.addConstraint(p, y), r.addConstraint(p, _), p
                    }, i.softBody = function(e, t, n, r, o, s, l, c, h, d) {
                        h = a.extend({
                            inertia: 1 / 0
                        }, h), d = a.extend({
                            stiffness: .4
                        }, d);
                        var f = i.stack(e, t, n, r, o, s, function(e, t) {
                            return u.circle(e, t, c, h)
                        });
                        return i.mesh(f, n, r, l, d), f.label = "Soft Body", f
                    }
                }()
            }, {
                "../body/Body": 1,
                "../body/Composite": 2,
                "../constraint/Constraint": 12,
                "../core/Common": 14,
                "./Bodies": 21
            }],
            23: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../geometry/Vector"),
                    o = e("../core/Common");
                ! function() {
                    i.fromVertices = function(e) {
                        for (var t = {}, n = 0; n < e.length; n++) {
                            var i = (n + 1) % e.length,
                                a = r.normalise({
                                    x: e[i].y - e[n].y,
                                    y: e[n].x - e[i].x
                                }),
                                s = 0 === a.y ? 1 / 0 : a.x / a.y;
                            s = s.toFixed(3).toString(), t[s] = a
                        }
                        return o.values(t)
                    }, i.rotate = function(e, t) {
                        if (0 !== t)
                            for (var n = Math.cos(t), i = Math.sin(t), r = 0; r < e.length; r++) {
                                var o, a = e[r];
                                o = a.x * n - a.y * i, a.y = a.x * i + a.y * n, a.x = o
                            }
                    }
                }()
            }, {
                "../core/Common": 14,
                "../geometry/Vector": 26
            }],
            24: [function(e, t, n) {
                var i = {};
                t.exports = i,
                    function() {
                        i.create = function(e) {
                            var t = {
                                min: {
                                    x: 0,
                                    y: 0
                                },
                                max: {
                                    x: 0,
                                    y: 0
                                }
                            };
                            return e && i.update(t, e), t
                        }, i.update = function(e, t, n) {
                            e.min.x = Number.MAX_VALUE, e.max.x = Number.MIN_VALUE, e.min.y = Number.MAX_VALUE, e.max.y = Number.MIN_VALUE;
                            for (var i = 0; i < t.length; i++) {
                                var r = t[i];
                                r.x > e.max.x && (e.max.x = r.x), r.x < e.min.x && (e.min.x = r.x), r.y > e.max.y && (e.max.y = r.y), r.y < e.min.y && (e.min.y = r.y)
                            }
                            n && (n.x > 0 ? e.max.x += n.x : e.min.x += n.x, n.y > 0 ? e.max.y += n.y : e.min.y += n.y)
                        }, i.contains = function(e, t) {
                            return t.x >= e.min.x && t.x <= e.max.x && t.y >= e.min.y && t.y <= e.max.y
                        }, i.overlaps = function(e, t) {
                            return e.min.x <= t.max.x && e.max.x >= t.min.x && e.max.y >= t.min.y && e.min.y <= t.max.y
                        }, i.translate = function(e, t) {
                            e.min.x += t.x, e.max.x += t.x, e.min.y += t.y, e.max.y += t.y
                        }, i.shift = function(e, t) {
                            var n = e.max.x - e.min.x,
                                i = e.max.y - e.min.y;
                            e.min.x = t.x, e.max.x = t.x + n, e.min.y = t.y, e.max.y = t.y + i
                        }
                    }()
            }, {}],
            25: [function(e, t, n) {
                var i = {};
                t.exports = i;
                e("../geometry/Bounds");
                ! function() {
                    i.pathToVertices = function(t, n) {
                        var i, r, o, a, s, u, l, c, h, d, f, p, m = [],
                            v = 0,
                            g = 0,
                            y = 0;
                        n = n || 15;
                        var _ = function(e, t, n) {
                                var i = n % 2 === 1 && n > 1;
                                if (!h || e != h.x || t != h.y) {
                                    h && i ? (f = h.x, p = h.y) : (f = 0, p = 0);
                                    var r = {
                                        x: f + e,
                                        y: p + t
                                    };
                                    (i || !h) && (h = r), m.push(r), g = f + e, y = p + t
                                }
                            },
                            x = function(e) {
                                var t = e.pathSegTypeAsLetter.toUpperCase();
                                if ("Z" !== t) {
                                    switch (t) {
                                        case "M":
                                        case "L":
                                        case "T":
                                        case "C":
                                        case "S":
                                        case "Q":
                                            g = e.x, y = e.y;
                                            break;
                                        case "H":
                                            g = e.x;
                                            break;
                                        case "V":
                                            y = e.y
                                    }
                                    _(g, y, e.pathSegType)
                                }
                            };
                        for (e(t), o = t.getTotalLength(), u = [], i = 0; i < t.pathSegList.numberOfItems; i += 1) u.push(t.pathSegList.getItem(i));
                        for (l = u.concat(); o > v;) {
                            if (d = t.getPathSegAtLength(v), s = u[d], s != c) {
                                for (; l.length && l[0] != s;) x(l.shift());
                                c = s
                            }
                            switch (s.pathSegTypeAsLetter.toUpperCase()) {
                                case "C":
                                case "T":
                                case "S":
                                case "Q":
                                case "A":
                                    a = t.getPointAtLength(v), _(a.x, a.y, 0)
                            }
                            v += n
                        }
                        for (i = 0, r = l.length; r > i; ++i) x(l[i]);
                        return m
                    };
                    var e = function(e) {
                        for (var t, n, i, r, o, a, s = e.pathSegList, u = 0, l = 0, c = s.numberOfItems, h = 0; c > h; ++h) {
                            var d = s.getItem(h),
                                f = d.pathSegTypeAsLetter;
                            if (/[MLHVCSQTA]/.test(f)) "x" in d && (u = d.x), "y" in d && (l = d.y);
                            else switch ("x1" in d && (i = u + d.x1), "x2" in d && (o = u + d.x2), "y1" in d && (r = l + d.y1), "y2" in d && (a = l + d.y2), "x" in d && (u += d.x), "y" in d && (l += d.y), f) {
                                case "m":
                                    s.replaceItem(e.createSVGPathSegMovetoAbs(u, l), h);
                                    break;
                                case "l":
                                    s.replaceItem(e.createSVGPathSegLinetoAbs(u, l), h);
                                    break;
                                case "h":
                                    s.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(u), h);
                                    break;
                                case "v":
                                    s.replaceItem(e.createSVGPathSegLinetoVerticalAbs(l), h);
                                    break;
                                case "c":
                                    s.replaceItem(e.createSVGPathSegCurvetoCubicAbs(u, l, i, r, o, a), h);
                                    break;
                                case "s":
                                    s.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(u, l, o, a), h);
                                    break;
                                case "q":
                                    s.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(u, l, i, r), h);
                                    break;
                                case "t":
                                    s.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(u, l), h);
                                    break;
                                case "a":
                                    s.replaceItem(e.createSVGPathSegArcAbs(u, l, d.r1, d.r2, d.angle, d.largeArcFlag, d.sweepFlag), h);
                                    break;
                                case "z":
                                case "Z":
                                    u = t, l = n
                            }("M" == f || "m" == f) && (t = u, n = l)
                        }
                    }
                }()
            }, {
                "../geometry/Bounds": 24
            }],
            26: [function(e, t, n) {
                var i = {};
                t.exports = i,
                    function() {
                        i.create = function(e, t) {
                            return {
                                x: e || 0,
                                y: t || 0
                            }
                        }, i.clone = function(e) {
                            return {
                                x: e.x,
                                y: e.y
                            }
                        }, i.magnitude = function(e) {
                            return Math.sqrt(e.x * e.x + e.y * e.y)
                        }, i.magnitudeSquared = function(e) {
                            return e.x * e.x + e.y * e.y
                        }, i.rotate = function(e, t) {
                            var n = Math.cos(t),
                                i = Math.sin(t);
                            return {
                                x: e.x * n - e.y * i,
                                y: e.x * i + e.y * n
                            }
                        }, i.rotateAbout = function(e, t, n, i) {
                            var r = Math.cos(t),
                                o = Math.sin(t);
                            i || (i = {});
                            var a = n.x + ((e.x - n.x) * r - (e.y - n.y) * o);
                            return i.y = n.y + ((e.x - n.x) * o + (e.y - n.y) * r), i.x = a, i
                        }, i.normalise = function(e) {
                            var t = i.magnitude(e);
                            return 0 === t ? {
                                x: 0,
                                y: 0
                            } : {
                                x: e.x / t,
                                y: e.y / t
                            }
                        }, i.dot = function(e, t) {
                            return e.x * t.x + e.y * t.y
                        }, i.cross = function(e, t) {
                            return e.x * t.y - e.y * t.x
                        }, i.cross3 = function(e, t, n) {
                            return (t.x - e.x) * (n.y - e.y) - (t.y - e.y) * (n.x - e.x)
                        }, i.add = function(e, t, n) {
                            return n || (n = {}), n.x = e.x + t.x, n.y = e.y + t.y, n
                        }, i.sub = function(e, t, n) {
                            return n || (n = {}), n.x = e.x - t.x, n.y = e.y - t.y, n
                        }, i.mult = function(e, t) {
                            return {
                                x: e.x * t,
                                y: e.y * t
                            }
                        }, i.div = function(e, t) {
                            return {
                                x: e.x / t,
                                y: e.y / t
                            }
                        }, i.perp = function(e, t) {
                            return t = t === !0 ? -1 : 1, {
                                x: t * -e.y,
                                y: t * e.x
                            }
                        }, i.neg = function(e) {
                            return {
                                x: -e.x,
                                y: -e.y
                            }
                        }, i.angle = function(e, t) {
                            return Math.atan2(t.y - e.y, t.x - e.x)
                        }, i._temp = [i.create(), i.create(), i.create(), i.create(), i.create(), i.create()]
                    }()
            }, {}],
            27: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../geometry/Vector"),
                    o = e("../core/Common");
                ! function() {
                    i.create = function(e, t) {
                        for (var n = [], i = 0; i < e.length; i++) {
                            var r = e[i],
                                o = {
                                    x: r.x,
                                    y: r.y,
                                    index: i,
                                    body: t,
                                    isInternal: !1
                                };
                            n.push(o)
                        }
                        return n
                    }, i.fromPath = function(e, t) {
                        var n = /L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,
                            r = [];
                        return e.replace(n, function(e, t, n) {
                            r.push({
                                x: parseFloat(t),
                                y: parseFloat(n)
                            })
                        }), i.create(r, t)
                    }, i.centre = function(e) {
                        for (var t, n, o, a = i.area(e, !0), s = {
                                x: 0,
                                y: 0
                            }, u = 0; u < e.length; u++) o = (u + 1) % e.length, t = r.cross(e[u], e[o]), n = r.mult(r.add(e[u], e[o]), t), s = r.add(s, n);
                        return r.div(s, 6 * a)
                    }, i.mean = function(e) {
                        for (var t = {
                                x: 0,
                                y: 0
                            }, n = 0; n < e.length; n++) t.x += e[n].x, t.y += e[n].y;
                        return r.div(t, e.length)
                    }, i.area = function(e, t) {
                        for (var n = 0, i = e.length - 1, r = 0; r < e.length; r++) n += (e[i].x - e[r].x) * (e[i].y + e[r].y), i = r;
                        return t ? n / 2 : Math.abs(n) / 2
                    }, i.inertia = function(e, t) {
                        for (var n, i, o = 0, a = 0, s = e, u = 0; u < s.length; u++) i = (u + 1) % s.length, n = Math.abs(r.cross(s[i], s[u])), o += n * (r.dot(s[i], s[i]) + r.dot(s[i], s[u]) + r.dot(s[u], s[u])), a += n;
                        return t / 6 * (o / a)
                    }, i.translate = function(e, t, n) {
                        var i;
                        if (n)
                            for (i = 0; i < e.length; i++) e[i].x += t.x * n, e[i].y += t.y * n;
                        else
                            for (i = 0; i < e.length; i++) e[i].x += t.x, e[i].y += t.y;
                        return e
                    }, i.rotate = function(e, t, n) {
                        if (0 !== t) {
                            for (var i = Math.cos(t), r = Math.sin(t), o = 0; o < e.length; o++) {
                                var a = e[o],
                                    s = a.x - n.x,
                                    u = a.y - n.y;
                                a.x = n.x + (s * i - u * r), a.y = n.y + (s * r + u * i)
                            }
                            return e
                        }
                    }, i.contains = function(e, t) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n],
                                r = e[(n + 1) % e.length];
                            if ((t.x - i.x) * (r.y - i.y) + (t.y - i.y) * (i.x - r.x) > 0) return !1
                        }
                        return !0
                    }, i.scale = function(e, t, n, o) {
                        if (1 === t && 1 === n) return e;
                        o = o || i.centre(e);
                        for (var a, s, u = 0; u < e.length; u++) a = e[u], s = r.sub(a, o), e[u].x = o.x + s.x * t, e[u].y = o.y + s.y * n;
                        return e
                    }, i.chamfer = function(e, t, n, i, a) {
                        t = t || [8], t.length || (t = [t]), n = "undefined" != typeof n ? n : -1, i = i || 2, a = a || 14;
                        for (var s = [], u = 0; u < e.length; u++) {
                            var l = e[u - 1 >= 0 ? u - 1 : e.length - 1],
                                c = e[u],
                                h = e[(u + 1) % e.length],
                                d = t[u < t.length ? u : t.length - 1];
                            if (0 !== d) {
                                var f = r.normalise({
                                        x: c.y - l.y,
                                        y: l.x - c.x
                                    }),
                                    p = r.normalise({
                                        x: h.y - c.y,
                                        y: c.x - h.x
                                    }),
                                    m = Math.sqrt(2 * Math.pow(d, 2)),
                                    v = r.mult(o.clone(f), d),
                                    g = r.normalise(r.mult(r.add(f, p), .5)),
                                    y = r.sub(c, r.mult(g, m)),
                                    _ = n; - 1 === n && (_ = 1.75 * Math.pow(d, .32)), _ = o.clamp(_, i, a), _ % 2 === 1 && (_ += 1);
                                for (var x = Math.acos(r.dot(f, p)), b = x / _, w = 0; _ > w; w++) s.push(r.add(r.rotate(v, b * w), y))
                            } else s.push(c)
                        }
                        return s
                    }, i.clockwiseSort = function(e) {
                        var t = i.mean(e);
                        return e.sort(function(e, n) {
                            return r.angle(t, e) - r.angle(t, n)
                        }), e
                    }, i.isConvex = function(e) {
                        var t, n, i, r, o = 0,
                            a = e.length;
                        if (3 > a) return null;
                        for (t = 0; a > t; t++)
                            if (n = (t + 1) % a, i = (t + 2) % a, r = (e[n].x - e[t].x) * (e[i].y - e[n].y), r -= (e[n].y - e[t].y) * (e[i].x - e[n].x), 0 > r ? o |= 1 : r > 0 && (o |= 2), 3 === o) return !1;
                        return 0 !== o ? !0 : null
                    }, i.hull = function(e) {
                        var t, n, i = [],
                            o = [];
                        for (e = e.slice(0), e.sort(function(e, t) {
                                var n = e.x - t.x;
                                return 0 !== n ? n : e.y - t.y
                            }), n = 0; n < e.length; n++) {
                            for (t = e[n]; o.length >= 2 && r.cross3(o[o.length - 2], o[o.length - 1], t) <= 0;) o.pop();
                            o.push(t)
                        }
                        for (n = e.length - 1; n >= 0; n--) {
                            for (t = e[n]; i.length >= 2 && r.cross3(i[i.length - 2], i[i.length - 1], t) <= 0;) i.pop();
                            i.push(t)
                        }
                        return i.pop(), o.pop(), i.concat(o)
                    }
                }()
            }, {
                "../core/Common": 14,
                "../geometry/Vector": 26
            }],
            28: [function(e, t, n) {
                var i = t.exports = {};
                i.version = "master", i.Body = e("../body/Body"), i.Composite = e("../body/Composite"), i.World = e("../body/World"), i.Contact = e("../collision/Contact"), i.Detector = e("../collision/Detector"), i.Grid = e("../collision/Grid"), i.Pairs = e("../collision/Pairs"), i.Pair = e("../collision/Pair"), i.Query = e("../collision/Query"), i.Resolver = e("../collision/Resolver"), i.SAT = e("../collision/SAT"), i.Constraint = e("../constraint/Constraint"), i.MouseConstraint = e("../constraint/MouseConstraint"), i.Common = e("../core/Common"), i.Engine = e("../core/Engine"), i.Events = e("../core/Events"), i.Mouse = e("../core/Mouse"), i.Runner = e("../core/Runner"), i.Sleeping = e("../core/Sleeping"), i.Bodies = e("../factory/Bodies"), i.Composites = e("../factory/Composites"), i.Axes = e("../geometry/Axes"), i.Bounds = e("../geometry/Bounds"), i.Svg = e("../geometry/Svg"), i.Vector = e("../geometry/Vector"), i.Vertices = e("../geometry/Vertices"), i.Render = e("../render/Render"), i.RenderPixi = e("../render/RenderPixi"), i.World.add = i.Composite.add, i.World.remove = i.Composite.remove, i.World.addComposite = i.Composite.addComposite, i.World.addBody = i.Composite.addBody, i.World.addConstraint = i.Composite.addConstraint, i.World.clear = i.Composite.clear, i.Engine.run = i.Runner.run
            }, {
                "../body/Body": 1,
                "../body/Composite": 2,
                "../body/World": 3,
                "../collision/Contact": 4,
                "../collision/Detector": 5,
                "../collision/Grid": 6,
                "../collision/Pair": 7,
                "../collision/Pairs": 8,
                "../collision/Query": 9,
                "../collision/Resolver": 10,
                "../collision/SAT": 11,
                "../constraint/Constraint": 12,
                "../constraint/MouseConstraint": 13,
                "../core/Common": 14,
                "../core/Engine": 15,
                "../core/Events": 16,
                "../core/Metrics": 17,
                "../core/Mouse": 18,
                "../core/Runner": 19,
                "../core/Sleeping": 20,
                "../factory/Bodies": 21,
                "../factory/Composites": 22,
                "../geometry/Axes": 23,
                "../geometry/Bounds": 24,
                "../geometry/Svg": 25,
                "../geometry/Vector": 26,
                "../geometry/Vertices": 27,
                "../render/Render": 29,
                "../render/RenderPixi": 30
            }],
            29: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../core/Common"),
                    o = e("../body/Composite"),
                    a = e("../geometry/Bounds"),
                    s = e("../core/Events"),
                    u = e("../collision/Grid"),
                    l = e("../geometry/Vector");
                ! function() {
                    i.create = function(t) {
                        var n = {
                                controller: i,
                                element: null,
                                canvas: null,
                                mouse: null,
                                options: {
                                    width: 800,
                                    height: 600,
                                    pixelRatio: 1,
                                    background: "#fafafa",
                                    wireframeBackground: "#222",
                                    hasBounds: !1,
                                    enabled: !0,
                                    wireframes: !0,
                                    showSleeping: !0,
                                    showDebug: !1,
                                    showBroadphase: !1,
                                    showBounds: !1,
                                    showVelocity: !1,
                                    showCollisions: !1,
                                    showSeparations: !1,
                                    showAxes: !1,
                                    showPositions: !1,
                                    showAngleIndicator: !1,
                                    showIds: !1,
                                    showShadows: !1,
                                    showVertexNumbers: !1,
                                    showConvexHulls: !1,
                                    showInternalEdges: !1,
                                    showMousePosition: !1
                                }
                            },
                            o = r.extend(n, t);
                        return o.canvas && (o.canvas.width = o.options.width || o.canvas.width, o.canvas.height = o.options.height || o.canvas.height), o.canvas = o.canvas || e(o.options.width, o.options.height), o.context = o.canvas.getContext("2d"), o.textures = {}, o.bounds = o.bounds || {
                            min: {
                                x: 0,
                                y: 0
                            },
                            max: {
                                x: o.canvas.width,
                                y: o.canvas.height
                            }
                        }, 1 !== o.options.pixelRatio && i.setPixelRatio(o, o.options.pixelRatio), r.isElement(o.element) ? o.element.appendChild(o.canvas) : r.log("Render.create: options.element was undefined, render.canvas was created but not appended", "warn"), o
                    }, i.setPixelRatio = function(e, n) {
                        var i = e.options,
                            r = e.canvas;
                        "auto" === n && (n = t(r)), i.pixelRatio = n, r.setAttribute("data-pixel-ratio", n), r.width = i.width * n, r.height = i.height * n, r.style.width = i.width + "px", r.style.height = i.height + "px", e.context.scale(n, n)
                    }, i.world = function(e) {
                        var t, n = e.render,
                            r = e.world,
                            h = n.canvas,
                            d = n.context,
                            f = n.options,
                            p = o.allBodies(r),
                            m = o.allConstraints(r),
                            v = f.wireframes ? f.wireframeBackground : f.background,
                            g = [],
                            y = [],
                            _ = {
                                timestamp: e.timing.timestamp
                            };
                        if (s.trigger(n, "beforeRender", _), n.currentBackground !== v && c(n, v), d.globalCompositeOperation = "source-in", d.fillStyle = "transparent", d.fillRect(0, 0, h.width, h.height), d.globalCompositeOperation = "source-over", f.hasBounds) {
                            var x = n.bounds.max.x - n.bounds.min.x,
                                b = n.bounds.max.y - n.bounds.min.y,
                                w = x / f.width,
                                T = b / f.height;
                            for (t = 0; t < p.length; t++) {
                                var E = p[t];
                                a.overlaps(E.bounds, n.bounds) && g.push(E)
                            }
                            for (t = 0; t < m.length; t++) {
                                var S = m[t],
                                    M = S.bodyA,
                                    P = S.bodyB,
                                    A = S.pointA,
                                    C = S.pointB;
                                M && (A = l.add(M.position, S.pointA)), P && (C = l.add(P.position, S.pointB)), A && C && (a.contains(n.bounds, A) || a.contains(n.bounds, C)) && y.push(S)
                            }
                            d.scale(1 / w, 1 / T), d.translate(-n.bounds.min.x, -n.bounds.min.y)
                        } else y = m, g = p;
                        !f.wireframes || e.enableSleeping && f.showSleeping ? i.bodies(e, g, d) : (f.showConvexHulls && i.bodyConvexHulls(e, g, d), i.bodyWireframes(e, g, d)), f.showBounds && i.bodyBounds(e, g, d), (f.showAxes || f.showAngleIndicator) && i.bodyAxes(e, g, d), f.showPositions && i.bodyPositions(e, g, d), f.showVelocity && i.bodyVelocity(e, g, d), f.showIds && i.bodyIds(e, g, d), f.showSeparations && i.separations(e, e.pairs.list, d), f.showCollisions && i.collisions(e, e.pairs.list, d), f.showVertexNumbers && i.vertexNumbers(e, g, d), f.showMousePosition && i.mousePosition(e, n.mouse, d), i.constraints(y, d), f.showBroadphase && e.broadphase.controller === u && i.grid(e, e.broadphase, d), f.showDebug && i.debug(e, d), f.hasBounds && d.setTransform(f.pixelRatio, 0, 0, f.pixelRatio, 0, 0), s.trigger(n, "afterRender", _)
                    }, i.debug = function(e, t) {
                        var n = t,
                            i = e.world,
                            r = e.render,
                            a = e.metrics,
                            s = r.options,
                            u = (o.allBodies(i), "    ");
                        if (e.timing.timestamp - (r.debugTimestamp || 0) >= 500) {
                            var l = "";
                            a.timing && (l += "fps: " + Math.round(a.timing.fps) + u), r.debugString = l, r.debugTimestamp = e.timing.timestamp
                        }
                        if (r.debugString) {
                            n.font = "12px Arial", s.wireframes ? n.fillStyle = "rgba(255,255,255,0.5)" : n.fillStyle = "rgba(0,0,0,0.5)";
                            for (var c = r.debugString.split("\n"), h = 0; h < c.length; h++) n.fillText(c[h], 50, 50 + 18 * h)
                        }
                    }, i.constraints = function(e, t) {
                        for (var n = t, i = 0; i < e.length; i++) {
                            var r = e[i];
                            if (r.render.visible && r.pointA && r.pointB) {
                                var o = r.bodyA,
                                    a = r.bodyB;
                                o ? (n.beginPath(), n.moveTo(o.position.x + r.pointA.x, o.position.y + r.pointA.y)) : (n.beginPath(), n.moveTo(r.pointA.x, r.pointA.y)), a ? n.lineTo(a.position.x + r.pointB.x, a.position.y + r.pointB.y) : n.lineTo(r.pointB.x, r.pointB.y), n.lineWidth = r.render.lineWidth, n.strokeStyle = r.render.strokeStyle, n.stroke()
                            }
                        }
                    }, i.bodyShadows = function(e, t, n) {
                        for (var i = n, r = e.render, o = 0; o < t.length; o++) {
                            var a = t[o];
                            if (a.render.visible) {
                                if (a.circleRadius) i.beginPath(), i.arc(a.position.x, a.position.y, a.circleRadius, 0, 2 * Math.PI), i.closePath();
                                else {
                                    i.beginPath(), i.moveTo(a.vertices[0].x, a.vertices[0].y);
                                    for (var s = 1; s < a.vertices.length; s++) i.lineTo(a.vertices[s].x, a.vertices[s].y);
                                    i.closePath()
                                }
                                var u = a.position.x - .5 * r.options.width,
                                    l = a.position.y - .2 * r.options.height,
                                    c = Math.abs(u) + Math.abs(l);
                                i.shadowColor = "rgba(0,0,0,0.15)", i.shadowOffsetX = .05 * u, i.shadowOffsetY = .05 * l, i.shadowBlur = 1 + 12 * Math.min(1, c / 1e3), i.fill(), i.shadowColor = null, i.shadowOffsetX = null, i.shadowOffsetY = null, i.shadowBlur = null
                            }
                        }
                    }, i.bodies = function(e, t, i) {
                        var o, a, s, u, l = i,
                            c = e.render,
                            h = c.options;
                        for (s = 0; s < t.length; s++)
                            if (o = t[s], o.render.visible)
                                for (u = o.parts.length > 1 ? 1 : 0; u < o.parts.length; u++)
                                    if (a = o.parts[u], a.render.visible)
                                        if (a.render.sprite && a.render.sprite.texture && !h.wireframes) {
                                            var d = a.render.sprite,
                                                f = n(c, d.texture);
                                            h.showSleeping && o.isSleeping && (l.globalAlpha = .5), l.translate(a.position.x, a.position.y), l.rotate(a.angle), l.drawImage(f, f.width * -d.xOffset * d.xScale, f.height * -d.yOffset * d.yScale, f.width * d.xScale, f.height * d.yScale), l.rotate(-a.angle), l.translate(-a.position.x, -a.position.y), h.showSleeping && o.isSleeping && (l.globalAlpha = 1)
                                        } else {
                                            if (a.circleRadius) l.beginPath(), l.arc(a.position.x, a.position.y, a.circleRadius, 0, 2 * Math.PI);
                                            else {
                                                l.beginPath(), l.moveTo(a.vertices[0].x, a.vertices[0].y);
                                                for (var p = 1; p < a.vertices.length; p++) l.lineTo(a.vertices[p].x, a.vertices[p].y);
                                                l.closePath()
                                            }
                                            h.wireframes ? (l.lineWidth = 1, l.strokeStyle = "#bbb", h.showSleeping && o.isSleeping && (l.strokeStyle = "rgba(255,255,255,0.2)"), l.stroke()) : (h.showSleeping && o.isSleeping ? l.fillStyle = r.shadeColor(a.render.fillStyle, 50) : l.fillStyle = a.render.fillStyle, l.lineWidth = a.render.lineWidth, l.strokeStyle = a.render.strokeStyle, l.fill(), l.stroke())
                                        }
                    }, i.bodyWireframes = function(e, t, n) {
                        var i, r, o, a, s, u = n,
                            l = e.render.options.showInternalEdges;
                        for (u.beginPath(), o = 0; o < t.length; o++)
                            if (i = t[o], i.render.visible)
                                for (s = i.parts.length > 1 ? 1 : 0; s < i.parts.length; s++) {
                                    for (r = i.parts[s], u.moveTo(r.vertices[0].x, r.vertices[0].y), a = 1; a < r.vertices.length; a++) !r.vertices[a - 1].isInternal || l ? u.lineTo(r.vertices[a].x, r.vertices[a].y) : u.moveTo(r.vertices[a].x, r.vertices[a].y), r.vertices[a].isInternal && !l && u.moveTo(r.vertices[(a + 1) % r.vertices.length].x, r.vertices[(a + 1) % r.vertices.length].y);
                                    u.lineTo(r.vertices[0].x, r.vertices[0].y)
                                }
                        u.lineWidth = 1, u.strokeStyle = "#bbb", u.stroke()
                    }, i.bodyConvexHulls = function(e, t, n) {
                        var i, r, o, a = n;
                        for (a.beginPath(), r = 0; r < t.length; r++)
                            if (i = t[r], i.render.visible && 1 !== i.parts.length) {
                                for (a.moveTo(i.vertices[0].x, i.vertices[0].y), o = 1; o < i.vertices.length; o++) a.lineTo(i.vertices[o].x, i.vertices[o].y);
                                a.lineTo(i.vertices[0].x, i.vertices[0].y)
                            }
                        a.lineWidth = 1, a.strokeStyle = "rgba(255,255,255,0.2)", a.stroke()
                    }, i.vertexNumbers = function(e, t, n) {
                        var i, r, o, a = n;
                        for (i = 0; i < t.length; i++) {
                            var s = t[i].parts;
                            for (o = s.length > 1 ? 1 : 0; o < s.length; o++) {
                                var u = s[o];
                                for (r = 0; r < u.vertices.length; r++) a.fillStyle = "rgba(255,255,255,0.2)", a.fillText(i + "_" + r, u.position.x + .8 * (u.vertices[r].x - u.position.x), u.position.y + .8 * (u.vertices[r].y - u.position.y))
                            }
                        }
                    }, i.mousePosition = function(e, t, n) {
                        var i = n;
                        i.fillStyle = "rgba(255,255,255,0.8)", i.fillText(t.position.x + "  " + t.position.y, t.position.x + 5, t.position.y - 5)
                    }, i.bodyBounds = function(e, t, n) {
                        var i = n,
                            r = e.render,
                            o = r.options;
                        i.beginPath();
                        for (var a = 0; a < t.length; a++) {
                            var s = t[a];
                            if (s.render.visible)
                                for (var u = t[a].parts, l = u.length > 1 ? 1 : 0; l < u.length; l++) {
                                    var c = u[l];
                                    i.rect(c.bounds.min.x, c.bounds.min.y, c.bounds.max.x - c.bounds.min.x, c.bounds.max.y - c.bounds.min.y)
                                }
                        }
                        o.wireframes ? i.strokeStyle = "rgba(255,255,255,0.08)" : i.strokeStyle = "rgba(0,0,0,0.1)", i.lineWidth = 1, i.stroke()
                    }, i.bodyAxes = function(e, t, n) {
                        var i, r, o, a, s = n,
                            u = e.render,
                            l = u.options;
                        for (s.beginPath(), r = 0; r < t.length; r++) {
                            var c = t[r],
                                h = c.parts;
                            if (c.render.visible)
                                if (l.showAxes)
                                    for (o = h.length > 1 ? 1 : 0; o < h.length; o++)
                                        for (i = h[o], a = 0; a < i.axes.length; a++) {
                                            var d = i.axes[a];
                                            s.moveTo(i.position.x, i.position.y), s.lineTo(i.position.x + 20 * d.x, i.position.y + 20 * d.y)
                                        } else
                                            for (o = h.length > 1 ? 1 : 0; o < h.length; o++)
                                                for (i = h[o], a = 0; a < i.axes.length; a++) s.moveTo(i.position.x, i.position.y), s.lineTo((i.vertices[0].x + i.vertices[i.vertices.length - 1].x) / 2, (i.vertices[0].y + i.vertices[i.vertices.length - 1].y) / 2)
                        }
                        l.wireframes ? s.strokeStyle = "indianred" : s.strokeStyle = "rgba(0,0,0,0.3)", s.lineWidth = 1, s.stroke()
                    }, i.bodyPositions = function(e, t, n) {
                        var i, r, o, a, s = n,
                            u = e.render,
                            l = u.options;
                        for (s.beginPath(), o = 0; o < t.length; o++)
                            if (i = t[o], i.render.visible)
                                for (a = 0; a < i.parts.length; a++) r = i.parts[a], s.arc(r.position.x, r.position.y, 3, 0, 2 * Math.PI, !1), s.closePath();
                        for (l.wireframes ? s.fillStyle = "indianred" : s.fillStyle = "rgba(0,0,0,0.5)", s.fill(), s.beginPath(), o = 0; o < t.length; o++) i = t[o], i.render.visible && (s.arc(i.positionPrev.x, i.positionPrev.y, 2, 0, 2 * Math.PI, !1), s.closePath());
                        s.fillStyle = "rgba(255,165,0,0.8)", s.fill()
                    }, i.bodyVelocity = function(e, t, n) {
                        var i = n;
                        i.beginPath();
                        for (var r = 0; r < t.length; r++) {
                            var o = t[r];
                            o.render.visible && (i.moveTo(o.position.x, o.position.y), i.lineTo(o.position.x + 2 * (o.position.x - o.positionPrev.x), o.position.y + 2 * (o.position.y - o.positionPrev.y)))
                        }
                        i.lineWidth = 3, i.strokeStyle = "cornflowerblue", i.stroke()
                    }, i.bodyIds = function(e, t, n) {
                        var i, r, o = n;
                        for (i = 0; i < t.length; i++)
                            if (t[i].render.visible) {
                                var a = t[i].parts;
                                for (r = a.length > 1 ? 1 : 0; r < a.length; r++) {
                                    var s = a[r];
                                    o.font = "12px Arial", o.fillStyle = "rgba(255,255,255,0.5)", o.fillText(s.id, s.position.x + 10, s.position.y - 10)
                                }
                            }
                    }, i.collisions = function(e, t, n) {
                        var i, r, o, a, s = n,
                            u = e.render.options;
                        for (s.beginPath(), o = 0; o < t.length; o++)
                            if (i = t[o], i.isActive)
                                for (r = i.collision, a = 0; a < i.activeContacts.length; a++) {
                                    var l = i.activeContacts[a],
                                        c = l.vertex;
                                    s.rect(c.x - 1.5, c.y - 1.5, 3.5, 3.5)
                                }
                        for (u.wireframes ? s.fillStyle = "rgba(255,255,255,0.7)" : s.fillStyle = "orange", s.fill(), s.beginPath(), o = 0; o < t.length; o++)
                            if (i = t[o], i.isActive && (r = i.collision, i.activeContacts.length > 0)) {
                                var h = i.activeContacts[0].vertex.x,
                                    d = i.activeContacts[0].vertex.y;
                                2 === i.activeContacts.length && (h = (i.activeContacts[0].vertex.x + i.activeContacts[1].vertex.x) / 2, d = (i.activeContacts[0].vertex.y + i.activeContacts[1].vertex.y) / 2), r.bodyB === r.supports[0].body || r.bodyA.isStatic === !0 ? s.moveTo(h - 8 * r.normal.x, d - 8 * r.normal.y) : s.moveTo(h + 8 * r.normal.x, d + 8 * r.normal.y), s.lineTo(h, d)
                            }
                        u.wireframes ? s.strokeStyle = "rgba(255,165,0,0.7)" : s.strokeStyle = "orange", s.lineWidth = 1, s.stroke()
                    }, i.separations = function(e, t, n) {
                        var i, r, o, a, s, u = n,
                            l = e.render.options;
                        for (u.beginPath(), s = 0; s < t.length; s++)
                            if (i = t[s], i.isActive) {
                                r = i.collision, o = r.bodyA, a = r.bodyB;
                                var c = 1;
                                a.isStatic || o.isStatic || (c = .5), a.isStatic && (c = 0), u.moveTo(a.position.x, a.position.y), u.lineTo(a.position.x - r.penetration.x * c, a.position.y - r.penetration.y * c), c = 1, a.isStatic || o.isStatic || (c = .5), o.isStatic && (c = 0), u.moveTo(o.position.x, o.position.y), u.lineTo(o.position.x + r.penetration.x * c, o.position.y + r.penetration.y * c)
                            }
                        l.wireframes ? u.strokeStyle = "rgba(255,165,0,0.5)" : u.strokeStyle = "orange", u.stroke()
                    }, i.grid = function(e, t, n) {
                        var i = n,
                            o = e.render.options;
                        o.wireframes ? i.strokeStyle = "rgba(255,180,0,0.1)" : i.strokeStyle = "rgba(255,180,0,0.5)", i.beginPath();
                        for (var a = r.keys(t.buckets), s = 0; s < a.length; s++) {
                            var u = a[s];
                            if (!(t.buckets[u].length < 2)) {
                                var l = u.split(",");
                                i.rect(.5 + parseInt(l[0], 10) * t.bucketWidth, .5 + parseInt(l[1], 10) * t.bucketHeight, t.bucketWidth, t.bucketHeight)
                            }
                        }
                        i.lineWidth = 1, i.stroke()
                    }, i.inspector = function(e, t) {
                        var n, i = e.engine,
                            r = e.selected,
                            o = i.render,
                            a = o.options;
                        if (a.hasBounds) {
                            var s = o.bounds.max.x - o.bounds.min.x,
                                u = o.bounds.max.y - o.bounds.min.y,
                                l = s / o.options.width,
                                c = u / o.options.height;
                            t.scale(1 / l, 1 / c), t.translate(-o.bounds.min.x, -o.bounds.min.y)
                        }
                        for (var h = 0; h < r.length; h++) {
                            var d = r[h].data;
                            switch (t.translate(.5, .5), t.lineWidth = 1, t.strokeStyle = "rgba(255,165,0,0.9)", t.setLineDash([1, 2]), d.type) {
                                case "body":
                                    n = d.bounds, t.beginPath(), t.rect(Math.floor(n.min.x - 3), Math.floor(n.min.y - 3), Math.floor(n.max.x - n.min.x + 6), Math.floor(n.max.y - n.min.y + 6)), t.closePath(), t.stroke();
                                    break;
                                case "constraint":
                                    var f = d.pointA;
                                    d.bodyA && (f = d.pointB), t.beginPath(), t.arc(f.x, f.y, 10, 0, 2 * Math.PI), t.closePath(), t.stroke()
                            }
                            t.setLineDash([]), t.translate(-.5, -.5)
                        }
                        null !== e.selectStart && (t.translate(.5, .5), t.lineWidth = 1, t.strokeStyle = "rgba(255,165,0,0.6)", t.fillStyle = "rgba(255,165,0,0.1)", n = e.selectBounds, t.beginPath(), t.rect(Math.floor(n.min.x), Math.floor(n.min.y), Math.floor(n.max.x - n.min.x), Math.floor(n.max.y - n.min.y)), t.closePath(), t.stroke(), t.fill(), t.translate(-.5, -.5)), a.hasBounds && t.setTransform(1, 0, 0, 1, 0, 0)
                    };
                    var e = function(e, t) {
                            var n = document.createElement("canvas");
                            return n.width = e, n.height = t, n.oncontextmenu = function() {
                                return !1
                            }, n.onselectstart = function() {
                                return !1
                            }, n
                        },
                        t = function(e) {
                            var t = e.getContext("2d"),
                                n = window.devicePixelRatio || 1,
                                i = t.webkitBackingStorePixelRatio || t.mozBackingStorePixelRatio || t.msBackingStorePixelRatio || t.oBackingStorePixelRatio || t.backingStorePixelRatio || 1;
                            return n / i
                        },
                        n = function(e, t) {
                            var n = e.textures[t];
                            return n ? n : (n = e.textures[t] = new Image, n.src = t, n)
                        },
                        c = function(e, t) {
                            var n = t;
                            /(jpg|gif|png)$/.test(t) && (n = "url(" + t + ")"), e.canvas.style.background = n, e.canvas.style.backgroundSize = "contain", e.currentBackground = t
                        }
                }()
            }, {
                "../body/Composite": 2,
                "../collision/Grid": 6,
                "../core/Common": 14,
                "../core/Events": 16,
                "../geometry/Bounds": 24,
                "../geometry/Vector": 26
            }],
            30: [function(e, t, n) {
                var i = {};
                t.exports = i;
                var r = e("../body/Composite"),
                    o = e("../core/Common");
                ! function() {
                    i.create = function(e) {
                        var t = {
                                controller: i,
                                element: null,
                                canvas: null,
                                options: {
                                    width: 800,
                                    height: 600,
                                    background: "#fafafa",
                                    wireframeBackground: "#222",
                                    hasBounds: !1,
                                    enabled: !0,
                                    wireframes: !0,
                                    showSleeping: !0,
                                    showDebug: !1,
                                    showBroadphase: !1,
                                    showBounds: !1,
                                    showVelocity: !1,
                                    showCollisions: !1,
                                    showAxes: !1,
                                    showPositions: !1,
                                    showAngleIndicator: !1,
                                    showIds: !1,
                                    showShadows: !1
                                }
                            },
                            n = o.extend(t, e),
                            r = !n.options.wireframes && "transparent" === n.options.background;
                        return n.context = new PIXI.WebGLRenderer(n.options.width, n.options.height, {
                            view: n.canvas,
                            transparent: r,
                            antialias: !0,
                            backgroundColor: e.background
                        }), n.canvas = n.context.view, n.container = new PIXI.Container, n.bounds = n.bounds || {
                            min: {
                                x: 0,
                                y: 0
                            },
                            max: {
                                x: n.options.width,
                                y: n.options.height
                            }
                        }, n.textures = {}, n.sprites = {}, n.primitives = {}, n.spriteContainer = new PIXI.Container, n.container.addChild(n.spriteContainer), o.isElement(n.element) ? n.element.appendChild(n.canvas) : o.log('No "render.element" passed, "render.canvas" was not inserted into document.', "warn"), n.canvas.oncontextmenu = function() {
                            return !1
                        }, n.canvas.onselectstart = function() {
                            return !1
                        }, n
                    }, i.clear = function(e) {
                        for (var t = e.container, n = e.spriteContainer; t.children[0];) t.removeChild(t.children[0]);
                        for (; n.children[0];) n.removeChild(n.children[0]);
                        var i = e.sprites["bg-0"];
                        e.textures = {}, e.sprites = {}, e.primitives = {}, e.sprites["bg-0"] = i, i && t.addChildAt(i, 0), e.container.addChild(e.spriteContainer), e.currentBackground = null, t.scale.set(1, 1), t.position.set(0, 0)
                    }, i.setBackground = function(e, t) {
                        if (e.currentBackground !== t) {
                            var i = t.indexOf && -1 !== t.indexOf("#"),
                                r = e.sprites["bg-0"];
                            if (i) {
                                var a = o.colorToNumber(t);
                                e.context.backgroundColor = a, r && e.container.removeChild(r)
                            } else if (!r) {
                                var s = n(e, t);
                                r = e.sprites["bg-0"] = new PIXI.Sprite(s), r.position.x = 0, r.position.y = 0, e.container.addChildAt(r, 0)
                            }
                            e.currentBackground = t
                        }
                    }, i.world = function(e) {
                        var t, n = e.render,
                            o = e.world,
                            a = n.context,
                            s = n.container,
                            u = n.options,
                            l = r.allBodies(o),
                            c = r.allConstraints(o),
                            h = [];
                        u.wireframes ? i.setBackground(n, u.wireframeBackground) : i.setBackground(n, u.background);
                        var d = n.bounds.max.x - n.bounds.min.x,
                            f = n.bounds.max.y - n.bounds.min.y,
                            p = d / n.options.width,
                            m = f / n.options.height;
                        if (u.hasBounds) {
                            for (t = 0; t < l.length; t++) {
                                var v = l[t];
                                v.render.sprite.visible = Bounds.overlaps(v.bounds, n.bounds)
                            }
                            for (t = 0; t < c.length; t++) {
                                var g = c[t],
                                    y = g.bodyA,
                                    _ = g.bodyB,
                                    x = g.pointA,
                                    b = g.pointB;
                                y && (x = Vector.add(y.position, g.pointA)), _ && (b = Vector.add(_.position, g.pointB)), x && b && (Bounds.contains(n.bounds, x) || Bounds.contains(n.bounds, b)) && h.push(g)
                            }
                            s.scale.set(1 / p, 1 / m), s.position.set(-n.bounds.min.x * (1 / p), -n.bounds.min.y * (1 / m))
                        } else h = c;
                        for (t = 0; t < l.length; t++) i.body(e, l[t]);
                        for (t = 0; t < h.length; t++) i.constraint(e, h[t]);
                        a.render(s)
                    }, i.constraint = function(e, t) {
                        var n = e.render,
                            i = t.bodyA,
                            r = t.bodyB,
                            a = t.pointA,
                            s = t.pointB,
                            u = n.container,
                            l = t.render,
                            c = "c-" + t.id,
                            h = n.primitives[c];
                        return h || (h = n.primitives[c] = new PIXI.Graphics), l.visible && t.pointA && t.pointB ? (-1 === o.indexOf(u.children, h) && u.addChild(h), h.clear(), h.beginFill(0, 0), h.lineStyle(l.lineWidth, o.colorToNumber(l.strokeStyle), 1), i ? h.moveTo(i.position.x + a.x, i.position.y + a.y) : h.moveTo(a.x, a.y), r ? h.lineTo(r.position.x + s.x, r.position.y + s.y) : h.lineTo(s.x, s.y), void h.endFill()) : void h.clear()
                    }, i.body = function(n, i) {
                        var r = n.render,
                            a = i.render;
                        if (a.visible)
                            if (a.sprite && a.sprite.texture) {
                                var s = "b-" + i.id,
                                    u = r.sprites[s],
                                    l = r.spriteContainer;
                                u || (u = r.sprites[s] = e(r, i)), -1 === o.indexOf(l.children, u) && l.addChild(u), u.position.x = i.position.x, u.position.y = i.position.y, u.rotation = i.angle, u.scale.x = a.sprite.xScale || 1, u.scale.y = a.sprite.yScale || 1
                            } else {
                                var c = "b-" + i.id,
                                    h = r.primitives[c],
                                    d = r.container;
                                h || (h = r.primitives[c] = t(r, i), h.initialAngle = i.angle), -1 === o.indexOf(d.children, h) && d.addChild(h), h.position.x = i.position.x, h.position.y = i.position.y, h.rotation = i.angle - h.initialAngle
                            }
                    };
                    var e = function(e, t) {
                            var i = t.render,
                                r = i.sprite.texture,
                                o = n(e, r),
                                a = new PIXI.Sprite(o);
                            return a.anchor.x = t.render.sprite.xOffset, a.anchor.y = t.render.sprite.yOffset, a
                        },
                        t = function(e, t) {
                            var n, i = t.render,
                                r = e.options,
                                a = new PIXI.Graphics,
                                s = o.colorToNumber(i.fillStyle),
                                u = o.colorToNumber(i.strokeStyle),
                                l = o.colorToNumber(i.strokeStyle),
                                c = o.colorToNumber("#bbb"),
                                h = o.colorToNumber("#CD5C5C");
                            a.clear();
                            for (var d = t.parts.length > 1 ? 1 : 0; d < t.parts.length; d++) {
                                n = t.parts[d], r.wireframes ? (a.beginFill(0, 0), a.lineStyle(1, c, 1)) : (a.beginFill(s, 1), a.lineStyle(i.lineWidth, u, 1)), a.moveTo(n.vertices[0].x - t.position.x, n.vertices[0].y - t.position.y);
                                for (var f = 1; f < n.vertices.length; f++) a.lineTo(n.vertices[f].x - t.position.x, n.vertices[f].y - t.position.y);
                                a.lineTo(n.vertices[0].x - t.position.x, n.vertices[0].y - t.position.y), a.endFill(), (r.showAngleIndicator || r.showAxes) && (a.beginFill(0, 0), r.wireframes ? a.lineStyle(1, h, 1) : a.lineStyle(1, l), a.moveTo(n.position.x - t.position.x, n.position.y - t.position.y), a.lineTo((n.vertices[0].x + n.vertices[n.vertices.length - 1].x) / 2 - t.position.x, (n.vertices[0].y + n.vertices[n.vertices.length - 1].y) / 2 - t.position.y), a.endFill())
                            }
                            return a
                        },
                        n = function(e, t) {
                            var n = e.textures[t];
                            return n || (n = e.textures[t] = PIXI.Texture.fromImage(t)), n
                        }
                }()
            }, {
                "../body/Composite": 2,
                "../core/Common": 14
            }]
        }, {}, [28])(28)
    })
}, function(e, t, n) {
    var i, r;
    (function(o) { /*! howler.js v2.0.0-beta7 | (c) 2013-2016, James Simpson of GoldFire Studios | MIT License | howlerjs.com */
        ! function() {
            "use strict";

            function a() {
                try {
                    "undefined" != typeof AudioContext ? s = new AudioContext : "undefined" != typeof webkitAudioContext ? s = new webkitAudioContext : u = !1
                } catch (e) {
                    u = !1
                }
                if (!u)
                    if ("undefined" != typeof Audio) try {
                        var t = new Audio;
                        "undefined" == typeof t.oncanplaythrough && (h = "canplay")
                    } catch (e) {
                        l = !0
                    } else l = !0;
                try {
                    var t = new Audio;
                    t.muted && (l = !0)
                } catch (e) {}
                var n = /iP(hone|od|ad)/.test(navigator.platform),
                    i = navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),
                    r = i ? parseInt(i[1], 10) : null;
                if (n && r && 9 > r) {
                    var o = /safari/.test(window.navigator.userAgent.toLowerCase());
                    (window.navigator.standalone && !o || !window.navigator.standalone && !o) && (u = !1)
                }
                u && (c = "undefined" == typeof s.createGain ? s.createGainNode() : s.createGain(), c.gain.value = 1, c.connect(s.destination))
            }
            var s = null,
                u = !0,
                l = !1,
                c = null,
                h = "canplaythrough";
            a();
            var d = function() {
                this.init()
            };
            d.prototype = {
                init: function() {
                    var e = this || f;
                    return e._codecs = {}, e._howls = [], e._muted = !1, e._volume = 1, e.state = s ? s.state || "running" : "running", e.autoSuspend = !0, e._autoSuspend(), e.mobileAutoEnable = !0, e.noAudio = l, e.usingWebAudio = u, e.ctx = s, l || e._setupCodecs(), e
                },
                volume: function(e) {
                    var t = this || f;
                    if (e = parseFloat(e), "undefined" != typeof e && e >= 0 && 1 >= e) {
                        t._volume = e, u && (c.gain.value = e);
                        for (var n = 0; n < t._howls.length; n++)
                            if (!t._howls[n]._webAudio)
                                for (var i = t._howls[n]._getSoundIds(), r = 0; r < i.length; r++) {
                                    var o = t._howls[n]._soundById(i[r]);
                                    o && o._node && (o._node.volume = o._volume * e)
                                }
                        return t
                    }
                    return t._volume
                },
                mute: function(e) {
                    var t = this || f;
                    t._muted = e, u && (c.gain.value = e ? 0 : t._volume);
                    for (var n = 0; n < t._howls.length; n++)
                        if (!t._howls[n]._webAudio)
                            for (var i = t._howls[n]._getSoundIds(), r = 0; r < i.length; r++) {
                                var o = t._howls[n]._soundById(i[r]);
                                o && o._node && (o._node.muted = e ? !0 : o._muted)
                            }
                    return t
                },
                unload: function() {
                    for (var e = this || f, t = e._howls.length - 1; t >= 0; t--) e._howls[t].unload();
                    return e.usingWebAudio && "undefined" != typeof s.close && (e.ctx = null, s.close(), a(), e.ctx = s), e
                },
                codecs: function(e) {
                    return (this || f)._codecs[e]
                },
                _setupCodecs: function() {
                    var e = this || f,
                        t = new Audio,
                        n = t.canPlayType("audio/mpeg;").replace(/^no$/, ""),
                        i = /OPR\//.test(navigator.userAgent);
                    return e._codecs = {
                        mp3: !(i || !n && !t.canPlayType("audio/mp3;").replace(/^no$/, "")),
                        mpeg: !!n,
                        opus: !!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""),
                        ogg: !!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
                        oga: !!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
                        wav: !!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""),
                        aac: !!t.canPlayType("audio/aac;").replace(/^no$/, ""),
                        m4a: !!(t.canPlayType("audio/x-m4a;") || t.canPlayType("audio/m4a;") || t.canPlayType("audio/aac;")).replace(/^no$/, ""),
                        mp4: !!(t.canPlayType("audio/x-mp4;") || t.canPlayType("audio/mp4;") || t.canPlayType("audio/aac;")).replace(/^no$/, ""),
                        weba: !!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, ""),
                        webm: !!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, ""),
                        dolby: !!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/, "")
                    }, e
                },
                _enableMobileAudio: function() {
                    var e = this || f,
                        t = /iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk/i.test(navigator.userAgent),
                        n = !!("ontouchend" in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0);
                    if (!s || !e._mobileEnabled && t && n) {
                        e._mobileEnabled = !1;
                        var i = function() {
                            var t = s.createBuffer(1, 1, 22050),
                                n = s.createBufferSource();
                            n.buffer = t, n.connect(s.destination), "undefined" == typeof n.start ? n.noteOn(0) : n.start(0), n.onended = function() {
                                n.disconnect(0), e._mobileEnabled = !0, e.mobileAutoEnable = !1, document.removeEventListener("touchend", i, !0)
                            }
                        };
                        return document.addEventListener("touchend", i, !0), e
                    }
                },
                _autoSuspend: function() {
                    var e = this;
                    if (e.autoSuspend && s && "undefined" != typeof s.suspend && u) {
                        for (var t = 0; t < e._howls.length; t++)
                            if (e._howls[t]._webAudio)
                                for (var n = 0; n < e._howls[t]._sounds.length; n++)
                                    if (!e._howls[t]._sounds[n]._paused) return e;
                        return e._suspendTimer = setTimeout(function() {
                            e.autoSuspend && (e._suspendTimer = null, e.state = "suspending", s.suspend().then(function() {
                                e.state = "suspended", e._resumeAfterSuspend && (delete e._resumeAfterSuspend, e._autoResume())
                            }))
                        }, 3e4), e
                    }
                },
                _autoResume: function() {
                    var e = this;
                    return s && "undefined" != typeof s.resume && u ? ("running" === e.state && e._suspendTimer ? (clearTimeout(e._suspendTimer), e._suspendTimer = null) : "suspended" === e.state ? (e.state = "resuming", s.resume().then(function() {
                        e.state = "running"
                    }), e._suspendTimer && (clearTimeout(e._suspendTimer), e._suspendTimer = null)) : "suspending" === e.state && (e._resumeAfterSuspend = !0), e) : void 0
                }
            };
            var f = new d,
                p = function(e) {
                    var t = this;
                    return e.src && 0 !== e.src.length ? void t.init(e) : void console.error("An array of source files must be passed with any new Howl.")
                };
            p.prototype = {
                init: function(e) {
                    var t = this;
                    return t._autoplay = e.autoplay || !1, t._format = "string" != typeof e.format ? e.format : [e.format], t._html5 = e.html5 || !1, t._muted = e.mute || !1, t._loop = e.loop || !1, t._pool = e.pool || 5, t._preload = "boolean" == typeof e.preload ? e.preload : !0, t._rate = e.rate || 1, t._sprite = e.sprite || {}, t._src = "string" != typeof e.src ? e.src : [e.src], t._volume = void 0 !== e.volume ? e.volume : 1, t._duration = 0, t._loaded = !1, t._sounds = [], t._endTimers = {}, t._queue = [], t._onend = e.onend ? [{
                        fn: e.onend
                    }] : [], t._onfade = e.onfade ? [{
                        fn: e.onfade
                    }] : [], t._onload = e.onload ? [{
                        fn: e.onload
                    }] : [], t._onloaderror = e.onloaderror ? [{
                        fn: e.onloaderror
                    }] : [], t._onpause = e.onpause ? [{
                        fn: e.onpause
                    }] : [], t._onplay = e.onplay ? [{
                        fn: e.onplay
                    }] : [], t._onstop = e.onstop ? [{
                        fn: e.onstop
                    }] : [], t._onmute = e.onmute ? [{
                        fn: e.onmute
                    }] : [], t._onvolume = e.onvolume ? [{
                        fn: e.onvolume
                    }] : [], t._onrate = e.onrate ? [{
                        fn: e.onrate
                    }] : [], t._onseek = e.onseek ? [{
                        fn: e.onseek
                    }] : [], t._webAudio = u && !t._html5, "undefined" != typeof s && s && f.mobileAutoEnable && f._enableMobileAudio(), f._howls.push(t), t._preload && t.load(), t
                },
                load: function() {
                    var e = this,
                        t = null;
                    if (l) return void e._emit("loaderror", null, "No audio support.");
                    "string" == typeof e._src && (e._src = [e._src]);
                    for (var n = 0; n < e._src.length; n++) {
                        var i, r;
                        if (e._format && e._format[n] ? i = e._format[n] : (r = e._src[n], i = /^data:audio\/([^;,]+);/i.exec(r), i || (i = /\.([^.]+)$/.exec(r.split("?", 1)[0])), i && (i = i[1].toLowerCase())), f.codecs(i)) {
                            t = e._src[n];
                            break
                        }
                    }
                    return t ? (e._src = t, "https:" === window.location.protocol && "http:" === t.slice(0, 5) && (e._html5 = !0, e._webAudio = !1), new m(e), e._webAudio && g(e), e) : void e._emit("loaderror", null, "No codec support for selected audio sources.")
                },
                play: function(e) {
                    var t = this,
                        n = arguments,
                        i = null;
                    if ("number" == typeof e) i = e, e = null;
                    else if ("undefined" == typeof e) {
                        e = "__default";
                        for (var r = 0, o = 0; o < t._sounds.length; o++) t._sounds[o]._paused && !t._sounds[o]._ended && (r++, i = t._sounds[o]._id);
                        1 === r ? e = null : i = null
                    }
                    var a = i ? t._soundById(i) : t._inactiveSound();
                    if (!a) return null;
                    if (i && !e && (e = a._sprite || "__default"), !t._loaded && !t._sprite[e]) return t._queue.push({
                        event: "play",
                        action: function() {
                            t.play(t._soundById(a._id) ? a._id : void 0)
                        }
                    }), a._id;
                    if (i && !a._paused) return a._id;
                    t._webAudio && f._autoResume();
                    var u = a._seek > 0 ? a._seek : t._sprite[e][0] / 1e3,
                        l = (t._sprite[e][0] + t._sprite[e][1]) / 1e3 - u,
                        c = 1e3 * l / Math.abs(a._rate);
                    c !== 1 / 0 && (t._endTimers[a._id] = setTimeout(t._ended.bind(t, a), c)), a._paused = !1, a._ended = !1, a._sprite = e, a._seek = u, a._start = t._sprite[e][0] / 1e3, a._stop = (t._sprite[e][0] + t._sprite[e][1]) / 1e3, a._loop = !(!a._loop && !t._sprite[e][2]);
                    var d = a._node;
                    if (t._webAudio) {
                        var p = function() {
                            t._refreshBuffer(a);
                            var e = a._muted || t._muted ? 0 : a._volume * f.volume();
                            d.gain.setValueAtTime(e, s.currentTime), a._playStart = s.currentTime, "undefined" == typeof d.bufferSource.start ? a._loop ? d.bufferSource.noteGrainOn(0, u, 86400) : d.bufferSource.noteGrainOn(0, u, l) : a._loop ? d.bufferSource.start(0, u, 86400) : d.bufferSource.start(0, u, l), t._endTimers[a._id] || c === 1 / 0 || (t._endTimers[a._id] = setTimeout(t._ended.bind(t, a), c)), n[1] || setTimeout(function() {
                                t._emit("play", a._id)
                            }, 0)
                        };
                        t._loaded ? p() : (t.once("load", p, a._id), t._clearTimer(a._id))
                    } else {
                        var m = function() {
                            d.currentTime = u, d.muted = a._muted || t._muted || f._muted || d.muted, d.volume = a._volume * f.volume(), d.playbackRate = a._rate, setTimeout(function() {
                                d.play(), n[1] || t._emit("play", a._id)
                            }, 0)
                        };
                        if (4 === d.readyState || !d.readyState && navigator.isCocoonJS) m();
                        else {
                            var v = function() {
                                c !== 1 / 0 && (t._endTimers[a._id] = setTimeout(t._ended.bind(t, a), c)), m(), d.removeEventListener(h, v, !1)
                            };
                            d.addEventListener(h, v, !1), t._clearTimer(a._id)
                        }
                    }
                    return a._id
                },
                pause: function(e) {
                    var t = this;
                    if (!t._loaded) return t._queue.push({
                        event: "pause",
                        action: function() {
                            t.pause(e)
                        }
                    }), t;
                    for (var n = t._getSoundIds(e), i = 0; i < n.length; i++) {
                        t._clearTimer(n[i]);
                        var r = t._soundById(n[i]);
                        if (r && !r._paused) {
                            if (r._seek = t.seek(n[i]), r._paused = !0, t._stopFade(n[i]), r._node)
                                if (t._webAudio) {
                                    if (!r._node.bufferSource) return t;
                                    "undefined" == typeof r._node.bufferSource.stop ? r._node.bufferSource.noteOff(0) : r._node.bufferSource.stop(0), r._node.bufferSource = null
                                } else isNaN(r._node.duration) && r._node.duration !== 1 / 0 || r._node.pause();
                            arguments[1] || t._emit("pause", r._id)
                        }
                    }
                    return t
                },
                stop: function(e) {
                    var t = this;
                    if (!t._loaded) return "undefined" != typeof t._sounds[0]._sprite && t._queue.push({
                        event: "stop",
                        action: function() {
                            t.stop(e)
                        }
                    }), t;
                    for (var n = t._getSoundIds(e), i = 0; i < n.length; i++) {
                        t._clearTimer(n[i]);
                        var r = t._soundById(n[i]);
                        if (r && !r._paused) {
                            if (r._seek = r._start || 0, r._paused = !0, r._ended = !0, t._stopFade(n[i]), r._node)
                                if (t._webAudio) {
                                    if (!r._node.bufferSource) return t;
                                    "undefined" == typeof r._node.bufferSource.stop ? r._node.bufferSource.noteOff(0) : r._node.bufferSource.stop(0), r._node.bufferSource = null
                                } else isNaN(r._node.duration) && r._node.duration !== 1 / 0 || (r._node.pause(), r._node.currentTime = r._start || 0);
                            t._emit("stop", r._id)
                        }
                    }
                    return t
                },
                mute: function(e, t) {
                    var n = this;
                    if (!n._loaded) return n._queue.push({
                        event: "mute",
                        action: function() {
                            n.mute(e, t)
                        }
                    }), n;
                    if ("undefined" == typeof t) {
                        if ("boolean" != typeof e) return n._muted;
                        n._muted = e
                    }
                    for (var i = n._getSoundIds(t), r = 0; r < i.length; r++) {
                        var o = n._soundById(i[r]);
                        o && (o._muted = e, n._webAudio && o._node ? o._node.gain.setValueAtTime(e ? 0 : o._volume * f.volume(), s.currentTime) : o._node && (o._node.muted = f._muted ? !0 : e), n._emit("mute", o._id))
                    }
                    return n
                },
                volume: function() {
                    var e, t, n = this,
                        i = arguments;
                    if (0 === i.length) return n._volume;
                    if (1 === i.length) {
                        var r = n._getSoundIds(),
                            o = r.indexOf(i[0]);
                        o >= 0 ? t = parseInt(i[0], 10) : e = parseFloat(i[0])
                    } else i.length >= 2 && (e = parseFloat(i[0]), t = parseInt(i[1], 10));
                    var a;
                    if (!("undefined" != typeof e && e >= 0 && 1 >= e)) return a = t ? n._soundById(t) : n._sounds[0], a ? a._volume : 0;
                    if (!n._loaded) return n._queue.push({
                        event: "volume",
                        action: function() {
                            n.volume.apply(n, i)
                        }
                    }), n;
                    "undefined" == typeof t && (n._volume = e), t = n._getSoundIds(t);
                    for (var u = 0; u < t.length; u++) a = n._soundById(t[u]), a && (a._volume = e, i[2] || n._stopFade(t[u]), n._webAudio && a._node && !a._muted ? a._node.gain.setValueAtTime(e * f.volume(), s.currentTime) : a._node && !a._muted && (a._node.volume = e * f.volume()), n._emit("volume", a._id));
                    return n
                },
                fade: function(e, t, n, i) {
                    var r = this;
                    if (!r._loaded) return r._queue.push({
                        event: "fade",
                        action: function() {
                            r.fade(e, t, n, i)
                        }
                    }), r;
                    r.volume(e, i);
                    for (var o = r._getSoundIds(i), a = 0; a < o.length; a++) {
                        var u = r._soundById(o[a]);
                        if (u)
                            if (i || r._stopFade(o[a]), r._webAudio && !u._muted) {
                                var l = s.currentTime,
                                    c = l + n / 1e3;
                                u._volume = e, u._node.gain.setValueAtTime(e, l), u._node.gain.linearRampToValueAtTime(t, c), u._timeout = setTimeout(function(e, n) {
                                    delete n._timeout, setTimeout(function() {
                                        n._volume = t, r._emit("fade", e)
                                    }, c - s.currentTime > 0 ? Math.ceil(1e3 * (c - s.currentTime)) : 0)
                                }.bind(r, o[a], u), n)
                            } else {
                                var h = Math.abs(e - t),
                                    d = e > t ? "out" : "in",
                                    f = h / .01,
                                    p = n / f;
                                ! function() {
                                    var n = e;
                                    u._interval = setInterval(function(e, i) {
                                        n += "in" === d ? .01 : -.01, n = Math.max(0, n), n = Math.min(1, n), n = Math.round(100 * n) / 100, r.volume(n, e, !0), n === t && (clearInterval(i._interval), delete i._interval, r._emit("fade", e))
                                    }.bind(r, o[a], u), p)
                                }()
                            }
                    }
                    return r
                },
                _stopFade: function(e) {
                    var t = this,
                        n = t._soundById(e);
                    return n._interval ? (clearInterval(n._interval), delete n._interval, t._emit("fade", e)) : n._timeout && (clearTimeout(n._timeout), delete n._timeout, n._node.gain.cancelScheduledValues(s.currentTime), t._emit("fade", e)), t
                },
                loop: function() {
                    var e, t, n, i = this,
                        r = arguments;
                    if (0 === r.length) return i._loop;
                    if (1 === r.length) {
                        if ("boolean" != typeof r[0]) return n = i._soundById(parseInt(r[0], 10)), n ? n._loop : !1;
                        e = r[0], i._loop = e
                    } else 2 === r.length && (e = r[0], t = parseInt(r[1], 10));
                    for (var o = i._getSoundIds(t), a = 0; a < o.length; a++) n = i._soundById(o[a]), n && (n._loop = e, i._webAudio && n._node && n._node.bufferSource && (n._node.bufferSource.loop = e));
                    return i
                },
                rate: function() {
                    var e, t, n = this,
                        i = arguments;
                    if (0 === i.length) t = n._sounds[0]._id;
                    else if (1 === i.length) {
                        var r = n._getSoundIds(),
                            o = r.indexOf(i[0]);
                        o >= 0 ? t = parseInt(i[0], 10) : e = parseFloat(i[0])
                    } else 2 === i.length && (e = parseFloat(i[0]), t = parseInt(i[1], 10));
                    var a;
                    if ("number" != typeof e) return a = n._soundById(t), a ? a._rate : n._rate;
                    if (!n._loaded) return n._queue.push({
                        event: "rate",
                        action: function() {
                            n.rate.apply(n, i)
                        }
                    }), n;
                    "undefined" == typeof t && (n._rate = e), t = n._getSoundIds(t);
                    for (var s = 0; s < t.length; s++)
                        if (a = n._soundById(t[s])) {
                            a._rate = e, n._webAudio && a._node && a._node.bufferSource ? a._node.bufferSource.playbackRate.value = e : a._node && (a._node.playbackRate = e);
                            var u = n.seek(t[s]),
                                l = (n._sprite[a._sprite][0] + n._sprite[a._sprite][1]) / 1e3 - u,
                                c = 1e3 * l / Math.abs(a._rate);
                            n._clearTimer(t[s]), n._endTimers[t[s]] = setTimeout(n._ended.bind(n, a), c), n._emit("rate", a._id)
                        }
                    return n
                },
                seek: function() {
                    var e, t, n = this,
                        i = arguments;
                    if (0 === i.length) t = n._sounds[0]._id;
                    else if (1 === i.length) {
                        var r = n._getSoundIds(),
                            o = r.indexOf(i[0]);
                        o >= 0 ? t = parseInt(i[0], 10) : (t = n._sounds[0]._id, e = parseFloat(i[0]))
                    } else 2 === i.length && (e = parseFloat(i[0]), t = parseInt(i[1], 10));
                    if ("undefined" == typeof t) return n;
                    if (!n._loaded) return n._queue.push({
                        event: "seek",
                        action: function() {
                            n.seek.apply(n, i)
                        }
                    }), n;
                    var a = n._soundById(t);
                    if (a) {
                        if (!(e >= 0)) return n._webAudio ? a._seek + (n.playing(t) ? s.currentTime - a._playStart : 0) : a._node.currentTime;
                        var u = n.playing(t);
                        u && n.pause(t, !0), a._seek = e, n._clearTimer(t), u && n.play(t, !0), n._emit("seek", t)
                    }
                    return n
                },
                playing: function(e) {
                    var t = this,
                        n = t._soundById(e) || t._sounds[0];
                    return n ? !n._paused : !1
                },
                duration: function() {
                    return this._duration
                },
                unload: function() {
                    for (var e = this, t = e._sounds, n = 0; n < t.length; n++) {
                        t[n]._paused || (e.stop(t[n]._id), e._emit("end", t[n]._id)), e._webAudio || (t[n]._node.src = "", t[n]._node.removeEventListener("error", t[n]._errorFn, !1), t[n]._node.removeEventListener(h, t[n]._loadFn, !1)), delete t[n]._node, e._clearTimer(t[n]._id);
                        var i = f._howls.indexOf(e);
                        i >= 0 && f._howls.splice(i, 1)
                    }
                    return v && delete v[e._src], e._sounds = [], e = null, null
                },
                on: function(e, t, n, i) {
                    var r = this,
                        o = r["_on" + e];
                    return "function" == typeof t && o.push(i ? {
                        id: n,
                        fn: t,
                        once: i
                    } : {
                        id: n,
                        fn: t
                    }), r
                },
                off: function(e, t, n) {
                    var i = this,
                        r = i["_on" + e];
                    if (t) {
                        for (var o = 0; o < r.length; o++)
                            if (t === r[o].fn && n === r[o].id) {
                                r.splice(o, 1);
                                break
                            }
                    } else if (e) i["_on" + e] = [];
                    else
                        for (var a = Object.keys(i), o = 0; o < a.length; o++) 0 === a[o].indexOf("_on") && Array.isArray(i[a[o]]) && (i[a[o]] = []);
                    return i
                },
                once: function(e, t, n) {
                    var i = this;
                    return i.on(e, t, n, 1), i
                },
                _emit: function(e, t, n) {
                    for (var i = this, r = i["_on" + e], o = r.length - 1; o >= 0; o--) r[o].id && r[o].id !== t && "load" !== e || (setTimeout(function(e) {
                        e.call(this, t, n)
                    }.bind(i, r[o].fn), 0), r[o].once && i.off(e, r[o].fn, r[o].id));
                    return i
                },
                _loadQueue: function() {
                    var e = this;
                    if (e._queue.length > 0) {
                        var t = e._queue[0];
                        e.once(t.event, function() {
                            e._queue.shift(), e._loadQueue()
                        }), t.action()
                    }
                    return e
                },
                _ended: function(e) {
                    var t = this,
                        n = e._sprite,
                        i = !(!e._loop && !t._sprite[n][2]);
                    if (t._emit("end", e._id), !t._webAudio && i && t.stop(e._id).play(e._id), t._webAudio && i) {
                        t._emit("play", e._id), e._seek = e._start || 0, e._playStart = s.currentTime;
                        var r = 1e3 * (e._stop - e._start) / Math.abs(e._rate);
                        t._endTimers[e._id] = setTimeout(t._ended.bind(t, e), r)
                    }
                    return t._webAudio && !i && (e._paused = !0, e._ended = !0, e._seek = e._start || 0, t._clearTimer(e._id), e._node.bufferSource = null, f._autoSuspend()), t._webAudio || i || t.stop(e._id), t
                },
                _clearTimer: function(e) {
                    var t = this;
                    return t._endTimers[e] && (clearTimeout(t._endTimers[e]), delete t._endTimers[e]), t
                },
                _soundById: function(e) {
                    for (var t = this, n = 0; n < t._sounds.length; n++)
                        if (e === t._sounds[n]._id) return t._sounds[n];
                    return null
                },
                _inactiveSound: function() {
                    var e = this;
                    e._drain();
                    for (var t = 0; t < e._sounds.length; t++)
                        if (e._sounds[t]._ended) return e._sounds[t].reset();
                    return new m(e)
                },
                _drain: function() {
                    var e = this,
                        t = e._pool,
                        n = 0,
                        i = 0;
                    if (!(e._sounds.length < t)) {
                        for (i = 0; i < e._sounds.length; i++) e._sounds[i]._ended && n++;
                        for (i = e._sounds.length - 1; i >= 0; i--) {
                            if (t >= n) return;
                            e._sounds[i]._ended && (e._webAudio && e._sounds[i]._node && e._sounds[i]._node.disconnect(0), e._sounds.splice(i, 1), n--)
                        }
                    }
                },
                _getSoundIds: function(e) {
                    var t = this;
                    if ("undefined" == typeof e) {
                        for (var n = [], i = 0; i < t._sounds.length; i++) n.push(t._sounds[i]._id);
                        return n
                    }
                    return [e]
                },
                _refreshBuffer: function(e) {
                    var t = this;
                    return e._node.bufferSource = s.createBufferSource(), e._node.bufferSource.buffer = v[t._src], e._node.bufferSource.connect(e._panner ? e._panner : e._node), e._node.bufferSource.loop = e._loop, e._loop && (e._node.bufferSource.loopStart = e._start || 0, e._node.bufferSource.loopEnd = e._stop), e._node.bufferSource.playbackRate.value = t._rate, t
                }
            };
            var m = function(e) {
                this._parent = e, this.init()
            };
            if (m.prototype = {
                    init: function() {
                        var e = this,
                            t = e._parent;
                        return e._muted = t._muted, e._loop = t._loop, e._volume = t._volume, e._muted = t._muted, e._rate = t._rate, e._seek = 0, e._paused = !0, e._ended = !0, e._sprite = "__default", e._id = Math.round(Date.now() * Math.random()), t._sounds.push(e), e.create(), e
                    },
                    create: function() {
                        var e = this,
                            t = e._parent,
                            n = f._muted || e._muted || e._parent._muted ? 0 : e._volume * f.volume();
                        return t._webAudio ? (e._node = "undefined" == typeof s.createGain ? s.createGainNode() : s.createGain(), e._node.gain.setValueAtTime(n, s.currentTime), e._node.paused = !0, e._node.connect(c)) : (e._node = new Audio, e._errorFn = e._errorListener.bind(e), e._node.addEventListener("error", e._errorFn, !1), e._loadFn = e._loadListener.bind(e), e._node.addEventListener(h, e._loadFn, !1), e._node.src = t._src, e._node.preload = "auto", e._node.volume = n, e._node.load()), e
                    },
                    reset: function() {
                        var e = this,
                            t = e._parent;
                        return e._muted = t._muted, e._loop = t._loop, e._volume = t._volume, e._muted = t._muted, e._rate = t._rate, e._seek = 0, e._paused = !0, e._ended = !0, e._sprite = "__default", e._id = Math.round(Date.now() * Math.random()), e
                    },
                    _errorListener: function() {
                        var e = this;
                        e._node.error && 4 === e._node.error.code && (f.noAudio = !0), e._parent._emit("loaderror", e._id, e._node.error ? e._node.error.code : 0), e._node.removeEventListener("error", e._errorListener, !1)
                    },
                    _loadListener: function() {
                        var e = this,
                            t = e._parent;
                        t._duration = Math.ceil(10 * e._node.duration) / 10, 0 === Object.keys(t._sprite).length && (t._sprite = {
                            __default: [0, 1e3 * t._duration]
                        }), t._loaded || (t._loaded = !0, t._emit("load"), t._loadQueue()), t._autoplay && t.play(), e._node.removeEventListener(h, e._loadFn, !1)
                    }
                }, u) var v = {},
                g = function(e) {
                    var t = e._src;
                    if (v[t]) return e._duration = v[t].duration, void x(e);
                    if (/^data:[^;]+;base64,/.test(t)) {
                        window.atob = window.atob || function(e) {
                            for (var t, n, i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", r = String(e).replace(/=+$/, ""), o = 0, a = 0, s = ""; n = r.charAt(a++); ~n && (t = o % 4 ? 64 * t + n : n, o++ % 4) ? s += String.fromCharCode(255 & t >> (-2 * o & 6)) : 0) n = i.indexOf(n);
                            return s
                        };
                        for (var n = atob(t.split(",")[1]), i = new Uint8Array(n.length), r = 0; r < n.length; ++r) i[r] = n.charCodeAt(r);
                        _(i.buffer, e)
                    } else {
                        var o = new XMLHttpRequest;
                        o.open("GET", t, !0), o.responseType = "arraybuffer", o.onload = function() {
                            _(o.response, e)
                        }, o.onerror = function() {
                            e._webAudio && (e._html5 = !0, e._webAudio = !1, e._sounds = [], delete v[t], e.load())
                        }, y(o)
                    }
                },
                y = function(e) {
                    try {
                        e.send()
                    } catch (t) {
                        e.onerror()
                    }
                },
                _ = function(e, t) {
                    s.decodeAudioData(e, function(e) {
                        e && t._sounds.length > 0 && (v[t._src] = e, x(t, e))
                    }, function() {
                        t._emit("loaderror", null, "Decoding audio data failed.")
                    })
                },
                x = function(e, t) {
                    t && !e._duration && (e._duration = t.duration), 0 === Object.keys(e._sprite).length && (e._sprite = {
                        __default: [0, 1e3 * e._duration]
                    }), e._loaded || (e._loaded = !0, e._emit("load"), e._loadQueue()), e._autoplay && e.play()
                };
            n(5) && (i = [], r = function() {
                return {
                    Howler: f,
                    Howl: p
                }
            }.apply(t, i), !(void 0 !== r && (e.exports = r))), "undefined" != typeof t && (t.Howler = f, t.Howl = p), "undefined" != typeof window ? (window.HowlerGlobal = d, window.Howler = f, window.Howl = p, window.Sound = m) : "undefined" != typeof o && (o.HowlerGlobal = d, o.Howler = f, o.Howl = p, o.Sound = m)
        }(), /*! Effects Plugin */ ! function() {
            "use strict";
            HowlerGlobal.prototype._pos = [0, 0, 0], HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0], HowlerGlobal.prototype._velocity = [0, 0, 0], HowlerGlobal.prototype._listenerAttr = {
                dopplerFactor: 1,
                speedOfSound: 343.3
            }, HowlerGlobal.prototype.pos = function(e, t, n) {
                var i = this;
                return i.ctx && i.ctx.listener ? (t = "number" != typeof t ? i._pos[1] : t, n = "number" != typeof n ? i._pos[2] : n, "number" != typeof e ? i._pos : (i._pos = [e, t, n], i.ctx.listener.setPosition(i._pos[0], i._pos[1], i._pos[2]), i)) : i
            }, HowlerGlobal.prototype.orientation = function(e, t, n, i, r, o) {
                var a = this;
                if (!a.ctx || !a.ctx.listener) return a;
                var s = a._orientation;
                return t = "number" != typeof t ? s[1] : t, n = "number" != typeof n ? s[2] : n, i = "number" != typeof i ? s[3] : i, r = "number" != typeof r ? s[4] : r, o = "number" != typeof o ? s[5] : o, "number" != typeof e ? s : (a._orientation = [e, t, n, i, r, o], a.ctx.listener.setOrientation(e, t, n, i, r, o), a)
            }, HowlerGlobal.prototype.velocity = function(e, t, n) {
                var i = this;
                return i.ctx && i.ctx.listener ? (t = "number" != typeof t ? i._velocity[1] : t, n = "number" != typeof n ? i._velocity[2] : n, "number" != typeof e ? i._velocity : (i._velocity = [e, t, n], i.ctx.listener.setVelocity(i._velocity[0], i._velocity[1], i._velocity[2]), i)) : i
            }, HowlerGlobal.prototype.listenerAttr = function(e) {
                var t = this;
                if (!t.ctx || !t.ctx.listener) return t;
                var n = t._listenerAttr;
                return e ? (t._listenerAttr = {
                    dopplerFactor: "undefined" != typeof e.dopplerFactor ? e.dopplerFactor : n.dopplerFactor,
                    speedOfSound: "undefined" != typeof e.speedOfSound ? e.speedOfSound : n.speedOfSound
                }, t.ctx.listener.dopplerFactor = n.dopplerFactor, t.ctx.listener.speedOfSound = n.speedOfSound, t) : n
            }, Howl.prototype.init = function(e) {
                return function(t) {
                    var n = this;
                    return n._orientation = t.orientation || [1, 0, 0], n._pos = t.pos || null, n._velocity = t.velocity || [0, 0, 0], n._pannerAttr = {
                        coneInnerAngle: "undefined" != typeof t.coneInnerAngle ? t.coneInnerAngle : 360,
                        coneOuterAngle: "undefined" != typeof t.coneOuterAngle ? t.coneOuterAngle : 360,
                        coneOuterGain: "undefined" != typeof t.coneOuterGain ? t.coneOuterGain : 0,
                        distanceModel: "undefined" != typeof t.distanceModel ? t.distanceModel : "inverse",
                        maxDistance: "undefined" != typeof t.maxDistance ? t.maxDistance : 1e4,
                        panningModel: "undefined" != typeof t.panningModel ? t.panningModel : "HRTF",
                        refDistance: "undefined" != typeof t.refDistance ? t.refDistance : 1,
                        rolloffFactor: "undefined" != typeof t.rolloffFactor ? t.rolloffFactor : 1
                    }, e.call(this, t)
                }
            }(Howl.prototype.init), Howl.prototype.pos = function(t, n, i, r) {
                var o = this;
                if (!o._webAudio) return o;
                if (!o._loaded) return o.once("play", function() {
                    o.pos(t, n, i, r)
                }), o;
                if (n = "number" != typeof n ? 0 : n, i = "number" != typeof i ? -.5 : i, "undefined" == typeof r) {
                    if ("number" != typeof t) return o._pos;
                    o._pos = [t, n, i]
                }
                for (var a = o._getSoundIds(r), s = 0; s < a.length; s++) {
                    var u = o._soundById(a[s]);
                    if (u) {
                        if ("number" != typeof t) return u._pos;
                        u._pos = [t, n, i], u._node && (u._panner || e(u), u._panner.setPosition(t, n, i))
                    }
                }
                return o
            }, Howl.prototype.orientation = function(t, n, i, r) {
                var o = this;
                if (!o._webAudio) return o;
                if (!o._loaded) return o.once("play", function() {
                    o.orientation(t, n, i, r)
                }), o;
                if (n = "number" != typeof n ? o._orientation[1] : n, i = "number" != typeof i ? o._orientation[2] : i, "undefined" == typeof r) {
                    if ("number" != typeof t) return o._orientation;
                    o._orientation = [t, n, i]
                }
                for (var a = o._getSoundIds(r), s = 0; s < a.length; s++) {
                    var u = o._soundById(a[s]);
                    if (u) {
                        if ("number" != typeof t) return u._orientation;
                        u._orientation = [t, n, i], u._node && (u._panner || e(u), u._panner.setOrientation(t, n, i))
                    }
                }
                return o
            }, Howl.prototype.velocity = function(t, n, i, r) {
                var o = this;
                if (!o._webAudio) return o;
                if (!o._loaded) return o.once("play", function() {
                    o.velocity(t, n, i, r)
                }), o;
                if (n = "number" != typeof n ? o._velocity[1] : n, i = "number" != typeof i ? o._velocity[2] : i, "undefined" == typeof r) {
                    if ("number" != typeof t) return o._velocity;
                    o._velocity = [t, n, i]
                }
                for (var a = o._getSoundIds(r), s = 0; s < a.length; s++) {
                    var u = o._soundById(a[s]);
                    if (u) {
                        if ("number" != typeof t) return u._velocity;
                        u._velocity = [t, n, i], u._node && (u._panner || e(u), u._panner.setVelocity(t, n, i))
                    }
                }
                return o
            }, Howl.prototype.pannerAttr = function() {
                var t, n, i, r = this,
                    o = arguments;
                if (!r._webAudio) return r;
                if (0 === o.length) return r._pannerAttr;
                if (1 === o.length) {
                    if ("object" != typeof o[0]) return i = r._soundById(parseInt(o[0], 10)), i ? i._pannerAttr : r._pannerAttr;
                    t = o[0], "undefined" == typeof n && (r._pannerAttr = {
                        coneInnerAngle: "undefined" != typeof t.coneInnerAngle ? t.coneInnerAngle : r._coneInnerAngle,
                        coneOuterAngle: "undefined" != typeof t.coneOuterAngle ? t.coneOuterAngle : r._coneOuterAngle,
                        coneOuterGain: "undefined" != typeof t.coneOuterGain ? t.coneOuterGain : r._coneOuterGain,
                        distanceModel: "undefined" != typeof t.distanceModel ? t.distanceModel : r._distanceModel,
                        maxDistance: "undefined" != typeof t.maxDistance ? t.maxDistance : r._maxDistance,
                        panningModel: "undefined" != typeof t.panningModel ? t.panningModel : r._panningModel,
                        refDistance: "undefined" != typeof t.refDistance ? t.refDistance : r._refDistance,
                        rolloffFactor: "undefined" != typeof t.rolloffFactor ? t.rolloffFactor : r._rolloffFactor
                    })
                } else 2 === o.length && (t = o[0], n = parseInt(o[1], 10));
                for (var a = r._getSoundIds(n), s = 0; s < a.length; s++)
                    if (i = r._soundById(a[s])) {
                        var u = i._pannerAttr;
                        u = {
                            coneInnerAngle: "undefined" != typeof t.coneInnerAngle ? t.coneInnerAngle : u.coneInnerAngle,
                            coneOuterAngle: "undefined" != typeof t.coneOuterAngle ? t.coneOuterAngle : u.coneOuterAngle,
                            coneOuterGain: "undefined" != typeof t.coneOuterGain ? t.coneOuterGain : u.coneOuterGain,
                            distanceModel: "undefined" != typeof t.distanceModel ? t.distanceModel : u.distanceModel,
                            maxDistance: "undefined" != typeof t.maxDistance ? t.maxDistance : u.maxDistance,
                            panningModel: "undefined" != typeof t.panningModel ? t.panningModel : u.panningModel,
                            refDistance: "undefined" != typeof t.refDistance ? t.refDistance : u.refDistance,
                            rolloffFactor: "undefined" != typeof t.rolloffFactor ? t.rolloffFactor : u.rolloffFactor
                        };
                        var l = i._panner;
                        l ? (l.coneInnerAngle = u.coneInnerAngle, l.coneOuterAngle = u.coneOuterAngle, l.coneOuterGain = u.coneOuterGain, l.distanceModel = u.distanceModel, l.maxDistance = u.maxDistance, l.panningModel = u.panningModel, l.refDistance = u.refDistance, l.rolloffFactor = u.rolloffFactor) : (i._pos || (i._pos = r._pos || [0, 0, -.5]), e(i))
                    }
                return r
            }, Sound.prototype.init = function(e) {
                return function() {
                    var t = this,
                        n = t._parent;
                    t._orientation = n._orientation, t._pos = n._pos, t._velocity = n._velocity, t._pannerAttr = n._pannerAttr, e.call(this), t._pos && n.pos(t._pos[0], t._pos[1], t._pos[2], t._id)
                }
            }(Sound.prototype.init), Sound.prototype.reset = function(e) {
                return function() {
                    var t = this,
                        n = t._parent;
                    return t._orientation = n._orientation, t._pos = n._pos, t._velocity = n._velocity, t._pannerAttr = n._pannerAttr, e.call(this)
                }
            }(Sound.prototype.reset);
            var e = function(e) {
                e._panner = Howler.ctx.createPanner(), e._panner.coneInnerAngle = e._pannerAttr.coneInnerAngle, e._panner.coneOuterAngle = e._pannerAttr.coneOuterAngle, e._panner.coneOuterGain = e._pannerAttr.coneOuterGain, e._panner.distanceModel = e._pannerAttr.distanceModel, e._panner.maxDistance = e._pannerAttr.maxDistance, e._panner.panningModel = e._pannerAttr.panningModel, e._panner.refDistance = e._pannerAttr.refDistance, e._panner.rolloffFactor = e._pannerAttr.rolloffFactor, e._panner.setPosition(e._pos[0], e._pos[1], e._pos[2]), e._panner.setOrientation(e._orientation[0], e._orientation[1], e._orientation[2]), e._panner.setVelocity(e._velocity[0], e._velocity[1], e._velocity[2]), e._panner.connect(e._node), e._paused || e._parent.pause(e._id).play(e._id)
            }
        }()
    }).call(t, function() {
        return this
    }())
}, function(e, t) {
    "use strict";
    THREE.CopyShader = {
        uniforms: {
            tDiffuse: {
                type: "t",
                value: null
            },
            opacity: {
                type: "f",
                value: 1
            }
        },
        vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
        fragmentShader: ["uniform float opacity;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "vec4 texel = texture2D( tDiffuse, vUv );", "gl_FragColor = opacity * texel;", "}"].join("\n")
    }, THREE.DotScreenShader = {
        uniforms: {
            tDiffuse: {
                type: "t",
                value: null
            },
            tSize: {
                type: "v2",
                value: new THREE.Vector2(256, 256)
            },
            center: {
                type: "v2",
                value: new THREE.Vector2(.5, .5)
            },
            angle: {
                type: "f",
                value: 1.57
            },
            scale: {
                type: "f",
                value: 1
            }
        },
        vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
        fragmentShader: ["uniform vec2 center;", "uniform float angle;", "uniform float scale;", "uniform vec2 tSize;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "float pattern() {", "float s = sin( angle ), c = cos( angle );", "vec2 tex = vUv * tSize - center;", "vec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;", "return ( sin( point.x ) * sin( point.y ) ) * 4.0;", "}", "void main() {", "vec4 color = texture2D( tDiffuse, vUv );", "float average = ( color.r + color.g + color.b ) / 3.0;", "gl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );", "}"].join("\n")
    }, THREE.RGBShiftShader = {
        uniforms: {
            tDiffuse: {
                type: "t",
                value: null
            },
            amount: {
                type: "f",
                value: .005
            },
            angle: {
                type: "f",
                value: 0
            }
        },
        vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
        fragmentShader: ["uniform sampler2D tDiffuse;", "uniform float amount;", "uniform float angle;", "varying vec2 vUv;", "void main() {", "vec2 offset = amount * vec2( cos(angle), sin(angle));", "vec4 cr = texture2D(tDiffuse, vUv + offset);", "vec4 cga = texture2D(tDiffuse, vUv);", "vec4 cb = texture2D(tDiffuse, vUv - offset);", "gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);", "}"].join("\n")
    }, THREE.DigitalGlitch = {
        uniforms: {
            tDiffuse: {
                type: "t",
                value: null
            },
            tDisp: {
                type: "t",
                value: null
            },
            byp: {
                type: "i",
                value: 0
            },
            amount: {
                type: "f",
                value: .08
            },
            angle: {
                type: "f",
                value: .02
            },
            seed: {
                type: "f",
                value: .02
            },
            seed_x: {
                type: "f",
                value: .02
            },
            seed_y: {
                type: "f",
                value: .02
            },
            distortion_x: {
                type: "f",
                value: 0
            },
            distortion_y: {
                type: "f",
                value: 0
            },
            col_s: {
                type: "f",
                value: .05
            }
        },
        vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
        fragmentShader: ["uniform int byp;", "uniform sampler2D tDiffuse;", "uniform sampler2D tDisp;", "uniform float amount;", "uniform float angle;", "uniform float seed;", "uniform float seed_x;", "uniform float seed_y;", "uniform float distortion_x;", "uniform float distortion_y;", "uniform float col_s;", "varying vec2 vUv;", "float rand(vec2 co){", "return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);", "}", "void main() {", "if(byp<1) {", "vec2 p = vUv;", "float xs = floor(gl_FragCoord.x / 0.5);", "float ys = floor(gl_FragCoord.y / 0.5);", "vec4 normal = texture2D (tDisp, p*seed*seed);", "if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {", "if(seed_x>0.){", "p.y = 1. - (p.y + distortion_y);", "}", "else {", "p.y = distortion_y;", "}", "}", "if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {", "if(seed_y>0.){", "p.x=distortion_x;", "}", "else {", "p.x = 1. - (p.x + distortion_x);", "}", "}", "p.x+=normal.x*seed_x*(seed/5.);", "p.y+=normal.y*seed_y*(seed/5.);", "vec2 offset = amount * vec2( cos(angle), sin(angle));", "vec4 cr = texture2D(tDiffuse, p + offset);", "vec4 cga = texture2D(tDiffuse, p);", "vec4 cb = texture2D(tDiffuse, p - offset);", "gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);", "vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);", "gl_FragColor = gl_FragColor+ snow;", "}", "else {", "gl_FragColor=texture2D (tDiffuse, vUv);", "}", "}"].join("\n")
    }, THREE.GlitchPass = function(e) {
        void 0 === THREE.DigitalGlitch && console.error("THREE.GlitchPass relies on THREE.DigitalGlitch");
        var t = THREE.DigitalGlitch;
        this.uniforms = THREE.UniformsUtils.clone(t.uniforms), void 0 == e && (e = 64), this.uniforms.tDisp.value = this.generateHeightmap(e), this.uniforms.byp.value = 1, this.material = new THREE.ShaderMaterial({
            uniforms: this.uniforms,
            vertexShader: t.vertexShader,
            fragmentShader: t.fragmentShader
        }), this.enabled = !0, this.renderToScreen = !1, this.needsSwap = !0, this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1), this.scene = new THREE.Scene, this.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null), this.scene.add(this.quad), this.goWild = !1, this.curF = 0, this.generateTrigger()
    }, THREE.GlitchPass.prototype = {
        render: function(e, t, n, i) {
            this.uniforms.tDiffuse.value = n, this.uniforms.seed.value = Math.random(), this.uniforms.amount.value = Math.random() / 100, this.uniforms.angle.value = THREE.Math.randFloat(-Math.PI, Math.PI), this.uniforms.seed_x.value = THREE.Math.randFloat(-.1, .1), this.uniforms.seed_y.value = THREE.Math.randFloat(-.1, .1), this.uniforms.distortion_x.value = THREE.Math.randFloat(0, 1), this.uniforms.distortion_y.value = THREE.Math.randFloat(0, 1), this.curF = 0, this.generateTrigger(), this.quad.material = this.material, this.renderToScreen ? e.render(this.scene, this.camera) : e.render(this.scene, this.camera, t, !1)
        },
        generateTrigger: function() {
            this.randX = THREE.Math.randInt(120, 240)
        },
        generateHeightmap: function(e) {
            for (var t = new Float32Array(e * e * 3), n = e * e, i = 0; n > i; i++) {
                var r = THREE.Math.randFloat(0, 1);
                t[3 * i + 0] = r, t[3 * i + 1] = r, t[3 * i + 2] = r
            }
            var o = new THREE.DataTexture(t, e, e, THREE.RGBFormat, THREE.FloatType);
            return o.needsUpdate = !0, o
        }
    }, THREE.EffectComposer = function(e, t) {
        if (this.renderer = e, void 0 === t) {
            var n = e.getPixelRatio(),
                i = Math.floor(e.context.canvas.width / n) || 1,
                r = Math.floor(e.context.canvas.height / n) || 1,
                o = {
                    minFilter: THREE.LinearFilter,
                    magFilter: THREE.LinearFilter,
                    format: THREE.RGBFormat,
                    stencilBuffer: !1
                };
            t = new THREE.WebGLRenderTarget(i, r, o)
        }
        this.renderTarget1 = t, this.renderTarget2 = t.clone(), this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2, this.passes = [], void 0 === THREE.CopyShader && console.error("THREE.EffectComposer relies on THREE.CopyShader"), this.copyPass = new THREE.ShaderPass(THREE.CopyShader)
    }, THREE.EffectComposer.prototype = {
        swapBuffers: function() {
            var e = this.readBuffer;
            this.readBuffer = this.writeBuffer, this.writeBuffer = e
        },
        addPass: function(e) {
            this.passes.push(e)
        },
        insertPass: function(e, t) {
            this.passes.splice(t, 0, e)
        },
        render: function(e) {
            this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2;
            var t, n, i = !1,
                r = this.passes.length;
            for (n = 0; r > n; n++)
                if (t = this.passes[n], t.enabled) {
                    if (t.render(this.renderer, this.writeBuffer, this.readBuffer, e, i), t.needsSwap) {
                        if (i) {
                            var o = this.renderer.context;
                            o.stencilFunc(o.NOTEQUAL, 1, 4294967295), this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, e), o.stencilFunc(o.EQUAL, 1, 4294967295)
                        }
                        this.swapBuffers()
                    }
                    t instanceof THREE.MaskPass ? i = !0 : t instanceof THREE.ClearMaskPass && (i = !1)
                }
        },
        reset: function(e) {
            if (void 0 === e) {
                e = this.renderTarget1.clone();
                var t = this.renderer.getPixelRatio();
                e.width = Math.floor(this.renderer.context.canvas.width / t), e.height = Math.floor(this.renderer.context.canvas.height / t)
            }
            this.renderTarget1.dispose(), this.renderTarget1 = e, this.renderTarget2.dispose(), this.renderTarget2 = e.clone(), this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2
        },
        setSize: function(e, t) {
            this.renderTarget1.setSize(e, t), this.renderTarget2.setSize(e, t)
        }
    }, THREE.RenderPass = function(e, t, n, i, r) {
        this.scene = e, this.camera = t, this.overrideMaterial = n, this.clearColor = i, this.clearAlpha = void 0 !== r ? r : 1, this.oldClearColor = new THREE.Color, this.oldClearAlpha = 1, this.enabled = !0, this.clear = !0, this.needsSwap = !1
    }, THREE.RenderPass.prototype = {
        render: function(e, t, n, i) {
            this.scene.overrideMaterial = this.overrideMaterial, this.clearColor && (this.oldClearColor.copy(e.getClearColor()), this.oldClearAlpha = e.getClearAlpha(), e.setClearColor(this.clearColor, this.clearAlpha)), e.render(this.scene, this.camera, n, this.clear), this.clearColor && e.setClearColor(this.oldClearColor, this.oldClearAlpha), this.scene.overrideMaterial = null
        }
    }, THREE.MaskPass = function(e, t) {
        this.scene = e, this.camera = t, this.enabled = !0, this.clear = !0, this.needsSwap = !1, this.inverse = !1
    }, THREE.MaskPass.prototype = {
        render: function(e, t, n, i) {
            var r = e.context;
            r.colorMask(!1, !1, !1, !1), r.depthMask(!1);
            var o, a;
            this.inverse ? (o = 0, a = 1) : (o = 1, a = 0), r.enable(r.STENCIL_TEST), r.stencilOp(r.REPLACE, r.REPLACE, r.REPLACE), r.stencilFunc(r.ALWAYS, o, 4294967295), r.clearStencil(a), e.render(this.scene, this.camera, n, this.clear), e.render(this.scene, this.camera, t, this.clear), r.colorMask(!0, !0, !0, !0), r.depthMask(!0), r.stencilFunc(r.EQUAL, 1, 4294967295), r.stencilOp(r.KEEP, r.KEEP, r.KEEP)
        }
    }, THREE.ClearMaskPass = function() {
        this.enabled = !0
    }, THREE.ClearMaskPass.prototype = {
        render: function(e, t, n, i) {
            var r = e.context;
            r.disable(r.STENCIL_TEST)
        }
    }, THREE.ShaderPass = function(e, t) {
        this.textureID = void 0 !== t ? t : "tDiffuse", this.uniforms = THREE.UniformsUtils.clone(e.uniforms), this.material = new THREE.ShaderMaterial({
            defines: e.defines || {},
            uniforms: this.uniforms,
            vertexShader: e.vertexShader,
            fragmentShader: e.fragmentShader
        }), this.renderToScreen = !1, this.enabled = !0, this.needsSwap = !0, this.clear = !1, this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1), this.scene = new THREE.Scene, this.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null), this.scene.add(this.quad)
    }, THREE.ShaderPass.prototype = {
        render: function(e, t, n, i) {
            this.uniforms[this.textureID] && (this.uniforms[this.textureID].value = n), this.quad.material = this.material, this.renderToScreen ? e.render(this.scene, this.camera) : e.render(this.scene, this.camera, t, this.clear)
        }
    }
}, function(e, t) {
    "use strict";
    THREE.OBJLoader = function(e) {
        this.manager = void 0 !== e ? e : THREE.DefaultLoadingManager
    }, THREE.OBJLoader.prototype = {
        constructor: THREE.OBJLoader,
        load: function(e, t, n, i) {
            var r = this,
                o = new THREE.XHRLoader(r.manager);
            o.setCrossOrigin(this.crossOrigin), o.load(e, function(e) {
                t(r.parse(e))
            }, n, i)
        },
        setCrossOrigin: function(e) {
            this.crossOrigin = e
        },
        parse: function(e) {
            function t(e) {
                var t = parseInt(e);
                return 3 * (t >= 0 ? t - 1 : t + d.length / 3)
            }

            function n(e) {
                var t = parseInt(e);
                return 3 * (t >= 0 ? t - 1 : t + f.length / 3)
            }

            function i(e) {
                var t = parseInt(e);
                return 2 * (t >= 0 ? t - 1 : t + p.length / 2)
            }

            function r(e, t, n) {
                l.vertices.push(d[e], d[e + 1], d[e + 2], d[t], d[t + 1], d[t + 2], d[n], d[n + 1], d[n + 2])
            }

            function o(e, t, n) {
                l.normals.push(f[e], f[e + 1], f[e + 2], f[t], f[t + 1], f[t + 2], f[n], f[n + 1], f[n + 2])
            }

            function a(e, t, n) {
                l.uvs.push(p[e], p[e + 1], p[t], p[t + 1], p[n], p[n + 1])
            }

            function s(e, s, u, l, c, h, d, f, p, m, v, g) {
                var y, _ = t(e),
                    x = t(s),
                    b = t(u);
                void 0 === l ? r(_, x, b) : (y = t(l), r(_, x, y), r(x, b, y)), void 0 !== c && (_ = i(c), x = i(h), b = i(d), void 0 === l ? a(_, x, b) : (y = i(f), a(_, x, y), a(x, b, y))), void 0 !== p && (_ = n(p), x = n(m), b = n(v), void 0 === l ? o(_, x, b) : (y = n(g), o(_, x, y), o(x, b, y)))
            }
            console.time("OBJLoader");
            var u, l, c, h = [];
            /^o /gm.test(e) === !1 && (l = {
                vertices: [],
                normals: [],
                uvs: []
            }, c = {
                name: ""
            }, u = {
                name: "",
                geometry: l,
                material: c
            }, h.push(u));
            for (var d = [], f = [], p = [], m = /v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/, v = /vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/, g = /vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/, y = /f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/, _ = /f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/, x = /f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/, b = /f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/, w = e.split("\n"), T = 0; T < w.length; T++) {
                var E = w[T];
                E = E.trim();
                var S;
                0 !== E.length && "#" !== E.charAt(0) && (null !== (S = m.exec(E)) ? d.push(parseFloat(S[1]), parseFloat(S[2]), parseFloat(S[3])) : null !== (S = v.exec(E)) ? f.push(parseFloat(S[1]), parseFloat(S[2]), parseFloat(S[3])) : null !== (S = g.exec(E)) ? p.push(parseFloat(S[1]), parseFloat(S[2])) : null !== (S = y.exec(E)) ? s(S[1], S[2], S[3], S[4]) : null !== (S = _.exec(E)) ? s(S[2], S[5], S[8], S[11], S[3], S[6], S[9], S[12]) : null !== (S = x.exec(E)) ? s(S[2], S[6], S[10], S[14], S[3], S[7], S[11], S[15], S[4], S[8], S[12], S[16]) : null !== (S = b.exec(E)) ? s(S[2], S[5], S[8], S[11], void 0, void 0, void 0, void 0, S[3], S[6], S[9], S[12]) : /^o /.test(E) ? (l = {
                    vertices: [],
                    normals: [],
                    uvs: []
                }, c = {
                    name: ""
                }, u = {
                    name: E.substring(2).trim(),
                    geometry: l,
                    material: c
                }, h.push(u)) : /^g /.test(E) || (/^usemtl /.test(E) ? c.name = E.substring(7).trim() : /^mtllib /.test(E) || /^s /.test(E)))
            }
            for (var M = new THREE.Object3D, T = 0, P = h.length; P > T; T++) {
                u = h[T], l = u.geometry;
                var A = new THREE.BufferGeometry;
                A.addAttribute("position", new THREE.BufferAttribute(new Float32Array(l.vertices), 3)), l.normals.length > 0 && A.addAttribute("normal", new THREE.BufferAttribute(new Float32Array(l.normals), 3)), l.uvs.length > 0 && A.addAttribute("uv", new THREE.BufferAttribute(new Float32Array(l.uvs), 2)), c = new THREE.MeshLambertMaterial, c.name = u.material.name;
                var C = new THREE.Mesh(A, c);
                C.name = u.name, M.add(C)
            }
            return console.timeEnd("OBJLoader"), M
        }
    }, e.exports = THREE.OBJLoader
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(13),
        s = i(a),
        u = n(14),
        l = i(u),
        c = n(15),
        h = i(c),
        d = n(16),
        f = i(d),
        p = n(17),
        m = (i(p), n(21)),
        v = i(m),
        g = n(23),
        y = (i(g), n(24)),
        _ = i(y),
        x = n(118),
        b = i(x),
        w = function() {
            function e() {
                var t = this;
                r(this, e), f["default"].experiences = [h["default"].THINK, h["default"].IMAGINE, h["default"].WORK_HARD, h["default"].STRIVE, h["default"].DREAM_BIG, h["default"].PROUD], this._currentView = null, this._viewsCollection = {}, this._viewsCollection[l["default"].HOME] = new _["default"], this._viewsCollection[l["default"].EXPERIENCES] = new b["default"], Promise.all([this._viewsCollection[l["default"].HOME].register(), this._viewsCollection[l["default"].EXPERIENCES].register()]).then(function() {
                    t._viewsCollection[l["default"].EXPERIENCES]._startLoading()
                }), v["default"].on("gui:views", this.setView.bind(this)), v["default"].on("gui:experiences", this.setView.bind(this)), this.sounds = {}, this._currentSound = null, this.isMuted = f["default"].muted, this.sounds.intro = new Howl({
                    src: ["/sounds/intro.m4a", "/sounds/intro.mp3"],
                    onload: this._onIntroLoad.bind(this),
                    onend: this._onIntroEnd.bind(this),
                    volume: !f["default"].muted >>> 0
                }), this.sounds.loop = new Howl({
                    src: ["/sounds/loop.m4a", "/sounds/loop.mp3"],
                    onend: this._onLoopEnd.bind(this),
                    volume: !f["default"].muted >>> 0
                }), this.sounds.end = new Howl({
                    src: ["/sounds/end.m4a", "/sounds/end.mp3"],
                    loop: !0,
                    volume: !f["default"].muted >>> 0
                }), this.setView(l["default"].HOME), this.btSound = document.querySelector(".bt-sound"), this.btSound.addEventListener(s["default"].CLICK, this._toggleMute.bind(this), !1), this.btSound.addEventListener(s["default"].DOWN, this._onSoundDown.bind(this), !1), this.btsSocials = document.querySelectorAll(".bottom-socials a");
                for (var n = 0; n < this.btsSocials.length; n++) this.btsSocials[n].addEventListener(s["default"].CLICK, this.share.bind(this), !1);
                this.btArtist = document.querySelector(".bt-artist"), this.btArtist.addEventListener(s["default"].CLICK, this.share.bind(this), !1)
            }
            return o(e, [{
                key: "share",
                value: function(e) {
                    e && (e.preventDefault(), e.stopPropagation());
                    var t = e.currentTarget.getAttribute("data-value");
                    ga && ga("send", "event", t);
                    var n = e.currentTarget.getAttribute("href");
                    window.open(n, "_blank")
                }
            }, {
                key: "_onIntroLoad",
                value: function() {
                    this.sounds.intro.play(), this._currentSound = "intro"
                }
            }, {
                key: "_onIntroEnd",
                value: function() {
                    this.sounds.loop.play(), this._currentSound = "loop"
                }
            }, {
                key: "_onLoopEnd",
                value: function() {
                    this._currentSound = "end", this.sounds.end.play()
                }
            }, {
                key: "_toggleMute",
                value: function(e) {
                    e && e.preventDefault(), this.isMuted = !this.isMuted;
                    for (var t in this.sounds) this.isMuted ? this.btSound.classList.add("disabled") : this.btSound.classList.remove("disabled"), this.isMuted ? this.sounds[t].fade(1, 0, 500) : this.sounds[t].fade(0, 1, 500)
                }
            }, {
                key: "_onSoundDown",
                value: function(e) {
                    e && (e.preventDefault(), e.stopPropagation())
                }
            }, {
                key: "setView",
                value: function(e) {
                    var t = this,
                        n = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1],
                        i = function() {
                            var i = arguments.length <= 0 || void 0 === arguments[0] ? !1 : arguments[0];
                            t._currentView = e, t._viewsCollection[t._currentView].load(n, function() {
                                t._viewsCollection[t._currentView].show(null, null, i)
                            })
                        },
                        r = function() {
                            t._viewsCollection[t._currentView].unload(), i(!1)
                        };
                    this._currentView ? this._viewsCollection[this._currentView].hide(null, r) : i(!0)
                }
            }]), e
        }();
    t["default"] = w, e.exports = t["default"]
}, function(e, t) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = BrowserDetect.isDesktop ? "click" : "touchend",
        i = BrowserDetect.isDesktop ? "mousedown" : "touchstart",
        r = BrowserDetect.isDesktop ? "mousemove" : "touchmove",
        o = BrowserDetect.isDesktop ? "mouseup" : "touchend",
        a = {
            CLICK: n,
            DOWN: i,
            MOVE: r,
            UP: o,
            ENTER: "mouseenter",
            LEAVE: "mouseleave"
        };
    t["default"] = a, e.exports = t["default"]
}, function(e, t) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t["default"] = {
        HOME: "home",
        EXPERIENCES: "experiences"
    }, e.exports = t["default"]
}, function(e, t) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t["default"] = {
        THINK: "think",
        IMAGINE: "imagine",
        WORK_HARD: "work-hard",
        DREAM_BIG: "dream-big",
        STRIVE: "strive",
        PROUD: "proud",
        PULSE: "pulse"
    }, e.exports = t["default"]
}, function(e, t) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t["default"] = window.__settings = {
        globalGUI: !0,
        muted: !1,
        longPressActivated: !0,
        debugXp: !1,
        oneXp: !1,
        views: [],
        experiences: []
    }, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = n(18),
        o = i(r),
        a = n(16),
        s = i(a),
        u = n(14),
        l = i(u),
        c = n(21),
        h = i(c);
    t["default"] = function() {
        if (window.globalGUI = new o["default"].GUI, s["default"].globalGUI) {
            s["default"].views = [l["default"].HOME, l["default"].EXPERIENCES];
            var e, t = JSON.parse(JSON.stringify(s["default"])),
                n = window.globalGUI.addFolder("views"),
                i = function() {
                    var i = t.views[e],
                        r = {};
                    r[i] = function(e) {
                        h["default"].emit("gui:views", i)
                    };
                    n.add(r, i)
                };
            for (e = 0; e < t.views.length; e++) i();
            n = window.globalGUI.addFolder("Experiences");
            var r = function() {
                var i = t.experiences[e],
                    r = {};
                r[i] = function(e) {
                    h["default"].emit("gui:views", "experiences", {
                        xp: i
                    })
                };
                n.add(r, i)
            };
            for (e = 0; e < t.experiences.length; e++) r()
        }
    }, e.exports = t["default"]
}, function(e, t, n) {
    e.exports = n(19), e.exports.color = n(20)
}, function(e, t) {
    var n = e.exports = n || {};
    n.gui = n.gui || {}, n.utils = n.utils || {}, n.controllers = n.controllers || {}, n.dom = n.dom || {}, n.color = n.color || {}, n.utils.css = function() {
        return {
            load: function(e, t) {
                t = t || document;
                var n = t.createElement("link");
                n.type = "text/css", n.rel = "stylesheet", n.href = e, t.getElementsByTagName("head")[0].appendChild(n)
            },
            inject: function(e, t) {
                t = t || document;
                var n = document.createElement("style");
                n.type = "text/css", n.innerHTML = e, t.getElementsByTagName("head")[0].appendChild(n)
            }
        }
    }(), n.utils.common = function() {
        var e = Array.prototype.forEach,
            t = Array.prototype.slice;
        return {
            BREAK: {},
            extend: function(e) {
                return this.each(t.call(arguments, 1), function(t) {
                    for (var n in t) this.isUndefined(t[n]) || (e[n] = t[n])
                }, this), e
            },
            defaults: function(e) {
                return this.each(t.call(arguments, 1), function(t) {
                    for (var n in t) this.isUndefined(e[n]) && (e[n] = t[n])
                }, this), e
            },
            compose: function() {
                var e = t.call(arguments);
                return function() {
                    for (var n = t.call(arguments), i = e.length - 1; i >= 0; i--) n = [e[i].apply(this, n)];
                    return n[0]
                }
            },
            each: function(t, n, i) {
                if (e && t.forEach === e) t.forEach(n, i);
                else if (t.length === t.length + 0) {
                    for (var r = 0, o = t.length; o > r; r++)
                        if (r in t && n.call(i, t[r], r) === this.BREAK) return
                } else
                    for (var r in t)
                        if (n.call(i, t[r], r) === this.BREAK) return
            },
            defer: function(e) {
                setTimeout(e, 0)
            },
            toArray: function(e) {
                return e.toArray ? e.toArray() : t.call(e)
            },
            isUndefined: function(e) {
                return void 0 === e
            },
            isNull: function(e) {
                return null === e
            },
            isNaN: function(e) {
                return e !== e
            },
            isArray: Array.isArray || function(e) {
                return e.constructor === Array
            },
            isObject: function(e) {
                return e === Object(e)
            },
            isNumber: function(e) {
                return e === e + 0
            },
            isString: function(e) {
                return e === e + ""
            },
            isBoolean: function(e) {
                return e === !1 || e === !0
            },
            isFunction: function(e) {
                return "[object Function]" === Object.prototype.toString.call(e)
            }
        }
    }(), n.controllers.Controller = function(e) {
        var t = function(e, t) {
            this.initialValue = e[t], this.domElement = document.createElement("div"), this.object = e, this.property = t, this.__onChange = void 0, this.__onFinishChange = void 0
        };
        return e.extend(t.prototype, {
            onChange: function(e) {
                return this.__onChange = e, this
            },
            onFinishChange: function(e) {
                return this.__onFinishChange = e, this
            },
            setValue: function(e) {
                return this.object[this.property] = e, this.__onChange && this.__onChange.call(this, e), this.updateDisplay(), this
            },
            getValue: function() {
                return this.object[this.property]
            },
            updateDisplay: function() {
                return this
            },
            isModified: function() {
                return this.initialValue !== this.getValue()
            }
        }), t
    }(n.utils.common), n.dom.dom = function(e) {
        function t(t) {
            if ("0" === t || e.isUndefined(t)) return 0;
            var n = t.match(r);
            return e.isNull(n) ? 0 : parseFloat(n[1])
        }
        var n = {
                HTMLEvents: ["change"],
                MouseEvents: ["click", "mousemove", "mousedown", "mouseup", "mouseover"],
                KeyboardEvents: ["keydown"]
            },
            i = {};
        e.each(n, function(t, n) {
            e.each(t, function(e) {
                i[e] = n
            })
        });
        var r = /(\d+(\.\d+)?)px/,
            o = {
                makeSelectable: function(e, t) {
                    void 0 !== e && void 0 !== e.style && (e.onselectstart = t ? function() {
                        return !1
                    } : function() {}, e.style.MozUserSelect = t ? "auto" : "none", e.style.KhtmlUserSelect = t ? "auto" : "none", e.unselectable = t ? "on" : "off")
                },
                makeFullscreen: function(t, n, i) {
                    e.isUndefined(n) && (n = !0), e.isUndefined(i) && (i = !0), t.style.position = "absolute", n && (t.style.left = 0, t.style.right = 0), i && (t.style.top = 0, t.style.bottom = 0)
                },
                fakeEvent: function(t, n, r, o) {
                    r = r || {};
                    var a = i[n];
                    if (!a) throw new Error("Event type " + n + " not supported.");
                    var s = document.createEvent(a);
                    switch (a) {
                        case "MouseEvents":
                            var u = r.x || r.clientX || 0,
                                l = r.y || r.clientY || 0;
                            s.initMouseEvent(n, r.bubbles || !1, r.cancelable || !0, window, r.clickCount || 1, 0, 0, u, l, !1, !1, !1, !1, 0, null);
                            break;
                        case "KeyboardEvents":
                            var c = s.initKeyboardEvent || s.initKeyEvent;
                            e.defaults(r, {
                                cancelable: !0,
                                ctrlKey: !1,
                                altKey: !1,
                                shiftKey: !1,
                                metaKey: !1,
                                keyCode: void 0,
                                charCode: void 0
                            }), c(n, r.bubbles || !1, r.cancelable, window, r.ctrlKey, r.altKey, r.shiftKey, r.metaKey, r.keyCode, r.charCode);
                            break;
                        default:
                            s.initEvent(n, r.bubbles || !1, r.cancelable || !0)
                    }
                    e.defaults(s, o), t.dispatchEvent(s)
                },
                bind: function(e, t, n, i) {
                    return i = i || !1, e.addEventListener ? e.addEventListener(t, n, i) : e.attachEvent && e.attachEvent("on" + t, n), o
                },
                unbind: function(e, t, n, i) {
                    return i = i || !1, e.removeEventListener ? e.removeEventListener(t, n, i) : e.detachEvent && e.detachEvent("on" + t, n), o
                },
                addClass: function(e, t) {
                    if (void 0 === e.className) e.className = t;
                    else if (e.className !== t) {
                        var n = e.className.split(/ +/); - 1 == n.indexOf(t) && (n.push(t), e.className = n.join(" ").replace(/^\s+/, "").replace(/\s+$/, ""))
                    }
                    return o
                },
                removeClass: function(e, t) {
                    if (t)
                        if (void 0 === e.className);
                        else if (e.className === t) e.removeAttribute("class");
                    else {
                        var n = e.className.split(/ +/),
                            i = n.indexOf(t); - 1 != i && (n.splice(i, 1), e.className = n.join(" "))
                    } else e.className = void 0;
                    return o
                },
                hasClass: function(e, t) {
                    return new RegExp("(?:^|\\s+)" + t + "(?:\\s+|$)").test(e.className) || !1
                },
                getWidth: function(e) {
                    var n = getComputedStyle(e);
                    return t(n["border-left-width"]) + t(n["border-right-width"]) + t(n["padding-left"]) + t(n["padding-right"]) + t(n.width)
                },
                getHeight: function(e) {
                    var n = getComputedStyle(e);
                    return t(n["border-top-width"]) + t(n["border-bottom-width"]) + t(n["padding-top"]) + t(n["padding-bottom"]) + t(n.height)
                },
                getOffset: function(e) {
                    var t = {
                        left: 0,
                        top: 0
                    };
                    if (e.offsetParent)
                        do t.left += e.offsetLeft, t.top += e.offsetTop; while (e = e.offsetParent);
                    return t
                },
                isActive: function(e) {
                    return e === document.activeElement && (e.type || e.href)
                }
            };
        return o
    }(n.utils.common), n.controllers.OptionController = function(e, t, n) {
        var i = function(e, r, o) {
            i.superclass.call(this, e, r);
            var a = this;
            if (this.__select = document.createElement("select"), n.isArray(o)) {
                var s = {};
                n.each(o, function(e) {
                    s[e] = e
                }), o = s
            }
            n.each(o, function(e, t) {
                var n = document.createElement("option");
                n.innerHTML = t, n.setAttribute("value", e), a.__select.appendChild(n)
            }), this.updateDisplay(), t.bind(this.__select, "change", function() {
                var e = this.options[this.selectedIndex].value;
                a.setValue(e)
            }), this.domElement.appendChild(this.__select)
        };
        return i.superclass = e, n.extend(i.prototype, e.prototype, {
            setValue: function(e) {
                var t = i.superclass.prototype.setValue.call(this, e);
                return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), t
            },
            updateDisplay: function() {
                return this.__select.value = this.getValue(), i.superclass.prototype.updateDisplay.call(this)
            }
        }), i
    }(n.controllers.Controller, n.dom.dom, n.utils.common), n.controllers.NumberController = function(e, t) {
        function n(e) {
            return e = e.toString(), e.indexOf(".") > -1 ? e.length - e.indexOf(".") - 1 : 0
        }
        var i = function(e, r, o) {
            i.superclass.call(this, e, r), o = o || {}, this.__min = o.min, this.__max = o.max, this.__step = o.step, t.isUndefined(this.__step) ? 0 == this.initialValue ? this.__impliedStep = 1 : this.__impliedStep = Math.pow(10, Math.floor(Math.log(this.initialValue) / Math.LN10)) / 10 : this.__impliedStep = this.__step,
                this.__precision = n(this.__impliedStep)
        };
        return i.superclass = e, t.extend(i.prototype, e.prototype, {
            setValue: function(e) {
                return void 0 !== this.__min && e < this.__min ? e = this.__min : void 0 !== this.__max && e > this.__max && (e = this.__max), void 0 !== this.__step && e % this.__step != 0 && (e = Math.round(e / this.__step) * this.__step), i.superclass.prototype.setValue.call(this, e)
            },
            min: function(e) {
                return this.__min = e, this
            },
            max: function(e) {
                return this.__max = e, this
            },
            step: function(e) {
                return this.__step = e, this
            }
        }), i
    }(n.controllers.Controller, n.utils.common), n.controllers.NumberControllerBox = function(e, t, n) {
        function i(e, t) {
            var n = Math.pow(10, t);
            return Math.round(e * n) / n
        }
        var r = function(e, i, o) {
            function a() {
                var e = parseFloat(d.__input.value);
                n.isNaN(e) || d.setValue(e)
            }

            function s() {
                a(), d.__onFinishChange && d.__onFinishChange.call(d, d.getValue())
            }

            function u(e) {
                t.bind(window, "mousemove", l), t.bind(window, "mouseup", c), h = e.clientY
            }

            function l(e) {
                var t = h - e.clientY;
                d.setValue(d.getValue() + t * d.__impliedStep), h = e.clientY
            }

            function c() {
                t.unbind(window, "mousemove", l), t.unbind(window, "mouseup", c)
            }
            this.__truncationSuspended = !1, r.superclass.call(this, e, i, o);
            var h, d = this;
            this.__input = document.createElement("input"), this.__input.setAttribute("type", "text"), t.bind(this.__input, "change", a), t.bind(this.__input, "blur", s), t.bind(this.__input, "mousedown", u), t.bind(this.__input, "keydown", function(e) {
                13 === e.keyCode && (d.__truncationSuspended = !0, this.blur(), d.__truncationSuspended = !1)
            }), this.updateDisplay(), this.domElement.appendChild(this.__input)
        };
        return r.superclass = e, n.extend(r.prototype, e.prototype, {
            updateDisplay: function() {
                return this.__input.value = this.__truncationSuspended ? this.getValue() : i(this.getValue(), this.__precision), r.superclass.prototype.updateDisplay.call(this)
            }
        }), r
    }(n.controllers.NumberController, n.dom.dom, n.utils.common), n.controllers.NumberControllerSlider = function(e, t, n, i, r) {
        function o(e, t, n, i, r) {
            return i + (r - i) * ((e - t) / (n - t))
        }
        var a = function(e, n, i, r, s) {
            function u(e) {
                t.bind(window, "mousemove", l), t.bind(window, "mouseup", c), l(e)
            }

            function l(e) {
                e.preventDefault();
                var n = t.getOffset(h.__background),
                    i = t.getWidth(h.__background);
                return h.setValue(o(e.clientX, n.left, n.left + i, h.__min, h.__max)), !1
            }

            function c() {
                t.unbind(window, "mousemove", l), t.unbind(window, "mouseup", c), h.__onFinishChange && h.__onFinishChange.call(h, h.getValue())
            }
            a.superclass.call(this, e, n, {
                min: i,
                max: r,
                step: s
            });
            var h = this;
            this.__background = document.createElement("div"), this.__foreground = document.createElement("div"), t.bind(this.__background, "mousedown", u), t.addClass(this.__background, "slider"), t.addClass(this.__foreground, "slider-fg"), this.updateDisplay(), this.__background.appendChild(this.__foreground), this.domElement.appendChild(this.__background)
        };
        return a.superclass = e, a.useDefaultStyles = function() {
            n.inject(r)
        }, i.extend(a.prototype, e.prototype, {
            updateDisplay: function() {
                var e = (this.getValue() - this.__min) / (this.__max - this.__min);
                return this.__foreground.style.width = 100 * e + "%", a.superclass.prototype.updateDisplay.call(this)
            }
        }), a
    }(n.controllers.NumberController, n.dom.dom, n.utils.css, n.utils.common, ".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"), n.controllers.FunctionController = function(e, t, n) {
        var i = function(e, n, r) {
            i.superclass.call(this, e, n);
            var o = this;
            this.__button = document.createElement("div"), this.__button.innerHTML = void 0 === r ? "Fire" : r, t.bind(this.__button, "click", function(e) {
                return e.preventDefault(), o.fire(), !1
            }), t.addClass(this.__button, "button"), this.domElement.appendChild(this.__button)
        };
        return i.superclass = e, n.extend(i.prototype, e.prototype, {
            fire: function() {
                this.__onChange && this.__onChange.call(this), this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.getValue().call(this.object)
            }
        }), i
    }(n.controllers.Controller, n.dom.dom, n.utils.common), n.controllers.BooleanController = function(e, t, n) {
        var i = function(e, n) {
            function r() {
                o.setValue(!o.__prev)
            }
            i.superclass.call(this, e, n);
            var o = this;
            this.__prev = this.getValue(), this.__checkbox = document.createElement("input"), this.__checkbox.setAttribute("type", "checkbox"), t.bind(this.__checkbox, "change", r, !1), this.domElement.appendChild(this.__checkbox), this.updateDisplay()
        };
        return i.superclass = e, n.extend(i.prototype, e.prototype, {
            setValue: function(e) {
                var t = i.superclass.prototype.setValue.call(this, e);
                return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.__prev = this.getValue(), t
            },
            updateDisplay: function() {
                return this.getValue() === !0 ? (this.__checkbox.setAttribute("checked", "checked"), this.__checkbox.checked = !0) : this.__checkbox.checked = !1, i.superclass.prototype.updateDisplay.call(this)
            }
        }), i
    }(n.controllers.Controller, n.dom.dom, n.utils.common), n.color.toString = function(e) {
        return function(t) {
            if (1 == t.a || e.isUndefined(t.a)) {
                for (var n = t.hex.toString(16); n.length < 6;) n = "0" + n;
                return "#" + n
            }
            return "rgba(" + Math.round(t.r) + "," + Math.round(t.g) + "," + Math.round(t.b) + "," + t.a + ")"
        }
    }(n.utils.common), n.color.interpret = function(e, t) {
        var n, i, r = function() {
                i = !1;
                var e = arguments.length > 1 ? t.toArray(arguments) : arguments[0];
                return t.each(o, function(r) {
                    return r.litmus(e) ? (t.each(r.conversions, function(r, o) {
                        return n = r.read(e), i === !1 && n !== !1 ? (i = n, n.conversionName = o, n.conversion = r, t.BREAK) : void 0
                    }), t.BREAK) : void 0
                }), i
            },
            o = [{
                litmus: t.isString,
                conversions: {
                    THREE_CHAR_HEX: {
                        read: function(e) {
                            var t = e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                            return null === t ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + t[1].toString() + t[1].toString() + t[2].toString() + t[2].toString() + t[3].toString() + t[3].toString())
                            }
                        },
                        write: e
                    },
                    SIX_CHAR_HEX: {
                        read: function(e) {
                            var t = e.match(/^#([A-F0-9]{6})$/i);
                            return null === t ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + t[1].toString())
                            }
                        },
                        write: e
                    },
                    CSS_RGB: {
                        read: function(e) {
                            var t = e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
                            return null === t ? !1 : {
                                space: "RGB",
                                r: parseFloat(t[1]),
                                g: parseFloat(t[2]),
                                b: parseFloat(t[3])
                            }
                        },
                        write: e
                    },
                    CSS_RGBA: {
                        read: function(e) {
                            var t = e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);
                            return null === t ? !1 : {
                                space: "RGB",
                                r: parseFloat(t[1]),
                                g: parseFloat(t[2]),
                                b: parseFloat(t[3]),
                                a: parseFloat(t[4])
                            }
                        },
                        write: e
                    }
                }
            }, {
                litmus: t.isNumber,
                conversions: {
                    HEX: {
                        read: function(e) {
                            return {
                                space: "HEX",
                                hex: e,
                                conversionName: "HEX"
                            }
                        },
                        write: function(e) {
                            return e.hex
                        }
                    }
                }
            }, {
                litmus: t.isArray,
                conversions: {
                    RGB_ARRAY: {
                        read: function(e) {
                            return 3 != e.length ? !1 : {
                                space: "RGB",
                                r: e[0],
                                g: e[1],
                                b: e[2]
                            }
                        },
                        write: function(e) {
                            return [e.r, e.g, e.b]
                        }
                    },
                    RGBA_ARRAY: {
                        read: function(e) {
                            return 4 != e.length ? !1 : {
                                space: "RGB",
                                r: e[0],
                                g: e[1],
                                b: e[2],
                                a: e[3]
                            }
                        },
                        write: function(e) {
                            return [e.r, e.g, e.b, e.a]
                        }
                    }
                }
            }, {
                litmus: t.isObject,
                conversions: {
                    RGBA_OBJ: {
                        read: function(e) {
                            return t.isNumber(e.r) && t.isNumber(e.g) && t.isNumber(e.b) && t.isNumber(e.a) ? {
                                space: "RGB",
                                r: e.r,
                                g: e.g,
                                b: e.b,
                                a: e.a
                            } : !1
                        },
                        write: function(e) {
                            return {
                                r: e.r,
                                g: e.g,
                                b: e.b,
                                a: e.a
                            }
                        }
                    },
                    RGB_OBJ: {
                        read: function(e) {
                            return t.isNumber(e.r) && t.isNumber(e.g) && t.isNumber(e.b) ? {
                                space: "RGB",
                                r: e.r,
                                g: e.g,
                                b: e.b
                            } : !1
                        },
                        write: function(e) {
                            return {
                                r: e.r,
                                g: e.g,
                                b: e.b
                            }
                        }
                    },
                    HSVA_OBJ: {
                        read: function(e) {
                            return t.isNumber(e.h) && t.isNumber(e.s) && t.isNumber(e.v) && t.isNumber(e.a) ? {
                                space: "HSV",
                                h: e.h,
                                s: e.s,
                                v: e.v,
                                a: e.a
                            } : !1
                        },
                        write: function(e) {
                            return {
                                h: e.h,
                                s: e.s,
                                v: e.v,
                                a: e.a
                            }
                        }
                    },
                    HSV_OBJ: {
                        read: function(e) {
                            return t.isNumber(e.h) && t.isNumber(e.s) && t.isNumber(e.v) ? {
                                space: "HSV",
                                h: e.h,
                                s: e.s,
                                v: e.v
                            } : !1
                        },
                        write: function(e) {
                            return {
                                h: e.h,
                                s: e.s,
                                v: e.v
                            }
                        }
                    }
                }
            }];
        return r
    }(n.color.toString, n.utils.common), n.GUI = n.gui.GUI = function(e, t, n, i, r, o, a, s, u, l, c, h, d, f, p) {
        function m(e, t, n, o) {
            if (void 0 === t[n]) throw new Error("Object " + t + ' has no property "' + n + '"');
            var a;
            if (o.color) a = new c(t, n);
            else {
                var s = [t, n].concat(o.factoryArgs);
                a = i.apply(e, s)
            }
            o.before instanceof r && (o.before = o.before.__li), y(e, a), f.addClass(a.domElement, "c");
            var u = document.createElement("span");
            f.addClass(u, "property-name"), u.innerHTML = a.property;
            var l = document.createElement("div");
            l.appendChild(u), l.appendChild(a.domElement);
            var h = v(e, l, o.before);
            return f.addClass(h, U.CLASS_CONTROLLER_ROW), f.addClass(h, typeof a.getValue()), g(e, h, a), e.__controllers.push(a), a
        }

        function v(e, t, n) {
            var i = document.createElement("li");
            return t && i.appendChild(t), n ? e.__ul.insertBefore(i, params.before) : e.__ul.appendChild(i), e.onResize(), i
        }

        function g(e, t, n) {
            if (n.__li = t, n.__gui = e, p.extend(n, {
                    options: function(t) {
                        return arguments.length > 1 ? (n.remove(), m(e, n.object, n.property, {
                            before: n.__li.nextElementSibling,
                            factoryArgs: [p.toArray(arguments)]
                        })) : p.isArray(t) || p.isObject(t) ? (n.remove(), m(e, n.object, n.property, {
                            before: n.__li.nextElementSibling,
                            factoryArgs: [t]
                        })) : void 0
                    },
                    name: function(e) {
                        return n.__li.firstElementChild.firstElementChild.innerHTML = e, n
                    },
                    listen: function() {
                        return n.__gui.listen(n), n
                    },
                    remove: function() {
                        return n.__gui.remove(n), n
                    }
                }), n instanceof u) {
                var i = new s(n.object, n.property, {
                    min: n.__min,
                    max: n.__max,
                    step: n.__step
                });
                p.each(["updateDisplay", "onChange", "onFinishChange"], function(e) {
                    var t = n[e],
                        r = i[e];
                    n[e] = i[e] = function() {
                        var e = Array.prototype.slice.call(arguments);
                        return t.apply(n, e), r.apply(i, e)
                    }
                }), f.addClass(t, "has-slider"), n.domElement.insertBefore(i.domElement, n.domElement.firstElementChild)
            } else if (n instanceof s) {
                var r = function(t) {
                    return p.isNumber(n.__min) && p.isNumber(n.__max) ? (n.remove(), m(e, n.object, n.property, {
                        before: n.__li.nextElementSibling,
                        factoryArgs: [n.__min, n.__max, n.__step]
                    })) : t
                };
                n.min = p.compose(r, n.min), n.max = p.compose(r, n.max)
            } else n instanceof o ? (f.bind(t, "click", function() {
                f.fakeEvent(n.__checkbox, "click")
            }), f.bind(n.__checkbox, "click", function(e) {
                e.stopPropagation()
            })) : n instanceof a ? (f.bind(t, "click", function() {
                f.fakeEvent(n.__button, "click")
            }), f.bind(t, "mouseover", function() {
                f.addClass(n.__button, "hover")
            }), f.bind(t, "mouseout", function() {
                f.removeClass(n.__button, "hover")
            })) : n instanceof c && (f.addClass(t, "color"), n.updateDisplay = p.compose(function(e) {
                return t.style.borderLeftColor = n.__color.toString(), e
            }, n.updateDisplay), n.updateDisplay());
            n.setValue = p.compose(function(t) {
                return e.getRoot().__preset_select && n.isModified() && M(e.getRoot(), !0), t
            }, n.setValue)
        }

        function y(e, t) {
            var n = e.getRoot(),
                i = n.__rememberedObjects.indexOf(t.object);
            if (-1 != i) {
                var r = n.__rememberedObjectIndecesToControllers[i];
                if (void 0 === r && (r = {}, n.__rememberedObjectIndecesToControllers[i] = r), r[t.property] = t, n.load && n.load.remembered) {
                    var o, a = n.load.remembered;
                    if (a[e.preset]) o = a[e.preset];
                    else {
                        if (!a[k]) return;
                        o = a[k]
                    }
                    if (o[i] && void 0 !== o[i][t.property]) {
                        var s = o[i][t.property];
                        t.initialValue = s, t.setValue(s)
                    }
                }
            }
        }

        function _(e, t) {
            return document.location.href + "." + t
        }

        function x(e) {
            function t() {
                l.style.display = e.useLocalStorage ? "block" : "none"
            }
            var n = e.__save_row = document.createElement("li");
            f.addClass(e.domElement, "has-save"), e.__ul.insertBefore(n, e.__ul.firstChild), f.addClass(n, "save-row");
            var i = document.createElement("span");
            i.innerHTML = "&nbsp;", f.addClass(i, "button gears");
            var r = document.createElement("span");
            r.innerHTML = "Save", f.addClass(r, "button"), f.addClass(r, "save");
            var o = document.createElement("span");
            o.innerHTML = "New", f.addClass(o, "button"), f.addClass(o, "save-as");
            var a = document.createElement("span");
            a.innerHTML = "Revert", f.addClass(a, "button"), f.addClass(a, "revert");
            var s = e.__preset_select = document.createElement("select");
            if (e.load && e.load.remembered ? p.each(e.load.remembered, function(t, n) {
                    E(e, n, n == e.preset)
                }) : E(e, k, !1), f.bind(s, "change", function() {
                    for (var t = 0; t < e.__preset_select.length; t++) e.__preset_select[t].innerHTML = e.__preset_select[t].value;
                    e.preset = this.value
                }), n.appendChild(s), n.appendChild(i), n.appendChild(r), n.appendChild(o), n.appendChild(a), D) {
                var u = document.getElementById("dg-save-locally"),
                    l = document.getElementById("dg-local-explain");
                u.style.display = "block";
                var c = document.getElementById("dg-local-storage");
                "true" === localStorage.getItem(_(e, "isLocal")) && c.setAttribute("checked", "checked"), t(), f.bind(c, "change", function() {
                    e.useLocalStorage = !e.useLocalStorage, t()
                })
            }
            var h = document.getElementById("dg-new-constructor");
            f.bind(h, "keydown", function(e) {
                !e.metaKey || 67 !== e.which && 67 != e.keyCode || A.hide()
            }), f.bind(i, "click", function() {
                h.innerHTML = JSON.stringify(e.getSaveObject(), void 0, 2), A.show(), h.focus(), h.select()
            }), f.bind(r, "click", function() {
                e.save()
            }), f.bind(o, "click", function() {
                var t = prompt("Enter a new preset name.");
                t && e.saveAs(t)
            }), f.bind(a, "click", function() {
                e.revert()
            })
        }

        function b(e) {
            function t(t) {
                return t.preventDefault(), r = t.clientX, f.addClass(e.__closeButton, U.CLASS_DRAG), f.bind(window, "mousemove", n), f.bind(window, "mouseup", i), !1
            }

            function n(t) {
                return t.preventDefault(), e.width += r - t.clientX, e.onResize(), r = t.clientX, !1
            }

            function i() {
                f.removeClass(e.__closeButton, U.CLASS_DRAG), f.unbind(window, "mousemove", n), f.unbind(window, "mouseup", i)
            }
            e.__resize_handle = document.createElement("div"), p.extend(e.__resize_handle.style, {
                width: "6px",
                marginLeft: "-3px",
                height: "200px",
                cursor: "ew-resize",
                position: "absolute"
            });
            var r;
            f.bind(e.__resize_handle, "mousedown", t), f.bind(e.__closeButton, "mousedown", t), e.domElement.insertBefore(e.__resize_handle, e.domElement.firstElementChild)
        }

        function w(e, t) {
            e.domElement.style.width = t + "px", e.__save_row && e.autoPlace && (e.__save_row.style.width = t + "px"), e.__closeButton && (e.__closeButton.style.width = t + "px")
        }

        function T(e, t) {
            var n = {};
            return p.each(e.__rememberedObjects, function(i, r) {
                var o = {},
                    a = e.__rememberedObjectIndecesToControllers[r];
                p.each(a, function(e, n) {
                    o[n] = t ? e.initialValue : e.getValue()
                }), n[r] = o
            }), n
        }

        function E(e, t, n) {
            var i = document.createElement("option");
            i.innerHTML = t, i.value = t, e.__preset_select.appendChild(i), n && (e.__preset_select.selectedIndex = e.__preset_select.length - 1)
        }

        function S(e) {
            for (var t = 0; t < e.__preset_select.length; t++) e.__preset_select[t].value == e.preset && (e.__preset_select.selectedIndex = t)
        }

        function M(e, t) {
            var n = e.__preset_select[e.__preset_select.selectedIndex];
            t ? n.innerHTML = n.value + "*" : n.innerHTML = n.value
        }

        function P(e) {
            0 != e.length && h(function() {
                P(e)
            }), p.each(e, function(e) {
                e.updateDisplay()
            })
        }
        e.inject(n);
        var A, C, R = "dg",
            L = 72,
            O = 20,
            k = "Default",
            D = function() {
                try {
                    return "localStorage" in window && null !== window.localStorage
                } catch (e) {
                    return !1
                }
            }(),
            F = !0,
            B = !1,
            I = [],
            U = function(e) {
                function t() {
                    localStorage.setItem(_(i, "gui"), JSON.stringify(i.getSaveObject()))
                }

                function n() {
                    var e = i.getRoot();
                    e.width += 1, p.defer(function() {
                        e.width -= 1
                    })
                }
                var i = this;
                this.domElement = document.createElement("div"), this.__ul = document.createElement("ul"), this.domElement.appendChild(this.__ul), f.addClass(this.domElement, R), this.__folders = {}, this.__controllers = [], this.__rememberedObjects = [], this.__rememberedObjectIndecesToControllers = [], this.__listening = [], e = e || {}, e = p.defaults(e, {
                    autoPlace: !0,
                    width: U.DEFAULT_WIDTH
                }), e = p.defaults(e, {
                    resizable: e.autoPlace,
                    hideable: e.autoPlace
                }), p.isUndefined(e.load) ? e.load = {
                    preset: k
                } : e.preset && (e.load.preset = e.preset), p.isUndefined(e.parent) && e.hideable && I.push(this), e.resizable = p.isUndefined(e.parent) && e.resizable, e.autoPlace && p.isUndefined(e.scrollable) && (e.scrollable = !0);
                var r = D && "true" === localStorage.getItem(_(this, "isLocal"));
                if (Object.defineProperties(this, {
                        parent: {
                            get: function() {
                                return e.parent
                            }
                        },
                        scrollable: {
                            get: function() {
                                return e.scrollable
                            }
                        },
                        autoPlace: {
                            get: function() {
                                return e.autoPlace
                            }
                        },
                        preset: {
                            get: function() {
                                return i.parent ? i.getRoot().preset : e.load.preset
                            },
                            set: function(t) {
                                i.parent ? i.getRoot().preset = t : e.load.preset = t, S(this), i.revert()
                            }
                        },
                        width: {
                            get: function() {
                                return e.width
                            },
                            set: function(t) {
                                e.width = t, w(i, t)
                            }
                        },
                        name: {
                            get: function() {
                                return e.name
                            },
                            set: function(t) {
                                e.name = t, a && (a.innerHTML = e.name)
                            }
                        },
                        closed: {
                            get: function() {
                                return e.closed
                            },
                            set: function(t) {
                                e.closed = t, e.closed ? f.addClass(i.__ul, U.CLASS_CLOSED) : f.removeClass(i.__ul, U.CLASS_CLOSED), this.onResize(), i.__closeButton && (i.__closeButton.innerHTML = t ? U.TEXT_OPEN : U.TEXT_CLOSED)
                            }
                        },
                        load: {
                            get: function() {
                                return e.load
                            }
                        },
                        useLocalStorage: {
                            get: function() {
                                return r
                            },
                            set: function(e) {
                                D && (r = e, e ? f.bind(window, "unload", t) : f.unbind(window, "unload", t), localStorage.setItem(_(i, "isLocal"), e))
                            }
                        }
                    }), p.isUndefined(e.parent)) {
                    if (e.closed = !1, f.addClass(this.domElement, U.CLASS_MAIN), f.makeSelectable(this.domElement, !1), D && r) {
                        i.useLocalStorage = !0;
                        var o = localStorage.getItem(_(this, "gui"));
                        o && (e.load = JSON.parse(o))
                    }
                    this.__closeButton = document.createElement("div"), this.__closeButton.innerHTML = U.TEXT_CLOSED, f.addClass(this.__closeButton, U.CLASS_CLOSE_BUTTON), this.domElement.appendChild(this.__closeButton), f.bind(this.__closeButton, "click", function() {
                        i.closed = !i.closed
                    })
                } else {
                    void 0 === e.closed && (e.closed = !0);
                    var a = document.createTextNode(e.name);
                    f.addClass(a, "controller-name");
                    var s = v(i, a),
                        u = function(e) {
                            return e.preventDefault(), i.closed = !i.closed, !1
                        };
                    f.addClass(this.__ul, U.CLASS_CLOSED), f.addClass(s, "title"), f.bind(s, "click", u), e.closed || (this.closed = !1)
                }
                e.autoPlace && (p.isUndefined(e.parent) && (F && (C = document.createElement("div"), f.addClass(C, R), f.addClass(C, U.CLASS_AUTO_PLACE_CONTAINER), document.body.appendChild(C), F = !1), C.appendChild(this.domElement), f.addClass(this.domElement, U.CLASS_AUTO_PLACE)), this.parent || w(i, e.width)), f.bind(window, "resize", function() {
                    i.onResize()
                }), f.bind(this.__ul, "webkitTransitionEnd", function() {
                    i.onResize()
                }), f.bind(this.__ul, "transitionend", function() {
                    i.onResize()
                }), f.bind(this.__ul, "oTransitionEnd", function() {
                    i.onResize()
                }), this.onResize(), e.resizable && b(this);
                i.getRoot();
                e.parent || n()
            };
        return U.toggleHide = function() {
            B = !B, p.each(I, function(e) {
                e.domElement.style.zIndex = B ? -999 : 999, e.domElement.style.opacity = B ? 0 : 1
            })
        }, U.CLASS_AUTO_PLACE = "a", U.CLASS_AUTO_PLACE_CONTAINER = "ac", U.CLASS_MAIN = "main", U.CLASS_CONTROLLER_ROW = "cr", U.CLASS_TOO_TALL = "taller-than-window", U.CLASS_CLOSED = "closed", U.CLASS_CLOSE_BUTTON = "close-button", U.CLASS_DRAG = "drag", U.DEFAULT_WIDTH = 245, U.TEXT_CLOSED = "Close Controls", U.TEXT_OPEN = "Open Controls", f.bind(window, "keydown", function(e) {
            "text" === document.activeElement.type || e.which !== L && e.keyCode != L || U.toggleHide()
        }, !1), p.extend(U.prototype, {
            add: function(e, t) {
                return m(this, e, t, {
                    factoryArgs: Array.prototype.slice.call(arguments, 2)
                })
            },
            addColor: function(e, t) {
                return m(this, e, t, {
                    color: !0
                })
            },
            remove: function(e) {
                this.__ul.removeChild(e.__li), this.__controllers.slice(this.__controllers.indexOf(e), 1);
                var t = this;
                p.defer(function() {
                    t.onResize()
                })
            },
            destroy: function() {
                this.autoPlace && C.removeChild(this.domElement)
            },
            addFolder: function(e) {
                if (void 0 !== this.__folders[e]) throw new Error('You already have a folder in this GUI by the name "' + e + '"');
                var t = {
                    name: e,
                    parent: this
                };
                t.autoPlace = this.autoPlace, this.load && this.load.folders && this.load.folders[e] && (t.closed = this.load.folders[e].closed, t.load = this.load.folders[e]);
                var n = new U(t);
                this.__folders[e] = n;
                var i = v(this, n.domElement);
                return f.addClass(i, "folder"), n
            },
            open: function() {
                this.closed = !1
            },
            close: function() {
                this.closed = !0
            },
            onResize: function() {
                var e = this.getRoot();
                if (e.scrollable) {
                    var t = f.getOffset(e.__ul).top,
                        n = 0;
                    p.each(e.__ul.childNodes, function(t) {
                        e.autoPlace && t === e.__save_row || (n += f.getHeight(t))
                    }), window.innerHeight - t - O < n ? (f.addClass(e.domElement, U.CLASS_TOO_TALL), e.__ul.style.height = window.innerHeight - t - O + "px") : (f.removeClass(e.domElement, U.CLASS_TOO_TALL), e.__ul.style.height = "auto")
                }
                e.__resize_handle && p.defer(function() {
                    e.__resize_handle.style.height = e.__ul.offsetHeight + "px"
                }), e.__closeButton && (e.__closeButton.style.width = e.width + "px")
            },
            remember: function() {
                if (p.isUndefined(A) && (A = new d, A.domElement.innerHTML = t), this.parent) throw new Error("You can only call remember on a top level GUI.");
                var e = this;
                p.each(Array.prototype.slice.call(arguments), function(t) {
                    0 == e.__rememberedObjects.length && x(e), -1 == e.__rememberedObjects.indexOf(t) && e.__rememberedObjects.push(t)
                }), this.autoPlace && w(this, this.width)
            },
            getRoot: function() {
                for (var e = this; e.parent;) e = e.parent;
                return e
            },
            getSaveObject: function() {
                var e = this.load;
                return e.closed = this.closed, this.__rememberedObjects.length > 0 && (e.preset = this.preset, e.remembered || (e.remembered = {}), e.remembered[this.preset] = T(this)), e.folders = {}, p.each(this.__folders, function(t, n) {
                    e.folders[n] = t.getSaveObject()
                }), e
            },
            save: function() {
                this.load.remembered || (this.load.remembered = {}), this.load.remembered[this.preset] = T(this), M(this, !1)
            },
            saveAs: function(e) {
                this.load.remembered || (this.load.remembered = {}, this.load.remembered[k] = T(this, !0)), this.load.remembered[e] = T(this), this.preset = e, E(this, e, !0)
            },
            revert: function(e) {
                p.each(this.__controllers, function(t) {
                    this.getRoot().load.remembered ? y(e || this.getRoot(), t) : t.setValue(t.initialValue)
                }, this), p.each(this.__folders, function(e) {
                    e.revert(e)
                }), e || M(this.getRoot(), !1)
            },
            listen: function(e) {
                var t = 0 == this.__listening.length;
                this.__listening.push(e), t && P(this.__listening)
            }
        }), U
    }(n.utils.css, '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>', ".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n", n.controllers.factory = function(e, t, n, i, r, o, a) {
        return function(s, u) {
            var l = s[u];
            return a.isArray(arguments[2]) || a.isObject(arguments[2]) ? new e(s, u, arguments[2]) : a.isNumber(l) ? a.isNumber(arguments[2]) && a.isNumber(arguments[3]) ? new n(s, u, arguments[2], arguments[3]) : new t(s, u, {
                min: arguments[2],
                max: arguments[3]
            }) : a.isString(l) ? new i(s, u) : a.isFunction(l) ? new r(s, u, "") : a.isBoolean(l) ? new o(s, u) : void 0
        }
    }(n.controllers.OptionController, n.controllers.NumberControllerBox, n.controllers.NumberControllerSlider, n.controllers.StringController = function(e, t, n) {
        var i = function(e, n) {
            function r() {
                a.setValue(a.__input.value)
            }

            function o() {
                a.__onFinishChange && a.__onFinishChange.call(a, a.getValue())
            }
            i.superclass.call(this, e, n);
            var a = this;
            this.__input = document.createElement("input"), this.__input.setAttribute("type", "text"), t.bind(this.__input, "keyup", r), t.bind(this.__input, "change", r), t.bind(this.__input, "blur", o), t.bind(this.__input, "keydown", function(e) {
                13 === e.keyCode && this.blur()
            }), this.updateDisplay(), this.domElement.appendChild(this.__input)
        };
        return i.superclass = e, n.extend(i.prototype, e.prototype, {
            updateDisplay: function() {
                return t.isActive(this.__input) || (this.__input.value = this.getValue()), i.superclass.prototype.updateDisplay.call(this)
            }
        }), i
    }(n.controllers.Controller, n.dom.dom, n.utils.common), n.controllers.FunctionController, n.controllers.BooleanController, n.utils.common), n.controllers.Controller, n.controllers.BooleanController, n.controllers.FunctionController, n.controllers.NumberControllerBox, n.controllers.NumberControllerSlider, n.controllers.OptionController, n.controllers.ColorController = function(e, t, n, i, r) {
        function o(e, t, n, i) {
            e.style.background = "", r.each(u, function(r) {
                e.style.cssText += "background: " + r + "linear-gradient(" + t + ", " + n + " 0%, " + i + " 100%); "
            })
        }

        function a(e) {
            e.style.background = "", e.style.cssText += "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);", e.style.cssText += "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", e.style.cssText += "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", e.style.cssText += "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", e.style.cssText += "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"
        }
        var s = function(e, u) {
            function l(e) {
                f(e), t.bind(window, "mousemove", f), t.bind(window, "mouseup", c)
            }

            function c() {
                t.unbind(window, "mousemove", f), t.unbind(window, "mouseup", c)
            }

            function h() {
                var e = i(this.value);
                e !== !1 ? (m.__color.__state = e, m.setValue(m.__color.toOriginal())) : this.value = m.__color.toString()
            }

            function d() {
                t.unbind(window, "mousemove", p), t.unbind(window, "mouseup", d)
            }

            function f(e) {
                e.preventDefault();
                var n = t.getWidth(m.__saturation_field),
                    i = t.getOffset(m.__saturation_field),
                    r = (e.clientX - i.left + document.body.scrollLeft) / n,
                    o = 1 - (e.clientY - i.top + document.body.scrollTop) / n;
                return o > 1 ? o = 1 : 0 > o && (o = 0), r > 1 ? r = 1 : 0 > r && (r = 0), m.__color.v = o, m.__color.s = r, m.setValue(m.__color.toOriginal()), !1
            }

            function p(e) {
                e.preventDefault();
                var n = t.getHeight(m.__hue_field),
                    i = t.getOffset(m.__hue_field),
                    r = 1 - (e.clientY - i.top + document.body.scrollTop) / n;
                return r > 1 ? r = 1 : 0 > r && (r = 0), m.__color.h = 360 * r, m.setValue(m.__color.toOriginal()), !1
            }
            s.superclass.call(this, e, u), this.__color = new n(this.getValue()), this.__temp = new n(0);
            var m = this;
            this.domElement = document.createElement("div"), t.makeSelectable(this.domElement, !1), this.__selector = document.createElement("div"), this.__selector.className = "selector", this.__saturation_field = document.createElement("div"), this.__saturation_field.className = "saturation-field", this.__field_knob = document.createElement("div"), this.__field_knob.className = "field-knob", this.__field_knob_border = "2px solid ", this.__hue_knob = document.createElement("div"), this.__hue_knob.className = "hue-knob", this.__hue_field = document.createElement("div"), this.__hue_field.className = "hue-field", this.__input = document.createElement("input"), this.__input.type = "text", this.__input_textShadow = "0 1px 1px ", t.bind(this.__input, "keydown", function(e) {
                13 === e.keyCode && h.call(this)
            }), t.bind(this.__input, "blur", h), t.bind(this.__selector, "mousedown", function(e) {
                t.addClass(this, "drag").bind(window, "mouseup", function(e) {
                    t.removeClass(m.__selector, "drag")
                })
            });
            var v = document.createElement("div");
            r.extend(this.__selector.style, {
                width: "122px",
                height: "102px",
                padding: "3px",
                backgroundColor: "#222",
                boxShadow: "0px 1px 3px rgba(0,0,0,0.3)"
            }), r.extend(this.__field_knob.style, {
                position: "absolute",
                width: "12px",
                height: "12px",
                border: this.__field_knob_border + (this.__color.v < .5 ? "#fff" : "#000"),
                boxShadow: "0px 1px 3px rgba(0,0,0,0.5)",
                borderRadius: "12px",
                zIndex: 1
            }), r.extend(this.__hue_knob.style, {
                position: "absolute",
                width: "15px",
                height: "2px",
                borderRight: "4px solid #fff",
                zIndex: 1
            }), r.extend(this.__saturation_field.style, {
                width: "100px",
                height: "100px",
                border: "1px solid #555",
                marginRight: "3px",
                display: "inline-block",
                cursor: "pointer"
            }), r.extend(v.style, {
                width: "100%",
                height: "100%",
                background: "none"
            }), o(v, "top", "rgba(0,0,0,0)", "#000"), r.extend(this.__hue_field.style, {
                width: "15px",
                height: "100px",
                display: "inline-block",
                border: "1px solid #555",
                cursor: "ns-resize"
            }), a(this.__hue_field), r.extend(this.__input.style, {
                outline: "none",
                textAlign: "center",
                color: "#fff",
                border: 0,
                fontWeight: "bold",
                textShadow: this.__input_textShadow + "rgba(0,0,0,0.7)"
            }), t.bind(this.__saturation_field, "mousedown", l), t.bind(this.__field_knob, "mousedown", l), t.bind(this.__hue_field, "mousedown", function(e) {
                p(e), t.bind(window, "mousemove", p), t.bind(window, "mouseup", d)
            }), this.__saturation_field.appendChild(v), this.__selector.appendChild(this.__field_knob), this.__selector.appendChild(this.__saturation_field), this.__selector.appendChild(this.__hue_field), this.__hue_field.appendChild(this.__hue_knob), this.domElement.appendChild(this.__input), this.domElement.appendChild(this.__selector), this.updateDisplay()
        };
        s.superclass = e, r.extend(s.prototype, e.prototype, {
            updateDisplay: function() {
                var e = i(this.getValue());
                if (e !== !1) {
                    var t = !1;
                    r.each(n.COMPONENTS, function(n) {
                        return r.isUndefined(e[n]) || r.isUndefined(this.__color.__state[n]) || e[n] === this.__color.__state[n] ? void 0 : (t = !0, {})
                    }, this), t && r.extend(this.__color.__state, e)
                }
                r.extend(this.__temp.__state, this.__color.__state), this.__temp.a = 1;
                var a = this.__color.v < .5 || this.__color.s > .5 ? 255 : 0,
                    s = 255 - a;
                r.extend(this.__field_knob.style, {
                    marginLeft: 100 * this.__color.s - 7 + "px",
                    marginTop: 100 * (1 - this.__color.v) - 7 + "px",
                    backgroundColor: this.__temp.toString(),
                    border: this.__field_knob_border + "rgb(" + a + "," + a + "," + a + ")"
                }), this.__hue_knob.style.marginTop = 100 * (1 - this.__color.h / 360) + "px", this.__temp.s = 1, this.__temp.v = 1, o(this.__saturation_field, "left", "#fff", this.__temp.toString()), r.extend(this.__input.style, {
                    backgroundColor: this.__input.value = this.__color.toString(),
                    color: "rgb(" + a + "," + a + "," + a + ")",
                    textShadow: this.__input_textShadow + "rgba(" + s + "," + s + "," + s + ",.7)"
                })
            }
        });
        var u = ["-moz-", "-o-", "-webkit-", "-ms-", ""];
        return s
    }(n.controllers.Controller, n.dom.dom, n.color.Color = function(e, t, n, i) {
        function r(e, t, n) {
            Object.defineProperty(e, t, {
                get: function() {
                    return "RGB" === this.__state.space ? this.__state[t] : (a(this, t, n), this.__state[t])
                },
                set: function(e) {
                    "RGB" !== this.__state.space && (a(this, t, n), this.__state.space = "RGB"), this.__state[t] = e
                }
            })
        }

        function o(e, t) {
            Object.defineProperty(e, t, {
                get: function() {
                    return "HSV" === this.__state.space ? this.__state[t] : (s(this), this.__state[t])
                },
                set: function(e) {
                    "HSV" !== this.__state.space && (s(this), this.__state.space = "HSV"), this.__state[t] = e
                }
            })
        }

        function a(e, n, r) {
            if ("HEX" === e.__state.space) e.__state[n] = t.component_from_hex(e.__state.hex, r);
            else {
                if ("HSV" !== e.__state.space) throw "Corrupted color state";
                i.extend(e.__state, t.hsv_to_rgb(e.__state.h, e.__state.s, e.__state.v))
            }
        }

        function s(e) {
            var n = t.rgb_to_hsv(e.r, e.g, e.b);
            i.extend(e.__state, {
                s: n.s,
                v: n.v
            }), i.isNaN(n.h) ? i.isUndefined(e.__state.h) && (e.__state.h = 0) : e.__state.h = n.h
        }
        var u = function() {
            if (this.__state = e.apply(this, arguments), this.__state === !1) throw "Failed to interpret color arguments";
            this.__state.a = this.__state.a || 1
        };
        return u.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"], i.extend(u.prototype, {
            toString: function() {
                return n(this)
            },
            toOriginal: function() {
                return this.__state.conversion.write(this)
            }
        }), r(u.prototype, "r", 2), r(u.prototype, "g", 1), r(u.prototype, "b", 0), o(u.prototype, "h"), o(u.prototype, "s"), o(u.prototype, "v"), Object.defineProperty(u.prototype, "a", {
            get: function() {
                return this.__state.a
            },
            set: function(e) {
                this.__state.a = e
            }
        }), Object.defineProperty(u.prototype, "hex", {
            get: function() {
                return "HEX" !== !this.__state.space && (this.__state.hex = t.rgb_to_hex(this.r, this.g, this.b)), this.__state.hex
            },
            set: function(e) {
                this.__state.space = "HEX", this.__state.hex = e
            }
        }), u
    }(n.color.interpret, n.color.math = function() {
        var e;
        return {
            hsv_to_rgb: function(e, t, n) {
                var i = Math.floor(e / 60) % 6,
                    r = e / 60 - Math.floor(e / 60),
                    o = n * (1 - t),
                    a = n * (1 - r * t),
                    s = n * (1 - (1 - r) * t),
                    u = [
                        [n, s, o],
                        [a, n, o],
                        [o, n, s],
                        [o, a, n],
                        [s, o, n],
                        [n, o, a]
                    ][i];
                return {
                    r: 255 * u[0],
                    g: 255 * u[1],
                    b: 255 * u[2]
                }
            },
            rgb_to_hsv: function(e, t, n) {
                var i, r, o = Math.min(e, t, n),
                    a = Math.max(e, t, n),
                    s = a - o;
                return 0 == a ? {
                    h: NaN,
                    s: 0,
                    v: 0
                } : (r = s / a, i = e == a ? (t - n) / s : t == a ? 2 + (n - e) / s : 4 + (e - t) / s, i /= 6, 0 > i && (i += 1), {
                    h: 360 * i,
                    s: r,
                    v: a / 255
                })
            },
            rgb_to_hex: function(e, t, n) {
                var i = this.hex_with_component(0, 2, e);
                return i = this.hex_with_component(i, 1, t), i = this.hex_with_component(i, 0, n)
            },
            component_from_hex: function(e, t) {
                return e >> 8 * t & 255
            },
            hex_with_component: function(t, n, i) {
                return i << (e = 8 * n) | t & ~(255 << e)
            }
        }
    }(), n.color.toString, n.utils.common), n.color.interpret, n.utils.common), n.utils.requestAnimationFrame = function() {
        return window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(e, t) {
            window.setTimeout(e, 1e3 / 60)
        }
    }(), n.dom.CenteredDiv = function(e, t) {
        var n = function() {
            this.backgroundElement = document.createElement("div"), t.extend(this.backgroundElement.style, {
                backgroundColor: "rgba(0,0,0,0.8)",
                top: 0,
                left: 0,
                display: "none",
                zIndex: "1000",
                opacity: 0,
                WebkitTransition: "opacity 0.2s linear"
            }), e.makeFullscreen(this.backgroundElement), this.backgroundElement.style.position = "fixed", this.domElement = document.createElement("div"), t.extend(this.domElement.style, {
                position: "fixed",
                display: "none",
                zIndex: "1001",
                opacity: 0,
                WebkitTransition: "-webkit-transform 0.2s ease-out, opacity 0.2s linear"
            }), document.body.appendChild(this.backgroundElement), document.body.appendChild(this.domElement);
            var n = this;
            e.bind(this.backgroundElement, "click", function() {
                n.hide()
            })
        };
        return n.prototype.show = function() {
            var e = this;
            this.backgroundElement.style.display = "block", this.domElement.style.display = "block", this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)", this.layout(), t.defer(function() {
                e.backgroundElement.style.opacity = 1, e.domElement.style.opacity = 1, e.domElement.style.webkitTransform = "scale(1)"
            })
        }, n.prototype.hide = function() {
            var t = this,
                n = function() {
                    t.domElement.style.display = "none", t.backgroundElement.style.display = "none", e.unbind(t.domElement, "webkitTransitionEnd", n), e.unbind(t.domElement, "transitionend", n), e.unbind(t.domElement, "oTransitionEnd", n)
                };
            e.bind(this.domElement, "webkitTransitionEnd", n), e.bind(this.domElement, "transitionend", n), e.bind(this.domElement, "oTransitionEnd", n), this.backgroundElement.style.opacity = 0, this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)"
        }, n.prototype.layout = function() {
            this.domElement.style.left = window.innerWidth / 2 - e.getWidth(this.domElement) / 2 + "px", this.domElement.style.top = window.innerHeight / 2 - e.getHeight(this.domElement) / 2 + "px"
        }, n
    }(n.dom.dom, n.utils.common), n.dom.dom, n.utils.common)
}, function(e, t) {
    var n = e.exports = n || {};
    n.color = n.color || {}, n.utils = n.utils || {}, n.utils.common = function() {
        var e = Array.prototype.forEach,
            t = Array.prototype.slice;
        return {
            BREAK: {},
            extend: function(e) {
                return this.each(t.call(arguments, 1), function(t) {
                    for (var n in t) this.isUndefined(t[n]) || (e[n] = t[n])
                }, this), e
            },
            defaults: function(e) {
                return this.each(t.call(arguments, 1), function(t) {
                    for (var n in t) this.isUndefined(e[n]) && (e[n] = t[n])
                }, this), e
            },
            compose: function() {
                var e = t.call(arguments);
                return function() {
                    for (var n = t.call(arguments), i = e.length - 1; i >= 0; i--) n = [e[i].apply(this, n)];
                    return n[0]
                }
            },
            each: function(t, n, i) {
                if (e && t.forEach === e) t.forEach(n, i);
                else if (t.length === t.length + 0) {
                    for (var r = 0, o = t.length; o > r; r++)
                        if (r in t && n.call(i, t[r], r) === this.BREAK) return
                } else
                    for (var r in t)
                        if (n.call(i, t[r], r) === this.BREAK) return
            },
            defer: function(e) {
                setTimeout(e, 0)
            },
            toArray: function(e) {
                return e.toArray ? e.toArray() : t.call(e)
            },
            isUndefined: function(e) {
                return void 0 === e
            },
            isNull: function(e) {
                return null === e
            },
            isNaN: function(e) {
                return e !== e
            },
            isArray: Array.isArray || function(e) {
                return e.constructor === Array
            },
            isObject: function(e) {
                return e === Object(e)
            },
            isNumber: function(e) {
                return e === e + 0
            },
            isString: function(e) {
                return e === e + ""
            },
            isBoolean: function(e) {
                return e === !1 || e === !0
            },
            isFunction: function(e) {
                return "[object Function]" === Object.prototype.toString.call(e)
            }
        }
    }(), n.color.toString = function(e) {
        return function(t) {
            if (1 == t.a || e.isUndefined(t.a)) {
                for (var n = t.hex.toString(16); n.length < 6;) n = "0" + n;
                return "#" + n
            }
            return "rgba(" + Math.round(t.r) + "," + Math.round(t.g) + "," + Math.round(t.b) + "," + t.a + ")"
        }
    }(n.utils.common), n.Color = n.color.Color = function(e, t, n, i) {
        function r(e, t, n) {
            Object.defineProperty(e, t, {
                get: function() {
                    return "RGB" === this.__state.space ? this.__state[t] : (a(this, t, n), this.__state[t])
                },
                set: function(e) {
                    "RGB" !== this.__state.space && (a(this, t, n), this.__state.space = "RGB"), this.__state[t] = e
                }
            })
        }

        function o(e, t) {
            Object.defineProperty(e, t, {
                get: function() {
                    return "HSV" === this.__state.space ? this.__state[t] : (s(this), this.__state[t])
                },
                set: function(e) {
                    "HSV" !== this.__state.space && (s(this), this.__state.space = "HSV"), this.__state[t] = e
                }
            })
        }

        function a(e, n, r) {
            if ("HEX" === e.__state.space) e.__state[n] = t.component_from_hex(e.__state.hex, r);
            else {
                if ("HSV" !== e.__state.space) throw "Corrupted color state";
                i.extend(e.__state, t.hsv_to_rgb(e.__state.h, e.__state.s, e.__state.v))
            }
        }

        function s(e) {
            var n = t.rgb_to_hsv(e.r, e.g, e.b);
            i.extend(e.__state, {
                s: n.s,
                v: n.v
            }), i.isNaN(n.h) ? i.isUndefined(e.__state.h) && (e.__state.h = 0) : e.__state.h = n.h
        }
        var u = function() {
            if (this.__state = e.apply(this, arguments), this.__state === !1) throw "Failed to interpret color arguments";
            this.__state.a = this.__state.a || 1
        };
        return u.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"], i.extend(u.prototype, {
            toString: function() {
                return n(this)
            },
            toOriginal: function() {
                return this.__state.conversion.write(this)
            }
        }), r(u.prototype, "r", 2), r(u.prototype, "g", 1), r(u.prototype, "b", 0), o(u.prototype, "h"), o(u.prototype, "s"), o(u.prototype, "v"), Object.defineProperty(u.prototype, "a", {
            get: function() {
                return this.__state.a
            },
            set: function(e) {
                this.__state.a = e
            }
        }), Object.defineProperty(u.prototype, "hex", {
            get: function() {
                return "HEX" !== !this.__state.space && (this.__state.hex = t.rgb_to_hex(this.r, this.g, this.b)), this.__state.hex
            },
            set: function(e) {
                this.__state.space = "HEX", this.__state.hex = e
            }
        }), u
    }(n.color.interpret = function(e, t) {
        var n, i, r = function() {
                i = !1;
                var e = arguments.length > 1 ? t.toArray(arguments) : arguments[0];
                return t.each(o, function(r) {
                    return r.litmus(e) ? (t.each(r.conversions, function(r, o) {
                        return n = r.read(e), i === !1 && n !== !1 ? (i = n, n.conversionName = o, n.conversion = r, t.BREAK) : void 0
                    }), t.BREAK) : void 0
                }), i
            },
            o = [{
                litmus: t.isString,
                conversions: {
                    THREE_CHAR_HEX: {
                        read: function(e) {
                            var t = e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                            return null === t ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + t[1].toString() + t[1].toString() + t[2].toString() + t[2].toString() + t[3].toString() + t[3].toString())
                            }
                        },
                        write: e
                    },
                    SIX_CHAR_HEX: {
                        read: function(e) {
                            var t = e.match(/^#([A-F0-9]{6})$/i);
                            return null === t ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + t[1].toString())
                            }
                        },
                        write: e
                    },
                    CSS_RGB: {
                        read: function(e) {
                            var t = e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
                            return null === t ? !1 : {
                                space: "RGB",
                                r: parseFloat(t[1]),
                                g: parseFloat(t[2]),
                                b: parseFloat(t[3])
                            }
                        },
                        write: e
                    },
                    CSS_RGBA: {
                        read: function(e) {
                            var t = e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);
                            return null === t ? !1 : {
                                space: "RGB",
                                r: parseFloat(t[1]),
                                g: parseFloat(t[2]),
                                b: parseFloat(t[3]),
                                a: parseFloat(t[4])
                            }
                        },
                        write: e
                    }
                }
            }, {
                litmus: t.isNumber,
                conversions: {
                    HEX: {
                        read: function(e) {
                            return {
                                space: "HEX",
                                hex: e,
                                conversionName: "HEX"
                            }
                        },
                        write: function(e) {
                            return e.hex
                        }
                    }
                }
            }, {
                litmus: t.isArray,
                conversions: {
                    RGB_ARRAY: {
                        read: function(e) {
                            return 3 != e.length ? !1 : {
                                space: "RGB",
                                r: e[0],
                                g: e[1],
                                b: e[2]
                            }
                        },
                        write: function(e) {
                            return [e.r, e.g, e.b]
                        }
                    },
                    RGBA_ARRAY: {
                        read: function(e) {
                            return 4 != e.length ? !1 : {
                                space: "RGB",
                                r: e[0],
                                g: e[1],
                                b: e[2],
                                a: e[3]
                            }
                        },
                        write: function(e) {
                            return [e.r, e.g, e.b, e.a]
                        }
                    }
                }
            }, {
                litmus: t.isObject,
                conversions: {
                    RGBA_OBJ: {
                        read: function(e) {
                            return t.isNumber(e.r) && t.isNumber(e.g) && t.isNumber(e.b) && t.isNumber(e.a) ? {
                                space: "RGB",
                                r: e.r,
                                g: e.g,
                                b: e.b,
                                a: e.a
                            } : !1
                        },
                        write: function(e) {
                            return {
                                r: e.r,
                                g: e.g,
                                b: e.b,
                                a: e.a
                            }
                        }
                    },
                    RGB_OBJ: {
                        read: function(e) {
                            return t.isNumber(e.r) && t.isNumber(e.g) && t.isNumber(e.b) ? {
                                space: "RGB",
                                r: e.r,
                                g: e.g,
                                b: e.b
                            } : !1
                        },
                        write: function(e) {
                            return {
                                r: e.r,
                                g: e.g,
                                b: e.b
                            }
                        }
                    },
                    HSVA_OBJ: {
                        read: function(e) {
                            return t.isNumber(e.h) && t.isNumber(e.s) && t.isNumber(e.v) && t.isNumber(e.a) ? {
                                space: "HSV",
                                h: e.h,
                                s: e.s,
                                v: e.v,
                                a: e.a
                            } : !1
                        },
                        write: function(e) {
                            return {
                                h: e.h,
                                s: e.s,
                                v: e.v,
                                a: e.a
                            }
                        }
                    },
                    HSV_OBJ: {
                        read: function(e) {
                            return t.isNumber(e.h) && t.isNumber(e.s) && t.isNumber(e.v) ? {
                                space: "HSV",
                                h: e.h,
                                s: e.s,
                                v: e.v
                            } : !1
                        },
                        write: function(e) {
                            return {
                                h: e.h,
                                s: e.s,
                                v: e.v
                            }
                        }
                    }
                }
            }];
        return r
    }(n.color.toString, n.utils.common), n.color.math = function() {
        var e;
        return {
            hsv_to_rgb: function(e, t, n) {
                var i = Math.floor(e / 60) % 6,
                    r = e / 60 - Math.floor(e / 60),
                    o = n * (1 - t),
                    a = n * (1 - r * t),
                    s = n * (1 - (1 - r) * t),
                    u = [
                        [n, s, o],
                        [a, n, o],
                        [o, n, s],
                        [o, a, n],
                        [s, o, n],
                        [n, o, a]
                    ][i];
                return {
                    r: 255 * u[0],
                    g: 255 * u[1],
                    b: 255 * u[2]
                }
            },
            rgb_to_hsv: function(e, t, n) {
                var i, r, o = Math.min(e, t, n),
                    a = Math.max(e, t, n),
                    s = a - o;
                return 0 == a ? {
                    h: NaN,
                    s: 0,
                    v: 0
                } : (r = s / a, i = e == a ? (t - n) / s : t == a ? 2 + (n - e) / s : 4 + (e - t) / s, i /= 6, 0 > i && (i += 1), {
                    h: 360 * i,
                    s: r,
                    v: a / 255
                })
            },
            rgb_to_hex: function(e, t, n) {
                var i = this.hex_with_component(0, 2, e);
                return i = this.hex_with_component(i, 1, t), i = this.hex_with_component(i, 0, n)
            },
            component_from_hex: function(e, t) {
                return e >> 8 * t & 255
            },
            hex_with_component: function(t, n, i) {
                return i << (e = 8 * n) | t & ~(255 << e)
            }
        }
    }(), n.color.toString, n.utils.common)
}, function(e, t, n) {
    "use strict";

    function i(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function r(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        a = n(22),
        s = function(e) {
            function t() {
                i(this, t), o(Object.getPrototypeOf(t.prototype), "constructor", this).call(this)
            }
            return r(t, e), t
        }(a),
        u = new s;
    t["default"] = u, e.exports = t["default"]
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = function() {
            function e() {
                n(this, e), this._events = {}
            }
            return i(e, [{
                key: "on",
                value: function(e, t) {
                    return this._events[e] = this._events[e] || [], this._events[e].push(t), this
                }
            }, {
                key: "once",
                value: function(e, t) {
                    function n() {
                        i.off(e, n), t.apply(this, arguments)
                    }
                    var i = this;
                    return n.listener = t, this.on(e, n), this
                }
            }, {
                key: "off",
                value: function(e, t) {
                    var n = this._events[e];
                    if (void 0 !== n) {
                        for (var i = 0; i < n.length; i += 1)
                            if (n[i] === t || n[i].listener === t) {
                                n.splice(i, 1);
                                break
                            }
                        0 === n.length && this.removeAllListeners(e)
                    }
                    return this
                }
            }, {
                key: "removeAllListeners",
                value: function(e) {
                    try {
                        delete this._events[e]
                    } catch (t) {}
                    return this
                }
            }, {
                key: "listeners",
                value: function(e) {
                    try {
                        return this._events[e]
                    } catch (t) {}
                }
            }, {
                key: "emit",
                value: function() {
                    var e = [].slice.call(arguments, 0),
                        t = e.shift(),
                        n = this._events[t];
                    if (void 0 !== n) {
                        n = n.slice(0);
                        for (var i = n.length, r = 0; i > r; r += 1) n[r].apply(this, e)
                    }
                    return this
                }
            }]), e
        }();
    e.exports = r
}, function(e, t, n) {
    "use strict";

    function i(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function r(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(22),
        u = /(image|audio|video)/gi,
        l = /.(jpg|jpeg|png|gif)/gi,
        c = /.(mp4|webm)/gi,
        h = /.(mp3|ogg)/gi,
        d = function(e) {
            function t() {
                i(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this), this.isLoading = !1, this._queue = [], this._current = null, this._bindEvents()
            }
            return r(t, e), o(t, [{
                key: "load",
                value: function(e) {
                    var t = this;
                    if ("string" == typeof e) this.loadUrl(e);
                    else if (e.hasOwnProperty("type") && e.hasOwnProperty("url")) this.loadItem(e);
                    else {
                        if ("number" != typeof e.length) return console.log("This content cannot be loaded"), !1;
                        e.forEach(function(e) {
                            t.load(e)
                        })
                    }
                    return this._next(), !0
                }
            }, {
                key: "loadItem",
                value: function(e) {
                    return e.type && e.url && e.type.match(u) ? (this._queue.push(e), !0) : (console.log("This item cannot be loaded"), !1)
                }
            }, {
                key: "loadUrl",
                value: function(e) {
                    var t = arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1],
                        n = {
                            url: e,
                            callback: t
                        };
                    if (e.match(l)) n.type = "image";
                    else if (e.match(c)) n.type = "video";
                    else {
                        if (!e.match(h)) return console.log("This url cannot be loaded"), !1;
                        n.type = "audio"
                    }
                    return this.loadItem(n)
                }
            }, {
                key: "create",
                value: function() {
                    return new t
                }
            }, {
                key: "createAndLoad",
                value: function(e) {
                    var t = this.create();
                    return t.load(e), t
                }
            }, {
                key: "_bindEvents",
                value: function() {
                    this._onFileLoaded = this._onFileLoaded.bind(this), this._onFileError = this._onFileError.bind(this)
                }
            }, {
                key: "_onLoad",
                value: function(e) {
                    switch (e.type) {
                        case "image":
                            var t = void 0;
                            t = new Image, t.onload = this._onFileLoaded, t.onerror = this._onFileError, t.src = e.url, e.element = t;
                            break;
                        case "audio":
                        case "video":
                            var n = void 0;
                            n = "video" === e.type ? document.createElement("video") : document.createElement("audio"), n.preload = "auto", n.addEventListener("loadedmetadata", this._onFileLoaded, !1), n.addEventListener("error", this._onFileError, !1), n.src = e.url, n.load(), e.element = n;
                            break;
                        default:
                            return console.log("This item cannot be loaded", e), !1
                    }
                    this.isLoading = !0, e.loaded = !1, e.event = null, this._current = e
                }
            }, {
                key: "_onFileLoaded",
                value: function(e) {
                    this._current.event = e, this._current.loaded = !0, this.emit("onfileloaded", this._current), "function" == typeof this.onfileloaded && this.onfileloaded(this._current), "function" == typeof this._current.callback && this._current.callback(this._current), this._reset()
                }
            }, {
                key: "_onFileError",
                value: function(e) {
                    this._current.event = e, this._current.loaded = !1, this.emit("onfileerror", this._current), "function" == typeof this.onfileerror && this.onfileerror(this._current), "function" == typeof this._current.callback && this._current.callback(this._current), this._reset()
                }
            }, {
                key: "_onContentLoaded",
                value: function() {
                    this.emit("oncomplete"), "function" == typeof this.oncomplete && this.oncomplete()
                }
            }, {
                key: "_reset",
                value: function() {
                    var e = this._current;
                    this._current = null, ("video" === e.type || "audio" === e.type) && (e.element.removeEventListener("loadedmetadata", this._onFileLoaded, !1), e.element.removeEventListener("error", this._onFileError, !1)), "image" === e.type && (e.element.onload = null, e.element.onerror = null), this.isLoading = !1, this._next()
                }
            }, {
                key: "_next",
                value: function() {
                    !this.isLoading && this._queue.length > 0 && this._onLoad(this._queue.shift()), this.isLoading || 0 !== this._queue.length || this._onContentLoaded()
                }
            }]), t
        }(s),
        f = new d;
    e.exports = f
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = n(13),
        l = i(u),
        c = n(25),
        h = i(c),
        d = n(14),
        f = i(d),
        p = n(16),
        m = (i(p), n(21)),
        v = i(m),
        g = n(26),
        y = i(g),
        _ = n(27),
        x = i(_),
        b = n(58),
        w = function(e) {
            function t() {
                r(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, "home", null), this.progress = 0, this.roll = 1, this.onLoaded = this._onLoaded.bind(this), this.onMouseCenter = this._onMouseCenter.bind(this), this.onMouseCenterComplete = this._onMouseCenterComplete.bind(this), this.onMouseDown = this._onMouseDown.bind(this), this.onMouseUp = this._onMouseUp.bind(this), this.onRestart = this._onRestart.bind(this), this.onRestartOver = this._onRestartOver.bind(this), this.onRestartOut = this._onRestartOut.bind(this), this.loop = this._loop.bind(this), this.timestamp = 0, this.isMouseDown = !1, this.isHoldState = !1, this.isEnd = !1, this.progressFinished = !1
            }
            return o(t, e), a(t, [{
                key: "register",
                value: function() {
                    return v["default"].on(h["default"].PROGRESS_LOADING, this._onProgressLoading.bind(this)), new Promise(function(e, t) {
                        e()
                    })
                }
            }, {
                key: "load",
                value: function(e, n) {
                    s(Object.getPrototypeOf(t.prototype), "load", this).call(this, e, n), e.isEnd && (this.isEnd = e.isEnd);
                    var i = this.dom.getElementsByClassName("home-canvas")[0];
                    this.renderer = new x["default"](i, this), this.renderer.load().then(this.onLoaded).then(n), this.underlineText = document.getElementsByClassName("home-underline-text")[0], this.hold = document.getElementById("home-hold"), this.ready = document.getElementById("home-ready"), this.wish = document.getElementById("home-wish"), this.wishYear = document.getElementsByClassName("home-wish-white-text")[0], this.restart = document.getElementsByClassName("home-restart")[0], this.restartOver = document.getElementsByClassName("home-restart-over")[0], this.restartOut = document.getElementsByClassName("home-restart-out")[0], this._hideElement(this.underlineText), this._hideElement(this.hold), this._hideElement(this.ready), this._hideElement(this.wish), this._hideElement(this.restart), this.restartOver.style.opacity = 0, this.wishYear.style.opacity = 0, this.renderer.isEnd = this.isEnd, this.renderer.block.isEnd = this.isEnd, this.renderer.block.text.pulseTxtOpacity = 0
                }
            }, {
                key: "_showElement",
                value: function(e) {
                    e.classList.remove("hide"), e.classList.contains("show") || e.classList.add("show")
                }
            }, {
                key: "_hideElement",
                value: function(e) {
                    e.classList.remove("show"), e.classList.contains("hide") || e.classList.add("hide")
                }
            }, {
                key: "_onRestartOver",
                value: function(e) {
                    var t = .5 * this.restartOut.clientHeight;
                    TweenMax.to(this.restartOut, .2, {
                        opacity: 0,
                        y: -t / 2,
                        ease: Power2.easeOut
                    }), TweenMax.fromTo(this.restartOver, .4, {
                        opacity: 0,
                        y: t / 2
                    }, {
                        opacity: 1,
                        y: 0,
                        ease: Power2.easeOut
                    })
                }
            }, {
                key: "_onRestartOut",
                value: function(e) {
                    var t = .5 * this.restartOver.clientHeight;
                    TweenMax.to(this.restartOver, .4, {
                        opacity: 0,
                        y: t / 2,
                        ease: Power2.easeOut
                    }), TweenMax.to(this.restartOut, .4, {
                        opacity: 1,
                        y: 0,
                        ease: Power2.easeOut
                    })
                }
            }, {
                key: "_onRestart",
                value: function(e) {
                    e.preventDefault(), ga && ga("send", "event", "restart experiences"), location.reload()
                }
            }, {
                key: "_onMouseCenter",
                value: function() {
                    this.isEnd || (this.underlineText.classList.contains("home-underline-text-anim") && this.underlineText.classList.remove("home-underline-text-anim"), this._showElement(this.underlineText), TweenMax.fromTo(this.underlineText, .4, {
                        opacity: 0,
                        y: 10
                    }, {
                        opacity: 1,
                        y: 0,
                        onComplete: this.onMouseCenterComplete
                    }, Quint.easeOut))
                }
            }, {
                key: "_onMouseCenterComplete",
                value: function() {
                    this.underlineText.classList.add("home-underline-text-anim"), window.addEventListener("mousedown", this.onMouseDown), window.addEventListener("touchstart", this.onMouseDown), window.addEventListener("mouseup", this.onMouseUp), window.addEventListener("touchend", this.onMouseUp)
                }
            }, {
                key: "_onMouseDown",
                value: function(e) {
                    var t = this;
                    e.preventDefault(), this.timestamp = (new Date).getTime(), this.isMouseDown = !0, this.isHoldState = !0, this.underlineText.classList.remove("home-underline-text-anim"), TweenMax.to(this.underlineText, .4, {
                        opacity: 0,
                        y: -10,
                        onComplete: function() {
                            t._hideElement(t.underlineText)
                        }
                    }), this._showElement(this.hold), TweenMax.fromTo(this.hold, .4, {
                        opacity: 0,
                        y: 10
                    }, {
                        opacity: 1,
                        y: 0
                    }), TweenMax.to(this.renderer.camera, .4, {
                        distance: 50
                    }), this.loop()
                }
            }, {
                key: "_onMouseUp",
                value: function(e) {
                    this.isMouseDown = !1, this.isHoldState && (this.isHoldState = !1, TweenMax.to(this.renderer.background, .2, {
                        squareProgressValue: 0
                    }), TweenMax.to(this.renderer.camera, .4, {
                        distance: 8
                    }), this._hideElement(this.hold), this.onMouseCenter())
                }
            }, {
                key: "_loop",
                value: function() {
                    var e = this;
                    if (this.isMouseDown) {
                        var t = (new Date).getTime(),
                            n = (t - this.timestamp) / 1e3,
                            i = n / 3;
                        if (.82 > i) this.renderer.background.squareProgressValue = i, (0, b.frame)(this.loop);
                        else {
                            if (this.progressFinished) return;
                            this.progressFinished = !0, this.isHoldState = !1, TweenMax.to(this.hold, .4, {
                                opacity: 0,
                                y: -10,
                                onComplete: function() {
                                    e._hideElement(e.hold)
                                }
                            }), this._showElement(this.ready), TweenMax.fromTo(this.ready, .4, {
                                opacity: 0,
                                y: 10
                            }, {
                                opacity: 1,
                                y: 0
                            }), this.goToExperiences()
                        }
                    }
                }
            }, {
                key: "_onLoaded",
                value: function() {
                    if (this.isEnd) {
                        var e = 0;
                        this.progress = 0, this.renderer.block.text.pulseTxtOpacity = 0, TweenMax.to(this, .5, {
                            progress: 1,
                            delay: e
                        }), TweenMax.to(this.renderer.block.text, 1, {
                            pulseTxtOpacity: 1,
                            delay: e += 4
                        }), this._showElement(this.wish), TweenMax.fromTo(this.wish, .8, {
                            opacity: 0,
                            y: 10
                        }, {
                            opacity: 1,
                            y: 0,
                            delay: e += 1,
                            ease: Back.easeOut.config(2)
                        }), TweenMax.fromTo(this.wishYear, .8, {
                            opacity: 0,
                            y: 10
                        }, {
                            opacity: 1,
                            y: 0,
                            delay: e += .4,
                            ease: Back.easeOut.config(2)
                        }), this._showElement(this.restart), TweenMax.fromTo(this.restart, .6, {
                            opacity: 0,
                            y: 10
                        }, {
                            opacity: 1,
                            y: 0,
                            delay: e += 1.5,
                            ease: Back.easeOut.config(2)
                        }), this.renderer.block.launchText()
                    } else v["default"].emit(h["default"].START_LOADING)
                }
            }, {
                key: "_onProgressLoading",
                value: function(e) {
                    TweenMax.to(this, .5, {
                        progress: e.progress / e.total
                    }), e.progress / e.total == 1 && (window.setTimeout(this.onMouseCenter, 6e3), this.renderer.block.launchText())
                }
            }, {
                key: "unload",
                value: function() {
                    s(Object.getPrototypeOf(t.prototype), "unload", this).call(this), this.renderer.off("mouse-center", this.onMouseCenter), this.renderer.off("mouse-off", this.onMouseOff), this.progress = 0, this.roll = 1, this.timestamp = 0, this.isMouseDown = !1, this.isHoldState = !1
                }
            }, {
                key: "bindEvents",
                value: function() {
                    this.isEnd && (this.restart.addEventListener(l["default"].CLICK, this.onRestart), this.restart.addEventListener("mouseover", this.onRestartOver), this.restart.addEventListener("mouseout", this.onRestartOut))
                }
            }, {
                key: "unbindEvents",
                value: function() {
                    this.isEnd && (this.restart.removeEventListener(l["default"].CLICK, this.onRestart), this.restart.removeEventListener("mouseover", this.onRestartOver), this.restart.removeEventListener("mouseout", this.onRestartOut))
                }
            }, {
                key: "bindDOMElements",
                value: function() {
                    s(Object.getPrototypeOf(t.prototype), "bindDOMElements", this).call(this)
                }
            }, {
                key: "show",
                value: function() {
                    var e = arguments.length <= 0 || void 0 === arguments[0] ? null : arguments[0],
                        n = arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1];
                    this.renderer.play(), ga && ga("send", "pageview", {
                        page: this.isEnd ? "end" : "home"
                    }), s(Object.getPrototypeOf(t.prototype), "show", this).call(this, e, n)
                }
            }, {
                key: "hide",
                value: function() {
                    var e = arguments.length <= 0 || void 0 === arguments[0] ? null : arguments[0],
                        n = arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1];
                    this.renderer.stop(), s(Object.getPrototypeOf(t.prototype), "hide", this).call(this, e, n)
                }
            }, {
                key: "goToExperiences",
                value: function() {
                    window.removeEventListener("mousedown", this.onMouseDown), window.removeEventListener("touchstart", this.onMouseDown), window.removeEventListener("mouseup", this.onMouseUp), window.removeEventListener("touchend", this.onMouseUp), v["default"].emit("gui:views", f["default"].EXPERIENCES), ga && ga("send", "event", "start experience")
                }
            }]), t
        }(y["default"]);
    t["default"] = w, e.exports = t["default"]
}, function(e, t) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t["default"] = {
        START_LOADING: "start-loading",
        PROGRESS_LOADING: "progress-loading"
    }, e.exports = t["default"]
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = function() {
            function e(t, i) {
                n(this, e), this.domId = t, this.isLoaded = !1, this._binds = {}
            }
            return i(e, [{
                key: "register",
                value: function() {}
            }, {
                key: "load",
                value: function(e, t) {
                    this.bindDOMElements()
                }
            }, {
                key: "unload",
                value: function() {
                    this.unbindEvents()
                }
            }, {
                key: "bindEvents",
                value: function() {}
            }, {
                key: "unbindEvents",
                value: function() {}
            }, {
                key: "bindDOMElements",
                value: function() {
                    this.dom = document.getElementById(this.domId)
                }
            }, {
                key: "show",
                value: function() {
                    var e = (arguments.length <= 0 || void 0 === arguments[0] ? null : arguments[0], arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1]);
                    this.dom.classList.remove("hide"), this.bindEvents(), e && e()
                }
            }, {
                key: "hide",
                value: function() {
                    var e = (arguments.length <= 0 || void 0 === arguments[0] ? null : arguments[0], arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1]);
                    this.dom.classList.add("hide"), e && e()
                }
            }]), e
        }();
    t["default"] = r, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = n(28),
        l = i(u),
        c = n(59),
        h = i(c),
        d = n(111),
        f = i(d),
        p = n(63),
        m = i(p),
        v = n(112),
        g = i(v),
        y = n(117),
        _ = i(y),
        x = n(58),
        b = function(e) {
            function t(e, n) {
                r(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this), this.canvas = e, this.view = n, this.loop = this._loop.bind(this), this.onResize = this._onResize.bind(this), this.mouseMove = this._mouseMove.bind(this), this.loaded = this._loaded.bind(this), this.mouse = {
                    x: 0,
                    y: 0
                }, this.clientMouse = {
                    x: 0,
                    y: 0
                }, this.camera = new f["default"], this.setupGL(e), this.isInit = !1, this.isEnd = !1
            }
            return o(t, e), a(t, [{
                key: "setupGL",
                value: function() {
                    var e = {
                            alpha: !1,
                            depth: !0,
                            stencil: !1,
                            preserveDrawingBuffer: !0
                        },
                        t = this.canvas.getContext("webgl", e) || this.canvas.getContext("experimental-webgl", e);
                    this.gl = t, this.background = new l["default"](t), this.block = new h["default"](t), this.noiseBackground = new g["default"](t)
                }
            }, {
                key: "load",
                value: function() {
                    return m["default"].all([this.block.load()]).then(this.loaded)
                }
            }, {
                key: "_loaded",
                value: function() {
                    this.play()
                }
            }, {
                key: "play",
                value: function() {
                    window.addEventListener("resize", this.onResize), window.addEventListener("mousemove", this.mouseMove), this.onResize(), this._playing = !0, this.loop()
                }
            }, {
                key: "stop",
                value: function() {
                    window.removeEventListener("resize", this.onResize), window.removeEventListener("mousemove", this.mouseMove), this._playing = !1
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.gl;
                    this.updateCamera(), this.block.preRender(this.camera, this.view.progress, this.isEnd ? 1 : 1 - this.background.star.progress), !this.isInit && this.background.star.progress > .9 ? (this.isInit = !0, this.emit("mouse-center")) : this.isInit && this.background.star.progress < .1 && (this.isInit = !1, this.emit("mouse-off")), e.bindFramebuffer(e.FRAMEBUFFER, null), e.viewport(0, 0, this.width, this.height),
                        e.clear(e.COLOR_BUFFER_BIT), this.noiseBackground.render(), e.disable(e.CULL_FACE), this.background.render(this.camera), this.block.render(this.camera)
                }
            }, {
                key: "updateCamera",
                value: function() {
                    this.camera.update(this.width, this.height, this.mouse)
                }
            }, {
                key: "_loop",
                value: function() {
                    this._playing && (this.mouse.x += .1 * (this.clientMouse.x - this.mouse.x), this.mouse.y += .1 * (this.clientMouse.y - this.mouse.y), this.render(), (0, x.frame)(this.loop))
                }
            }, {
                key: "_onResize",
                value: function(e) {
                    this.width = window.innerWidth, this.height = window.innerHeight, this.canvas.width = this.width, this.canvas.height = this.height
                }
            }, {
                key: "_mouseMove",
                value: function(e) {
                    this.clientMouse.x = e.clientX - this.width / 2, this.clientMouse.y = e.clientY - this.height / 2
                }
            }, {
                key: "gyroMove",
                value: function(e, t) {
                    console.log(e, t)
                }
            }]), t
        }(_["default"]);
    t["default"] = b, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        var n = e.getModelMatrix();
        return t.modelViewProjectionMatrix(n), n
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = n(29),
        u = i(s),
        l = n(42),
        c = i(l),
        h = n(43),
        d = i(h),
        f = n(45),
        p = i(f),
        m = n(47),
        v = i(m),
        g = n(48),
        y = i(g),
        _ = n(52),
        x = i(_),
        b = n(55),
        w = i(b),
        T = n(58),
        E = function() {
            function e(t) {
                r(this, e), this.gl = t, this.linesPrg = new y["default"](t), this.alphaLinesPrg = new x["default"](t), this.progressPrg = new w["default"](t), this.circle = new u["default"](t, .002), this.thinCircle = new u["default"](t, .004), this.thickCircle = new u["default"](t, .007), this.centerCircle = new u["default"](t, .016), this.square = new c["default"](t, .007), this.cross = new d["default"](t), this.dashedSquare = new p["default"](t), this.star = new v["default"](t), this.progressSquare = new c["default"](t, .02), this.squareProgressValue = 0, this.center = {
                    x: .5 * T.screen.width,
                    y: .5 * T.screen.height
                }, this.count = 0
            }
            return a(e, [{
                key: "render",
                value: function(e) {
                    this.gl.enable(this.gl.BLEND), this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA), this.count += .1, this.linesPrg.bind(this), this.circle.bind(this.linesPrg), this.circle.translate[2] = 1.5, this.circle.scale = 1.75, this.gl.uniformMatrix4fv(this.linesPrg.uMVP, !1, o(this.circle, e)), this.circle.render(), this.circle.translate[2] = 1.3, this.circle.scale = 1.4, this.gl.uniformMatrix4fv(this.linesPrg.uMVP, !1, o(this.circle, e)), this.circle.render(), this.circle.translate[2] = 1.1, this.circle.scale = 1.3, this.gl.uniformMatrix4fv(this.linesPrg.uMVP, !1, o(this.circle, e)), this.circle.render(), this.thinCircle.bind(this.linesPrg), this.thinCircle.translate[2] = .2, this.thinCircle.scale = .85, this.gl.uniformMatrix4fv(this.linesPrg.uMVP, !1, o(this.thinCircle, e)), this.thinCircle.render(), this.thinCircle.translate[2] = .18, this.thinCircle.scale = .83, this.gl.uniformMatrix4fv(this.linesPrg.uMVP, !1, o(this.thinCircle, e)), this.thinCircle.render(), this.thinCircle.translate[2] = .1, this.thinCircle.scale = .75, this.gl.uniformMatrix4fv(this.linesPrg.uMVP, !1, o(this.thinCircle, e)), this.thinCircle.render(), this.thickCircle.bind(this.linesPrg), this.thickCircle.translate[2] = .8, this.thickCircle.scale = 1.05, this.gl.uniformMatrix4fv(this.linesPrg.uMVP, !1, o(this.thickCircle, e)), this.thickCircle.render(), this.centerCircle.bind(this.linesPrg), this.centerCircle.translate[2] = -.4, this.centerCircle.scale = .55, this.gl.uniformMatrix4fv(this.linesPrg.uMVP, !1, o(this.centerCircle, e)), this.centerCircle.render(), this.square.bind(this.linesPrg), this.square.translate[2] = .5, this.square.scale = 1.56, this.gl.uniformMatrix4fv(this.linesPrg.uMVP, !1, o(this.square, e)), this.square.render(), this.cross.bind(this.linesPrg), this.cross.translate[2] = -.1, this.cross.scale = .72, this.gl.uniformMatrix4fv(this.linesPrg.uMVP, !1, o(this.cross, e)), this.cross.render(), this.dashedSquare.bind(this.linesPrg), this.dashedSquare.translate[2] = -.8, this.dashedSquare.scale = 1.08, this.gl.uniformMatrix4fv(this.linesPrg.uMVP, !1, o(this.dashedSquare, e)), this.dashedSquare.render(), this.center.x = .5 * T.screen.width, this.center.y = .5 * T.screen.height;
                    var t = Math.sqrt(Math.pow(T.mouse.x - this.center.x, 2) + Math.pow(T.mouse.y - this.center.y, 2));
                    t < .12 * T.screen.width ? this.star.show() : this.star.hide(), this.star.render(this.alphaLinesPrg, e), this.progressPrg.bind(), this.progressSquare.bind(this.progressPrg), this.progressSquare.translate[2] = 0, this.progressSquare.scale = .5, this.progressSquare.rotateZ = 45, this.gl.uniformMatrix4fv(this.progressPrg.uMVP, !1, o(this.progressSquare, e)), this.gl.uniform1f(this.progressPrg.uAlpha, 1), this.gl.uniform1f(this.progressPrg.uProgress, this.squareProgressValue), this.progressSquare.render(), this.gl.disable(this.gl.BLEND)
                }
            }]), e
        }();
    t["default"] = E, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(30),
        u = i(s),
        l = n(41),
        c = i(l),
        h = function(e) {
            function t(e, n) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e), this.geom = new c["default"](e, 1 - n, 1, 256)
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = h, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        o = n(31),
        a = (o.vec3.fromValues(0, 0, 1), o.vec3.fromValues(1, 1, 1)),
        s = function() {
            function e(t) {
                i(this, e), this.gl = t, this.modelMtx = new Float32Array(16), this.geom = null, this.rotateZ = 0, this.translate = o.vec3.fromValues(0, 0, 0), this.scale = 1
            }
            return r(e, [{
                key: "bind",
                value: function(e) {
                    this.geom && this.geom.bind(e)
                }
            }, {
                key: "render",
                value: function() {
                    this.geom.render()
                }
            }, {
                key: "getModelMatrix",
                value: function() {
                    return o.mat4.identity(this.modelMtx), o.vec3.set(a, this.scale, this.scale, 1), o.mat4.scale(this.modelMtx, this.modelMtx, a), o.mat4.rotateZ(this.modelMtx, this.modelMtx, this.rotateZ / 180 * Math.PI), this.modelMtx[12] = this.translate[0], this.modelMtx[13] = this.translate[1], this.modelMtx[14] = this.translate[2], this.modelMtx
                }
            }]), e
        }();
    t["default"] = s, e.exports = t["default"]
}, function(e, t, n) {
    t.glMatrix = n(32), t.mat2 = n(33), t.mat2d = n(34), t.mat3 = n(35), t.mat4 = n(36), t.quat = n(37), t.vec2 = n(40), t.vec3 = n(38), t.vec4 = n(39)
}, function(e, t) {
    var n = {};
    n.EPSILON = 1e-6, n.ARRAY_TYPE = "undefined" != typeof Float32Array ? Float32Array : Array, n.RANDOM = Math.random, n.setMatrixArrayType = function(e) {
        GLMAT_ARRAY_TYPE = e
    };
    var i = Math.PI / 180;
    n.toRadian = function(e) {
        return e * i
    }, e.exports = n
}, function(e, t, n) {
    var i = n(32),
        r = {};
    r.create = function() {
        var e = new i.ARRAY_TYPE(4);
        return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 1, e
    }, r.clone = function(e) {
        var t = new i.ARRAY_TYPE(4);
        return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t
    }, r.copy = function(e, t) {
        return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e
    }, r.identity = function(e) {
        return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 1, e
    }, r.transpose = function(e, t) {
        if (e === t) {
            var n = t[1];
            e[1] = t[2], e[2] = n
        } else e[0] = t[0], e[1] = t[2], e[2] = t[1], e[3] = t[3];
        return e
    }, r.invert = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2],
            o = t[3],
            a = n * o - r * i;
        return a ? (a = 1 / a, e[0] = o * a, e[1] = -i * a, e[2] = -r * a, e[3] = n * a, e) : null
    }, r.adjoint = function(e, t) {
        var n = t[0];
        return e[0] = t[3], e[1] = -t[1], e[2] = -t[2], e[3] = n, e
    }, r.determinant = function(e) {
        return e[0] * e[3] - e[2] * e[1]
    }, r.multiply = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = n[0],
            u = n[1],
            l = n[2],
            c = n[3];
        return e[0] = i * s + o * u, e[1] = r * s + a * u, e[2] = i * l + o * c, e[3] = r * l + a * c, e
    }, r.mul = r.multiply, r.rotate = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = Math.sin(n),
            u = Math.cos(n);
        return e[0] = i * u + o * s, e[1] = r * u + a * s, e[2] = i * -s + o * u, e[3] = r * -s + a * u, e
    }, r.scale = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = n[0],
            u = n[1];
        return e[0] = i * s, e[1] = r * s, e[2] = o * u, e[3] = a * u, e
    }, r.fromRotation = function(e, t) {
        var n = Math.sin(t),
            i = Math.cos(t);
        return e[0] = i, e[1] = n, e[2] = -n, e[3] = i, e
    }, r.fromScaling = function(e, t) {
        return e[0] = t[0], e[1] = 0, e[2] = 0, e[3] = t[1], e
    }, r.str = function(e) {
        return "mat2(" + e[0] + ", " + e[1] + ", " + e[2] + ", " + e[3] + ")"
    }, r.frob = function(e) {
        return Math.sqrt(Math.pow(e[0], 2) + Math.pow(e[1], 2) + Math.pow(e[2], 2) + Math.pow(e[3], 2))
    }, r.LDU = function(e, t, n, i) {
        return e[2] = i[2] / i[0], n[0] = i[0], n[1] = i[1], n[3] = i[3] - e[2] * n[1], [e, t, n]
    }, e.exports = r
}, function(e, t, n) {
    var i = n(32),
        r = {};
    r.create = function() {
        var e = new i.ARRAY_TYPE(6);
        return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 1, e[4] = 0, e[5] = 0, e
    }, r.clone = function(e) {
        var t = new i.ARRAY_TYPE(6);
        return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[4] = e[4], t[5] = e[5], t
    }, r.copy = function(e, t) {
        return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e
    }, r.identity = function(e) {
        return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 1, e[4] = 0, e[5] = 0, e
    }, r.invert = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2],
            o = t[3],
            a = t[4],
            s = t[5],
            u = n * o - i * r;
        return u ? (u = 1 / u, e[0] = o * u, e[1] = -i * u, e[2] = -r * u, e[3] = n * u, e[4] = (r * s - o * a) * u, e[5] = (i * a - n * s) * u, e) : null
    }, r.determinant = function(e) {
        return e[0] * e[3] - e[1] * e[2]
    }, r.multiply = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = t[4],
            u = t[5],
            l = n[0],
            c = n[1],
            h = n[2],
            d = n[3],
            f = n[4],
            p = n[5];
        return e[0] = i * l + o * c, e[1] = r * l + a * c, e[2] = i * h + o * d, e[3] = r * h + a * d, e[4] = i * f + o * p + s, e[5] = r * f + a * p + u, e
    }, r.mul = r.multiply, r.rotate = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = t[4],
            u = t[5],
            l = Math.sin(n),
            c = Math.cos(n);
        return e[0] = i * c + o * l, e[1] = r * c + a * l, e[2] = i * -l + o * c, e[3] = r * -l + a * c, e[4] = s, e[5] = u, e
    }, r.scale = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = t[4],
            u = t[5],
            l = n[0],
            c = n[1];
        return e[0] = i * l, e[1] = r * l, e[2] = o * c, e[3] = a * c, e[4] = s, e[5] = u, e
    }, r.translate = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = t[4],
            u = t[5],
            l = n[0],
            c = n[1];
        return e[0] = i, e[1] = r, e[2] = o, e[3] = a, e[4] = i * l + o * c + s, e[5] = r * l + a * c + u, e
    }, r.fromRotation = function(e, t) {
        var n = Math.sin(t),
            i = Math.cos(t);
        return e[0] = i, e[1] = n, e[2] = -n, e[3] = i, e[4] = 0, e[5] = 0, e
    }, r.fromScaling = function(e, t) {
        return e[0] = t[0], e[1] = 0, e[2] = 0, e[3] = t[1], e[4] = 0, e[5] = 0, e
    }, r.fromTranslation = function(e, t) {
        return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 1, e[4] = t[0], e[5] = t[1], e
    }, r.str = function(e) {
        return "mat2d(" + e[0] + ", " + e[1] + ", " + e[2] + ", " + e[3] + ", " + e[4] + ", " + e[5] + ")"
    }, r.frob = function(e) {
        return Math.sqrt(Math.pow(e[0], 2) + Math.pow(e[1], 2) + Math.pow(e[2], 2) + Math.pow(e[3], 2) + Math.pow(e[4], 2) + Math.pow(e[5], 2) + 1)
    }, e.exports = r
}, function(e, t, n) {
    var i = n(32),
        r = {};
    r.create = function() {
        var e = new i.ARRAY_TYPE(9);
        return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 1, e[5] = 0, e[6] = 0, e[7] = 0, e[8] = 1, e
    }, r.fromMat4 = function(e, t) {
        return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[4], e[4] = t[5], e[5] = t[6], e[6] = t[8], e[7] = t[9], e[8] = t[10], e
    }, r.clone = function(e) {
        var t = new i.ARRAY_TYPE(9);
        return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[4] = e[4], t[5] = e[5], t[6] = e[6], t[7] = e[7], t[8] = e[8], t
    }, r.copy = function(e, t) {
        return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e[6] = t[6], e[7] = t[7], e[8] = t[8], e
    }, r.identity = function(e) {
        return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 1, e[5] = 0, e[6] = 0, e[7] = 0, e[8] = 1, e
    }, r.transpose = function(e, t) {
        if (e === t) {
            var n = t[1],
                i = t[2],
                r = t[5];
            e[1] = t[3], e[2] = t[6], e[3] = n, e[5] = t[7], e[6] = i, e[7] = r
        } else e[0] = t[0], e[1] = t[3], e[2] = t[6], e[3] = t[1], e[4] = t[4], e[5] = t[7], e[6] = t[2], e[7] = t[5], e[8] = t[8];
        return e
    }, r.invert = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2],
            o = t[3],
            a = t[4],
            s = t[5],
            u = t[6],
            l = t[7],
            c = t[8],
            h = c * a - s * l,
            d = -c * o + s * u,
            f = l * o - a * u,
            p = n * h + i * d + r * f;
        return p ? (p = 1 / p, e[0] = h * p, e[1] = (-c * i + r * l) * p, e[2] = (s * i - r * a) * p, e[3] = d * p, e[4] = (c * n - r * u) * p, e[5] = (-s * n + r * o) * p, e[6] = f * p, e[7] = (-l * n + i * u) * p, e[8] = (a * n - i * o) * p, e) : null
    }, r.adjoint = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2],
            o = t[3],
            a = t[4],
            s = t[5],
            u = t[6],
            l = t[7],
            c = t[8];
        return e[0] = a * c - s * l, e[1] = r * l - i * c, e[2] = i * s - r * a, e[3] = s * u - o * c, e[4] = n * c - r * u, e[5] = r * o - n * s, e[6] = o * l - a * u, e[7] = i * u - n * l, e[8] = n * a - i * o, e
    }, r.determinant = function(e) {
        var t = e[0],
            n = e[1],
            i = e[2],
            r = e[3],
            o = e[4],
            a = e[5],
            s = e[6],
            u = e[7],
            l = e[8];
        return t * (l * o - a * u) + n * (-l * r + a * s) + i * (u * r - o * s)
    }, r.multiply = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = t[4],
            u = t[5],
            l = t[6],
            c = t[7],
            h = t[8],
            d = n[0],
            f = n[1],
            p = n[2],
            m = n[3],
            v = n[4],
            g = n[5],
            y = n[6],
            _ = n[7],
            x = n[8];
        return e[0] = d * i + f * a + p * l, e[1] = d * r + f * s + p * c, e[2] = d * o + f * u + p * h, e[3] = m * i + v * a + g * l, e[4] = m * r + v * s + g * c, e[5] = m * o + v * u + g * h, e[6] = y * i + _ * a + x * l, e[7] = y * r + _ * s + x * c, e[8] = y * o + _ * u + x * h, e
    }, r.mul = r.multiply, r.translate = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = t[4],
            u = t[5],
            l = t[6],
            c = t[7],
            h = t[8],
            d = n[0],
            f = n[1];
        return e[0] = i, e[1] = r, e[2] = o, e[3] = a, e[4] = s, e[5] = u, e[6] = d * i + f * a + l, e[7] = d * r + f * s + c, e[8] = d * o + f * u + h, e
    }, r.rotate = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = t[4],
            u = t[5],
            l = t[6],
            c = t[7],
            h = t[8],
            d = Math.sin(n),
            f = Math.cos(n);
        return e[0] = f * i + d * a, e[1] = f * r + d * s, e[2] = f * o + d * u, e[3] = f * a - d * i, e[4] = f * s - d * r, e[5] = f * u - d * o, e[6] = l, e[7] = c, e[8] = h, e
    }, r.scale = function(e, t, n) {
        var i = n[0],
            r = n[1];
        return e[0] = i * t[0], e[1] = i * t[1], e[2] = i * t[2], e[3] = r * t[3], e[4] = r * t[4], e[5] = r * t[5], e[6] = t[6], e[7] = t[7], e[8] = t[8], e
    }, r.fromTranslation = function(e, t) {
        return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 1, e[5] = 0, e[6] = t[0], e[7] = t[1], e[8] = 1, e
    }, r.fromRotation = function(e, t) {
        var n = Math.sin(t),
            i = Math.cos(t);
        return e[0] = i, e[1] = n, e[2] = 0, e[3] = -n, e[4] = i, e[5] = 0, e[6] = 0, e[7] = 0, e[8] = 1, e
    }, r.fromScaling = function(e, t) {
        return e[0] = t[0], e[1] = 0, e[2] = 0, e[3] = 0, e[4] = t[1], e[5] = 0, e[6] = 0, e[7] = 0, e[8] = 1, e
    }, r.fromMat2d = function(e, t) {
        return e[0] = t[0], e[1] = t[1], e[2] = 0, e[3] = t[2], e[4] = t[3], e[5] = 0, e[6] = t[4], e[7] = t[5], e[8] = 1, e
    }, r.fromQuat = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2],
            o = t[3],
            a = n + n,
            s = i + i,
            u = r + r,
            l = n * a,
            c = i * a,
            h = i * s,
            d = r * a,
            f = r * s,
            p = r * u,
            m = o * a,
            v = o * s,
            g = o * u;
        return e[0] = 1 - h - p, e[3] = c - g, e[6] = d + v, e[1] = c + g, e[4] = 1 - l - p, e[7] = f - m, e[2] = d - v, e[5] = f + m, e[8] = 1 - l - h, e
    }, r.normalFromMat4 = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2],
            o = t[3],
            a = t[4],
            s = t[5],
            u = t[6],
            l = t[7],
            c = t[8],
            h = t[9],
            d = t[10],
            f = t[11],
            p = t[12],
            m = t[13],
            v = t[14],
            g = t[15],
            y = n * s - i * a,
            _ = n * u - r * a,
            x = n * l - o * a,
            b = i * u - r * s,
            w = i * l - o * s,
            T = r * l - o * u,
            E = c * m - h * p,
            S = c * v - d * p,
            M = c * g - f * p,
            P = h * v - d * m,
            A = h * g - f * m,
            C = d * g - f * v,
            R = y * C - _ * A + x * P + b * M - w * S + T * E;
        return R ? (R = 1 / R, e[0] = (s * C - u * A + l * P) * R, e[1] = (u * M - a * C - l * S) * R, e[2] = (a * A - s * M + l * E) * R, e[3] = (r * A - i * C - o * P) * R, e[4] = (n * C - r * M + o * S) * R, e[5] = (i * M - n * A - o * E) * R, e[6] = (m * T - v * w + g * b) * R, e[7] = (v * x - p * T - g * _) * R, e[8] = (p * w - m * x + g * y) * R, e) : null
    }, r.str = function(e) {
        return "mat3(" + e[0] + ", " + e[1] + ", " + e[2] + ", " + e[3] + ", " + e[4] + ", " + e[5] + ", " + e[6] + ", " + e[7] + ", " + e[8] + ")"
    }, r.frob = function(e) {
        return Math.sqrt(Math.pow(e[0], 2) + Math.pow(e[1], 2) + Math.pow(e[2], 2) + Math.pow(e[3], 2) + Math.pow(e[4], 2) + Math.pow(e[5], 2) + Math.pow(e[6], 2) + Math.pow(e[7], 2) + Math.pow(e[8], 2))
    }, e.exports = r
}, function(e, t, n) {
    var i = n(32),
        r = {};
    r.create = function() {
        var e = new i.ARRAY_TYPE(16);
        return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = 1, e[6] = 0, e[7] = 0, e[8] = 0, e[9] = 0, e[10] = 1, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, e
    }, r.clone = function(e) {
        var t = new i.ARRAY_TYPE(16);
        return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[4] = e[4], t[5] = e[5], t[6] = e[6], t[7] = e[7], t[8] = e[8], t[9] = e[9], t[10] = e[10], t[11] = e[11], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15], t
    }, r.copy = function(e, t) {
        return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e[6] = t[6], e[7] = t[7], e[8] = t[8], e[9] = t[9], e[10] = t[10], e[11] = t[11], e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15], e
    }, r.identity = function(e) {
        return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = 1, e[6] = 0, e[7] = 0, e[8] = 0, e[9] = 0, e[10] = 1, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, e
    }, r.transpose = function(e, t) {
        if (e === t) {
            var n = t[1],
                i = t[2],
                r = t[3],
                o = t[6],
                a = t[7],
                s = t[11];
            e[1] = t[4], e[2] = t[8], e[3] = t[12], e[4] = n, e[6] = t[9], e[7] = t[13], e[8] = i, e[9] = o, e[11] = t[14], e[12] = r, e[13] = a, e[14] = s
        } else e[0] = t[0], e[1] = t[4], e[2] = t[8], e[3] = t[12], e[4] = t[1], e[5] = t[5], e[6] = t[9], e[7] = t[13], e[8] = t[2], e[9] = t[6], e[10] = t[10], e[11] = t[14], e[12] = t[3], e[13] = t[7], e[14] = t[11], e[15] = t[15];
        return e
    }, r.invert = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2],
            o = t[3],
            a = t[4],
            s = t[5],
            u = t[6],
            l = t[7],
            c = t[8],
            h = t[9],
            d = t[10],
            f = t[11],
            p = t[12],
            m = t[13],
            v = t[14],
            g = t[15],
            y = n * s - i * a,
            _ = n * u - r * a,
            x = n * l - o * a,
            b = i * u - r * s,
            w = i * l - o * s,
            T = r * l - o * u,
            E = c * m - h * p,
            S = c * v - d * p,
            M = c * g - f * p,
            P = h * v - d * m,
            A = h * g - f * m,
            C = d * g - f * v,
            R = y * C - _ * A + x * P + b * M - w * S + T * E;
        return R ? (R = 1 / R, e[0] = (s * C - u * A + l * P) * R, e[1] = (r * A - i * C - o * P) * R, e[2] = (m * T - v * w + g * b) * R, e[3] = (d * w - h * T - f * b) * R, e[4] = (u * M - a * C - l * S) * R, e[5] = (n * C - r * M + o * S) * R, e[6] = (v * x - p * T - g * _) * R, e[7] = (c * T - d * x + f * _) * R, e[8] = (a * A - s * M + l * E) * R, e[9] = (i * M - n * A - o * E) * R, e[10] = (p * w - m * x + g * y) * R, e[11] = (h * x - c * w - f * y) * R, e[12] = (s * S - a * P - u * E) * R, e[13] = (n * P - i * S + r * E) * R, e[14] = (m * _ - p * b - v * y) * R, e[15] = (c * b - h * _ + d * y) * R, e) : null
    }, r.adjoint = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2],
            o = t[3],
            a = t[4],
            s = t[5],
            u = t[6],
            l = t[7],
            c = t[8],
            h = t[9],
            d = t[10],
            f = t[11],
            p = t[12],
            m = t[13],
            v = t[14],
            g = t[15];
        return e[0] = s * (d * g - f * v) - h * (u * g - l * v) + m * (u * f - l * d), e[1] = -(i * (d * g - f * v) - h * (r * g - o * v) + m * (r * f - o * d)), e[2] = i * (u * g - l * v) - s * (r * g - o * v) + m * (r * l - o * u), e[3] = -(i * (u * f - l * d) - s * (r * f - o * d) + h * (r * l - o * u)), e[4] = -(a * (d * g - f * v) - c * (u * g - l * v) + p * (u * f - l * d)), e[5] = n * (d * g - f * v) - c * (r * g - o * v) + p * (r * f - o * d), e[6] = -(n * (u * g - l * v) - a * (r * g - o * v) + p * (r * l - o * u)), e[7] = n * (u * f - l * d) - a * (r * f - o * d) + c * (r * l - o * u), e[8] = a * (h * g - f * m) - c * (s * g - l * m) + p * (s * f - l * h), e[9] = -(n * (h * g - f * m) - c * (i * g - o * m) + p * (i * f - o * h)), e[10] = n * (s * g - l * m) - a * (i * g - o * m) + p * (i * l - o * s), e[11] = -(n * (s * f - l * h) - a * (i * f - o * h) + c * (i * l - o * s)), e[12] = -(a * (h * v - d * m) - c * (s * v - u * m) + p * (s * d - u * h)), e[13] = n * (h * v - d * m) - c * (i * v - r * m) + p * (i * d - r * h), e[14] = -(n * (s * v - u * m) - a * (i * v - r * m) + p * (i * u - r * s)), e[15] = n * (s * d - u * h) - a * (i * d - r * h) + c * (i * u - r * s), e
    }, r.determinant = function(e) {
        var t = e[0],
            n = e[1],
            i = e[2],
            r = e[3],
            o = e[4],
            a = e[5],
            s = e[6],
            u = e[7],
            l = e[8],
            c = e[9],
            h = e[10],
            d = e[11],
            f = e[12],
            p = e[13],
            m = e[14],
            v = e[15],
            g = t * a - n * o,
            y = t * s - i * o,
            _ = t * u - r * o,
            x = n * s - i * a,
            b = n * u - r * a,
            w = i * u - r * s,
            T = l * p - c * f,
            E = l * m - h * f,
            S = l * v - d * f,
            M = c * m - h * p,
            P = c * v - d * p,
            A = h * v - d * m;
        return g * A - y * P + _ * M + x * S - b * E + w * T
    }, r.multiply = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = t[4],
            u = t[5],
            l = t[6],
            c = t[7],
            h = t[8],
            d = t[9],
            f = t[10],
            p = t[11],
            m = t[12],
            v = t[13],
            g = t[14],
            y = t[15],
            _ = n[0],
            x = n[1],
            b = n[2],
            w = n[3];
        return e[0] = _ * i + x * s + b * h + w * m, e[1] = _ * r + x * u + b * d + w * v, e[2] = _ * o + x * l + b * f + w * g, e[3] = _ * a + x * c + b * p + w * y, _ = n[4], x = n[5], b = n[6], w = n[7], e[4] = _ * i + x * s + b * h + w * m, e[5] = _ * r + x * u + b * d + w * v, e[6] = _ * o + x * l + b * f + w * g, e[7] = _ * a + x * c + b * p + w * y, _ = n[8], x = n[9], b = n[10], w = n[11], e[8] = _ * i + x * s + b * h + w * m, e[9] = _ * r + x * u + b * d + w * v, e[10] = _ * o + x * l + b * f + w * g, e[11] = _ * a + x * c + b * p + w * y, _ = n[12], x = n[13], b = n[14], w = n[15], e[12] = _ * i + x * s + b * h + w * m, e[13] = _ * r + x * u + b * d + w * v, e[14] = _ * o + x * l + b * f + w * g, e[15] = _ * a + x * c + b * p + w * y, e
    }, r.mul = r.multiply, r.translate = function(e, t, n) {
        var i, r, o, a, s, u, l, c, h, d, f, p, m = n[0],
            v = n[1],
            g = n[2];
        return t === e ? (e[12] = t[0] * m + t[4] * v + t[8] * g + t[12], e[13] = t[1] * m + t[5] * v + t[9] * g + t[13], e[14] = t[2] * m + t[6] * v + t[10] * g + t[14], e[15] = t[3] * m + t[7] * v + t[11] * g + t[15]) : (i = t[0], r = t[1], o = t[2], a = t[3], s = t[4], u = t[5], l = t[6], c = t[7], h = t[8], d = t[9], f = t[10], p = t[11], e[0] = i, e[1] = r, e[2] = o, e[3] = a, e[4] = s, e[5] = u, e[6] = l, e[7] = c, e[8] = h, e[9] = d, e[10] = f, e[11] = p, e[12] = i * m + s * v + h * g + t[12], e[13] = r * m + u * v + d * g + t[13], e[14] = o * m + l * v + f * g + t[14], e[15] = a * m + c * v + p * g + t[15]), e
    }, r.scale = function(e, t, n) {
        var i = n[0],
            r = n[1],
            o = n[2];
        return e[0] = t[0] * i, e[1] = t[1] * i, e[2] = t[2] * i, e[3] = t[3] * i, e[4] = t[4] * r, e[5] = t[5] * r, e[6] = t[6] * r, e[7] = t[7] * r, e[8] = t[8] * o, e[9] = t[9] * o, e[10] = t[10] * o, e[11] = t[11] * o, e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15], e
    }, r.rotate = function(e, t, n, r) {
        var o, a, s, u, l, c, h, d, f, p, m, v, g, y, _, x, b, w, T, E, S, M, P, A, C = r[0],
            R = r[1],
            L = r[2],
            O = Math.sqrt(C * C + R * R + L * L);
        return Math.abs(O) < i.EPSILON ? null : (O = 1 / O, C *= O, R *= O, L *= O, o = Math.sin(n), a = Math.cos(n), s = 1 - a, u = t[0], l = t[1], c = t[2], h = t[3], d = t[4], f = t[5], p = t[6], m = t[7], v = t[8], g = t[9], y = t[10], _ = t[11], x = C * C * s + a, b = R * C * s + L * o, w = L * C * s - R * o, T = C * R * s - L * o, E = R * R * s + a, S = L * R * s + C * o, M = C * L * s + R * o, P = R * L * s - C * o, A = L * L * s + a, e[0] = u * x + d * b + v * w, e[1] = l * x + f * b + g * w, e[2] = c * x + p * b + y * w, e[3] = h * x + m * b + _ * w, e[4] = u * T + d * E + v * S, e[5] = l * T + f * E + g * S, e[6] = c * T + p * E + y * S, e[7] = h * T + m * E + _ * S, e[8] = u * M + d * P + v * A, e[9] = l * M + f * P + g * A, e[10] = c * M + p * P + y * A, e[11] = h * M + m * P + _ * A, t !== e && (e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15]), e)
    }, r.rotateX = function(e, t, n) {
        var i = Math.sin(n),
            r = Math.cos(n),
            o = t[4],
            a = t[5],
            s = t[6],
            u = t[7],
            l = t[8],
            c = t[9],
            h = t[10],
            d = t[11];
        return t !== e && (e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15]), e[4] = o * r + l * i, e[5] = a * r + c * i, e[6] = s * r + h * i, e[7] = u * r + d * i, e[8] = l * r - o * i, e[9] = c * r - a * i, e[10] = h * r - s * i, e[11] = d * r - u * i, e
    }, r.rotateY = function(e, t, n) {
        var i = Math.sin(n),
            r = Math.cos(n),
            o = t[0],
            a = t[1],
            s = t[2],
            u = t[3],
            l = t[8],
            c = t[9],
            h = t[10],
            d = t[11];
        return t !== e && (e[4] = t[4], e[5] = t[5], e[6] = t[6], e[7] = t[7], e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15]), e[0] = o * r - l * i, e[1] = a * r - c * i, e[2] = s * r - h * i, e[3] = u * r - d * i, e[8] = o * i + l * r, e[9] = a * i + c * r, e[10] = s * i + h * r, e[11] = u * i + d * r, e
    }, r.rotateZ = function(e, t, n) {
        var i = Math.sin(n),
            r = Math.cos(n),
            o = t[0],
            a = t[1],
            s = t[2],
            u = t[3],
            l = t[4],
            c = t[5],
            h = t[6],
            d = t[7];
        return t !== e && (e[8] = t[8], e[9] = t[9], e[10] = t[10], e[11] = t[11], e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15]), e[0] = o * r + l * i, e[1] = a * r + c * i, e[2] = s * r + h * i, e[3] = u * r + d * i, e[4] = l * r - o * i, e[5] = c * r - a * i, e[6] = h * r - s * i, e[7] = d * r - u * i, e
    }, r.fromTranslation = function(e, t) {
        return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = 1, e[6] = 0, e[7] = 0, e[8] = 0, e[9] = 0, e[10] = 1, e[11] = 0, e[12] = t[0], e[13] = t[1], e[14] = t[2], e[15] = 1, e
    }, r.fromScaling = function(e, t) {
        return e[0] = t[0], e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = t[1], e[6] = 0, e[7] = 0, e[8] = 0, e[9] = 0, e[10] = t[2], e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, e
    }, r.fromRotation = function(e, t, n) {
        var r, o, a, s = n[0],
            u = n[1],
            l = n[2],
            c = Math.sqrt(s * s + u * u + l * l);
        return Math.abs(c) < i.EPSILON ? null : (c = 1 / c, s *= c, u *= c, l *= c, r = Math.sin(t), o = Math.cos(t), a = 1 - o, e[0] = s * s * a + o, e[1] = u * s * a + l * r, e[2] = l * s * a - u * r, e[3] = 0, e[4] = s * u * a - l * r, e[5] = u * u * a + o, e[6] = l * u * a + s * r, e[7] = 0, e[8] = s * l * a + u * r, e[9] = u * l * a - s * r, e[10] = l * l * a + o, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, e)
    }, r.fromXRotation = function(e, t) {
        var n = Math.sin(t),
            i = Math.cos(t);
        return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = i, e[6] = n, e[7] = 0, e[8] = 0, e[9] = -n, e[10] = i, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, e
    }, r.fromYRotation = function(e, t) {
        var n = Math.sin(t),
            i = Math.cos(t);
        return e[0] = i, e[1] = 0, e[2] = -n, e[3] = 0, e[4] = 0, e[5] = 1, e[6] = 0, e[7] = 0, e[8] = n, e[9] = 0, e[10] = i, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, e
    }, r.fromZRotation = function(e, t) {
        var n = Math.sin(t),
            i = Math.cos(t);
        return e[0] = i, e[1] = n, e[2] = 0, e[3] = 0, e[4] = -n, e[5] = i, e[6] = 0, e[7] = 0, e[8] = 0, e[9] = 0, e[10] = 1, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, e
    }, r.fromRotationTranslation = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = i + i,
            u = r + r,
            l = o + o,
            c = i * s,
            h = i * u,
            d = i * l,
            f = r * u,
            p = r * l,
            m = o * l,
            v = a * s,
            g = a * u,
            y = a * l;
        return e[0] = 1 - (f + m), e[1] = h + y, e[2] = d - g, e[3] = 0, e[4] = h - y, e[5] = 1 - (c + m), e[6] = p + v, e[7] = 0, e[8] = d + g, e[9] = p - v, e[10] = 1 - (c + f), e[11] = 0, e[12] = n[0], e[13] = n[1], e[14] = n[2], e[15] = 1, e
    }, r.fromRotationTranslationScale = function(e, t, n, i) {
        var r = t[0],
            o = t[1],
            a = t[2],
            s = t[3],
            u = r + r,
            l = o + o,
            c = a + a,
            h = r * u,
            d = r * l,
            f = r * c,
            p = o * l,
            m = o * c,
            v = a * c,
            g = s * u,
            y = s * l,
            _ = s * c,
            x = i[0],
            b = i[1],
            w = i[2];
        return e[0] = (1 - (p + v)) * x, e[1] = (d + _) * x, e[2] = (f - y) * x, e[3] = 0, e[4] = (d - _) * b, e[5] = (1 - (h + v)) * b, e[6] = (m + g) * b, e[7] = 0, e[8] = (f + y) * w, e[9] = (m - g) * w, e[10] = (1 - (h + p)) * w, e[11] = 0, e[12] = n[0], e[13] = n[1], e[14] = n[2], e[15] = 1, e
    }, r.fromRotationTranslationScaleOrigin = function(e, t, n, i, r) {
        var o = t[0],
            a = t[1],
            s = t[2],
            u = t[3],
            l = o + o,
            c = a + a,
            h = s + s,
            d = o * l,
            f = o * c,
            p = o * h,
            m = a * c,
            v = a * h,
            g = s * h,
            y = u * l,
            _ = u * c,
            x = u * h,
            b = i[0],
            w = i[1],
            T = i[2],
            E = r[0],
            S = r[1],
            M = r[2];
        return e[0] = (1 - (m + g)) * b, e[1] = (f + x) * b, e[2] = (p - _) * b, e[3] = 0, e[4] = (f - x) * w, e[5] = (1 - (d + g)) * w, e[6] = (v + y) * w, e[7] = 0, e[8] = (p + _) * T, e[9] = (v - y) * T, e[10] = (1 - (d + m)) * T, e[11] = 0, e[12] = n[0] + E - (e[0] * E + e[4] * S + e[8] * M), e[13] = n[1] + S - (e[1] * E + e[5] * S + e[9] * M), e[14] = n[2] + M - (e[2] * E + e[6] * S + e[10] * M), e[15] = 1, e
    }, r.fromQuat = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2],
            o = t[3],
            a = n + n,
            s = i + i,
            u = r + r,
            l = n * a,
            c = i * a,
            h = i * s,
            d = r * a,
            f = r * s,
            p = r * u,
            m = o * a,
            v = o * s,
            g = o * u;
        return e[0] = 1 - h - p, e[1] = c + g, e[2] = d - v, e[3] = 0, e[4] = c - g, e[5] = 1 - l - p, e[6] = f + m, e[7] = 0, e[8] = d + v, e[9] = f - m, e[10] = 1 - l - h, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, e
    }, r.frustum = function(e, t, n, i, r, o, a) {
        var s = 1 / (n - t),
            u = 1 / (r - i),
            l = 1 / (o - a);
        return e[0] = 2 * o * s, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = 2 * o * u, e[6] = 0, e[7] = 0, e[8] = (n + t) * s, e[9] = (r + i) * u, e[10] = (a + o) * l, e[11] = -1, e[12] = 0, e[13] = 0, e[14] = a * o * 2 * l, e[15] = 0, e
    }, r.perspective = function(e, t, n, i, r) {
        var o = 1 / Math.tan(t / 2),
            a = 1 / (i - r);
        return e[0] = o / n, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = o, e[6] = 0, e[7] = 0, e[8] = 0, e[9] = 0, e[10] = (r + i) * a, e[11] = -1, e[12] = 0, e[13] = 0, e[14] = 2 * r * i * a, e[15] = 0, e
    }, r.perspectiveFromFieldOfView = function(e, t, n, i) {
        var r = Math.tan(t.upDegrees * Math.PI / 180),
            o = Math.tan(t.downDegrees * Math.PI / 180),
            a = Math.tan(t.leftDegrees * Math.PI / 180),
            s = Math.tan(t.rightDegrees * Math.PI / 180),
            u = 2 / (a + s),
            l = 2 / (r + o);
        return e[0] = u, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = l, e[6] = 0, e[7] = 0, e[8] = -((a - s) * u * .5), e[9] = (r - o) * l * .5, e[10] = i / (n - i), e[11] = -1, e[12] = 0, e[13] = 0, e[14] = i * n / (n - i), e[15] = 0, e
    }, r.ortho = function(e, t, n, i, r, o, a) {
        var s = 1 / (t - n),
            u = 1 / (i - r),
            l = 1 / (o - a);
        return e[0] = -2 * s, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = -2 * u, e[6] = 0, e[7] = 0, e[8] = 0, e[9] = 0, e[10] = 2 * l, e[11] = 0, e[12] = (t + n) * s, e[13] = (r + i) * u, e[14] = (a + o) * l, e[15] = 1, e
    }, r.lookAt = function(e, t, n, o) {
        var a, s, u, l, c, h, d, f, p, m, v = t[0],
            g = t[1],
            y = t[2],
            _ = o[0],
            x = o[1],
            b = o[2],
            w = n[0],
            T = n[1],
            E = n[2];
        return Math.abs(v - w) < i.EPSILON && Math.abs(g - T) < i.EPSILON && Math.abs(y - E) < i.EPSILON ? r.identity(e) : (d = v - w, f = g - T, p = y - E, m = 1 / Math.sqrt(d * d + f * f + p * p), d *= m, f *= m, p *= m, a = x * p - b * f, s = b * d - _ * p, u = _ * f - x * d, m = Math.sqrt(a * a + s * s + u * u), m ? (m = 1 / m, a *= m, s *= m, u *= m) : (a = 0, s = 0, u = 0), l = f * u - p * s, c = p * a - d * u, h = d * s - f * a, m = Math.sqrt(l * l + c * c + h * h), m ? (m = 1 / m, l *= m, c *= m, h *= m) : (l = 0, c = 0, h = 0), e[0] = a, e[1] = l, e[2] = d, e[3] = 0, e[4] = s, e[5] = c, e[6] = f, e[7] = 0, e[8] = u, e[9] = h, e[10] = p, e[11] = 0, e[12] = -(a * v + s * g + u * y), e[13] = -(l * v + c * g + h * y), e[14] = -(d * v + f * g + p * y), e[15] = 1, e)
    }, r.str = function(e) {
        return "mat4(" + e[0] + ", " + e[1] + ", " + e[2] + ", " + e[3] + ", " + e[4] + ", " + e[5] + ", " + e[6] + ", " + e[7] + ", " + e[8] + ", " + e[9] + ", " + e[10] + ", " + e[11] + ", " + e[12] + ", " + e[13] + ", " + e[14] + ", " + e[15] + ")"
    }, r.frob = function(e) {
        return Math.sqrt(Math.pow(e[0], 2) + Math.pow(e[1], 2) + Math.pow(e[2], 2) + Math.pow(e[3], 2) + Math.pow(e[4], 2) + Math.pow(e[5], 2) + Math.pow(e[6], 2) + Math.pow(e[7], 2) + Math.pow(e[8], 2) + Math.pow(e[9], 2) + Math.pow(e[10], 2) + Math.pow(e[11], 2) + Math.pow(e[12], 2) + Math.pow(e[13], 2) + Math.pow(e[14], 2) + Math.pow(e[15], 2))
    }, e.exports = r
}, function(e, t, n) {
    var i = n(32),
        r = n(35),
        o = n(38),
        a = n(39),
        s = {};
    s.create = function() {
        var e = new i.ARRAY_TYPE(4);
        return e[0] = 0, e[1] = 0, e[2] = 0, e[3] = 1, e
    }, s.rotationTo = function() {
        var e = o.create(),
            t = o.fromValues(1, 0, 0),
            n = o.fromValues(0, 1, 0);
        return function(i, r, a) {
            var u = o.dot(r, a);
            return -.999999 > u ? (o.cross(e, t, r), o.length(e) < 1e-6 && o.cross(e, n, r), o.normalize(e, e), s.setAxisAngle(i, e, Math.PI), i) : u > .999999 ? (i[0] = 0, i[1] = 0, i[2] = 0, i[3] = 1, i) : (o.cross(e, r, a), i[0] = e[0], i[1] = e[1], i[2] = e[2], i[3] = 1 + u, s.normalize(i, i))
        }
    }(), s.setAxes = function() {
        var e = r.create();
        return function(t, n, i, r) {
            return e[0] = i[0], e[3] = i[1], e[6] = i[2], e[1] = r[0], e[4] = r[1], e[7] = r[2], e[2] = -n[0], e[5] = -n[1], e[8] = -n[2], s.normalize(t, s.fromMat3(t, e))
        }
    }(), s.clone = a.clone, s.fromValues = a.fromValues, s.copy = a.copy, s.set = a.set, s.identity = function(e) {
        return e[0] = 0, e[1] = 0, e[2] = 0, e[3] = 1, e
    }, s.setAxisAngle = function(e, t, n) {
        n = .5 * n;
        var i = Math.sin(n);
        return e[0] = i * t[0], e[1] = i * t[1], e[2] = i * t[2], e[3] = Math.cos(n), e
    }, s.add = a.add, s.multiply = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = n[0],
            u = n[1],
            l = n[2],
            c = n[3];
        return e[0] = i * c + a * s + r * l - o * u, e[1] = r * c + a * u + o * s - i * l, e[2] = o * c + a * l + i * u - r * s, e[3] = a * c - i * s - r * u - o * l, e
    }, s.mul = s.multiply, s.scale = a.scale, s.rotateX = function(e, t, n) {
        n *= .5;
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = Math.sin(n),
            u = Math.cos(n);
        return e[0] = i * u + a * s, e[1] = r * u + o * s, e[2] = o * u - r * s, e[3] = a * u - i * s, e
    }, s.rotateY = function(e, t, n) {
        n *= .5;
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = Math.sin(n),
            u = Math.cos(n);
        return e[0] = i * u - o * s, e[1] = r * u + a * s, e[2] = o * u + i * s, e[3] = a * u - r * s, e
    }, s.rotateZ = function(e, t, n) {
        n *= .5;
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3],
            s = Math.sin(n),
            u = Math.cos(n);
        return e[0] = i * u + r * s, e[1] = r * u - i * s, e[2] = o * u + a * s, e[3] = a * u - o * s, e
    }, s.calculateW = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2];
        return e[0] = n, e[1] = i, e[2] = r, e[3] = Math.sqrt(Math.abs(1 - n * n - i * i - r * r)), e
    }, s.dot = a.dot, s.lerp = a.lerp, s.slerp = function(e, t, n, i) {
        var r, o, a, s, u, l = t[0],
            c = t[1],
            h = t[2],
            d = t[3],
            f = n[0],
            p = n[1],
            m = n[2],
            v = n[3];
        return o = l * f + c * p + h * m + d * v, 0 > o && (o = -o, f = -f, p = -p, m = -m, v = -v), 1 - o > 1e-6 ? (r = Math.acos(o), a = Math.sin(r), s = Math.sin((1 - i) * r) / a, u = Math.sin(i * r) / a) : (s = 1 - i, u = i), e[0] = s * l + u * f, e[1] = s * c + u * p, e[2] = s * h + u * m, e[3] = s * d + u * v, e
    }, s.sqlerp = function() {
        var e = s.create(),
            t = s.create();
        return function(n, i, r, o, a, u) {
            return s.slerp(e, i, a, u), s.slerp(t, r, o, u), s.slerp(n, e, t, 2 * u * (1 - u)), n
        }
    }(), s.invert = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2],
            o = t[3],
            a = n * n + i * i + r * r + o * o,
            s = a ? 1 / a : 0;
        return e[0] = -n * s, e[1] = -i * s, e[2] = -r * s, e[3] = o * s, e
    }, s.conjugate = function(e, t) {
        return e[0] = -t[0], e[1] = -t[1], e[2] = -t[2], e[3] = t[3], e
    }, s.length = a.length, s.len = s.length, s.squaredLength = a.squaredLength, s.sqrLen = s.squaredLength, s.normalize = a.normalize, s.fromMat3 = function(e, t) {
        var n, i = t[0] + t[4] + t[8];
        if (i > 0) n = Math.sqrt(i + 1), e[3] = .5 * n, n = .5 / n, e[0] = (t[5] - t[7]) * n, e[1] = (t[6] - t[2]) * n, e[2] = (t[1] - t[3]) * n;
        else {
            var r = 0;
            t[4] > t[0] && (r = 1), t[8] > t[3 * r + r] && (r = 2);
            var o = (r + 1) % 3,
                a = (r + 2) % 3;
            n = Math.sqrt(t[3 * r + r] - t[3 * o + o] - t[3 * a + a] + 1), e[r] = .5 * n, n = .5 / n, e[3] = (t[3 * o + a] - t[3 * a + o]) * n, e[o] = (t[3 * o + r] + t[3 * r + o]) * n, e[a] = (t[3 * a + r] + t[3 * r + a]) * n
        }
        return e
    }, s.str = function(e) {
        return "quat(" + e[0] + ", " + e[1] + ", " + e[2] + ", " + e[3] + ")"
    }, e.exports = s
}, function(e, t, n) {
    var i = n(32),
        r = {};
    r.create = function() {
        var e = new i.ARRAY_TYPE(3);
        return e[0] = 0, e[1] = 0, e[2] = 0, e
    }, r.clone = function(e) {
        var t = new i.ARRAY_TYPE(3);
        return t[0] = e[0], t[1] = e[1], t[2] = e[2], t
    }, r.fromValues = function(e, t, n) {
        var r = new i.ARRAY_TYPE(3);
        return r[0] = e, r[1] = t, r[2] = n, r
    }, r.copy = function(e, t) {
        return e[0] = t[0], e[1] = t[1], e[2] = t[2], e
    }, r.set = function(e, t, n, i) {
        return e[0] = t, e[1] = n, e[2] = i, e
    }, r.add = function(e, t, n) {
        return e[0] = t[0] + n[0], e[1] = t[1] + n[1], e[2] = t[2] + n[2], e
    }, r.subtract = function(e, t, n) {
        return e[0] = t[0] - n[0], e[1] = t[1] - n[1], e[2] = t[2] - n[2], e
    }, r.sub = r.subtract, r.multiply = function(e, t, n) {
        return e[0] = t[0] * n[0], e[1] = t[1] * n[1], e[2] = t[2] * n[2], e
    }, r.mul = r.multiply, r.divide = function(e, t, n) {
        return e[0] = t[0] / n[0], e[1] = t[1] / n[1], e[2] = t[2] / n[2], e
    }, r.div = r.divide, r.min = function(e, t, n) {
        return e[0] = Math.min(t[0], n[0]), e[1] = Math.min(t[1], n[1]), e[2] = Math.min(t[2], n[2]), e
    }, r.max = function(e, t, n) {
        return e[0] = Math.max(t[0], n[0]), e[1] = Math.max(t[1], n[1]), e[2] = Math.max(t[2], n[2]), e
    }, r.scale = function(e, t, n) {
        return e[0] = t[0] * n, e[1] = t[1] * n, e[2] = t[2] * n, e
    }, r.scaleAndAdd = function(e, t, n, i) {
        return e[0] = t[0] + n[0] * i, e[1] = t[1] + n[1] * i, e[2] = t[2] + n[2] * i, e
    }, r.distance = function(e, t) {
        var n = t[0] - e[0],
            i = t[1] - e[1],
            r = t[2] - e[2];
        return Math.sqrt(n * n + i * i + r * r)
    }, r.dist = r.distance, r.squaredDistance = function(e, t) {
        var n = t[0] - e[0],
            i = t[1] - e[1],
            r = t[2] - e[2];
        return n * n + i * i + r * r
    }, r.sqrDist = r.squaredDistance, r.length = function(e) {
        var t = e[0],
            n = e[1],
            i = e[2];
        return Math.sqrt(t * t + n * n + i * i)
    }, r.len = r.length, r.squaredLength = function(e) {
        var t = e[0],
            n = e[1],
            i = e[2];
        return t * t + n * n + i * i
    }, r.sqrLen = r.squaredLength, r.negate = function(e, t) {
        return e[0] = -t[0], e[1] = -t[1], e[2] = -t[2], e
    }, r.inverse = function(e, t) {
        return e[0] = 1 / t[0], e[1] = 1 / t[1], e[2] = 1 / t[2], e
    }, r.normalize = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2],
            o = n * n + i * i + r * r;
        return o > 0 && (o = 1 / Math.sqrt(o), e[0] = t[0] * o, e[1] = t[1] * o, e[2] = t[2] * o), e
    }, r.dot = function(e, t) {
        return e[0] * t[0] + e[1] * t[1] + e[2] * t[2]
    }, r.cross = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = n[0],
            s = n[1],
            u = n[2];
        return e[0] = r * u - o * s, e[1] = o * a - i * u, e[2] = i * s - r * a, e
    }, r.lerp = function(e, t, n, i) {
        var r = t[0],
            o = t[1],
            a = t[2];
        return e[0] = r + i * (n[0] - r), e[1] = o + i * (n[1] - o), e[2] = a + i * (n[2] - a), e
    }, r.hermite = function(e, t, n, i, r, o) {
        var a = o * o,
            s = a * (2 * o - 3) + 1,
            u = a * (o - 2) + o,
            l = a * (o - 1),
            c = a * (3 - 2 * o);
        return e[0] = t[0] * s + n[0] * u + i[0] * l + r[0] * c, e[1] = t[1] * s + n[1] * u + i[1] * l + r[1] * c, e[2] = t[2] * s + n[2] * u + i[2] * l + r[2] * c, e
    }, r.bezier = function(e, t, n, i, r, o) {
        var a = 1 - o,
            s = a * a,
            u = o * o,
            l = s * a,
            c = 3 * o * s,
            h = 3 * u * a,
            d = u * o;
        return e[0] = t[0] * l + n[0] * c + i[0] * h + r[0] * d, e[1] = t[1] * l + n[1] * c + i[1] * h + r[1] * d, e[2] = t[2] * l + n[2] * c + i[2] * h + r[2] * d, e
    }, r.random = function(e, t) {
        t = t || 1;
        var n = 2 * i.RANDOM() * Math.PI,
            r = 2 * i.RANDOM() - 1,
            o = Math.sqrt(1 - r * r) * t;
        return e[0] = Math.cos(n) * o, e[1] = Math.sin(n) * o, e[2] = r * t, e
    }, r.transformMat4 = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = n[3] * i + n[7] * r + n[11] * o + n[15];
        return a = a || 1, e[0] = (n[0] * i + n[4] * r + n[8] * o + n[12]) / a, e[1] = (n[1] * i + n[5] * r + n[9] * o + n[13]) / a, e[2] = (n[2] * i + n[6] * r + n[10] * o + n[14]) / a, e
    }, r.transformMat3 = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2];
        return e[0] = i * n[0] + r * n[3] + o * n[6], e[1] = i * n[1] + r * n[4] + o * n[7], e[2] = i * n[2] + r * n[5] + o * n[8], e
    }, r.transformQuat = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = n[0],
            s = n[1],
            u = n[2],
            l = n[3],
            c = l * i + s * o - u * r,
            h = l * r + u * i - a * o,
            d = l * o + a * r - s * i,
            f = -a * i - s * r - u * o;
        return e[0] = c * l + f * -a + h * -u - d * -s, e[1] = h * l + f * -s + d * -a - c * -u, e[2] = d * l + f * -u + c * -s - h * -a, e
    }, r.rotateX = function(e, t, n, i) {
        var r = [],
            o = [];
        return r[0] = t[0] - n[0], r[1] = t[1] - n[1], r[2] = t[2] - n[2], o[0] = r[0], o[1] = r[1] * Math.cos(i) - r[2] * Math.sin(i), o[2] = r[1] * Math.sin(i) + r[2] * Math.cos(i), e[0] = o[0] + n[0], e[1] = o[1] + n[1], e[2] = o[2] + n[2], e
    }, r.rotateY = function(e, t, n, i) {
        var r = [],
            o = [];
        return r[0] = t[0] - n[0], r[1] = t[1] - n[1], r[2] = t[2] - n[2], o[0] = r[2] * Math.sin(i) + r[0] * Math.cos(i), o[1] = r[1], o[2] = r[2] * Math.cos(i) - r[0] * Math.sin(i), e[0] = o[0] + n[0], e[1] = o[1] + n[1], e[2] = o[2] + n[2], e
    }, r.rotateZ = function(e, t, n, i) {
        var r = [],
            o = [];
        return r[0] = t[0] - n[0], r[1] = t[1] - n[1], r[2] = t[2] - n[2], o[0] = r[0] * Math.cos(i) - r[1] * Math.sin(i), o[1] = r[0] * Math.sin(i) + r[1] * Math.cos(i), o[2] = r[2], e[0] = o[0] + n[0], e[1] = o[1] + n[1], e[2] = o[2] + n[2], e
    }, r.forEach = function() {
        var e = r.create();
        return function(t, n, i, r, o, a) {
            var s, u;
            for (n || (n = 3), i || (i = 0), u = r ? Math.min(r * n + i, t.length) : t.length, s = i; u > s; s += n) e[0] = t[s], e[1] = t[s + 1], e[2] = t[s + 2], o(e, e, a), t[s] = e[0], t[s + 1] = e[1], t[s + 2] = e[2];
            return t
        }
    }(), r.angle = function(e, t) {
        var n = r.fromValues(e[0], e[1], e[2]),
            i = r.fromValues(t[0], t[1], t[2]);
        r.normalize(n, n), r.normalize(i, i);
        var o = r.dot(n, i);
        return o > 1 ? 0 : Math.acos(o)
    }, r.str = function(e) {
        return "vec3(" + e[0] + ", " + e[1] + ", " + e[2] + ")"
    }, e.exports = r
}, function(e, t, n) {
    var i = n(32),
        r = {};
    r.create = function() {
        var e = new i.ARRAY_TYPE(4);
        return e[0] = 0, e[1] = 0, e[2] = 0, e[3] = 0, e
    }, r.clone = function(e) {
        var t = new i.ARRAY_TYPE(4);
        return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t
    }, r.fromValues = function(e, t, n, r) {
        var o = new i.ARRAY_TYPE(4);
        return o[0] = e, o[1] = t, o[2] = n, o[3] = r, o
    }, r.copy = function(e, t) {
        return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e
    }, r.set = function(e, t, n, i, r) {
        return e[0] = t, e[1] = n, e[2] = i, e[3] = r, e
    }, r.add = function(e, t, n) {
        return e[0] = t[0] + n[0], e[1] = t[1] + n[1], e[2] = t[2] + n[2], e[3] = t[3] + n[3], e
    }, r.subtract = function(e, t, n) {
        return e[0] = t[0] - n[0], e[1] = t[1] - n[1], e[2] = t[2] - n[2], e[3] = t[3] - n[3], e
    }, r.sub = r.subtract, r.multiply = function(e, t, n) {
        return e[0] = t[0] * n[0], e[1] = t[1] * n[1], e[2] = t[2] * n[2], e[3] = t[3] * n[3], e
    }, r.mul = r.multiply, r.divide = function(e, t, n) {
        return e[0] = t[0] / n[0], e[1] = t[1] / n[1], e[2] = t[2] / n[2], e[3] = t[3] / n[3], e
    }, r.div = r.divide, r.min = function(e, t, n) {
        return e[0] = Math.min(t[0], n[0]), e[1] = Math.min(t[1], n[1]), e[2] = Math.min(t[2], n[2]), e[3] = Math.min(t[3], n[3]), e
    }, r.max = function(e, t, n) {
        return e[0] = Math.max(t[0], n[0]), e[1] = Math.max(t[1], n[1]), e[2] = Math.max(t[2], n[2]), e[3] = Math.max(t[3], n[3]), e
    }, r.scale = function(e, t, n) {
        return e[0] = t[0] * n, e[1] = t[1] * n, e[2] = t[2] * n, e[3] = t[3] * n, e
    }, r.scaleAndAdd = function(e, t, n, i) {
        return e[0] = t[0] + n[0] * i, e[1] = t[1] + n[1] * i, e[2] = t[2] + n[2] * i, e[3] = t[3] + n[3] * i, e
    }, r.distance = function(e, t) {
        var n = t[0] - e[0],
            i = t[1] - e[1],
            r = t[2] - e[2],
            o = t[3] - e[3];
        return Math.sqrt(n * n + i * i + r * r + o * o)
    }, r.dist = r.distance, r.squaredDistance = function(e, t) {
        var n = t[0] - e[0],
            i = t[1] - e[1],
            r = t[2] - e[2],
            o = t[3] - e[3];
        return n * n + i * i + r * r + o * o
    }, r.sqrDist = r.squaredDistance, r.length = function(e) {
        var t = e[0],
            n = e[1],
            i = e[2],
            r = e[3];
        return Math.sqrt(t * t + n * n + i * i + r * r)
    }, r.len = r.length, r.squaredLength = function(e) {
        var t = e[0],
            n = e[1],
            i = e[2],
            r = e[3];
        return t * t + n * n + i * i + r * r
    }, r.sqrLen = r.squaredLength, r.negate = function(e, t) {
        return e[0] = -t[0], e[1] = -t[1], e[2] = -t[2], e[3] = -t[3], e
    }, r.inverse = function(e, t) {
        return e[0] = 1 / t[0], e[1] = 1 / t[1], e[2] = 1 / t[2], e[3] = 1 / t[3], e
    }, r.normalize = function(e, t) {
        var n = t[0],
            i = t[1],
            r = t[2],
            o = t[3],
            a = n * n + i * i + r * r + o * o;
        return a > 0 && (a = 1 / Math.sqrt(a), e[0] = n * a, e[1] = i * a, e[2] = r * a, e[3] = o * a), e
    }, r.dot = function(e, t) {
        return e[0] * t[0] + e[1] * t[1] + e[2] * t[2] + e[3] * t[3]
    }, r.lerp = function(e, t, n, i) {
        var r = t[0],
            o = t[1],
            a = t[2],
            s = t[3];
        return e[0] = r + i * (n[0] - r), e[1] = o + i * (n[1] - o), e[2] = a + i * (n[2] - a), e[3] = s + i * (n[3] - s), e
    }, r.random = function(e, t) {
        return t = t || 1, e[0] = i.RANDOM(), e[1] = i.RANDOM(), e[2] = i.RANDOM(), e[3] = i.RANDOM(), r.normalize(e, e), r.scale(e, e, t), e
    }, r.transformMat4 = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = t[3];
        return e[0] = n[0] * i + n[4] * r + n[8] * o + n[12] * a, e[1] = n[1] * i + n[5] * r + n[9] * o + n[13] * a, e[2] = n[2] * i + n[6] * r + n[10] * o + n[14] * a, e[3] = n[3] * i + n[7] * r + n[11] * o + n[15] * a, e
    }, r.transformQuat = function(e, t, n) {
        var i = t[0],
            r = t[1],
            o = t[2],
            a = n[0],
            s = n[1],
            u = n[2],
            l = n[3],
            c = l * i + s * o - u * r,
            h = l * r + u * i - a * o,
            d = l * o + a * r - s * i,
            f = -a * i - s * r - u * o;
        return e[0] = c * l + f * -a + h * -u - d * -s, e[1] = h * l + f * -s + d * -a - c * -u, e[2] = d * l + f * -u + c * -s - h * -a, e[3] = t[3], e
    }, r.forEach = function() {
        var e = r.create();
        return function(t, n, i, r, o, a) {
            var s, u;
            for (n || (n = 4), i || (i = 0), u = r ? Math.min(r * n + i, t.length) : t.length, s = i; u > s; s += n) e[0] = t[s], e[1] = t[s + 1], e[2] = t[s + 2], e[3] = t[s + 3], o(e, e, a), t[s] = e[0], t[s + 1] = e[1], t[s + 2] = e[2], t[s + 3] = e[3];
            return t
        }
    }(), r.str = function(e) {
        return "vec4(" + e[0] + ", " + e[1] + ", " + e[2] + ", " + e[3] + ")"
    }, e.exports = r
}, function(e, t, n) {
    var i = n(32),
        r = {};
    r.create = function() {
        var e = new i.ARRAY_TYPE(2);
        return e[0] = 0, e[1] = 0, e
    }, r.clone = function(e) {
        var t = new i.ARRAY_TYPE(2);
        return t[0] = e[0], t[1] = e[1], t
    }, r.fromValues = function(e, t) {
        var n = new i.ARRAY_TYPE(2);
        return n[0] = e, n[1] = t, n
    }, r.copy = function(e, t) {
        return e[0] = t[0], e[1] = t[1], e
    }, r.set = function(e, t, n) {
        return e[0] = t, e[1] = n, e
    }, r.add = function(e, t, n) {
        return e[0] = t[0] + n[0], e[1] = t[1] + n[1], e
    }, r.subtract = function(e, t, n) {
        return e[0] = t[0] - n[0], e[1] = t[1] - n[1], e
    }, r.sub = r.subtract, r.multiply = function(e, t, n) {
        return e[0] = t[0] * n[0], e[1] = t[1] * n[1], e
    }, r.mul = r.multiply, r.divide = function(e, t, n) {
        return e[0] = t[0] / n[0], e[1] = t[1] / n[1], e
    }, r.div = r.divide, r.min = function(e, t, n) {
        return e[0] = Math.min(t[0], n[0]), e[1] = Math.min(t[1], n[1]), e
    }, r.max = function(e, t, n) {
        return e[0] = Math.max(t[0], n[0]), e[1] = Math.max(t[1], n[1]), e
    }, r.scale = function(e, t, n) {
        return e[0] = t[0] * n, e[1] = t[1] * n, e
    }, r.scaleAndAdd = function(e, t, n, i) {
        return e[0] = t[0] + n[0] * i, e[1] = t[1] + n[1] * i, e
    }, r.distance = function(e, t) {
        var n = t[0] - e[0],
            i = t[1] - e[1];
        return Math.sqrt(n * n + i * i)
    }, r.dist = r.distance, r.squaredDistance = function(e, t) {
        var n = t[0] - e[0],
            i = t[1] - e[1];
        return n * n + i * i
    }, r.sqrDist = r.squaredDistance, r.length = function(e) {
        var t = e[0],
            n = e[1];
        return Math.sqrt(t * t + n * n)
    }, r.len = r.length, r.squaredLength = function(e) {
        var t = e[0],
            n = e[1];
        return t * t + n * n
    }, r.sqrLen = r.squaredLength, r.negate = function(e, t) {
        return e[0] = -t[0], e[1] = -t[1], e
    }, r.inverse = function(e, t) {
        return e[0] = 1 / t[0], e[1] = 1 / t[1], e
    }, r.normalize = function(e, t) {
        var n = t[0],
            i = t[1],
            r = n * n + i * i;
        return r > 0 && (r = 1 / Math.sqrt(r), e[0] = t[0] * r, e[1] = t[1] * r), e
    }, r.dot = function(e, t) {
        return e[0] * t[0] + e[1] * t[1]
    }, r.cross = function(e, t, n) {
        var i = t[0] * n[1] - t[1] * n[0];
        return e[0] = e[1] = 0, e[2] = i, e
    }, r.lerp = function(e, t, n, i) {
        var r = t[0],
            o = t[1];
        return e[0] = r + i * (n[0] - r), e[1] = o + i * (n[1] - o), e
    }, r.random = function(e, t) {
        t = t || 1;
        var n = 2 * i.RANDOM() * Math.PI;
        return e[0] = Math.cos(n) * t, e[1] = Math.sin(n) * t, e
    }, r.transformMat2 = function(e, t, n) {
        var i = t[0],
            r = t[1];
        return e[0] = n[0] * i + n[2] * r, e[1] = n[1] * i + n[3] * r, e
    }, r.transformMat2d = function(e, t, n) {
        var i = t[0],
            r = t[1];
        return e[0] = n[0] * i + n[2] * r + n[4], e[1] = n[1] * i + n[3] * r + n[5], e
    }, r.transformMat3 = function(e, t, n) {
        var i = t[0],
            r = t[1];
        return e[0] = n[0] * i + n[3] * r + n[6], e[1] = n[1] * i + n[4] * r + n[7], e
    }, r.transformMat4 = function(e, t, n) {
        var i = t[0],
            r = t[1];
        return e[0] = n[0] * i + n[4] * r + n[12], e[1] = n[1] * i + n[5] * r + n[13], e
    }, r.forEach = function() {
        var e = r.create();
        return function(t, n, i, r, o, a) {
            var s, u;
            for (n || (n = 2), i || (i = 0), u = r ? Math.min(r * n + i, t.length) : t.length, s = i; u > s; s += n) e[0] = t[s], e[1] = t[s + 1], o(e, e, a), t[s] = e[0], t[s + 1] = e[1];
            return t
        }
    }(), r.str = function(e) {
        return "vec2(" + e[0] + ", " + e[1] + ")"
    }, e.exports = r
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = 4,
        o = function() {
            function e(t, i, o, a) {
                n(this, e), this.gl = t;
                for (var s = 2 * (a + 1), u = new Float32Array(s * r), l = 2 * Math.PI / a, c = 0; s >= c; c++) {
                    var h = c * r * 2,
                        d = c * l,
                        f = Math.cos(d),
                        p = Math.sin(d);
                    u[h + 0] = i * f, u[h + 4] = o * f, u[h + 1] = i * p, u[h + 5] = o * p, u[h + 2] = 0, u[h + 6] = 1, u[h + 3] = c / (s / 2), u[h + 7] = c / (s / 2)
                }
                this.buffer = t.createBuffer(), t.bindBuffer(t.ARRAY_BUFFER, this.buffer), t.bufferData(t.ARRAY_BUFFER, u, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, null), this.numVerts = s
            }
            return i(e, [{
                key: "bind",
                value: function(e) {
                    var t = this.gl;
                    t.bindBuffer(t.ARRAY_BUFFER, this.buffer), t.enableVertexAttribArray(e.aPosition), t.vertexAttribPointer(e.aPosition, 4, t.FLOAT, !1, 0, 0)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.gl;
                    e.drawArrays(e.TRIANGLE_STRIP, 0, this.numVerts)
                }
            }]), e
        }();
    t["default"] = o, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(30),
        u = i(s),
        l = n(41),
        c = i(l),
        h = function(e) {
            function t(e, n) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e), this.geom = new c["default"](e, 1 - n, 1, 4)
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = h, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(30),
        u = i(s),
        l = n(44),
        c = i(l),
        h = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e), this.geom = new c["default"](e)
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = h, e.exports = t["default"]
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = 16,
        o = function() {
            function e(t) {
                n(this, e), this.gl = t;
                var i = .004,
                    r = new Float32Array([-1, -1 + i, 0, 0, 1 - i, 1, 0, 1, 1, 1 - i, 1, 0, -1 + i, -1, 1, 1, 1, -1 + i, 0, 0, -1 + i, 1, 0, 1, -1, 1 - i, 1, 0, 1 - i, -1, 1, 1]);
                this.vbuffer = t.createBuffer(), t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.bufferData(t.ARRAY_BUFFER, r, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, null);
                var o = new Uint8Array([0, 3, 1, 3, 2, 1, 4, 5, 6, 4, 6, 7]);
                this.ibuffer = t.createBuffer(), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.ibuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, o, t.STATIC_DRAW), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, null), this.indices = o
            }
            return i(e, [{
                key: "bind",
                value: function(e) {
                    var t = this.gl;
                    t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.enableVertexAttribArray(e.aPosition), t.vertexAttribPointer(e.aPosition, 2, t.FLOAT, !1, r, 0), e.aTexCoord > -1 && (t.enableVertexAttribArray(e.aTexCoord), t.vertexAttribPointer(e.aTexCoord, 2, t.FLOAT, !1, r, 8)), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.ibuffer)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.gl;
                    e.drawElements(e.TRIANGLES, this.indices.length, e.UNSIGNED_BYTE, 0)
                }
            }]), e
        }();
    t["default"] = o, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(30),
        u = i(s),
        l = n(46),
        c = i(l),
        h = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e), this.geom = new c["default"](e)
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = h, e.exports = t["default"]
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = 16,
        o = function() {
            function e(t) {
                n(this, e), this.gl = t;
                var i = .3,
                    r = .004,
                    o = .5 * i,
                    a = new Float32Array([-o, -1, 0, 0, o, -1, 0, 1, -o, -1 + r, 1, 0, o, -1 + r, 1, 1, 1 - r, -o, 0, 0, 1, -o, 0, 1, 1 - r, o, 1, 0, 1, o, 1, 1, -o, 1 - r, 0, 0, o, 1 - r, 0, 1, -o, 1, 1, 0, o, 1, 1, 1, -1, -o, 0, 0, -1 + r, -o, 0, 1, -1 + r, o, 1, 0, -1, o, 1, 1]);
                this.vbuffer = t.createBuffer(), t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.bufferData(t.ARRAY_BUFFER, a, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, null);
                var s = new Uint8Array([0, 1, 2, 2, 1, 3, 4, 5, 7, 7, 6, 4, 8, 9, 10, 10, 9, 11, 12, 13, 14, 14, 15, 12]);
                this.ibuffer = t.createBuffer(), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.ibuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, s, t.STATIC_DRAW), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, null), this.indices = s
            }
            return i(e, [{
                key: "bind",
                value: function(e) {
                    var t = this.gl;
                    t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.enableVertexAttribArray(e.aPosition), t.vertexAttribPointer(e.aPosition, 2, t.FLOAT, !1, r, 0), e.aTexCoord > -1 && (t.enableVertexAttribArray(e.aTexCoord), t.vertexAttribPointer(e.aTexCoord, 2, t.FLOAT, !1, r, 8)), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.ibuffer)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.gl;
                    e.drawElements(e.TRIANGLES, this.indices.length, e.UNSIGNED_BYTE, 0)
                }
            }]), e
        }();
    t["default"] = o, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(41),
        s = (i(a), n(42)),
        u = i(s),
        l = function() {
            function e(t) {
                r(this, e), this.gl = t, this.isShown = !1, this.progress = 0, this.minAlpha = .05;
                var n = 4;
                this.rects = [];
                for (var i, o = 0; n > o; o++) i = new u["default"](t, .015), i.scale = .5, i.translate[2] = 0, this.rects[o] = i
            }
            return o(e, [{
                key: "show",
                value: function() {
                    this.isShown || (this.isShown = !0, TweenMax.to(this, .8, {
                        progress: 1,
                        ease: Quart.easeInOut
                    }))
                }
            }, {
                key: "hide",
                value: function() {
                    this.isShown && (this.isShown = !1, TweenMax.to(this, .8, {
                        progress: 0,
                        ease: Quart.easeInOut
                    }))
                }
            }, {
                key: "render",
                value: function(e, t) {
                    var n, i;
                    e.bind();
                    for (var r = this.rects.length, o = 0; r > o; o++) n = this.rects[o], n.bind(e), n.rotateZ = 45 + (1 - this.progress) * ((o - 1) * (360 / r / 4)), i = n.getModelMatrix(), t.modelViewProjectionMatrix(i), this.gl.uniformMatrix4fv(e.uMVP, !1, i), this.gl.uniform1f(e.uAlpha, this.minAlpha - .01 * this.progress), n.render()
                }
            }]), e
        }();
    t["default"] = l, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(50),
        c = i(l),
        h = n(51),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "uMVP"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = function() {
            function e(t, i) {
                n(this, e), this.gl = t, this.program = null, this.params = i, this.deleteOlds = !0
            }
            return i(e, [{
                key: "compile",
                value: function(e, t, n) {
                    void 0 === n && (n = ""), n += "\n";
                    var i = this.gl;
                    this.program && this.deleteOlds && i.deleteProgram(this.program);
                    var r, o, a;
                    r = i.createShader(i.FRAGMENT_SHADER), i.shaderSource(r, n + t), i.compileShader(r), i.getShaderParameter(r, i.COMPILE_STATUS) || (console.warn(i.getShaderInfoLog(r)), console.log(n + t)), o = i.createShader(i.VERTEX_SHADER), i.shaderSource(o, n + e), i.compileShader(o), i.getShaderParameter(o, i.COMPILE_STATUS) || (console.warn(i.getShaderInfoLog(o)), console.log(n + e)), a = i.createProgram(), i.attachShader(a, o), i.attachShader(a, r), i.linkProgram(a), i.getProgramParameter(a, i.LINK_STATUS) || console.log(i.getProgramInfoLog(a)), this.program = a, this.setup()
                }
            }, {
                key: "setup",
                value: function() {
                    for (var e = this.params, t = this.gl, n = 0; n < e.length; n++) {
                        var i = e[n];
                        "a" === i[0] ? this[i] = t.getAttribLocation(this.program, i) : this[i] = t.getUniformLocation(this.program, i)
                    }
                }
            }, {
                key: "bind",
                value: function() {
                    this.gl.useProgram(this.program)
                }
            }]), e
        }();
    t["default"] = r, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec4 aPosition;\n\nvarying vec2 vTexCoord;\n\nuniform mat4 uMVP;\n\nvoid main( void ) {\n  gl_Position = uMVP * vec4( aPosition.xy, 0.0, 1.0 );\n  vTexCoord = aPosition.xy;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\n\nvarying vec2 vTexCoord;\n\nvoid main(void){\n  gl_FragColor = vec4( 1.0, 1.0, 1.0, 0.05 );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(53),
        c = i(l),
        h = n(54),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "uMVP", "uAlpha"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, 50, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\n\nvarying vec2 vTexCoord;\n\nuniform float uAlpha;\n\nvoid main(void){\n  gl_FragColor = vec4( 1.0, 1.0, 1.0, uAlpha );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(56),
        c = i(l),
        h = n(57),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "uMVP", "uAlpha", "uProgress"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec4 aPosition;\n\nvarying vec2 vTexCoord;\nvarying float vProgress;\n\nuniform mat4 uMVP;\n\nvoid main( void ) {\n  gl_Position = uMVP * vec4( aPosition.xy, 0.0, 1.0 );\n  vTexCoord = aPosition.xy;\n  vProgress = aPosition.w;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\n\nvarying vec2 vTexCoord;\nvarying float vProgress;\n\nuniform float uAlpha;\nuniform float uProgress;\n\nvoid main(void){\n  gl_FragColor = vec4( 1.0, 1.0, 1.0, uAlpha );\n  if(vProgress > uProgress){\n    discard;\n  }\n}"
}, function(e, t) {
    "use strict";

    function n(e) {
        return u(e)
    }

    function i(e) {
        e.preventDefault(), l.x = e.clientX, l.y = e.clientY
    }

    function r(e) {
        l.isDown = !0
    }

    function o(e) {
        l.isDown = !1
    }

    function a(e) {
        e.touches[0] && (l.x = e.touches[0].clientX, l.y = e.touches[0].clientY)
    }

    function s(e) {
        c.width = window.innerWidth, c.height = window.innerHeight
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.frame = n;
    var u = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
    window.addEventListener("mousemove", i), window.addEventListener("mousedown", r), window.addEventListener("mouseup", o), window.addEventListener("touchmove", a), window.addEventListener("resize", s);
    var l = {
        x: 0,
        y: 0,
        isDown: !1
    };
    t.mouse = l;
    var c = {
        width: 0,
        height: 0
    };
    t.screen = c, s(null)
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(60),
        s = i(a),
        u = n(86),
        l = i(u),
        c = n(95),
        h = i(c),
        d = n(96),
        f = i(d),
        p = n(99),
        m = i(p),
        v = n(102),
        g = i(v),
        y = n(105),
        _ = i(y),
        x = n(108),
        b = i(x),
        w = n(93),
        T = i(w),
        E = n(31),
        S = i(E),
        M = S["default"].mat4,
        P = (M.create(), .3),
        A = function() {
            function e(t) {
                r(this, e), this.gl = t, this.fbo = new T["default"](t, !0, !0), this.fbo.allocate(256, 256), this.text = new s["default"](t), this.isEnd = !1, this.maskGeom = new h["default"](t), this.fsgeom = new l["default"](t), this.postPrg = new f["default"](t), this.maskPrg = new g["default"](t), this.fillprg = new m["default"](t), this.bgGlitch = new _["default"](t), this.fgGlitch = new b["default"](t), this.xform = M.create(), this.glitchxform = M.create(), this.mvp = M.create(), M.scale(this.xform, this.xform, [P, -P, P]), this.renderCount = 0
            }
            return o(e, [{
                key: "load",
                value: function() {
                    return this.text.load()
                }
            }, {
                key: "launchText",
                value: function() {
                    this.isEnd ? this.text.launchEndAniamtionSequence() : this.text.launchAniamtionSequence()
                }
            }, {
                key: "preRender",
                value: function(e, t, n) {
                    this.text.render(e, t, n), this.renderPostProcessing()
                }
            }, {
                key: "render",
                value: function(e) {
                    var t = this.gl;
                    this.fillprg.bind(), this.fbo.bindColor(this.fillprg.tTex, 0), M.copy(this.mvp, this.xform), e.modelViewProjectionMatrix(this.mvp), this.gl.uniformMatrix4fv(this.fillprg.uMVP, !1, this.mvp), this.fsgeom.bind(this.fillprg), t.enable(t.BLEND), t.blendFunc(t.ONE, t.ONE), this.fsgeom.render(), t.disable(t.BLEND)
                }
            }, {
                key: "renderBgGlitch",
                value: function() {
                    var e = this.gl;
                    this.renderCount++, this.renderCount > 10 * Math.random() + 10 && (this.randomGXform(), this.renderCount = 0), this.bgGlitch.prerender(), 0 !== this.bgGlitch.glitchAmp && (this.bgGlitch.bind(), e.uniformMatrix4fv(this.bgGlitch.uMVP, !1, this.glitchxform), this.text.subFbo.bindColor(this.bgGlitch.tTex, 0), this.maskGeom.bind(this.bgGlitch), e.enable(e.DEPTH_TEST), this.maskGeom.render(), e.disable(e.DEPTH_TEST))
                }
            }, {
                key: "renderFgGlitch",
                value: function() {
                    var e = this.gl;
                    this.fgGlitch.prerender(), this.fgGlitch.bind(), e.uniformMatrix4fv(this.fgGlitch.uMVP, !1, this.glitchxform), this.text.mainFbo.bindColor(this.fgGlitch.tTex, 0), this.fsgeom.bind(this.fgGlitch), e.enable(e.BLEND), e.blendFunc(e.SRC_COLOR, e.ONE_MINUS_SRC_COLOR), this.fsgeom.render(), e.disable(e.BLEND)
                }
            }, {
                key: "randomGXform",
                value: function() {
                    M.identity(this.glitchxform);
                    var e = 1,
                        t = 1,
                        n = Math.floor(3.999 * Math.random());
                    2 > n && (e = -1), n & !0 && (t = -1), M.scale(this.glitchxform, this.glitchxform, [e, t, 1])
                }
            }, {
                key: "renderPostProcessing",
                value: function() {
                    this.gl;
                    this.fbo.bind(), this.fbo.clear(), this.renderBgGlitch(), this.renderFgGlitch()
                }
            }]), e
        }();
    t["default"] = A, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(61),
        s = i(a),
        u = n(86),
        l = i(u),
        c = n(87),
        h = i(c),
        d = n(90),
        f = i(d),
        p = n(93),
        m = i(p),
        v = n(31),
        g = i(v),
        y = n(63),
        _ = i(y),
        x = n(62),
        b = i(x),
        w = n(94),
        T = i(w),
        E = g["default"].mat4,
        S = function() {
            function e(t) {
                r(this, e), this.gl = t, this.prg = new h["default"](t), this.fillprg = new f["default"](t), this.text = new s["default"](t), this.pulseTex = new b["default"](t, !1, !0), this.fsgeom = new l["default"](t), this.barXform = E.create(), this.txtXform = E.create(), E.translate(this.txtXform, this.txtXform, [0, .3, 0]), E.scale(this.txtXform, this.txtXform, [4, 4, 4]), this.mainLetters = [], this.subLetters = [], this.pulseTxtOpacity = 0;
                for (var n = "        ", i = 0; 8 > i; i++) this.mainLetters[i] = new M(n[i]), this.subLetters[i] = new M(n[i]);
                this.mainFbo = new m["default"](t, !0), this.subFbo = new m["default"](t, !0), this.mainFbo.allocate(256, 256), this.subFbo.allocate(256, 256)
            }
            return o(e, [{
                key: "load",
                value: function() {
                    return _["default"].all([this.text.load(), this.pulseTex.load(T["default"])])
                }
            }, {
                key: "setText",
                value: function(e) {
                    for (var t = 0; 8 > t; t++) this.mainLetters[t].setLetter(e[t], .2 * t + 1), this.subLetters[t].setLetter(e[t], .2 * t + 2)
                }
            }, {
                key: "setTextImediate",
                value: function(e) {
                    for (var t = 0; 8 > t; t++) this.mainLetters[t].setLetterImmediate(e[t], .2 * t + 1), this.subLetters[t].setLetterImmediate(e[t], .2 * t + 2)
                }
            }, {
                key: "launchAniamtionSequence",
                value: function() {
                    this.setText("IN  2016"), this.showAnimation(), setTimeout(this.animPart2.bind(this), 4e3)
                }
            }, {
                key: "launchEndAniamtionSequence",
                value: function() {
                    this.setText("MAKEME"), this.showAnimation()
                }
            }, {
                key: "animPart2",
                value: function() {
                    this.setTextImediate("IN  2016"), this.setText("MAKEME")
                }
            }, {
                key: "showAnimation",
                value: function() {
                    for (var e = 0; e < this.mainLetters.length; e++) this.mainLetters[e].showAnimation(.2 * e + 0), this.subLetters[e].showAnimation(.2 * e + .5)
                }
            }, {
                key: "render",
                value: function(e, t, n) {
                    this.prg.bind(), this.gl.uniformMatrix4fv(this.prg.uMVP, !1, this.txtXform), this.renderMain(t, n), this.prg.bind(), this.renderSub(t, n)
                }
            }, {
                key: "renderMain",
                value: function(e, t) {
                    this.mainFbo.bind(), this.mainFbo.clear();
                    for (var n = "", i = 0; i < this.mainLetters.length; i++) n += this.mainLetters[i].getLetter();
                    this.text.setText(n), this.renderLetters(), this.renderRect(e, t)
                }
            }, {
                key: "renderSub",
                value: function(e, t) {
                    this.subFbo.bind(), this.subFbo.clear();
                    for (var n = "", i = 0; i < this.subLetters.length; i++) n += this.subLetters[i].getLetter();
                    this.text.setText(n), this.renderLetters(), this.renderRect(e, t)
                }
            }, {
                key: "renderLetters",
                value: function() {
                    this.text.updateUvs(), this.text.bind(this.prg), this.text.render()
                }
            }, {
                key: "renderRect",
                value: function(e, t) {
                    var n = this.gl;
                    this.fillprg.bind(), E.identity(this.barXform), E.translate(this.barXform, this.barXform, [-.8 * (1 - e), -.65 + .06 * t, 0]), E.scale(this.barXform, this.barXform, [.8 * e, .02 + .09 * t, 1]), n.uniformMatrix4fv(this.fillprg.uMVP, !1, this.barXform), n.uniform1f(this.fillprg.uTextOpacity, this.pulseTxtOpacity * t), this.pulseTex.bind(this.fillprg.uTex, 0), this.fsgeom.bind(this.fillprg), this.fsgeom.render()
                }
            }]), e
        }();
    t["default"] = S;
    var M = function() {
        function e(t) {
            r(this, e), this.baseLetter = null, this.setLetter(t), this.animComplete = this._animComplete.bind(this), this.glitch = this._glitch.bind(this)
        }
        return o(e, [{
            key: "setLetterImmediate",
            value: function(e, t) {
                var n = s["default"].getLetterList();
                this._baseindex = n.indexOf(e), this._index = 0, this.findex = +this._baseindex, this.baseLetter = e, clearTimeout(this._glitchTmeout)
            }
        }, {
            key: "setLetter",
            value: function(e, t) {
                var n = s["default"].getLetterList();
                this._baseindex = n.indexOf(e), null === this.baseLetter ? (this._index = 0, this._findex = +this._baseindex) : (this.tween && this.tween.kill(), this.tween = TweenMax.to(this, 1.2, {
                    findex: this._baseindex,
                    ease: Quad.easeOut,
                    delay: t,
                    onComplete: this.animComplete
                })), this.baseLetter = e, clearTimeout(this._glitchTmeout)
            }
        }, {
            key: "getLetter",
            value: function() {
                return s["default"].getLetterAt(this._index)
            }
        }, {
            key: "showAnimation",
            value: function(e) {
                this.tween && this.tween.kill(), this.findex = this._baseindex - 13, this._index = 0, this.tween = TweenMax.to(this, .8, {
                    findex: this._baseindex,
                    delay: e,
                    ease: Quad.easeOut,
                    onComplete: this.animComplete
                })
            }
        }, {
            key: "_animComplete",
            value: function() {
                this.glitch()
            }
        }, {
            key: "_glitch",
            value: function() {
                this.findex = this._baseindex - 4, TweenMax.to(this, .3, {
                    findex: this._baseindex,
                    ease: Quad.easeOut
                }), clearTimeout(this._glitchTmeout), this._glitchTmeout = setTimeout(this.glitch, 4e3 * Math.random() + 2e3)
            }
        }, {
            key: "findex",
            set: function(e) {
                this._findex = e, this._index = Math.round(e)
            },
            get: function() {
                return this._findex
            }
        }]), e
    }();
    e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t, n, i, r) {
        var o = 2 * r * 4,
            a = 6 * r,
            s = 4 * r;
        n[o + 0] = e - y, n[o + 1] = t - _, n[o + 2] = e + y, n[o + 3] = t - _, n[o + 4] = e + y, n[o + 5] = t + _, n[o + 6] = e - y, n[o + 7] = t + _, i[a + 0] = s, i[a + 1] = s + 1, i[a + 2] = s + 2, i[a + 3] = s, i[a + 4] = s + 2, i[a + 5] = s + 3
    }

    function a(e, t, n) {
        var i, r = 2 * t * 4,
            o = f["default"].frames[e];
        i = void 0 === o ? w : o.frame, n[r + 0] = i.x / x, n[r + 1] = i.y / b, n[r + 2] = (i.x + i.w) / x, n[r + 3] = i.y / b, n[r + 4] = (i.x + i.w) / x, n[r + 5] = (i.y + i.h) / b, n[r + 6] = i.x / x, n[r + 7] = (i.y + i.h) / b
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        u = n(62),
        l = i(u),
        c = n(84),
        h = i(c),
        d = n(85),
        f = i(d),
        p = 8,
        m = .002,
        v = 25 * m,
        g = 27.5 * m,
        y = v / 2,
        _ = g / 2,
        x = f["default"].meta.size.w,
        b = f["default"].meta.size.h;
    f["default"].frames[" "] = {
        frame: {
            x: 0,
            y: 0,
            w: 0,
            h: 0
        },
        spriteSourceSize: {
            x: 0,
            y: 0,
            w: 0,
            h: 0
        },
        sourceSize: {
            w: 50,
            h: 55
        }
    };
    var w = {
            x: 0,
            y: 0,
            w: 0,
            h: 0
        },
        T = function() {
            function e(t) {
                r(this, e), this.gl = t, this.spriteSheet = new l["default"](t, !1, !0), this._build()
            }
            return s(e, [{
                key: "load",
                value: function() {
                    return this.spriteSheet.load(h["default"]);
                }
            }, {
                key: "updateUvs",
                value: function() {
                    var e = this.gl;
                    e.bindBuffer(e.ARRAY_BUFFER, this.tcbuffer), e.bufferData(e.ARRAY_BUFFER, this.uvsData, e.STATIC_DRAW), e.bindBuffer(e.ARRAY_BUFFER, null)
                }
            }, {
                key: "bind",
                value: function(e) {
                    var t = this.gl;
                    t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.enableVertexAttribArray(e.aPosition), t.vertexAttribPointer(e.aPosition, 2, t.FLOAT, !1, 0, 0), t.bindBuffer(t.ARRAY_BUFFER, this.tcbuffer), t.enableVertexAttribArray(e.aTexCoord), t.vertexAttribPointer(e.aTexCoord, 2, t.FLOAT, !1, 0, 0), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.ibuffer), this.spriteSheet.bind(e.tTex, 0)
                }
            }, {
                key: "setText",
                value: function(e) {
                    for (var t = 0; p > t; t++) a(e[t] || "", t, this.uvsData)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.gl;
                    e.drawElements(e.TRIANGLES, 2 * p * 3, e.UNSIGNED_SHORT, 0), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, null)
                }
            }, {
                key: "_build",
                value: function() {
                    var e = p,
                        t = new Float32Array(4 * e * 2),
                        n = new Float32Array(4 * e * 2),
                        i = new Uint16Array(6 * e),
                        r = 82 * m,
                        s = 35 * m;
                    o(-r, -s, n, i, 0), o(-r / 2, -s, n, i, 1), o(0, -s, n, i, 2), o(r / 2, -s, n, i, 3), o(-r, s, n, i, 4), o(-r / 2, s, n, i, 5), o(0, s, n, i, 6), o(r / 2, s, n, i, 7), this.uvsData = t, a("A", 0, this.uvsData), a("B", 1, this.uvsData), a("C", 2, this.uvsData), a("D", 3, this.uvsData), a("E", 4, this.uvsData), a("F", 5, this.uvsData), a("G", 6, this.uvsData), a("H", 7, this.uvsData);
                    var u = this.gl;
                    this.vbuffer = u.createBuffer(), u.bindBuffer(u.ARRAY_BUFFER, this.vbuffer), u.bufferData(u.ARRAY_BUFFER, n, u.STATIC_DRAW), u.bindBuffer(u.ARRAY_BUFFER, null), this.tcbuffer = u.createBuffer(), u.bindBuffer(u.ARRAY_BUFFER, this.tcbuffer), u.bufferData(u.ARRAY_BUFFER, t, u.STATIC_DRAW), u.bindBuffer(u.ARRAY_BUFFER, null), this.ibuffer = u.createBuffer(), u.bindBuffer(u.ELEMENT_ARRAY_BUFFER, this.ibuffer), u.bufferData(u.ELEMENT_ARRAY_BUFFER, i, u.STATIC_DRAW), u.bindBuffer(u.ELEMENT_ARRAY_BUFFER, null)
                }
            }]), e
        }();
    t["default"] = T;
    var E = function() {
        var e = ["nul"];
        for (var t in f["default"].frames) e.push(t);
        return e
    }();
    T.getRandomLetter = function() {
        var e = E.length,
            t = Math.floor(Math.random() * e * .99999);
        return E[t]
    }, T.getLetterList = function() {
        return E
    }, T.getLetterAt = function(e) {
        var t = E.length;
        for (e %= t; 0 > e;) e += t;
        return E[e]
    }, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e, t, n) {
        void 0 === t && (t = !1), void 0 === n && (n = !1), this.gl = e, this.id = this.gl.createTexture(), this.img = null, this.alpha = t, this.smooth = n, this.clamp = !1, this.loaded = this._loaded.bind(this), this.width = 0, this.height = 0, this.luma = !1
    }
    var r = n(63);
    i.prototype = {
        load: function(e) {
            var t = document.createElement("img");
            return this.img = t, this.ldefered = r.defer(), t.onload = this.loaded, t.src = e, this.ldefered.promise
        },
        _loaded: function(e) {
            var t = this.gl;
            this.width = this.img.width, this.height = this.img.height;
            var n = this.alpha ? t.RGBA : t.RGB;
            this.luma && (n = t.LUMINANCE);
            var i = this.smooth ? t.LINEAR : t.NEAREST,
                r = this.clamp ? t.CLAMP_TO_EDGE : t.REPEAT;
            t.bindTexture(t.TEXTURE_2D, this.id), t.texImage2D(t.TEXTURE_2D, 0, n, n, t.UNSIGNED_BYTE, this.img), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, i), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, i), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, r), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, r), t.bindTexture(t.TEXTURE_2D, null), this.ldefered && this.ldefered.resolve(this)
        },
        bind: function(e, t) {
            var n = this.gl;
            n.activeTexture(n.TEXTURE0 + t), n.bindTexture(n.TEXTURE_2D, this.id), n.uniform1i(e, t)
        }
    }, e.exports = i
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function(e) {
            function t(e, t, n, i) {
                var r = E.resolve(e);
                return arguments.length < 2 ? r : r.then(t, n, i)
            }

            function i(e) {
                return new E(e)
            }

            function r(e) {
                return function() {
                    for (var t = 0, n = arguments.length, i = new Array(n); n > t; ++t) i[t] = arguments[t];
                    return S(e, this, i)
                }
            }

            function o(e) {
                for (var t = 0, n = arguments.length - 1, i = new Array(n); n > t; ++t) i[t] = arguments[t + 1];
                return S(e, this, i)
            }

            function a() {
                return new s
            }

            function s() {
                function e(e) {
                    i._handler.resolve(e)
                }

                function t(e) {
                    i._handler.reject(e)
                }

                function n(e) {
                    i._handler.notify(e)
                }
                var i = E._defer();
                this.promise = i, this.resolve = e, this.reject = t, this.notify = n, this.resolver = {
                    resolve: e,
                    reject: t,
                    notify: n
                }
            }

            function u(e) {
                return e && "function" == typeof e.then
            }

            function l() {
                return E.all(arguments)
            }

            function c(e) {
                return t(e, E.all)
            }

            function h(e) {
                return t(e, E.settle)
            }

            function d(e, n) {
                return t(e, function(e) {
                    return E.map(e, n)
                })
            }

            function f(e, n) {
                return t(e, function(e) {
                    return E.filter(e, n)
                })
            }
            var p = n(64),
                m = n(70),
                v = n(73),
                g = n(74),
                y = n(75),
                _ = n(76),
                x = n(77),
                b = n(78),
                w = n(79),
                T = n(69),
                E = [m, v, g, _, x, y, b, p, w].reduce(function(e, t) {
                    return t(e)
                }, n(81)),
                S = n(72)(E);
            return t.promise = i, t.resolve = E.resolve, t.reject = E.reject, t.lift = r, t["try"] = o, t.attempt = o, t.iterate = E.iterate, t.unfold = E.unfold, t.join = l, t.all = c, t.settle = h, t.any = r(E.any), t.some = r(E.some), t.race = r(E.race), t.map = d, t.filter = f, t.reduce = r(E.reduce), t.reduceRight = r(E.reduceRight), t.isPromiseLike = u, t.Promise = E, t.defer = a, t.TimeoutError = T, t
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function(e) {
            function t(e, t, n, r) {
                return i.setTimer(function() {
                    e(n, r, t)
                }, t)
            }
            var i = n(65),
                r = n(69);
            return function(e) {
                function n(e, n, i) {
                    t(o, e, n, i)
                }

                function o(e, t) {
                    t.resolve(e)
                }

                function a(e, t, n) {
                    var i = "undefined" == typeof e ? new r("timed out after " + n + "ms") : e;
                    t.reject(i)
                }
                return e.prototype.delay = function(e) {
                    var t = this._beget();
                    return this._handler.fold(n, e, void 0, t._handler), t
                }, e.prototype.timeout = function(e, n) {
                    var r = this._beget(),
                        o = r._handler,
                        s = t(a, e, n, r._handler);
                    return this._handler.visit(o, function(e) {
                        i.clearTimer(s), this.resolve(e)
                    }, function(e) {
                        i.clearTimer(s), this.reject(e)
                    }, o.notify), r
                }, e
            }
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i;
    (function(r) { /** @license MIT License (c) copyright 2010-2014 original author or authors */
        ! function(o) {
            "use strict";
            i = function(e) {
                function t() {
                    return "undefined" != typeof r && "[object process]" === Object.prototype.toString.call(r)
                }

                function i() {
                    return "function" == typeof MutationObserver && MutationObserver || "function" == typeof WebKitMutationObserver && WebKitMutationObserver
                }

                function o(e) {
                    function t() {
                        var e = n;
                        n = void 0, e()
                    }
                    var n, i = document.createTextNode(""),
                        r = new e(t);
                    r.observe(i, {
                        characterData: !0
                    });
                    var o = 0;
                    return function(e) {
                        n = e, i.data = o ^= 1
                    }
                }
                var a, s = "undefined" != typeof setTimeout && setTimeout,
                    u = function(e, t) {
                        return setTimeout(e, t)
                    },
                    l = function(e) {
                        return clearTimeout(e)
                    },
                    c = function(e) {
                        return s(e, 0)
                    };
                if (t()) c = function(e) {
                    return r.nextTick(e)
                };
                else if (a = i()) c = o(a);
                else if (!s) {
                    var h = n(67);
                    u = function(e, t) {
                        return h.setTimer(t, e)
                    }, l = h.cancelTimer, c = h.runOnLoop || h.runOnContext
                }
                return {
                    setTimer: u,
                    clearTimer: l,
                    asap: c
                }
            }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
        }(n(68))
    }).call(t, n(66))
}, function(e, t) {
    function n() {
        l = !1, a.length ? u = a.concat(u) : c = -1, u.length && i()
    }

    function i() {
        if (!l) {
            var e = setTimeout(n);
            l = !0;
            for (var t = u.length; t;) {
                for (a = u, u = []; ++c < t;) a && a[c].run();
                c = -1, t = u.length
            }
            a = null, l = !1, clearTimeout(e)
        }
    }

    function r(e, t) {
        this.fun = e, this.array = t
    }

    function o() {}
    var a, s = e.exports = {},
        u = [],
        l = !1,
        c = -1;
    s.nextTick = function(e) {
        var t = new Array(arguments.length - 1);
        if (arguments.length > 1)
            for (var n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];
        u.push(new r(e, t)), 1 !== u.length || l || setTimeout(i, 0)
    }, r.prototype.run = function() {
        this.fun.apply(null, this.array)
    }, s.title = "browser", s.browser = !0, s.env = {}, s.argv = [], s.version = "", s.versions = {}, s.on = o, s.addListener = o, s.once = o, s.off = o, s.removeListener = o, s.removeAllListeners = o, s.emit = o, s.binding = function(e) {
        throw new Error("process.binding is not supported")
    }, s.cwd = function() {
        return "/"
    }, s.chdir = function(e) {
        throw new Error("process.chdir is not supported")
    }, s.umask = function() {
        return 0
    }
}, function(e, t) {}, function(e, t) {
    e.exports = function() {
        throw new Error("define cannot be used indirect")
    }
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function() {
            function e(t) {
                Error.call(this), this.message = t, this.name = e.name, "function" == typeof Error.captureStackTrace && Error.captureStackTrace(this, e)
            }
            return e.prototype = Object.create(Error.prototype), e.prototype.constructor = e, e
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function(e) {
            var t = n(71),
                i = n(72);
            return function(e) {
                function n(t) {
                    function n(e) {
                        c = null, this.resolve(e)
                    }

                    function i(e) {
                        this.resolved || (c.push(e), 0 === --l && this.reject(c))
                    }
                    for (var r, o, a = e._defer(), s = a._handler, u = t.length >>> 0, l = u, c = [], h = 0; u > h; ++h)
                        if (o = t[h], void 0 !== o || h in t) {
                            if (r = e._handler(o), r.state() > 0) {
                                s.become(r), e._visitRemaining(t, h, r);
                                break
                            }
                            r.visit(s, n, i)
                        } else --l;
                    return 0 === l && s.reject(new RangeError("any(): array must not be empty")), a
                }

                function r(t, n) {
                    function i(e) {
                        this.resolved || (c.push(e), 0 === --f && (h = null, this.resolve(c)))
                    }

                    function r(e) {
                        this.resolved || (h.push(e), 0 === --o && (c = null, this.reject(h)))
                    }
                    var o, a, s, u = e._defer(),
                        l = u._handler,
                        c = [],
                        h = [],
                        d = t.length >>> 0,
                        f = 0;
                    for (s = 0; d > s; ++s) a = t[s], (void 0 !== a || s in t) && ++f;
                    for (n = Math.max(n, 0), o = f - n + 1, f = Math.min(n, f), n > f ? l.reject(new RangeError("some(): array must contain at least " + n + " item(s), but had " + f)) : 0 === f && l.resolve(c), s = 0; d > s; ++s) a = t[s], (void 0 !== a || s in t) && e._handler(a).visit(l, i, r, l.notify);
                    return u
                }

                function o(t, n) {
                    return e._traverse(n, t)
                }

                function a(t, n) {
                    var i = y.call(t);
                    return e._traverse(n, i).then(function(e) {
                        return s(i, e)
                    })
                }

                function s(t, n) {
                    for (var i = n.length, r = new Array(i), o = 0, a = 0; i > o; ++o) n[o] && (r[a++] = e._handler(t[o]).value);
                    return r.length = a, r
                }

                function u(e) {
                    return m(e.map(l))
                }

                function l(n) {
                    var i = e._handler(n);
                    return 0 === i.state() ? p(n).then(t.fulfilled, t.rejected) : (i._unreport(), t.inspect(i))
                }

                function c(e, t) {
                    return arguments.length > 2 ? v.call(e, d(t), arguments[2]) : v.call(e, d(t))
                }

                function h(e, t) {
                    return arguments.length > 2 ? g.call(e, d(t), arguments[2]) : g.call(e, d(t))
                }

                function d(e) {
                    return function(t, n, i) {
                        return f(e, void 0, [t, n, i])
                    }
                }
                var f = i(e),
                    p = e.resolve,
                    m = e.all,
                    v = Array.prototype.reduce,
                    g = Array.prototype.reduceRight,
                    y = Array.prototype.slice;
                return e.any = n, e.some = r, e.settle = u, e.map = o, e.filter = a, e.reduce = c, e.reduceRight = h, e.prototype.spread = function(e) {
                    return this.then(m).then(function(t) {
                        return e.apply(this, t)
                    })
                }, e
            }
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function() {
            function e() {
                return {
                    state: "pending"
                }
            }

            function t(e) {
                return {
                    state: "rejected",
                    reason: e
                }
            }

            function n(e) {
                return {
                    state: "fulfilled",
                    value: e
                }
            }

            function i(i) {
                var r = i.state();
                return 0 === r ? e() : r > 0 ? n(i.value) : t(i.value)
            }
            return {
                pending: e,
                fulfilled: n,
                rejected: t,
                inspect: i
            }
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function() {
            function e(e, n) {
                function i(t, i, o) {
                    var a = e._defer(),
                        s = o.length,
                        u = new Array(s);
                    return r({
                        f: t,
                        thisArg: i,
                        args: o,
                        params: u,
                        i: s - 1,
                        call: n
                    }, a._handler), a
                }

                function r(t, i) {
                    if (t.i < 0) return n(t.f, t.thisArg, t.params, i);
                    var r = e._handler(t.args[t.i]);
                    r.fold(o, t, void 0, i)
                }

                function o(e, t, n) {
                    e.params[e.i] = t, e.i -= 1, r(e, n)
                }
                return arguments.length < 2 && (n = t), i
            }

            function t(e, t, n, i) {
                try {
                    i.resolve(e.apply(t, n))
                } catch (r) {
                    i.reject(r)
                }
            }
            return e.tryCatchResolve = t, e
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function() {
            function e() {
                throw new TypeError("catch predicate must be a function")
            }

            function t(e, t) {
                return n(t) ? e instanceof t : t(e)
            }

            function n(e) {
                return e === Error || null != e && e.prototype instanceof Error
            }

            function i(e) {
                return ("object" == typeof e || "function" == typeof e) && null !== e
            }

            function r(e) {
                return e
            }
            return function(n) {
                function o(e, n) {
                    return function(i) {
                        return t(i, n) ? e.call(this, i) : l(i)
                    }
                }

                function a(e, t, n, r) {
                    var o = e.call(t);
                    return i(o) ? s(o, n, r) : n(r)
                }

                function s(e, t, n) {
                    return u(e).then(function() {
                        return t(n)
                    })
                }
                var u = n.resolve,
                    l = n.reject,
                    c = n.prototype["catch"];
                return n.prototype.done = function(e, t) {
                    this._handler.visit(this._handler.receiver, e, t)
                }, n.prototype["catch"] = n.prototype.otherwise = function(t) {
                    return arguments.length < 2 ? c.call(this, t) : "function" != typeof t ? this.ensure(e) : c.call(this, o(arguments[1], t))
                }, n.prototype["finally"] = n.prototype.ensure = function(e) {
                    return "function" != typeof e ? this : this.then(function(t) {
                        return a(e, this, r, t)
                    }, function(t) {
                        return a(e, this, l, t)
                    })
                }, n.prototype["else"] = n.prototype.orElse = function(e) {
                    return this.then(void 0, function() {
                        return e
                    })
                }, n.prototype["yield"] = function(e) {
                    return this.then(function() {
                        return e
                    })
                }, n.prototype.tap = function(e) {
                    return this.then(e)["yield"](this)
                }, n
            }
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function() {
            return function(e) {
                return e.prototype.fold = function(t, n) {
                    var i = this._beget();
                    return this._handler.fold(function(n, i, r) {
                        e._handler(n).fold(function(e, n, i) {
                            i.resolve(t.call(this, n, e))
                        }, i, this, r)
                    }, n, i._handler.receiver, i._handler), i
                }, e
            }
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function(e) {
            var t = n(71).inspect;
            return function(e) {
                return e.prototype.inspect = function() {
                    return t(e._handler(this))
                }, e
            }
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function() {
            return function(e) {
                function t(e, t, i, r) {
                    return n(function(t) {
                        return [t, e(t)]
                    }, t, i, r)
                }

                function n(e, t, r, o) {
                    function a(o, a) {
                        return i(r(o)).then(function() {
                            return n(e, t, r, a)
                        })
                    }
                    return i(o).then(function(n) {
                        return i(t(n)).then(function(t) {
                            return t ? n : i(e(n)).spread(a)
                        })
                    })
                }
                var i = e.resolve;
                return e.iterate = t, e.unfold = n, e
            }
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function() {
            return function(e) {
                return e.prototype.progress = function(e) {
                    return this.then(void 0, void 0, e)
                }, e
            }
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function() {
            return function(e) {
                return e.prototype["with"] = e.prototype.withThis = function(e) {
                    var t = this._beget(),
                        n = t._handler;
                    return n.receiver = e, this._handler.chain(n, e), t
                }, e
            }
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function(e) {
            function t(e) {
                throw e
            }

            function i() {}
            var r = n(65).setTimer,
                o = n(80);
            return function(e) {
                function n(e) {
                    e.handled || (f.push(e), c("Potentially unhandled rejection [" + e.id + "] " + o.formatError(e.value)))
                }

                function a(e) {
                    var t = f.indexOf(e);
                    t >= 0 && (f.splice(t, 1), h("Handled previous rejection [" + e.id + "] " + o.formatObject(e.value)))
                }

                function s(e, t) {
                    d.push(e, t), null === p && (p = r(u, 0))
                }

                function u() {
                    for (p = null; d.length > 0;) d.shift()(d.shift())
                }
                var l, c = i,
                    h = i;
                "undefined" != typeof console && (l = console, c = "undefined" != typeof l.error ? function(e) {
                    l.error(e)
                } : function(e) {
                    l.log(e)
                }, h = "undefined" != typeof l.info ? function(e) {
                    l.info(e)
                } : function(e) {
                    l.log(e)
                }), e.onPotentiallyUnhandledRejection = function(e) {
                    s(n, e)
                }, e.onPotentiallyUnhandledRejectionHandled = function(e) {
                    s(a, e)
                }, e.onFatalRejection = function(e) {
                    s(t, e.value)
                };
                var d = [],
                    f = [],
                    p = null;
                return e
            }
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function() {
            function e(e) {
                var n = "object" == typeof e && null !== e && (e.stack || e.message) ? e.stack || e.message : t(e);
                return e instanceof Error ? n : n + " (WARNING: non-Error used)"
            }

            function t(e) {
                var t = String(e);
                return "[object Object]" === t && "undefined" != typeof JSON && (t = n(e, t)), t
            }

            function n(e, t) {
                try {
                    return JSON.stringify(e)
                } catch (n) {
                    return t
                }
            }
            return {
                formatError: e,
                formatObject: t,
                tryStringify: n
            }
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function(e) {
            var t = n(82),
                i = n(83),
                r = n(65).asap;
            return t({
                scheduler: new i(r)
            })
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    var i;
    (function(r) { /** @license MIT License (c) copyright 2010-2014 original author or authors */
        ! function(o) {
            "use strict";
            i = function() {
                return function(e) {
                    function t(e, t) {
                        this._handler = e === x ? t : n(e)
                    }

                    function n(e) {
                        function t(e) {
                            r.resolve(e)
                        }

                        function n(e) {
                            r.reject(e)
                        }

                        function i(e) {
                            r.notify(e)
                        }
                        var r = new w;
                        try {
                            e(t, n, i)
                        } catch (o) {
                            n(o)
                        }
                        return r
                    }

                    function i(e) {
                        return F(e) ? e : new t(x, new T(g(e)))
                    }

                    function o(e) {
                        return new t(x, new T(new M(e)))
                    }

                    function a() {
                        return ee
                    }

                    function s() {
                        return new t(x, new w)
                    }

                    function u(e, t) {
                        var n = new w(e.receiver, e.join().context);
                        return new t(x, n)
                    }

                    function l(e) {
                        return h(W, null, e)
                    }

                    function c(e, t) {
                        return h(z, e, t)
                    }

                    function h(e, n, i) {
                        function r(t, r, a) {
                            a.resolved || d(i, o, t, e(n, r, t), a)
                        }

                        function o(e, t, n) {
                            c[e] = t, 0 === --l && n.become(new S(c))
                        }
                        for (var a, s = "function" == typeof n ? r : o, u = new w, l = i.length >>> 0, c = new Array(l), h = 0; h < i.length && !u.resolved; ++h) a = i[h], void 0 !== a || h in i ? d(i, s, h, a, u) : --l;
                        return 0 === l && u.become(new S(c)), new t(x, u)
                    }

                    function d(e, t, n, i, r) {
                        if (B(i)) {
                            var o = y(i),
                                a = o.state();
                            0 === a ? o.fold(t, n, void 0, r) : a > 0 ? t(n, o.value, r) : (r.become(o), f(e, n + 1, o))
                        } else t(n, i, r)
                    }

                    function f(e, t, n) {
                        for (var i = t; i < e.length; ++i) p(g(e[i]), n)
                    }

                    function p(e, t) {
                        if (e !== t) {
                            var n = e.state();
                            0 === n ? e.visit(e, void 0, e._unreport) : 0 > n && e._unreport()
                        }
                    }

                    function m(e) {
                        return "object" != typeof e || null === e ? o(new TypeError("non-iterable passed to race()")) : 0 === e.length ? a() : 1 === e.length ? i(e[0]) : v(e)
                    }

                    function v(e) {
                        var n, i, r, o = new w;
                        for (n = 0; n < e.length; ++n)
                            if (i = e[n], void 0 !== i || n in e) {
                                if (r = g(i), 0 !== r.state()) {
                                    o.become(r), f(e, n + 1, r);
                                    break
                                }
                                r.visit(o, o.resolve, o.reject)
                            }
                        return new t(x, o)
                    }

                    function g(e) {
                        return F(e) ? e._handler.join() : B(e) ? _(e) : new S(e)
                    }

                    function y(e) {
                        return F(e) ? e._handler.join() : _(e)
                    }

                    function _(e) {
                        try {
                            var t = e.then;
                            return "function" == typeof t ? new E(t, e) : new S(e)
                        } catch (n) {
                            return new M(n)
                        }
                    }

                    function x() {}

                    function b() {}

                    function w(e, n) {
                        t.createContext(this, n), this.consumers = void 0, this.receiver = e, this.handler = void 0, this.resolved = !1
                    }

                    function T(e) {
                        this.handler = e
                    }

                    function E(e, t) {
                        w.call(this), q.enqueue(new O(e, t, this))
                    }

                    function S(e) {
                        t.createContext(this), this.value = e
                    }

                    function M(e) {
                        t.createContext(this), this.id = ++J, this.value = e, this.handled = !1, this.reported = !1, this._report()
                    }

                    function P(e, t) {
                        this.rejection = e, this.context = t
                    }

                    function A(e) {
                        this.rejection = e
                    }

                    function C() {
                        return new M(new TypeError("Promise cycle"))
                    }

                    function R(e, t) {
                        this.continuation = e, this.handler = t
                    }

                    function L(e, t) {
                        this.handler = t, this.value = e
                    }

                    function O(e, t, n) {
                        this._then = e, this.thenable = t, this.resolver = n
                    }

                    function k(e, t, n, i, r) {
                        try {
                            e.call(t, n, i, r)
                        } catch (o) {
                            i(o)
                        }
                    }

                    function D(e, t, n, i) {
                        this.f = e, this.z = t, this.c = n, this.to = i, this.resolver = Q, this.receiver = this
                    }

                    function F(e) {
                        return e instanceof t
                    }

                    function B(e) {
                        return ("object" == typeof e || "function" == typeof e) && null !== e
                    }

                    function I(e, n, i, r) {
                        return "function" != typeof e ? r.become(n) : (t.enterContext(n), V(e, n.value, i, r), void t.exitContext())
                    }

                    function U(e, n, i, r, o) {
                        return "function" != typeof e ? o.become(i) : (t.enterContext(i), j(e, n, i.value, r, o), void t.exitContext())
                    }

                    function N(e, n, i, r, o) {
                        return "function" != typeof e ? o.notify(n) : (t.enterContext(i), G(e, n, r, o), void t.exitContext())
                    }

                    function z(e, t, n) {
                        try {
                            return e(t, n)
                        } catch (i) {
                            return o(i)
                        }
                    }

                    function V(e, t, n, i) {
                        try {
                            i.become(g(e.call(n, t)))
                        } catch (r) {
                            i.become(new M(r))
                        }
                    }

                    function j(e, t, n, i, r) {
                        try {
                            e.call(i, t, n, r)
                        } catch (o) {
                            r.become(new M(o))
                        }
                    }

                    function G(e, t, n, i) {
                        try {
                            i.notify(e.call(n, t))
                        } catch (r) {
                            i.notify(r)
                        }
                    }

                    function H(e, t) {
                        t.prototype = Z(e.prototype), t.prototype.constructor = t
                    }

                    function W(e, t) {
                        return t
                    }

                    function X() {}

                    function Y() {
                        return "undefined" != typeof r && null !== r && "function" == typeof r.emit ? function(e, t) {
                            return "unhandledRejection" === e ? r.emit(e, t.value, t) : r.emit(e, t)
                        } : "undefined" != typeof self && "function" == typeof CustomEvent ? function(e, t, n) {
                            var i = !1;
                            try {
                                var r = new n("unhandledRejection");
                                i = r instanceof n
                            } catch (o) {}
                            return i ? function(e, i) {
                                var r = new n(e, {
                                    detail: {
                                        reason: i.value,
                                        key: i
                                    },
                                    bubbles: !1,
                                    cancelable: !0
                                });
                                return !t.dispatchEvent(r)
                            } : e
                        }(X, self, CustomEvent) : X
                    }
                    var q = e.scheduler,
                        K = Y(),
                        Z = Object.create || function(e) {
                            function t() {}
                            return t.prototype = e, new t
                        };
                    t.resolve = i, t.reject = o, t.never = a, t._defer = s, t._handler = g, t.prototype.then = function(e, t, n) {
                        var i = this._handler,
                            r = i.join().state();
                        if ("function" != typeof e && r > 0 || "function" != typeof t && 0 > r) return new this.constructor(x, i);
                        var o = this._beget(),
                            a = o._handler;
                        return i.chain(a, i.receiver, e, t, n), o
                    }, t.prototype["catch"] = function(e) {
                        return this.then(void 0, e)
                    }, t.prototype._beget = function() {
                        return u(this._handler, this.constructor)
                    }, t.all = l, t.race = m, t._traverse = c, t._visitRemaining = f, x.prototype.when = x.prototype.become = x.prototype.notify = x.prototype.fail = x.prototype._unreport = x.prototype._report = X, x.prototype._state = 0, x.prototype.state = function() {
                        return this._state
                    }, x.prototype.join = function() {
                        for (var e = this; void 0 !== e.handler;) e = e.handler;
                        return e
                    }, x.prototype.chain = function(e, t, n, i, r) {
                        this.when({
                            resolver: e,
                            receiver: t,
                            fulfilled: n,
                            rejected: i,
                            progress: r
                        })
                    }, x.prototype.visit = function(e, t, n, i) {
                        this.chain(Q, e, t, n, i)
                    }, x.prototype.fold = function(e, t, n, i) {
                        this.when(new D(e, t, n, i))
                    }, H(x, b), b.prototype.become = function(e) {
                        e.fail()
                    };
                    var Q = new b;
                    H(x, w), w.prototype._state = 0, w.prototype.resolve = function(e) {
                        this.become(g(e))
                    }, w.prototype.reject = function(e) {
                        this.resolved || this.become(new M(e))
                    }, w.prototype.join = function() {
                        if (!this.resolved) return this;
                        for (var e = this; void 0 !== e.handler;)
                            if (e = e.handler, e === this) return this.handler = C();
                        return e
                    }, w.prototype.run = function() {
                        var e = this.consumers,
                            t = this.handler;
                        this.handler = this.handler.join(), this.consumers = void 0;
                        for (var n = 0; n < e.length; ++n) t.when(e[n])
                    }, w.prototype.become = function(e) {
                        this.resolved || (this.resolved = !0, this.handler = e, void 0 !== this.consumers && q.enqueue(this), void 0 !== this.context && e._report(this.context))
                    }, w.prototype.when = function(e) {
                        this.resolved ? q.enqueue(new R(e, this.handler)) : void 0 === this.consumers ? this.consumers = [e] : this.consumers.push(e)
                    }, w.prototype.notify = function(e) {
                        this.resolved || q.enqueue(new L(e, this))
                    }, w.prototype.fail = function(e) {
                        var t = "undefined" == typeof e ? this.context : e;
                        this.resolved && this.handler.join().fail(t)
                    }, w.prototype._report = function(e) {
                        this.resolved && this.handler.join()._report(e)
                    }, w.prototype._unreport = function() {
                        this.resolved && this.handler.join()._unreport()
                    }, H(x, T), T.prototype.when = function(e) {
                        q.enqueue(new R(e, this))
                    }, T.prototype._report = function(e) {
                        this.join()._report(e)
                    }, T.prototype._unreport = function() {
                        this.join()._unreport()
                    }, H(w, E), H(x, S), S.prototype._state = 1, S.prototype.fold = function(e, t, n, i) {
                        U(e, t, this, n, i)
                    }, S.prototype.when = function(e) {
                        I(e.fulfilled, this, e.receiver, e.resolver)
                    };
                    var J = 0;
                    H(x, M), M.prototype._state = -1, M.prototype.fold = function(e, t, n, i) {
                        i.become(this)
                    }, M.prototype.when = function(e) {
                        "function" == typeof e.rejected && this._unreport(), I(e.rejected, this, e.receiver, e.resolver)
                    }, M.prototype._report = function(e) {
                        q.afterQueue(new P(this, e))
                    }, M.prototype._unreport = function() {
                        this.handled || (this.handled = !0, q.afterQueue(new A(this)))
                    }, M.prototype.fail = function(e) {
                        this.reported = !0, K("unhandledRejection", this), t.onFatalRejection(this, void 0 === e ? this.context : e)
                    }, P.prototype.run = function() {
                        this.rejection.handled || this.rejection.reported || (this.rejection.reported = !0, K("unhandledRejection", this.rejection) || t.onPotentiallyUnhandledRejection(this.rejection, this.context))
                    }, A.prototype.run = function() {
                        this.rejection.reported && (K("rejectionHandled", this.rejection) || t.onPotentiallyUnhandledRejectionHandled(this.rejection))
                    }, t.createContext = t.enterContext = t.exitContext = t.onPotentiallyUnhandledRejection = t.onPotentiallyUnhandledRejectionHandled = t.onFatalRejection = X;
                    var $ = new x,
                        ee = new t(x, $);
                    return R.prototype.run = function() {
                        this.handler.join().when(this.continuation)
                    }, L.prototype.run = function() {
                        var e = this.handler.consumers;
                        if (void 0 !== e)
                            for (var t, n = 0; n < e.length; ++n) t = e[n], N(t.progress, this.value, this.handler, t.receiver, t.resolver)
                    }, O.prototype.run = function() {
                        function e(e) {
                            i.resolve(e)
                        }

                        function t(e) {
                            i.reject(e)
                        }

                        function n(e) {
                            i.notify(e)
                        }
                        var i = this.resolver;
                        k(this._then, this.thenable, e, t, n)
                    }, D.prototype.fulfilled = function(e) {
                        this.f.call(this.c, this.z, e, this.to)
                    }, D.prototype.rejected = function(e) {
                        this.to.reject(e)
                    }, D.prototype.progress = function(e) {
                        this.to.notify(e)
                    }, t
                }
            }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
        }(n(68))
    }).call(t, n(66))
}, function(e, t, n) {
    var i; /** @license MIT License (c) copyright 2010-2014 original author or authors */
    ! function(r) {
        "use strict";
        i = function() {
            function e(e) {
                this._async = e, this._running = !1, this._queue = this, this._queueLen = 0, this._afterQueue = {}, this._afterQueueLen = 0;
                var t = this;
                this.drain = function() {
                    t._drain()
                }
            }
            return e.prototype.enqueue = function(e) {
                this._queue[this._queueLen++] = e, this.run()
            }, e.prototype.afterQueue = function(e) {
                this._afterQueue[this._afterQueueLen++] = e, this.run()
            }, e.prototype.run = function() {
                this._running || (this._running = !0, this._async(this.drain))
            }, e.prototype._drain = function() {
                for (var e = 0; e < this._queueLen; ++e) this._queue[e].run(), this._queue[e] = void 0;
                for (this._queueLen = 0, this._running = !1, e = 0; e < this._afterQueueLen; ++e) this._afterQueue[e].run(), this._afterQueue[e] = void 0;
                this._afterQueueLen = 0
            }, e
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i))
    }(n(68))
}, function(e, t, n) {
    e.exports = n.p + "home/assets/labels0.jpg"
}, function(e, t) {
    e.exports = {
        frames: {
            0: {
                frame: {
                    x: 0,
                    y: 110,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            1: {
                frame: {
                    x: 0,
                    y: 165,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            2: {
                frame: {
                    x: 50,
                    y: 0,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            6: {
                frame: {
                    x: 50,
                    y: 55,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            "+": {
                frame: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            "-": {
                frame: {
                    x: 0,
                    y: 55,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            "=": {
                frame: {
                    x: 50,
                    y: 110,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            A: {
                frame: {
                    x: 50,
                    y: 165,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            B: {
                frame: {
                    x: 100,
                    y: 0,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            C: {
                frame: {
                    x: 100,
                    y: 55,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            D: {
                frame: {
                    x: 100,
                    y: 110,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            E: {
                frame: {
                    x: 100,
                    y: 165,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            F: {
                frame: {
                    x: 150,
                    y: 0,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            G: {
                frame: {
                    x: 150,
                    y: 55,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            H: {
                frame: {
                    x: 150,
                    y: 110,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            I: {
                frame: {
                    x: 150,
                    y: 165,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            J: {
                frame: {
                    x: 200,
                    y: 0,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            K: {
                frame: {
                    x: 200,
                    y: 55,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            L: {
                frame: {
                    x: 200,
                    y: 110,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            M: {
                frame: {
                    x: 200,
                    y: 165,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            N: {
                frame: {
                    x: 250,
                    y: 0,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            O: {
                frame: {
                    x: 250,
                    y: 55,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            P: {
                frame: {
                    x: 250,
                    y: 110,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            Q: {
                frame: {
                    x: 250,
                    y: 165,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            R: {
                frame: {
                    x: 300,
                    y: 0,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            S: {
                frame: {
                    x: 350,
                    y: 0,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            T: {
                frame: {
                    x: 400,
                    y: 0,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            U: {
                frame: {
                    x: 450,
                    y: 0,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            V: {
                frame: {
                    x: 300,
                    y: 55,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            W: {
                frame: {
                    x: 300,
                    y: 110,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            X: {
                frame: {
                    x: 300,
                    y: 165,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            Y: {
                frame: {
                    x: 350,
                    y: 55,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            Z: {
                frame: {
                    x: 400,
                    y: 55,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            "[": {
                frame: {
                    x: 450,
                    y: 55,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            "^": {
                frame: {
                    x: 350,
                    y: 110,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            _: {
                frame: {
                    x: 350,
                    y: 165,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            },
            "|": {
                frame: {
                    x: 400,
                    y: 110,
                    w: 50,
                    h: 55
                },
                rotated: !1,
                trimmed: !1,
                spriteSourceSize: {
                    x: 0,
                    y: 0,
                    w: 50,
                    h: 55
                },
                sourceSize: {
                    w: 50,
                    h: 55
                }
            }
        },
        meta: {
            app: "http://www.codeandweb.com/texturepacker ",
            version: "1.0",
            image: "labels0.jpg",
            format: "ALPHA",
            size: {
                w: 512,
                h: 256
            },
            scale: "1",
            smartupdate: "$TexturePacker:SmartUpdate:39f6185860f6f0d135d7e05fe6fd9889:1/1$"
        }
    }
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = 16,
        o = function() {
            function e(t) {
                n(this, e), this.gl = t;
                var i = new Float32Array([-1, -1, 0, 0, -1, 1, 0, 1, 1, -1, 1, 0, 1, 1, 1, 1]);
                this.vbuffer = t.createBuffer(), t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.bufferData(t.ARRAY_BUFFER, i, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, null)
            }
            return i(e, [{
                key: "bind",
                value: function(e) {
                    var t = this.gl;
                    t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.enableVertexAttribArray(e.aPosition), t.vertexAttribPointer(e.aPosition, 2, t.FLOAT, !0, r, 0), e.aTexCoord > -1 && (t.enableVertexAttribArray(e.aTexCoord), t.vertexAttribPointer(e.aTexCoord, 2, t.FLOAT, !0, r, 8))
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.gl;
                    e.drawArrays(e.TRIANGLE_STRIP, 0, 4)
                }
            }]), e
        }();
    t["default"] = o, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(88),
        c = i(l),
        h = n(89),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "aTexCoord", "tTex", "uMVP"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\n\nvarying vec2 vTexCoord;\nuniform mat4 uMVP;\n\nvoid main( void ) {\n  gl_Position = uMVP * vec4( vec2( 1.0, -1.0 )*aPosition, .0, 1.0 );\n  vTexCoord = aTexCoord;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tTex;\n\nvarying vec2 vTexCoord;\n\nvoid main(void){\n  gl_FragColor = texture2D( tTex, vTexCoord );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(91),
        c = i(l),
        h = n(92),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "uMVP", "uTex", "uTextOpacity"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nuniform mat4 uMVP;\n\n\nvarying vec2 vTexCoord;\n\nvoid main( void ) {\n  gl_Position = uMVP * vec4( aPosition, 0.0, 1.0 );\n  vTexCoord = aPosition*vec2(1.0, -1.0) * .5 + .5;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform vec3 uColor;\nuniform sampler2D uTex;\nuniform float uTextOpacity;\n\nvarying vec2 vTexCoord;\n\nvoid main(void){\n  gl_FragColor = mix( vec4( 1.0 ), texture2D( uTex, vTexCoord ), uTextOpacity );\n}"
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = function() {
            function e(t) {
                var i = arguments.length <= 1 || void 0 === arguments[1] ? !1 : arguments[1],
                    r = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2],
                    o = arguments.length <= 3 || void 0 === arguments[3] ? !1 : arguments[3];
                n(this, e), this.gl = t, this.width = 0, this.height = 0, this.color = null, this.fbo = null, this.filter = i ? t.LINEAR : t.NEAREST, this.depth = r, this.depthBuffer = null, this.stencil = o, this.stencilBuffer = null
            }
            return i(e, [{
                key: "allocate",
                value: function(e, t) {
                    (this.width !== e || this.height !== t) && (this.width = e, this.height = t, this.color ? this._realloc() : this._alloc())
                }
            }, {
                key: "_alloc",
                value: function() {
                    var e = this.gl;
                    this.color = e.createTexture(), e.bindTexture(e.TEXTURE_2D, this.color), e.texImage2D(e.TEXTURE_2D, 0, e.RGB, this.width, this.height, 0, e.RGB, e.UNSIGNED_BYTE, null), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, this.filter), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, this.filter), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), this.fbo = e.createFramebuffer(), e.bindFramebuffer(e.FRAMEBUFFER, this.fbo), e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, this.color, 0), this.depth && (this.depthBuffer = e.createRenderbuffer(), e.bindRenderbuffer(e.RENDERBUFFER, this.depthBuffer), e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_COMPONENT16, this.width, this.height), e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.RENDERBUFFER, this.depthBuffer)), this.stencil && (this.stencilBuffer = e.createRenderbuffer(), e.bindRenderbuffer(e.RENDERBUFFER, this.stencilBuffer), e.renderbufferStorage(e.RENDERBUFFER, e.STENCIL_INDEX8, this.width, this.height), e.framebufferRenderbuffer(e.FRAMEBUFFER, e.STENCIL_ATTACHMENT, e.RENDERBUFFER, this.stencilBuffer)), this.valid = !0, e.checkFramebufferStatus(e.FRAMEBUFFER) != e.FRAMEBUFFER_COMPLETE && (this.valid = !1), e.clear(e.COLOR_BUFFER_BIT), e.bindTexture(e.TEXTURE_2D, null), e.bindFramebuffer(e.FRAMEBUFFER, null)
                }
            }, {
                key: "_realloc",
                value: function() {
                    var e = this.gl;
                    e.bindTexture(e.TEXTURE_2D, this.color), e.texImage2D(e.TEXTURE_2D, 0, e.RGB, this.width, this.height, 0, e.RGB, e.UNSIGNED_BYTE, null), e.bindTexture(e.TEXTURE_2D, null), this.depth && (e.bindRenderbuffer(e.RENDERBUFFER, this.depthBuffer), e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_COMPONENT16, this.width, this.height), e.bindRenderbuffer(e.RENDERBUFFER, null)), this.stencil && (e.bindRenderbuffer(e.RENDERBUFFER, this.stencilBuffer), e.renderbufferStorage(e.RENDERBUFFER, e.STENCIL_INDEX8, this.width, this.height), e.bindRenderbuffer(e.RENDERBUFFER, null))
                }
            }, {
                key: "bindColor",
                value: function(e, t) {
                    var n = this.gl;
                    n.activeTexture(n.TEXTURE0 + t), n.bindTexture(n.TEXTURE_2D, this.color), n.uniform1i(e, t)
                }
            }, {
                key: "bind",
                value: function() {
                    var e = this.gl;
                    e.bindFramebuffer(e.FRAMEBUFFER, this.fbo), e.viewport(0, 0, this.width, this.height)
                }
            }, {
                key: "clear",
                value: function() {
                    var e = this.gl,
                        t = e.COLOR_BUFFER_BIT;
                    this.depth && (t |= e.DEPTH_BUFFER_BIT), this.stencil && (t |= e.STENCIL_BUFFER_BIT), e.clear(t)
                }
            }]), e
        }();
    t["default"] = r, e.exports = t["default"]
}, function(e, t, n) {
    e.exports = n.p + "home/assets/pulse.png"
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = 128,
        o = function() {
            function e(t) {
                n(this, e), this.gl = t;
                for (var i = new Float32Array(2 * r * 4), o = new Uint16Array(6 * r), a = 0; r > a; a++) {
                    var s = 8 * a,
                        u = -1 + 2 * (.8 * Math.random()),
                        l = -1 + 2 * (.9 * Math.random()),
                        c = 2 * (.2 * Math.random() + .1),
                        h = 2 * (.03 * Math.random() + .01);
                    i[s + 0] = u, i[s + 1] = l, i[s + 2] = u + c, i[s + 3] = l, i[s + 4] = u + c, i[s + 5] = l + h, i[s + 6] = u, i[s + 7] = l + h;
                    var d = 6 * a,
                        f = 4 * a;
                    o[d + 0] = f, o[d + 1] = f + 1, o[d + 2] = f + 2, o[d + 3] = f, o[d + 4] = f + 2, o[d + 5] = f + 3
                }
                this.vbuffer = t.createBuffer(), t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.bufferData(t.ARRAY_BUFFER, i, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, null), this.ibuffer = t.createBuffer(), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.ibuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, o, t.STATIC_DRAW), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, null)
            }
            return i(e, [{
                key: "bind",
                value: function(e) {
                    var t = this.gl;
                    t.enableVertexAttribArray(e.aPosition), t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.vertexAttribPointer(e.aPosition, 2, t.FLOAT, !1, 0, 0), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.ibuffer)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.gl;
                    e.drawElements(e.TRIANGLES, 6 * r, e.UNSIGNED_SHORT, 0), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, null)
                }
            }]), e
        }();
    t["default"] = o, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(97),
        c = i(l),
        h = n(98),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "aTexCoord", "tTexMain", "tTexSub", "uMVP"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\n\nvarying vec2 vTexCoord;\nuniform mat4 uMVP;\n\nvoid main( void ){\n  gl_Position = uMVP * vec4( vec2( 1.0, -1.0 ) * aPosition, .0, 1.0 );\n  vTexCoord = aTexCoord;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tTexMain;\nuniform sampler2D tTexSub;\n\nvarying vec2 vTexCoord;\n\nvoid main(void){\n  gl_FragColor =\n    texture2D( tTexMain, vTexCoord )\n    // +\n    // texture2D( tTexSub, vTexCoord + vec2( .1) )\n    ;\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(100),
        c = i(l),
        h = n(101),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "aTexCoord", "uMVP", "tTex"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nuniform mat4 uMVP;\n\nvarying vec2 vTexCoord;\n\nvoid main( void ) {\n  gl_Position = uMVP * vec4( aPosition, 0.0, 1.0 );\n  vTexCoord = aTexCoord;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tTex;\nvarying vec2 vTexCoord;\n\nvoid main(void){\n  gl_FragColor = texture2D( tTex, vTexCoord );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(103),
        c = i(l),
        h = n(104),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "uMVP", "uColor"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nuniform mat4 uMVP;\n\nvoid main( void ) {\n  gl_Position = uMVP * vec4( aPosition, 0.0, 1.0 );\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform vec3 uColor;\n\nvoid main(void){\n  gl_FragColor = vec4( uColor, 1.0 );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }

    function a(e) {
        return Math.random() * e < 1
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        u = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        l = n(49),
        c = i(l),
        h = n(106),
        d = i(h),
        f = n(107),
        p = i(f),
        m = 32,
        v = function(e) {
            function t(e) {
                r(this, t), u(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "uMVP", "tTex", "urKernel", "ugKernel", "ubKernel", "uKernelWeight"]);
                var n = "#define KERNEL_SIZE " + m;
                this.compile(d["default"], p["default"], n), this.rKernel = new Float32Array(2 * m), this.gKernel = new Float32Array(2 * m), this.bKernel = new Float32Array(2 * m), this.kernelWeight = new Float32Array(m), this.computeKernelWeight(this.kernelWeight), this.rSizeChaos = new g(3), this.gSizeChaos = new g(3), this.bSizeChaos = new g(3), this.rXChaos = new g(3), this.rYChaos = new g(3), this.gXChaos = new g(3), this.gYChaos = new g(3), this.bXChaos = new g(3), this.bYChaos = new g(3), this.glitchAmpDest = 0, this.glitchAmp = 0
            }
            return o(t, e), s(t, [{
                key: "prerender",
                value: function(e) {
                    e = 1 / 60, this.rSizeChaos.step(e), this.gSizeChaos.step(e), this.bSizeChaos.step(e), this.rXChaos.step(e), this.rYChaos.step(e), this.gXChaos.step(e), this.gYChaos.step(e), this.bXChaos.step(e), this.bYChaos.step(e), a(10) && (this.glitchAmpDest = a(3) ? 1 : 0), this.glitchAmp += .1 * (this.glitchAmpDest - this.glitchAmp);
                    var t = this.glitchAmp;
                    this.computeKernel(this.rKernel, .1, t * this.rSizeChaos.v * .2, .01 * t * (2 * this.rXChaos.v - 1), .01 * t * (2 * this.rYChaos.v - 1)), this.computeKernel(this.gKernel, .2, t * this.gSizeChaos.v * .2, .01 * t * (2 * this.gXChaos.v - 1), .01 * t * (2 * this.gYChaos.v - 1)), this.computeKernel(this.bKernel, .3, t * this.bSizeChaos.v * .2, .01 * t * (2 * this.bXChaos.v - 1), .01 * t * (2 * this.bYChaos.v - 1))
                }
            }, {
                key: "bind",
                value: function() {
                    u(Object.getPrototypeOf(t.prototype), "bind", this).call(this);
                    var e = this.gl;
                    e.uniform2fv(this.urKernel, this.rKernel), e.uniform2fv(this.ugKernel, this.gKernel), e.uniform2fv(this.ubKernel, this.bKernel), e.uniform1fv(this.uKernelWeight, this.kernelWeight)
                }
            }, {
                key: "computeKernel",
                value: function(e, t, n, i, r) {
                    for (var o, a, s, u = Math.sqrt(Math.PI), l = Math.cos(t), c = Math.sin(t), h = 0; m > h; ++h) s = 2 * h, o = 2 * h / (m - 1) - 1, a = 4 * o, a = Math.exp(-a * a / 2) / u, e[s + 0] = o * n * l + i, e[s + 1] = o * n * c + r
                }
            }, {
                key: "computeKernelWeight",
                value: function(e) {
                    for (var t, n, i = Math.sqrt(Math.PI), r = 0, o = 0; m > o; ++o) t = 2 * o / (m - 1) - 1, n = 4 * t, n = Math.exp(-n * n / 2) / i, r += n, e[o] = n;
                    for (o = 0; m > o; ++o) e[o] /= r
                }
            }]), t
        }(c["default"]);
    t["default"] = v;
    var g = function() {
        function e(t) {
            r(this, e), this.amp = t, this.angle = 0, this.v = 0, this.offsets = [6 * Math.random(), 6 * Math.random(), 6 * Math.random(), 6 * Math.random()]
        }
        return s(e, [{
            key: "step",
            value: function(e) {
                this.angle += 10 * e;
                var t = this.angle;
                this.v = (Math.sin(1.56 * t + this.offsets[0]) + Math.sin(1.32 * t + this.offsets[1]) + Math.sin(1.89 * t + this.offsets[2]) + Math.sin(1.17 * t + this.offsets[3])) / 4 * this.amp, this.v = Math.min(1, Math.max(0, this.v))
            }
        }]), e
    }();
    e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nuniform mat4 uMVP;\n\nvarying vec2 vTexCoord;\n\nvoid main( void ) {\n  gl_Position = uMVP * vec4( aPosition, 0.0, 1.0 );\n  vTexCoord = gl_Position.xy * vec2(.5,-.5) + .5;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\n#ifndef KERNEL_SIZE\n  #define KERNEL_SIZE 16\n#endif\n\n\nprecision highp float;\n\nuniform sampler2D tTex;\n\nuniform vec2  urKernel[KERNEL_SIZE];\nuniform vec2  ugKernel[KERNEL_SIZE];\nuniform vec2  ubKernel[KERNEL_SIZE];\nuniform float uKernelWeight[KERNEL_SIZE];\n\nvarying vec2 vTexCoord;\n\nvoid main(void){\n  vec3 color = vec3( 0.0 );\n\n  for( int i=0;i< KERNEL_SIZE;i++){\n    float weight = uKernelWeight[i];\n    color += weight * vec3(\n      texture2D( tTex, vTexCoord+urKernel[i] ).r,\n      texture2D( tTex, vTexCoord+ugKernel[i] ).g,\n      texture2D( tTex, vTexCoord+ubKernel[i] ).b\n    );\n  }\n\n  gl_FragColor = vec4( color, 1.0 );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }

    function a(e) {
        return Math.random() * e < 1
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        u = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        l = n(49),
        c = i(l),
        h = n(109),
        d = i(h),
        f = n(110),
        p = i(f),
        m = 32,
        v = function(e) {
            function t(e) {
                r(this, t), u(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "uMVP", "tTex", "uKernel", "uKernelWeight"]);
                var n = "#define KERNEL_SIZE " + m;
                this.compile(d["default"], p["default"], n), this.blurKernel = new Float32Array(2 * m), this.kernelWeight = new Float32Array(m), this.computeKernelWeight(this.kernelWeight), this.blurSizeChaos = new g(3), this.blurXChaos = new g(3), this.blurYChaos = new g(3), this.glitchAmpDest = 0, this.glitchAmp = 0
            }
            return o(t, e), s(t, [{
                key: "prerender",
                value: function(e) {
                    e = 1 / 60, this.blurSizeChaos.step(e), this.blurXChaos.step(e), this.blurYChaos.step(e), a(20) && (this.glitchAmpDest = a(4) ? 1 : 0), this.glitchAmp += .1 * (this.glitchAmpDest - this.glitchAmp);
                    var t = this.glitchAmp;
                    this.computeKernel(this.blurKernel, .1, t * this.blurSizeChaos.v * .03, .005 * t * (2 * this.blurXChaos.v - 1), .005 * t * (2 * this.blurYChaos.v - 1))
                }
            }, {
                key: "bind",
                value: function() {
                    u(Object.getPrototypeOf(t.prototype), "bind", this).call(this);
                    var e = this.gl;
                    e.uniform2fv(this.uKernel, this.blurKernel), e.uniform1fv(this.uKernelWeight, this.kernelWeight)
                }
            }, {
                key: "computeKernel",
                value: function(e, t, n, i, r) {
                    for (var o, a, s, u = Math.sqrt(Math.PI), l = Math.cos(t), c = Math.sin(t), h = 0; m > h; ++h) s = 2 * h, o = 2 * h / (m - 1) - 1, a = 4 * o, a = Math.exp(-a * a / 2) / u, e[s + 0] = o * n * l + i, e[s + 1] = o * n * c + r
                }
            }, {
                key: "computeKernelWeight",
                value: function(e) {
                    for (var t, n, i = Math.sqrt(Math.PI), r = 0, o = 0; m > o; ++o) t = 2 * o / (m - 1) - 1, n = 4 * t, n = Math.exp(-n * n / 2) / i, r += n, e[o] = n;
                    for (o = 0; m > o; ++o) e[o] /= r
                }
            }]), t
        }(c["default"]);
    t["default"] = v;
    var g = function() {
        function e(t) {
            r(this, e), this.amp = t, this.angle = 0, this.v = 0, this.offsets = [6 * Math.random(), 6 * Math.random(), 6 * Math.random(), 6 * Math.random()]
        }
        return s(e, [{
            key: "step",
            value: function(e) {
                this.angle += 14 * e;
                var t = this.angle;
                this.v = (Math.sin(1.56 * t + this.offsets[0]) + Math.sin(1.32 * t + this.offsets[1]) + Math.sin(1.89 * t + this.offsets[2]) + Math.sin(1.17 * t + this.offsets[3])) / 4 * this.amp, this.v = Math.min(1, Math.max(0, this.v))
            }
        }]), e
    }();
    e.exports = t["default"]
}, 106, function(e, t) {
    e.exports = "#define GLSLIFY 1\n#ifndef KERNEL_SIZE\n  #define KERNEL_SIZE 16\n#endif\n\n\nprecision highp float;\n\nuniform sampler2D tTex;\n\nuniform vec2  uKernel[KERNEL_SIZE];\nuniform float uKernelWeight[KERNEL_SIZE];\n\nvarying vec2 vTexCoord;\n\nvoid main(void){\n  vec3 color = vec3( 0.0 );\n\n  for( int i=0;i< KERNEL_SIZE;i++){\n    float weight = uKernelWeight[i];\n    color += weight * texture2D( tTex, vTexCoord+uKernel[i] ).rgb;\n  }\n\n  gl_FragColor = vec4( color, 1.0 );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(31),
        s = i(a),
        u = n(18),
        l = (i(u), s["default"].mat4),
        c = s["default"].vec3,
        h = c.create(),
        d = c.fromValues(0, 1, 0),
        f = c.create(),
        p = function() {
            function e() {
                r(this, e), this.fov = 60, this.distance = 8, this.yOffset = 0, this._view = new Float32Array(16), this._proj = new Float32Array(16), this._viewProj = new Float32Array(16), l.identity(this._view)
            }
            return o(e, [{
                key: "update",
                value: function(e, t, n) {
                    var i = 2.5 * Math.atan(1 / this.distance);
                    l.perspective(this._proj, i, e / t, .5, 50.6);
                    var r = 5e3,
                        o = n.x / r,
                        a = -n.y / r;
                    c.set(f, this.distance * Math.sin(o), this.distance * Math.sin(a), -this.distance * Math.cos(o) * Math.cos(a)), l.lookAt(this._view, h, f, d), this._view[12] = f[0], this._view[13] = f[1], this._view[14] = -f[2], l.invert(this._view, this._view), this.updateViewProjectionMatrix()
                }
            }, {
                key: "modelViewProjectionMatrix",
                value: function(e) {
                    l.multiply(e, this._viewProj, e)
                }
            }, {
                key: "updateViewProjectionMatrix",
                value: function() {
                    l.multiply(this._viewProj, this._proj, this._view)
                }
            }, {
                key: "modelViewMatrix",
                value: function(e) {
                    l.multiply(e, e, this._view)
                }
            }]), e
        }();
    t["default"] = p, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(86),
        s = i(a),
        u = n(113),
        l = i(u),
        c = n(116),
        h = i(c),
        d = n(31),
        f = i(d),
        p = f["default"].vec2,
        m = f["default"].vec4,
        v = function() {
            function e(t) {
                var n = this;
                r(this, e), this.gl = t, this.noiseTexture = new h["default"](t), this.noisePrg = new l["default"](t), this.plane = new s["default"](t), this.randomOffset = p.create(), this.resolution = p.create(), this.mouse = p.create(), this.noiseParam = m.create(), this.mouse[0] = window.innerWidth / 2, this.mouse[1] = window.innerHeight / 2, window.addEventListener("mousemove", function(e) {
                    n.mouse[0] = e.clientX, n.mouse[1] = e.clientY
                }), BrowserDetect.isMobile && window.addEventListener("resize", this.resize.bind(this)), this.startTime = null, this.count = 0
            }
            return o(e, [{
                key: "setMousePosition",
                value: function(e, t) {
                    this.mouse[0] = e, this.mouse[1] = t
                }
            }, {
                key: "prepare",
                value: function() {
                    null == this.startTime && (this.startTime = Date.now());
                    Date.now() - this.startTime;
                    this.resolution[0] = window.innerWidth, this.resolution[1] = window.innerHeight, this.count++, this.noisePrg.bind(), this.plane.bind(this.noisePrg), this.randomOffset[0] = Math.random(), this.randomOffset[1] = Math.random(), this.noiseTexture.bind(this.noisePrg.tNoise, 0), this.noiseParam[0] = this.mouse[0] / this.resolution[0], this.noiseParam[1] = (this.resolution[1] - this.mouse[1]) / this.resolution[0], this.noiseParam[2] = this.resolution[1] / this.resolution[0], this.noiseParam[3] = this.resolution[0] / 512
                }
            }, {
                key: "render",
                value: function() {
                    this.prepare();
                    var e = this.gl;
                    this.gl.uniform4fv(this.noisePrg.uNoiseParam, this.noiseParam), this.gl.uniform2fv(this.noisePrg.rNoise, this.randomOffset), e.clear(e.COLOR_BUFFER_BIT | e.DEPTH_BUFFER_BIT), e.disable(e.CULL_FACE), this.plane.render(), e.enable(e.CULL_FACE)
                }
            }, {
                key: "getComposerPass",
                value: function() {
                    return new g(this)
                }
            }, {
                key: "resize",
                value: function() {
                    this.mouse[0] = window.innerWidth / 2, this.mouse[1] = window.innerHeight / 2
                }
            }]), e
        }();
    t["default"] = v;
    var g = function() {
        function e(t) {
            r(this, e), this.noise = t, this.enabled = !0
        }
        return o(e, [{
            key: "render",
            value: function(e, t, n) {
                e.setRenderTarget(n), this.noise.render()
            }
        }]), e
    }();
    e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(114),
        c = i(l),
        h = n(115),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "aTexCoord", "uNoiseParam", "tNoise", "rNoise"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nuniform vec4 uNoiseParam;\n\nvarying vec2 vTexCoord;\n\n\nvoid main( void ) {\n  gl_Position = vec4( aPosition, 1.0, 1.0 );\n  vTexCoord.xy   = aTexCoord;\n  vTexCoord.y = vTexCoord.y * uNoiseParam.z;\n}\n"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform vec4 uNoiseParam;\nuniform vec2 rNoise;\n\nuniform sampler2D tNoise;\n\nvoid main(void){\n  float dist     = 0.5 - distance( vTexCoord.xy, uNoiseParam.xy );\n  float texColor = texture2D(tNoise, ( vTexCoord.xy + rNoise ) * uNoiseParam.w ).r * 0.4;\n  float color     = dist * texColor;\n  gl_FragColor   = vec4( color, color, color, 1.0 );\n}\n"
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    for (var i = (function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }()), r = 512, o = new Uint8Array(r * r), a = 0; r * r > a; a++) o[a] = Math.min(255 * Math.random() * 3, 255);
    var s = function() {
        function e(t) {
            n(this, e), this.gl = t, this.id = this.gl.createTexture(), t.bindTexture(t.TEXTURE_2D, this.id), t.texImage2D(t.TEXTURE_2D, 0, t.LUMINANCE, r, r, 0, t.LUMINANCE, t.UNSIGNED_BYTE, o), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.REPEAT), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.REPEAT), t.bindTexture(t.TEXTURE_2D, null)
        }
        return i(e, [{
            key: "bind",
            value: function(e, t) {
                var n = this.gl;
                n.activeTexture(n.TEXTURE0 + t), n.bindTexture(n.TEXTURE_2D, this.id), n.uniform1i(e, t)
            }
        }]), e
    }();
    t["default"] = s, e.exports = t["default"]
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = function() {
            function e() {
                n(this, e), this._events = {}
            }
            return i(e, [{
                key: "on",
                value: function(e, t) {
                    return this._events[e] = this._events[e] || [], this._events[e].push(t), this
                }
            }, {
                key: "once",
                value: function(e, t) {
                    function n() {
                        i.off(e, n), t.apply(this, arguments)
                    }
                    var i = this;
                    return n.listener = t, this.on(e, n), this
                }
            }, {
                key: "off",
                value: function(e, t) {
                    var n = this._events[e];
                    if (void 0 !== n) {
                        for (var i = 0; i < n.length; i += 1)
                            if (n[i] === t || n[i].listener === t) {
                                n.splice(i, 1);
                                break
                            }
                        0 === n.length && this.removeAllListeners(e)
                    }
                    return this
                }
            }, {
                key: "removeAllListeners",
                value: function(e) {
                    try {
                        delete this._events[e]
                    } catch (t) {}
                    return this
                }
            }, {
                key: "listeners",
                value: function(e) {
                    try {
                        return this._events[e]
                    } catch (t) {}
                }
            }, {
                key: "emit",
                value: function() {
                    var e = [].slice.call(arguments, 0),
                        t = e.shift(),
                        n = this._events[t];
                    if (void 0 !== n) {
                        n = n.slice(0);
                        for (var i = n.length, r = 0; i > r; r += 1) n[r].apply(this, e)
                    }
                    return this
                }
            }]), e
        }();
    t["default"] = r, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = n(15),
        l = i(u),
        c = n(16),
        h = i(c),
        d = n(63),
        f = i(d),
        p = n(13),
        m = i(p),
        v = n(25),
        g = i(v),
        y = n(21),
        _ = i(y),
        x = n(26),
        b = i(x),
        w = n(119),
        T = i(w),
        E = n(166),
        S = i(E),
        M = n(197),
        P = i(M),
        A = n(202),
        C = i(A),
        R = n(245),
        L = i(R),
        O = n(255),
        k = i(O),
        D = n(285),
        F = i(D),
        B = n(58),
        I = void 0,
        U = 0,
        N = 0;
    Object.size = function(e) {
        var t, n = 0;
        for (t in e) e.hasOwnProperty(t) && n++;
        return n
    }, Array.prototype.diff = function(e) {
        return this.filter(function(t) {
            return e.indexOf(t) < 0
        })
    };
    var z = function(e) {
        function t() {
            r(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, "experiences", null), this.stop = !1, this.isProjectSelected = !1, this._binds.CTASelectProject = this._CTASelectProject.bind(this), this._binds.CTAUnselectProject = this._CTAUnselectProject.bind(this), this._binds.CTAMobileUp = this._CTAMobileUp.bind(this), this._binds.CTAMobileDown = this._CTAMobileDown.bind(this), this._binds.loop = this._loop.bind(this), _["default"].on("experiences:unselect", this._binds.CTAUnselectProject)
        }
        return o(t, e), a(t, [{
            key: "register",
            value: function() {
                var e = this;
                this._xpsCollection = {}, this._xpsCollection[l["default"].THINK] = new T["default"], this._xpsCollection[l["default"].IMAGINE] = new S["default"], this._xpsCollection[l["default"].WORK_HARD] = new P["default"], this._xpsCollection[l["default"].DREAM_BIG] = new L["default"], this._xpsCollection[l["default"].STRIVE] = new C["default"], this._xpsCollection[l["default"].PROUD] = new k["default"], this._xpsCollection[l["default"].PULSE] = new F["default"];
                var t = 0,
                    n = [],
                    i = function(i) {
                        n.push(new Promise(function(n, r) {
                            TweenMax.delayedCall(t += .5, function() {
                                e._xpsCollection[i].register(), n()
                            })
                        }))
                    };
                for (var r in this._xpsCollection) i(r);
                return Promise.all(n)
            }
        }, {
            key: "load",
            value: function(e, n) {
                e.xp && (I = e.xp), s(Object.getPrototypeOf(t.prototype), "load", this).call(this, e, n);
                var i = JSON.parse(JSON.stringify(h["default"].experiences));
                this.experiences = i.slice(), this.experiencesRemaining = i.slice(), this.experiencesVisited = [], this.countExperiencesVisited = 0, this._currentXp = null, this._toggleXpIdx = 0, this.timestamp = 0, this.isMouseDown = !1, this.isHoldState = !1, this.progressBar = this.dom.querySelector(".experience-progress-bar"), this.btMobileSwitchXp = this.dom.querySelector(".experience-text-holder"), this.underlineText = document.getElementsByClassName("experience-underline-text")[0], this.hold = document.getElementById("experience-hold"), this.release = document.getElementById("experience-release"), this.tuto = document.querySelector(".experience-tuto-holder");
                var r = this.tuto.querySelector("h2");
                r.innerHTML = BrowserDetect.isDesktop ? "move your mouse" : "touch your screen", this.underlineText.style.display = "none", this.hold.style.display = "none", this.release.style.display = "block", n()
            }
        }, {
            key: "unload",
            value: function() {
                s(Object.getPrototypeOf(t.prototype), "unload", this).call(this)
            }
        }, {
            key: "bindEvents",
            value: function() {
                h["default"].debugXp || window.addEventListener(m["default"].UP, this._binds.CTASelectProject)
            }
        }, {
            key: "unbindEvents",
            value: function() {
                h["default"].debugXp || (h["default"].longPressActivated ? (window.removeEventListener(m["default"].DOWN, this._binds.CTAUnselectProject), window.removeEventListener(m["default"].UP, this._binds.CTASelectProject)) : window.removeEventListener(m["default"].DOWN, this._binds.CTASelectProject))
            }
        }, {
            key: "bindDOMElements",
            value: function() {
                s(Object.getPrototypeOf(t.prototype), "bindDOMElements", this).call(this)
            }
        }, {
            key: "show",
            value: function() {
                var e = this,
                    n = arguments.length <= 0 || void 0 === arguments[0] ? null : arguments[0],
                    i = arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1];
                s(Object.getPrototypeOf(t.prototype), "show", this).call(this, n, i), I ? this._currentXp ? this.unselectXp(function() {
                    e._toggleXpIdx = e.experiences.indexOf(I), e.selectXp()
                }) : (this._toggleXpIdx = this.experiences.indexOf(I), this.selectXp()) : (this.stop = !1, this.toggle())
            }
        }, {
            key: "hide",
            value: function() {
                var e = this,
                    n = arguments.length <= 0 || void 0 === arguments[0] ? null : arguments[0],
                    i = arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1];
                s(Object.getPrototypeOf(t.prototype), "hide", this).call(this, n, function() {
                    e.stop = !0, window.cancelAnimationFrame(e.toggle.bind(e)), i && i()
                })
            }
        }, {
            key: "toggle",
            value: function() {
                if (this.stop !== !0) {
                    if (N = (new Date).getTime() - U, N >= 100 && (U = (new Date).getTime(), N = 0, this.experiences.length)) {
                        for (var e = 0; e < this.experiences.length; e++) {
                            var t = this.experiences[e];
                            this._xpsCollection[t].hide()
                        }
                        this._toggleXpIdx === this.experiences.length - 1 ? this._toggleXpIdx = 0 : this._toggleXpIdx++, this._xpsCollection[this.experiences[this._toggleXpIdx]].show()
                    }
                    window.requestAnimationFrame(this.toggle.bind(this))
                }
            }
        }, {
            key: "selectXp",
            value: function() {
                var e = this;
                if (this.stop = !0, h["default"].oneXp) this._currentXp = this.experiences[this._toggleXpIdx];
                else {
                    var t = this.experiencesRemaining[Math.floor(Math.random() * this.experiencesRemaining.length)];
                    this._toggleXpIdx = this.experiences.indexOf(t)
                }
                if (this._toggleXpIdx < 0 && (this.experiences.push(l["default"].PULSE), this._toggleXpIdx = this.experiences.length - 1), this._currentXp = this.experiences[this._toggleXpIdx], this._xpsCollection[this._currentXp]) {
                    for (var t in this._xpsCollection) this._xpsCollection[t].hide();
                    this._xpsCollection[this._currentXp].isLoaded ? (this._xpsCollection[this._currentXp].show(), this._xpsCollection[this._currentXp].active(), ga && ga("send", "pageview", {
                        page: this._currentXp
                    }), this._currentXp !== l["default"].PULSE && this.onMouseCenter(!0)) : this._xpsCollection[this._currentXp].load(function() {
                        e._xpsCollection[e._currentXp].show(), e._xpsCollection[e._currentXp].active(), ga && ga("send", "pageview", {
                            page: e._currentXp
                        }), e._currentXp !== l["default"].PULSE && e.onMouseCenter(!0)
                    })
                }
            }
        }, {
            key: "unselectXp",
            value: function() {
                var e = this,
                    t = arguments.length <= 0 || void 0 === arguments[0] ? null : arguments[0];
                this._currentXp = this.experiences[this._toggleXpIdx], this._xpsCollection[this._currentXp] && this._xpsCollection[this._currentXp].inactive(function() {
                    if (e._xpsCollection[e._currentXp].reset(), e._currentXp === l["default"].PULSE) return void _["default"].emit("gui:views", "home", {
                        isEnd: !0
                    });
                    e.experiences.indexOf(e._currentXp);
                    e.experiencesVisited.push(e._currentXp), e.experiencesRemaining = e.experiences.diff(e.experiencesVisited), e._currentXp = null, e._toggleXpIdx = 0, U = (new Date).getTime(), t ? t() : (e.stop = !1, e.toggle())
                })
            }
        }, {
            key: "_CTASelectProject",
            value: function(e) {
                e && e.preventDefault(), this.release.style.display = "none", this.isProjectSelected = !this.isProjectSelected, this.isProjectSelected ? this.selectXp() : this.unselectXp()
            }
        }, {
            key: "_CTAUnselectProject",
            value: function(e) {
                e && e.preventDefault(), this.isProjectSelected = !1, this.unselectXp()
            }
        }, {
            key: "_startLoading",
            value: function() {
                var e = this,
                    t = [],
                    n = 0,
                    i = Object.size(this._xpsCollection),
                    r = function(r) {
                        t.push(new Promise(function(t, o) {
                            e._xpsCollection[r].load(function(e) {
                                n += 1, e.isLoaded = !0, _["default"].emit(g["default"].PROGRESS_LOADING, {
                                    progress: n,
                                    total: i
                                }), t()
                            })
                        }))
                    };
                for (var o in this._xpsCollection) r(o);
                f["default"].all([t])
            }
        }, {
            key: "_CTAMobileUp",
            value: function(e) {
                this.isMouseDown = !1, this.isHoldState && (this.isHoldState = !1, this.hold.style.display = "none", this.release.style.display = "none", this.progressBar.style.width = "0%", this.onMouseCenter())
            }
        }, {
            key: "_CTAMobileDown",
            value: function(e) {
                var t = this;
                e.preventDefault(), this.timestamp = (new Date).getTime(), this.isMouseDown = !0, this.isHoldState = !0, this.underlineText.classList.remove("experience-underline-text-anim"), TweenMax.to(this.underlineText, .4, {
                    opacity: 0,
                    y: -10,
                    onComplete: function() {
                        t.underlineText.style.display = "none"
                    }
                }), this.hold.style.display = "block", TweenMax.fromTo(this.hold, .4, {
                    opacity: 0,
                    y: 10
                }, {
                    opacity: 1,
                    y: 0
                }), this._binds.loop()
            }
        }, {
            key: "onMouseCenter",
            value: function() {
                var e = this,
                    t = arguments.length <= 0 || void 0 === arguments[0] ? !1 : arguments[0];
                window.removeEventListener(m["default"].UP, this._binds.CTASelectProject), this.underlineText.classList.contains("experience-underline-text-anim") && this.underlineText.classList.remove("experience-underline-text-anim"), t ? this.showTuto(function() {
                    e.showInstructions(1, function() {
                        e.activeEvents()
                    })
                }) : this.showInstructions(0)
            }
        }, {
            key: "activeEvents",
            value: function() {
                BrowserDetect.isDesktop ? (window.addEventListener(m["default"].DOWN, this._binds.CTAMobileDown), window.addEventListener(m["default"].UP, this._binds.CTAMobileUp)) : (this.btMobileSwitchXp.addEventListener(m["default"].UP, this._binds.CTAMobileUp), this.btMobileSwitchXp.addEventListener(m["default"].DOWN, this._binds.CTAMobileDown))
            }
        }, {
            key: "showTuto",
            value: function(e) {
                var t = this;
                this.tuto.style.display = "block", TweenMax.fromTo(this.tuto, .4, {
                    opacity: 0,
                    y: 10
                }, {
                    opacity: 1,
                    y: 0
                }), TweenMax.to(this.tuto, .4, {
                    opacity: 0,
                    y: 10,
                    delay: 2,
                    onComplete: function() {
                        t.tuto.style.display = "none", e()
                    }
                })
            }
        }, {
            key: "showInstructions",
            value: function(e, t) {
                var n = this;
                this.underlineText.style.display = "block", TweenMax.fromTo(this.underlineText, .4, {
                    opacity: 0,
                    y: 10
                }, {
                    opacity: 1,
                    y: 0,
                    delay: e,
                    onComplete: function() {
                        n.underlineText.classList.add("experience-underline-text-anim"), t && t()
                    }
                }, Quint.easeOut)
            }
        }, {
            key: "_loop",
            value: function() {
                var e = this;
                if (this.isMouseDown) {
                    var t = (new Date).getTime(),
                        n = (t - this.timestamp) / 1e3,
                        i = n / 1.5;
                    1 > i ? ((0, B.frame)(this._binds.loop), this.progressBar.style.width = 100 * i + "%") : (this.isHoldState = !1, TweenMax.to(this.hold, .4, {
                        opacity: 0,
                        y: -10,
                        onComplete: function() {
                            e.hold.style.display = "none"
                        }
                    }), this.release.style.display = "block", TweenMax.fromTo(this.release, .4, {
                        y: 10,
                        opacity: 0
                    }, {
                        y: 0,
                        opacity: 1
                    }), this.progressBar.style.width = "0%", this._binds.CTAUnselectProject(), window.removeEventListener(m["default"].UP, this._binds.CTAMobileUp), BrowserDetect.isDesktop ? window.removeEventListener(m["default"].DOWN, this._binds.CTAMobileDown) : (this.btMobileSwitchXp.removeEventListener(m["default"].UP, this._binds.CTAMobileUp), this.btMobileSwitchXp.removeEventListener(m["default"].DOWN, this._binds.CTAMobileDown)), window.addEventListener(m["default"].UP, this._binds.CTASelectProject))
                }
            }
        }]), t
    }(b["default"]);
    t["default"] = z, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = n(26),
        l = i(u),
        c = n(120),
        h = i(c),
        d = function(e) {
            function t() {
                r(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, "think", null), this.dom = document.getElementById(this.domId)
            }
            return o(t, e), a(t, [{
                key: "register",
                value: function() {
                    var e = this.dom.querySelector("canvas");
                    return this.renderer = new h["default"](e), {}
                }
            }, {
                key: "load",
                value: function(e) {
                    var t = this;
                    this.renderer.load().then(function() {
                        e(t)
                    })
                }
            }, {
                key: "active",
                value: function() {
                    this.renderer.play()
                }
            }, {
                key: "inactive",
                value: function(e) {
                    this.renderer.stop(), e && e()
                }
            }, {
                key: "reset",
                value: function() {
                    this.renderer.reset()
                }
            }, {
                key: "show",
                value: function() {
                    this.renderer.textOnly(), this.dom.classList.remove("hide")
                }
            }, {
                key: "hide",
                value: function() {
                    this.dom.classList.add("hide")
                }
            }]), t
        }(l["default"]);
    t["default"] = d, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(58),
        s = n(121),
        u = i(s),
        l = n(139),
        c = i(l),
        h = n(144),
        d = i(h),
        f = n(63),
        p = i(f),
        m = n(112),
        v = i(m),
        g = n(152),
        y = i(g),
        _ = n(31),
        x = i(_),
        b = x["default"].vec2,
        w = function() {
            function e(t) {
                r(this, e), this.canvas = t, this.render = this._render.bind(this), this.onResize = this._onResize.bind(this), this.onLoaded = this._onLoaded.bind(this), this.lastTime = 0;
                var n = {
                        depth: !0,
                        stencil: !1,
                        antialias: !0,
                        alpha: !1,
                        premultipliedAlpha: !1,
                        preserveDrawingBuffer: !1
                    },
                    i = this.gl = t.getContext("webgl", n) || t.getContext("experimental-webgl", n);
                i.clearColor(.2, .2, .2, 1), this.width = 0, this.height = 0, this.mouse = {
                    pos: b.create(),
                    isDown: !1
                }, this.skins = new y["default"](i), this.noisebg = new v["default"](i), this.decals = new c["default"](i, this.skins), this.snake = new u["default"](i, this.skins, this.decals), this.text = new d["default"](i)
            }
            return o(e, [{
                key: "reset",
                value: function() {
                    this.snake.reset(), this.snake.restartDelay = 1
                }
            }, {
                key: "load",
                value: function() {
                    return p["default"].all([this.skins.loadNext(), this.text.load()]).then(this.onLoaded)
                }
            }, {
                key: "_onLoaded",
                value: function() {
                    window.addEventListener("resize", this.onResize), this.onResize(null), this._renderTextOnly()
                }
            }, {
                key: "play",
                value: function() {
                    this.onResize(null), this.isPlaying || (this.isPlaying = !0, this.render())
                }
            }, {
                key: "stop",
                value: function() {
                    this.snake.reset(), this.isPlaying = !1, this._renderTextOnly()
                }
            }, {
                key: "textOnly",
                value: function() {
                    this._renderTextOnly()
                }
            }, {
                key: "_render",
                value: function() {
                    if (this.isPlaying) {
                        var e = window.devicePixelRatio;
                        this.mouse.pos[0] = (a.mouse.x * e - this.width / 2) / this.height * 2, this.mouse.pos[1] = (a.mouse.y * e - this.height / 2) / this.height * 2;
                        var t = Date.now(),
                            n = (t - this.lastTime) / 1e3;
                        n > .1 && (n = 1 / 60);
                        var i = this.gl;
                        i.bindFramebuffer(i.FRAMEBUFFER, null), i.viewport(0, 0, this.width, this.height), i.clear(i.COLOR_BUFFER_BIT | i.DEPTH_BUFFER_BIT), this.noisebg.render(), this.decals.render(n, this.width, this.height), this.snake.render(n, this.mouse, this.width, this.height), this.text.render(this.width, this.height), this.snake.renderHead(this.width, this.height), this.snake.renderHeadShadow(this.width, this.height), this.snake.renderHoleEnd(this.width, this.height), this.snake.renderShadow(this.width, this.height), this.text.renderShadow(this.width, this.height), (0, a.frame)(this.render), this.lastTime = t
                    }
                }
            }, {
                key: "_renderTextOnly",
                value: function() {
                    var e = this.gl;
                    e.bindFramebuffer(e.FRAMEBUFFER, null), e.viewport(0, 0, this.width, this.height), e.clear(e.COLOR_BUFFER_BIT | e.DEPTH_BUFFER_BIT), this.noisebg.render(), this.text.render(this.width, this.height)
                }
            }, {
                key: "_onResize",
                value: function(e) {
                    var t = window.devicePixelRatio;
                    this.canvas.width = this.width = window.innerWidth * t, this.canvas.height = this.height = window.innerHeight * t
                }
            }]), e
        }();
    t["default"] = w, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e) {
        return Math.random() * e < 1
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = n(122),
        u = i(s),
        l = n(123),
        c = i(l),
        h = n(124),
        d = i(h),
        f = n(127),
        p = i(f),
        m = n(130),
        v = i(m),
        g = n(133),
        y = i(g),
        _ = n(136),
        x = i(_),
        b = n(31),
        w = i(b),
        T = n(62),
        E = (i(T), n(63)),
        S = (i(E), w["default"].vec2),
        M = S.create(),
        P = S.create(),
        A = S.create(),
        C = S.create(),
        R = S.create(),
        L = S.create(),
        O = .14,
        k = .02,
        D = k / O,
        F = Math.cos(D),
        B = Math.sin(D),
        I = 1e3,
        U = function() {
            function e(t, n, i) {
                r(this, e), this.decals = i, this.skins = n, this.gl = t, this.geom = new u["default"](t), this.head = new c["default"](t), this.prg = new d["default"](t), this.shadow = new y["default"](t), this.headPrg = new p["default"](t), this.headShadowPrg = new v["default"](t), this.holePrg = new x["default"](t), this.lastSegment = S.create(), this.texSliding = 0, this.waveAngle = 0, this.curveProgress = 0, this.curentDepth = 0, this.dampedMouse = S.create(), this.headPos = S.create(), this.headDir = S.create(), this.headMidPos = S.create(), this.firstPoint = !0, this.headPos[0] = -.083, this.headPos[1] = -.23, this.pdata = new Float64Array(4 * u["default"].MAX_ALLOC), this.pdataPtr = 0, this.stackSize = 1e3, this.isInRect = !0, this.hasSwappedDepth = !1, this.isForeground = !0, this.rewind = !1, this.rewindSpeed = 0, this.restartDelay = 1, this.wiggleAmp = .02, this.wigglePhase = 9e3, this.wiggleSpeed = .8, this.lastDecalTime = 0
            }
            return a(e, [{
                key: "reset",
                value: function() {
                    this.decals.clear(), this.geom.currentSegment = 0, this.currentSegment = 0, this.curveProgress = 0, this.isForeground = !0, this.pdataPtr = 0, this.isInRect = !0, this.hasSwappedDepth = !1, this.isForeground = !0, this.rewind = !1, this.rewindSpeed = 0, this.curentDepth = 0, this.texSliding = 0, this.waveAngle = 0, this.dampedMouse.set([0, 0]), this.headPos.set([0, 0]), this.headDir.set([0, 0]), this.headMidPos.set([0, 0]), this.firstPoint = !0, this.headPos[0] = -.083, this.headPos[1] = -.23, this.restartDelay = 0, this.wiggleAmp = .02, this.wigglePhase = 9e3, this.wiggleSpeed = .8
                }
            }, {
                key: "updatePath",
                value: function(e) {
                    if (!(this.stackSize-- < 0)) {
                        var t = e,
                            n = this.headDir,
                            i = this.headPos;
                        if (this.firstPoint) {
                            if (S.subtract(n, t, i), 0 === S.length(n) || 0 === t[0] && 0 === t[1]) return;
                            S.normalize(n, n), this.addSegment(i, n, this.isForeground), this.dampedMouse.set(i), this.firstPoint = !1
                        }
                        var r = M,
                            o = P,
                            a = A,
                            s = C,
                            l = R;
                        a[0] = -n[1], a[1] = n[0], s[0] = n[1], s[1] = -n[0], r[0] = i[0] + a[0] * O, r[1] = i[1] + a[1] * O, o[0] = i[0] + s[0] * O, o[1] = i[1] + s[1] * O;
                        var c = S.distance(r, t),
                            h = S.distance(r, t),
                            d = O >= c,
                            f = O >= h;
                        S.subtract(l, t, i);
                        var p = S.dot(l, n),
                            m = S.dot(l, a),
                            v = (p - (.1 - k)) / k;
                        if (S.scale(this.headMidPos, this.headDir, (1 - v) * k), S.subtract(this.headMidPos, this.headPos, this.headMidPos), this.curveProgress = (this.geom.currentSegment - 2 + v) / u["default"].MAX_ALLOC, .1 > p && Math.abs(m) < O) return void(.08 > p && p > 2 * -O && this.pdataPtr > 10 && this.popSegment() && this.updatePath(e));
                        var g = L;
                        if (d || f) {
                            d ? (g[0] = n[0] * F - n[1] * B, g[1] = n[0] * B + n[1] * F) : (g[0] = n[0] * F + n[1] * B, g[1] = n[0] * -B + n[1] * F), S.normalize(n, g)
                        } else {
                            S.subtract(g, t, i), S.normalize(g, g);
                            for (var y = Math.atan2(g[1], g[0]) - Math.atan2(n[1], n[0]); y > Math.PI;) y -= 2 * Math.PI;
                            for (; y < -Math.PI;) y += 2 * Math.PI;
                            y > D && (y = D), -D > y && (y = -D);
                            var _ = Math.cos(y),
                                x = Math.sin(y);
                            g[0] = n[0] * _ - n[1] * x, g[1] = n[0] * x + n[1] * _, S.normalize(n, g)
                        }
                        S.scale(g, n, k), S.add(i, i, g), this.addSegment(i, n, this.isForeground), this.updatePath(e)
                    }
                }
            }, {
                key: "addSegment",
                value: function(e, t, n) {
                    this.curveProgress = (this.geom.currentSegment + 1) / u["default"].MAX_ALLOC;
                    var i = n ? .5 - this.curveProgress / 2 : .5 + this.curveProgress / 2;
                    this.curentDepth = i, this.geom.addSegment(e, t, i);
                    var r = this.pdataPtr;
                    this.pdata[r + 0] = e[0], this.pdata[r + 1] = e[1], this.pdata[r + 2] = t[0], this.pdata[r + 3] = t[1], this.pdataPtr += 4;
                    var a = Date.now();
                    o(30) && a - this.lastDecalTime > 50 && (this.decals.add(e[0] + .05 * Math.random(), e[1] + .05 * Math.random(), 70 + 130 * Math.random()), this.lastDecalTime = a)
                }
            }, {
                key: "popSegment",
                value: function() {
                    if (0 === this.pdataPtr) return !1;
                    this.pdataPtr -= 4;
                    var e = this.pdataPtr - 4;
                    return this.headPos[0] = this.pdata[e + 0], this.headPos[1] = this.pdata[e + 1], this.headDir[0] = this.pdata[e + 2], this.headDir[1] = this.pdata[e + 3], this.geom.currentSegment--, this.headMidPos.set(this.headPos), this.curveProgress = this.geom.currentSegment / u["default"].MAX_ALLOC, !0
                }
            }, {
                key: "checkIfInRect",
                value: function() {
                    var e = Math.abs(this.headPos[0]) < .9 && Math.abs(this.headPos[1]) < .4;
                    e !== this.isInRect && (e || (this.hasSwappedDepth = !1), this.isInRect = e)
                }
            }, {
                key: "tryToSwapDepth",
                value: function() {
                    if (!this.isInRect && !this.hasSwappedDepth) {
                        var e = this.pdata,
                            t = this.pdataPtr - 120,
                            n = this.headPos[0],
                            i = this.headPos[1],
                            r = .14;
                        r *= r;
                        for (var o = !0, a = 0; t > 0 && 500 > a && o; t -= 32, a++) {
                            var s = e[t] - n,
                                u = e[t + 1] - i;
                            r > s * s + u * u && (o = !1)
                        }
                        o && (this.isForeground = !this.isForeground, this.hasSwappedDepth = !0)
                    }
                }
            }, {
                key: "startRewind",
                value: function() {
                    this.rewindTween = TweenMax.to(this, 3, {
                        wiggleSpeed: 50,
                        wigglePhase: 13e3,
                        ease: Quad.easeOut
                    })
                }
            }, {
                key: "render",
                value: function(e, t, n, i) {
                    if (this.restartDelay += e, !(this.restartDelay < 1)) {
                        M[0] = (t.pos[0] - this.dampedMouse[0]) * e * 8, M[1] = (t.pos[1] - this.dampedMouse[1]) * e * 8;
                        var r = S.length(M),
                            o = Math.min(7, Math.max(0, 200 * r));
                        if (this.dampedMouse[0] += M[0], this.dampedMouse[1] += M[1], this.waveAngle += e * this.wiggleSpeed, this.rewind) {
                            this.rewindSpeed += 3 * e, this.rewindSpeed = Math.min(13, this.rewindSpeed);
                            for (var a = 0; a < this.rewindSpeed; a++) this.popSegment();
                            this.curveProgress <= 0 && (this.rewind = !1, this.skins.loadNext(), this.rewindTween && this.rewindTween.kill(), this.reset()), this.decals.stepBack(e), o = 7
                        } else this.stackSize = 256, this.firstPoint && this.dampedMouse.set(t.pos), this.updatePath(this.dampedMouse), this.checkIfInRect(), this.tryToSwapDepth(), this.curveProgress > .016 && (this.rewind || this.startRewind(), this.rewind = !0, this.rewindSpeed = 2);
                        this.texSliding = this.curveProgress;
                        var s = this.gl;
                        this.prg.bind(), s.uniform2f(this.prg.uVPScale, i / n, 1), s.uniform1f(this.prg.uTexSliding, -this.texSliding), s.uniform1f(this.prg.uVscale, I), s.uniform1f(this.prg.uWaveAngle, this.waveAngle), s.uniform1f(this.prg.uBlurLevel, o), s.uniform2f(this.prg.uWiggle, this.wiggleAmp, this.wigglePhase), this.skins.motionTex.bind(this.prg.tTex, 0), this.geom.bind(this.prg), s.enable(s.DEPTH_TEST), this.geom.render(), s.disable(s.DEPTH_TEST)
                    }
                }
            }, {
                key: "renderHead",
                value: function(e, t) {
                    if (!(this.restartDelay < 1)) {
                        var n = this.gl;
                        this.headPrg.bind(), n.uniform2f(this.headPrg.uVPScale, t / e, 1), n.uniform1f(this.headPrg.uDepth, this.curentDepth - 1e-4);
                        var i = -this.wiggleAmp * Math.sin(this.waveAngle + this.wigglePhase * this.curveProgress) * Math.min(1, this.wigglePhase * this.curveProgress * I);
                        n.uniform1f(this.headPrg.uWave, i), n.uniform4f(this.headPrg.uPosDir, this.headMidPos[0], -this.headMidPos[1], this.headDir[0], this.headDir[1]), this.skins.headTex.bind(this.headPrg.tTex, 0), this.head.bind(this.headPrg), n.enable(n.BLEND), n.enable(n.DEPTH_TEST), n.blendFunc(n.SRC_ALPHA, n.ONE_MINUS_SRC_ALPHA), n.disable(n.CULL_FACE), this.head.render(), n.disable(n.DEPTH_TEST), n.enable(n.CULL_FACE), n.disable(n.BLEND), n.disable(n.DEPTH_TEST)
                    }
                }
            }, {
                key: "renderHoleEnd",
                value: function(e, t) {
                    if (!(this.restartDelay < 1)) {
                        var n = this.gl;
                        this.holePrg.bind(), n.uniform2f(this.holePrg.uVPScale, t / e, 1), this.skins.snakeTex.bind(this.holePrg.tTex, 0), this.head.bind(this.holePrg), n.uniform1f(this.holePrg.uTexSliding, -this.texSliding * I), n.uniform1f(this.holePrg.uDepth, .49999), n.uniform4f(this.holePrg.uPosDir, this.pdata[0], -this.pdata[1], -this.pdata[2], -this.pdata[3]), n.enable(n.POLYGON_OFFSET_FILL), n.polygonOffset(0, 1), n.enable(n.BLEND), n.enable(n.DEPTH_TEST), n.blendFunc(n.SRC_ALPHA, n.ONE_MINUS_SRC_ALPHA), n.disable(n.CULL_FACE), this.head.render(), n.disable(n.POLYGON_OFFSET_FILL), n.disable(n.DEPTH_TEST), n.disable(n.BLEND), n.disable(n.DEPTH_TEST), n.enable(n.CULL_FACE)
                    }
                }
            }, {
                key: "renderHeadShadow",
                value: function(e, t) {
                    if (!(this.restartDelay < 1)) {
                        var n = this.gl;
                        this.headShadowPrg.bind(), n.uniform2f(this.headShadowPrg.uVPScale, t / e, 1), this.head.bind(this.headShadowPrg), n.enable(n.POLYGON_OFFSET_FILL), n.polygonOffset(0, 1), n.enable(n.BLEND), n.enable(n.DEPTH_TEST), n.blendFunc(n.SRC_ALPHA, n.ONE_MINUS_SRC_ALPHA), n.disable(n.CULL_FACE), n.depthMask(!1), n.uniform1f(this.headShadowPrg.uDepth, .49999), n.uniform1f(this.headShadowPrg.uWave, 0), n.uniform4f(this.headShadowPrg.uPosDir, this.pdata[0], -this.pdata[1], -this.pdata[2], -this.pdata[3]), this.head.render();
                        var i = -this.wiggleAmp * Math.sin(this.waveAngle + this.wigglePhase * this.curveProgress);
                        n.uniform1f(this.headShadowPrg.uWave, i), n.uniform1f(this.headShadowPrg.uDepth, this.curentDepth), n.uniform4f(this.headShadowPrg.uPosDir, this.headPos[0], -this.headPos[1], this.headDir[0], this.headDir[1]), this.head.render(), n.depthMask(!0), n.disable(n.POLYGON_OFFSET_FILL), n.disable(n.DEPTH_TEST), n.disable(n.BLEND), n.disable(n.DEPTH_TEST), n.enable(n.CULL_FACE)
                    }
                }
            }, {
                key: "renderShadow",
                value: function(e, t) {
                    if (!(this.restartDelay < 1)) {
                        var n = .04,
                            i = .12;
                        this.texSliding = this.curveProgress;
                        var r = this.gl;
                        this.shadow.bind(), r.uniform2f(this.shadow.uVPScale, t / e, 1), r.uniform1f(this.shadow.uWaveAngle, this.waveAngle), r.uniform2f(this.shadow.uWiggle, this.wiggleAmp, this.wigglePhase), this.geom.bind(this.shadow), r.enable(r.POLYGON_OFFSET_FILL), r.polygonOffset(0, 1), r.enable(r.BLEND), r.enable(r.DEPTH_TEST), r.blendFunc(r.SRC_ALPHA, r.ONE_MINUS_SRC_ALPHA), r.disable(r.CULL_FACE), r.depthMask(!1), r.uniform2f(this.shadow.uVertexSliding, (i - n) / 2, (i + n) / 2), this.geom.render(), r.uniform2f(this.shadow.uVertexSliding, -(i - n) / 2, -(i + n) / 2), this.geom.render(), r.depthMask(!0), r.disable(r.POLYGON_OFFSET_FILL), r.disable(r.DEPTH_TEST), r.disable(r.BLEND), r.disable(r.DEPTH_TEST), r.enable(r.CULL_FACE)
                    }
                }
            }]), e
        }();
    t["default"] = U, e.exports = t["default"]
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = 65535,
        o = 5,
        a = new Float32Array(4 * o),
        s = 1,
        u = function() {
            function e(t) {
                n(this, e), this.gl = t, this.uvs = new Float32Array(2 * r);
                for (var i = 0; r > i; i++) {
                    var a = 4 * i,
                        u = i / r;
                    this.uvs[a + 0] = 1, this.uvs[a + 1] = u * s, this.uvs[a + 2] = -1, this.uvs[a + 3] = u * s
                }
                this.pbuffer = t.createBuffer(), t.bindBuffer(t.ARRAY_BUFFER, this.pbuffer), t.bufferData(t.ARRAY_BUFFER, 2 * r * 4 * o, t.STATIC_DRAW), this.tbuffer = t.createBuffer(), t.bindBuffer(t.ARRAY_BUFFER, this.tbuffer), t.bufferData(t.ARRAY_BUFFER, this.uvs, t.STATIC_DRAW), this.currentSegment = 0
            }
            return i(e, [{
                key: "addSegment",
                value: function(e, t, n) {
                    this.position;
                    a[0] = e[0], a[1] = -e[1], a[2] = -t[1], a[3] = -t[0], a[4] = n, a[5] = e[0], a[6] = -e[1], a[7] = -t[1], a[8] = -t[0], a[9] = n;
                    var i = this.gl,
                        r = 2 * this.currentSegment * o * 4;
                    i.bindBuffer(i.ARRAY_BUFFER, this.pbuffer), i.bufferSubData(i.ARRAY_BUFFER, r, a), this.currentSegment++
                }
            }, {
                key: "bind",
                value: function(e) {
                    var t = this.gl;
                    t.bindBuffer(t.ARRAY_BUFFER, this.pbuffer), t.enableVertexAttribArray(e.aPosition), t.vertexAttribPointer(e.aPosition, 4, t.FLOAT, !1, 4 * o, 0), t.bindBuffer(t.ARRAY_BUFFER, this.pbuffer), t.enableVertexAttribArray(e.aParams), t.vertexAttribPointer(e.aParams, 1, t.FLOAT, !1, 4 * o, 16), t.bindBuffer(t.ARRAY_BUFFER, this.tbuffer), t.enableVertexAttribArray(e.aTexCoord), t.vertexAttribPointer(e.aTexCoord, 2, t.FLOAT, !1, 0, 0)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.gl;
                    this.currentSegment > 1 && e.drawArrays(e.TRIANGLE_STRIP, 0, 2 * this.currentSegment)
                }
            }]), e
        }();
    t["default"] = u, u.VSCALE = s, u.MAX_ALLOC = r, e.exports = t["default"]
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0),
                        Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = 8,
        o = function() {
            function e(t) {
                n(this, e), this.gl = t;
                var i = new Float32Array([-1, 0, -1, 2, 1, 0, 1, 2]);
                this.vbuffer = t.createBuffer(), t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.bufferData(t.ARRAY_BUFFER, i, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, null)
            }
            return i(e, [{
                key: "bind",
                value: function(e) {
                    var t = this.gl;
                    t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.enableVertexAttribArray(e.aPosition), t.vertexAttribPointer(e.aPosition, 2, t.FLOAT, !1, r, 0)
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.gl;
                    e.drawArrays(e.TRIANGLE_STRIP, 0, 4)
                }
            }]), e
        }();
    t["default"] = o, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(125),
        c = i(l),
        h = n(126),
        d = i(h),
        f = .02,
        p = 9e3,
        m = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "aParams", "aTexCoord", "uVPScale", "uVscale", "uTexSliding", "uWaveAngle", "uBlurLevel", "uWiggle", "tTex"]);
                var n = "#define WAVE_AMP " + f + "\n";
                n += "#define WAVE_PHASE " + p.toFixed(1) + "\n", this.compile(c["default"], d["default"], n)
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = m, m.WaveAmp = f, m.WavePhase = p, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec4 aPosition; // pos/nrm\nattribute vec2 aTexCoord; // side/V\nattribute float aParams; // depth\n\nuniform mat4 uMVP;\nuniform vec2 uVPScale;\n\nuniform float uVscale;\nuniform float uTexSliding;\nuniform float uWaveAngle;\n\nuniform vec2 uWiggle; // amp,phase\n\nuniform float uBlurLevel;\n\nvarying vec4 vTexCoord;\n\n\n\n\nvoid main( void ) {\n  float woff = uWiggle.y * aTexCoord.y;\n  float waving = min( woff, 1.0 ) * uWiggle.x * sin( uWaveAngle + woff );\n  vec2 pos = aPosition.xy + aPosition.zw * ( waving -.04 * aTexCoord.x );\n  gl_Position = vec4( uVPScale * pos, aParams, 1.0 );\n\n\n  float bmin = floor( uBlurLevel );\n\n  vTexCoord.x = (-aTexCoord.x*.49+.5 +bmin) / 8.0;\n  vTexCoord.z = uBlurLevel - bmin;\n  vTexCoord.w = 1.0-vTexCoord.z;\n  vTexCoord.y = (aTexCoord.y + uTexSliding) * uVscale;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tTex;\nvarying vec4 vTexCoord;\n\nvoid main(void){\n  // gl_FragColor = vec4( fract( vTexCoord.y*1000.0), 0.0, 0.0, 1.0 );\n  // gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n\n\n  gl_FragColor =\n    vTexCoord.w * texture2D( tTex, vTexCoord.yx ) +\n    vTexCoord.z * texture2D( tTex, vTexCoord.yx + vec2( 0.0, 1.0/8.0 ) ) ;\n\n  // gl_FragColor.rgb = vec3( vTexCoord.x, vTexCoord.zw );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(128),
        c = i(l),
        h = n(129),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "uDepth", "uVPScale", "uPosDir", "uWave", "tTex"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\n\nuniform vec2 uVPScale;\nuniform vec4 uPosDir;\nuniform float uDepth;\nuniform float uWave;\n\nvarying vec2 vTexCoord;\n\n\nvoid main( void ) {\n  vec2 pos = uPosDir.xy +\n    uPosDir.wz * (uWave + .04 * aPosition.x) +\n    (uPosDir.zw)*vec2(-1.0, 1.0) * (-.04 * aPosition.y);\n  gl_Position = vec4( uVPScale * pos, uDepth, 1.0 );\n  vTexCoord = aPosition * vec2(.49, -.5 ) + vec2( .5, 1.0 );\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tTex;\nvarying vec2 vTexCoord;\n\nvoid main(void){\n  // gl_FragColor = vec4( fract( vTexCoord.y*1000.0), 0.0, 0.0, 1.0 );\n  // gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n  gl_FragColor = texture2D( tTex, vTexCoord.yx );\n  if( gl_FragColor.a < 0.05 ){\n    discard;\n  }\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(131),
        c = i(l),
        h = n(132),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "uDepth", "uVPScale", "uPosDir", "uWave"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\n\nuniform vec2 uVPScale;\nuniform vec4 uPosDir;\nuniform float uDepth;\nuniform float uWave;\n\nvarying vec2 vTexCoord;\n\n\nvoid main( void ) {\n  vec2 pos = uPosDir.xy +\n    uPosDir.wz * ( uWave + .12 * aPosition.x) +\n    (uPosDir.zw)*vec2(-1.0, 1.0) * (-.12 * aPosition.y);\n  gl_Position = vec4( uVPScale * pos, uDepth, 1.0 );\n  vTexCoord = aPosition;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nconst float SRATIO = (.04/0.12);\n\nvoid main(void){\n  float dist = length( vTexCoord );\n  dist = (dist- (.04/0.12)) / (1.0 - (.04/.12) ) * 2.0;\n  float opacity = exp( -dist*dist ) * .6;\n  gl_FragColor = vec4( 0.0, 0.0, 0.0, opacity  );\n\n}\n"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(134),
        c = i(l),
        h = n(135),
        d = i(h),
        f = n(124),
        p = i(f),
        m = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "aParams", "aTexCoord", "uVPScale", "uWaveAngle", "uWiggle", "uVertexSliding"]);
                var n = "#define WAVE_AMP " + p["default"].WaveAmp + "\n";
                n += "#define WAVE_PHASE " + p["default"].WavePhase.toFixed(1) + "\n", this.compile(c["default"], d["default"], n)
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = m, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec4 aPosition;\nattribute vec2 aTexCoord;\nattribute float aParams;\n\nuniform vec2 uVPScale;\n\nuniform vec2 uVertexSliding;\nuniform float uWaveAngle;\nuniform vec2 uWiggle; // amp,phase\n\nvarying float vSide;\n\n\nvoid main( void ) {\n\n  float woff = uWiggle.y * aTexCoord.y;\n  float waving = min( woff, 1.0 ) * uWiggle.x * sin( uWaveAngle + woff );\n  vec2 pos = aPosition.xy + aPosition.zw * ( waving + aTexCoord.x*uVertexSliding.x+uVertexSliding.y);\n  gl_Position = vec4( uVPScale * pos, aParams, 1.0 );\n  vSide = aTexCoord.x+1.0;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nvarying float vSide;\n\nvoid main(void){\n  float opacity = exp( -vSide*vSide ) * .6;\n  gl_FragColor = vec4( 0.0, 0.0, 0.0, opacity );\n  // gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(137),
        c = i(l),
        h = n(138),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "uDepth", "uVPScale", "uTexSliding", "uWave", "uPosDir"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\n\nuniform vec2 uVPScale;\nuniform vec4 uPosDir;\nuniform float uDepth;\nvarying vec2 vTexCoord;\n\n\nvoid main( void ) {\n  vec2 pos = uPosDir.xy +\n    uPosDir.wz * ( .04 * aPosition.x) +\n    (uPosDir.zw)*vec2(-1.0, 1.0) * (-.02 * aPosition.y);\n  gl_Position = vec4( uVPScale * pos, uDepth, 1.0 );\n  vTexCoord = aPosition;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tTex;\nvarying vec2 vTexCoord;\n\nuniform float uTexSliding;\n\nconst float SRATIO = (.04/0.12);\n\nvoid main(void){\n  float dist = length( vTexCoord * vec2(1.0, .5) );\n\n  float opacity = clamp( 20.0-dist*20.0, 0.0, 1.0 );\n  vec2 uvs = -vTexCoord.yx / 2.0 + vec2(0.0, .5);\n  uvs.x = uvs.x * .1 + uTexSliding;\n  gl_FragColor = vec4( texture2D( tTex, uvs).rgb, opacity  );\n\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(140),
        s = i(a),
        u = n(141),
        l = i(u),
        c = n(62),
        h = (i(c), function() {
            function e(t, n) {
                r(this, e), this.gl = t, this.skins = n, this.quad = new s["default"](t), this.prg = new l["default"](t), this.decals = []
            }
            return o(e, [{
                key: "add",
                value: function(e, t, n) {
                    var i = new f;
                    i.x = e, i.y = t, i.size = n, this.skins.getDecalColor(i.color), this.decals.unshift(i)
                }
            }, {
                key: "clear",
                value: function() {
                    this.decals.length = 0
                }
            }, {
                key: "render",
                value: function(e, t, n) {
                    var i = this.gl;
                    this.prg.bind(), this.skins.decalTex.bind(this.prg.tTex, 0), this.quad.bind(this.prg), i.disable(i.CULL_FACE), i.enable(i.BLEND), i.blendFunc(i.SRC_ALPHA, i.ONE_MINUS_SRC_ALPHA);
                    for (var r = 0; r < this.decals.length; r++) this.decals[r].step(e), this.decals[r].setup(i, this.prg, t, n), this.quad.render();
                    i.disable(i.BLEND), i.enable(i.CULL_FACE)
                }
            }, {
                key: "stepBack",
                value: function(e) {
                    0 !== this.decals.length && (this.decals[0].step(30 * -e), this.decals[0].progress < 0 && this.decals.shift())
                }
            }]), e
        }());
    t["default"] = h;
    var d = .6,
        f = function() {
            function e() {
                r(this, e), this.x = 0, this.y = 0, this.progress = 0, this.size = 250, this.color = new Float32Array(3)
            }
            return o(e, [{
                key: "step",
                value: function(e) {
                    this.progress += e / d, this.progress > 1 && (this.progress = 1)
                }
            }, {
                key: "setup",
                value: function(e, t, n, i) {
                    var r = this.size / i,
                        o = this.size / n,
                        a = this.x * (i / n),
                        s = -this.y;
                    e.uniform4f(t.uParams, a, s, o, r), e.uniform3fv(t.uColor, this.color), e.uniform1f(t.uProgress, this.progress)
                }
            }]), e
        }();
    e.exports = t["default"]
}, function(e, t) {
    "use strict";

    function n(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var i = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        r = 16,
        o = function() {
            function e(t) {
                n(this, e), this.gl = t;
                var i = new Float32Array([-1, 1, 0, 0, -1, -1, 0, 1, 1, 1, 1, 0, 1, -1, 1, 1]);
                this.vbuffer = t.createBuffer(), t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.bufferData(t.ARRAY_BUFFER, i, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, null)
            }
            return i(e, [{
                key: "bind",
                value: function(e) {
                    var t = this.gl;
                    t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer), t.enableVertexAttribArray(e.aPosition), t.vertexAttribPointer(e.aPosition, 2, t.FLOAT, !0, r, 0), e.aTexCoord > -1 && (t.enableVertexAttribArray(e.aTexCoord), t.vertexAttribPointer(e.aTexCoord, 2, t.FLOAT, !0, r, 8))
                }
            }, {
                key: "render",
                value: function() {
                    var e = this.gl;
                    e.drawArrays(e.TRIANGLE_STRIP, 0, 4)
                }
            }]), e
        }();
    t["default"] = o, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(142),
        c = i(l),
        h = n(143),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "aTexCoord", "uParams", "uColor", "uProgress", "tTex"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nuniform vec4 uParams;\n\nvarying vec2 vTexCoord;\n\n\nvoid main( void ) {\n  gl_Position = vec4( aPosition * uParams.zw + uParams.xy, 0.0, 1.0 );\n  vTexCoord = aTexCoord;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tTex;\nuniform float uProgress;\nuniform vec3 uColor;\n\nvarying vec2 vTexCoord;\n\nvoid main(void){\n  float lum =  texture2D( tTex, vTexCoord.xy ).r;\n  lum *= step( distance( vTexCoord, vec2(.5) ), uProgress );\n  gl_FragColor = vec4( uColor, lum );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(140),
        s = i(a),
        u = n(145),
        l = i(u),
        c = n(148),
        h = i(c),
        d = n(62),
        f = i(d),
        p = n(151),
        m = i(p),
        v = .9,
        g = function() {
            function e(t) {
                r(this, e), this.gl = t, this.quad = new s["default"](t), this.tex = new f["default"](t, !1, !0), this.prg = new l["default"](t), this.shadow = new h["default"](t)
            }
            return o(e, [{
                key: "load",
                value: function() {
                    return this.tex.load(m["default"])
                }
            }, {
                key: "render",
                value: function(e, t) {
                    var n = this.gl;
                    this.prg.bind(), n.uniform2f(this.prg.uVPScale, t / e * v, .5 * v), this.tex.bind(this.prg.tTex, 0), this.quad.bind(this.prg), n.enable(n.DEPTH_TEST), n.enable(n.BLEND), n.blendFunc(n.SRC_ALPHA, n.ONE_MINUS_SRC_ALPHA), this.quad.render(), n.disable(n.DEPTH_TEST), n.disable(n.BLEND)
                }
            }, {
                key: "renderShadow",
                value: function(e, t) {
                    var n = this.gl;
                    this.shadow.bind(), n.uniform2f(this.shadow.uVPScale, t / e * v, .5 * v), this.tex.bind(this.shadow.tTex, 0), this.quad.bind(this.shadow), n.enable(n.POLYGON_OFFSET_FILL), n.polygonOffset(0, -1), n.enable(n.DEPTH_TEST), n.enable(n.BLEND), n.blendFunc(n.SRC_ALPHA, n.ONE_MINUS_SRC_ALPHA), n.depthMask(!1), this.quad.render(), n.depthMask(!0), n.disable(n.POLYGON_OFFSET_FILL), n.disable(n.DEPTH_TEST), n.disable(n.BLEND)
                }
            }]), e
        }();
    t["default"] = g, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(146),
        c = i(l),
        h = n(147),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "aTexCoord", "uVPScale", "tTex"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nuniform vec2 uVPScale;\n\nvarying vec2 vTexCoord;\n\n\nvoid main( void ) {\n  gl_Position = vec4( uVPScale * aPosition.xy, .5, 1.0 );\n  vTexCoord = aTexCoord;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tTex;\nvarying vec2 vTexCoord;\n\nvoid main(void){\n  // gl_FragColor = vec4( fract( vTexCoord.y*1000.0), 0.0, 0.0, 1.0 );\n  // gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n  float lum =  texture2D( tTex, vTexCoord.xy ).r;\n  if( lum < 0.01 ){\n    discard;\n  }\n  gl_FragColor = vec4( 1.0, 1.0, 1.0, lum );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(149),
        c = i(l),
        h = n(150),
        d = i(h),
        f = function(e) {
            function t(e) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "aTexCoord", "uVPScale", "tTex"]), this.compile(c["default"], d["default"])
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, 146, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tTex;\nvarying vec2 vTexCoord;\n\nvoid main(void){\n  // gl_FragColor = vec4( fract( vTexCoord.y*1000.0), 0.0, 0.0, 1.0 );\n  // gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n  vec2 comps = texture2D( tTex, vTexCoord.xy ).rg;\n  float opacity = comps.g * (1.0-comps.r);\n  gl_FragColor = vec4( .0,.0,.0, opacity);\n}"
}, function(e, t, n) {
    e.exports = n.p + "experiences/think/assets/text.png"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e) {
        return new Float32Array([(e >> 16 & 255) / 255, (e >> 8 & 255) / 255, (255 & e) / 255])
    }

    function a(e, t, n) {
        var i = Math.random(),
            r = 1 - i;
        e[0] = r * n[0] + i * t[0], e[1] = r * n[1] + i * t[1], e[2] = r * n[2] + i * t[2]
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        u = n(153),
        l = i(u),
        c = n(62),
        h = i(c),
        d = n(63),
        f = i(d),
        p = function() {
            function e(t) {
                r(this, e), this.currentSkin = -1, this.processMotion = this._processMotion.bind(this), this.snakeTex = new h["default"](t, !1, !0), this.headTex = new h["default"](t, !0, !0), this.headTex.clamp = !0, this.decalTex = new h["default"](t, !1, !1), this.decalTex.luma = !0, this.motionTex = new l["default"](t)
            }
            return s(e, [{
                key: "loadNext",
                value: function() {
                    return this.currentSkin++, this.currentSkin >= e.list.length && (this.currentSkin = 0), this.loadSkin(e.list[this.currentSkin])
                }
            }, {
                key: "loadSkin",
                value: function(e) {
                    return this.skin = e, f["default"].all([this.snakeTex.load(e.snakeUrl).then(this.processMotion), this.headTex.load(e.headUrl), this.decalTex.load(e.decalUrl)])
                }
            }, {
                key: "getDecalColor",
                value: function(e) {
                    a(e, this.skin.c0, this.skin.c1)
                }
            }, {
                key: "_processMotion",
                value: function() {
                    this.motionTex.process(this.snakeTex)
                }
            }]), e
        }();
    t["default"] = p;
    var m = (o(854617), o(7410800), function _(e, t, n, i, a) {
            r(this, _), this.snakeUrl = e, this.headUrl = t, this.decalUrl = n, this.c0 = o(i), this.c1 = o(a)
        }),
        v = new m(n(157), n(158), n(159), 854617, 7410800),
        g = new m(n(160), n(161), n(159), 15528299, 5297401),
        y = (new m(n(162), n(161), n(163), 15528299, 5297401), new m(n(164), n(165), n(159), 9177996, 12643327));
    p.list = [v, y, g], e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(140),
        s = i(a),
        u = n(154),
        l = i(u),
        c = n(93),
        h = i(c),
        d = 64,
        f = 8,
        p = function() {
            function e(t) {
                r(this, e), this.gl = t, this.kernel = new Float32Array(2 * d), this.geom = new s["default"](t), this.prg = new l["default"](t, d), this.texId = null
            }
            return o(e, [{
                key: "process",
                value: function(e) {
                    var t = this.gl,
                        n = new h["default"](this.gl, !0);
                    n.allocate(e.width, e.height * f), n.bind(), this.texId = n.color, this.prg.bind(), this.geom.bind(this.prg), e.bind(this.prg.tTex, 0);
                    for (var i = 0; f > i; i++) this.computeKernel(.01 * i), t.uniform2fv(this.prg.uKernel, this.kernel), t.uniform4f(this.prg.uTransform, 0, i / f * 2 - 1 + 1 / f, 1, 1 / f), this.geom.render();
                    t.bindTexture(t.TEXTURE_2D, this.texId), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.REPEAT), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.REPEAT)
                }
            }, {
                key: "bind",
                value: function(e, t) {
                    var n = this.gl;
                    n.activeTexture(n.TEXTURE0 + t), n.bindTexture(n.TEXTURE_2D, this.texId), n.uniform1i(e, t)
                }
            }, {
                key: "computeKernel",
                value: function(e) {
                    for (var t, n, i, r = this.kernel, o = Math.sqrt(Math.PI), a = 0, s = 0; d > s; ++s) i = 2 * s, t = 2 * s / (d - 1) - 1, n = 4 * t, n = Math.exp(-n * n / 2) / o, a += n, r[i] = t * e, r[i + 1] = n;
                    for (s = 0; d > s; ++s) r[2 * s + 1] /= a
                }
            }]), e
        }();
    t["default"] = p, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        s = n(49),
        u = i(s),
        l = n(155),
        c = i(l),
        h = n(156),
        d = i(h),
        f = function(e) {
            function t(e, n) {
                r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e, ["aPosition", "aTexCoord", "uTransform", "uKernel", "tTex"]);
                var i = "#define KERNEL_SIZE " + n;
                this.compile(c["default"], d["default"], i)
            }
            return o(t, e), t
        }(u["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nuniform vec4 uTransform;\n\nvarying vec2 vTexCoord;\n\n\nvoid main( void ) {\n  gl_Position = vec4( aPosition * uTransform.zw + uTransform.xy, 0.0, 1.0 );\n  vTexCoord = aTexCoord;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\n#ifndef KERNEL_SIZE\n  #define KERNEL_SIZE 16\n#endif\n\nprecision highp float;\n\nuniform sampler2D tTex;\nuniform vec2  uKernel[KERNEL_SIZE];\n\nvarying vec2 vTexCoord;\n\n\nvoid main(void){\n  vec3 color = vec3( 0.0 );\n\n  for( int i=0;i< KERNEL_SIZE;i++){\n    float weight = uKernel[i].y;\n    color += weight * texture2D( tTex, vTexCoord + vec2( uKernel[i].x, 0.0 ) ).rgb;\n  }\n\n  gl_FragColor = vec4( color, 1.0 );\n}"
}, function(e, t, n) {
    e.exports = n.p + "experiences/think/assets/skin1/snake-tex.png"
}, function(e, t, n) {
    e.exports = n.p + "experiences/think/assets/skin1/head.png"
}, function(e, t, n) {
    e.exports = n.p + "experiences/think/assets/skin1/decal.png"
}, function(e, t, n) {
    e.exports = n.p + "experiences/think/assets/skin2/snake-tex.png"
}, function(e, t, n) {
    e.exports = n.p + "experiences/think/assets/skin2/head.png"
}, function(e, t, n) {
    e.exports = n.p + "experiences/think/assets/skin3/snake-tex.png"
}, function(e, t, n) {
    e.exports = n.p + "experiences/think/assets/skin2/decal.png"
}, function(e, t, n) {
    e.exports = n.p + "experiences/think/assets/skin4/snake-tex.png"
}, function(e, t, n) {
    e.exports = n.p + "experiences/think/assets/skin4/head.png"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = n(26),
        l = i(u),
        c = n(167),
        h = i(c),
        d = function(e) {
            function t() {
                r(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, "imagine", null), this.dom = document.getElementById(this.domId)
            }
            return o(t, e), a(t, [{
                key: "register",
                value: function() {
                    var e = this.dom.querySelector("canvas");
                    return this.renderer = new h["default"](e), {}
                }
            }, {
                key: "load",
                value: function(e) {
                    var t = this,
                        n = this.renderer;
                    n.load().then(function() {
                        n._checkSize(), n.renderTextOnly()
                    }).then(function() {
                        e(t)
                    })
                }
            }, {
                key: "active",
                value: function() {
                    this.renderer.reset(), this.renderer.play()
                }
            }, {
                key: "inactive",
                value: function(e) {
                    this.renderer.stop(), this.renderer.renderTextOnly(), e()
                }
            }, {
                key: "reset",
                value: function() {
                    this.renderer.reset()
                }
            }, {
                key: "show",
                value: function() {
                    this.dom.classList.remove("hide");
                    var e = this.renderer;
                    e._checkSize(), e.renderTextOnly()
                }
            }, {
                key: "hide",
                value: function() {
                    this.dom.classList.add("hide")
                }
            }]), t
        }(l["default"]);
    t["default"] = d, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = n(112),
        o = i(r),
        a = n(168),
        s = i(a),
        u = n(179),
        l = i(u),
        c = n(188),
        h = i(c),
        d = n(58),
        f = n(193),
        p = i(f),
        m = n(63),
        v = i(m),
        g = (0, p["default"])({
            init: function() {
                var e = this.gl;
                this.nrmCompo = new h["default"](e), this.noiseBg = new o["default"](e), this.ribbon = new l["default"](e), this.text = new s["default"](e)
            },
            getContextOptions: function() {
                return {
                    depth: !0,
                    stencil: !1,
                    antialias: window.devicePixelRatio <= 1,
                    alpha: !1,
                    premultipliedAlpha: !1,
                    preserveDrawingBuffer: !1
                }
            },
            render: function(e) {
                var t = window.devicePixelRatio,
                    n = this.width * t,
                    i = this.height * t,
                    r = d.mouse.x / this.width * 2 - 1,
                    o = d.mouse.y / this.height * 2 - 1,
                    a = this.gl;
                this.nrmCompo.preRender(e), this.ribbon.preRender(e, n, i, r, o), a.bindFramebuffer(a.FRAMEBUFFER, null), a.viewport(0, 0, n, i), a.clear(a.COLOR_BUFFER_BIT | a.DEPTH_BUFFER_BIT), this.noiseBg.render(), this.ribbon.renderCut(e, n, i, this.nrmCompo.fbo.color), this.ribbon.renderDetached(e, n, i, this.noiseBg), this.ribbon.renderShadow(e, n, i), this.text.render(n, i)
            },
            resize: function(e, t) {
                var n = window.devicePixelRatio;
                this.canvas.width = e * n, this.canvas.height = t * n
            }
        });
    g.prototype.load = function() {
        return v["default"].all([this.text.load(), this.nrmCompo.load()])
    }, g.prototype.renderTextOnly = function() {
        var e = window.devicePixelRatio,
            t = this.width * e,
            n = this.height * e,
            i = this.gl;
        i.bindFramebuffer(i.FRAMEBUFFER, null), i.viewport(0, 0, t, n), i.clear(i.COLOR_BUFFER_BIT | i.DEPTH_BUFFER_BIT), this.noiseBg.render(), this.text.render(t, n)
    }, g.prototype.reset = function() {}, t["default"] = g, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(169),
        s = i(a),
        u = n(172),
        l = i(u),
        c = n(173),
        h = i(c),
        d = n(174),
        f = i(d),
        p = n(175),
        m = i(p),
        v = .9,
        g = function() {
            function e(t) {
                r(this, e), this.gl = t, this.quad = new s["default"](t), this.prg = new h["default"](t), this.prg.compile(n(177), n(178)), this.tex = new f["default"](t, t.LUMINANCE), this.tex.bind(), t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL, !0)
            }
            return o(e, [{
                key: "load",
                value: function() {
                    return m["default"].load(this.tex, l["default"])
                }
            }, {
                key: "render",
                value: function(e, t) {
                    var n = this.gl;
                    this.prg.use(), this.quad.attribPointer(this.prg), this.prg.tTex(this.tex), this.prg.uVPScale(t / e * v, .5 * v), n.enable(n.BLEND), n.blendFunc(n.SRC_ALPHA, n.ONE_MINUS_SRC_ALPHA), this.quad.draw(), n.disable(n.BLEND)
                }
            }]), e
        }();
    t["default"] = g, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(170),
        s = i(a),
        u = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]),
        l = function() {
            function e(t) {
                r(this, e), this.vbuffer = new s["default"](t, u), this.vbuffer.attrib("aPosition", 2, t.FLOAT)
            }
            return o(e, [{
                key: "attribPointer",
                value: function(e) {
                    this.vbuffer.attribPointer(e)
                }
            }, {
                key: "draw",
                value: function() {
                    this.vbuffer.drawTriangleStrip()
                }
            }]), e
        }();
    t["default"] = l, e.exports = t["default"]
}, function(e, t, n) {
    function i(e, t, n) {
        this.gl = e, this.usage = n || e.STATIC_DRAW, this.buffer = e.createBuffer(), this._attribs = [], this._stride = 0, this.byteLength = 0, this.length = 0, t && this.data(t)
    }
    var r = n(171),
        o = 34962;
    i.prototype = {
        bind: function() {
            this.gl.bindBuffer(o, this.buffer)
        },
        attrib: function(e, t, n, i) {
            return this._attribs.push({
                name: e,
                type: 0 | n,
                size: 0 | t,
                normalize: !!i,
                offset: this._stride
            }), this._stride += r.getComponentSize(n) * t, this.length = this.byteLength / this._stride, this
        },
        data: function(e) {
            var t = this.gl;
            t.bindBuffer(o, this.buffer), t.bufferData(o, e, this.usage), t.bindBuffer(o, null), this.byteLength = e.byteLength, this._stride > 0 && (this.length = this.byteLength / this._stride)
        },
        subData: function(e, t) {
            var n = this.gl;
            n.bindBuffer(o, this.buffer), n.bufferSubData(o, t, e), n.bindBuffer(o, null)
        },
        attribPointer: function(e) {
            var t = this.gl;
            t.bindBuffer(o, this.buffer);
            for (var n = 0; n < this._attribs.length; n++) {
                var i = this._attribs[n];
                if (void 0 !== e[i.name]) {
                    var r = e[i.name]();
                    t.enableVertexAttribArray(r), t.vertexAttribPointer(r, i.size, i.type, i.normalize, this._stride, i.offset)
                }
            }
        },
        draw: function(e, t, n) {
            t = void 0 === t ? this.length : t, n = void 0 === n ? 0 : n, this.gl.drawArrays(e, n, t)
        },
        dispose: function() {
            this.gl.deleteBuffer(this.buffer), this.buffer = null, this.gl = null
        }
    }, r.createDrawFunctions(i.prototype), e.exports = i
}, function(e, t) {
    e.exports = {
        getComponentSize: function(e) {
            switch (e) {
                case 5120:
                case 5121:
                    return 1;
                case 5122:
                case 5123:
                    return 2;
                case 5124:
                case 5125:
                case 5126:
                    return 4;
                default:
                    return 0
            }
        },
        createDrawFunctions: function(e) {
            e.drawPoints = function(e, t) {
                this.draw(this.gl.POINTS, e, t)
            }, e.drawLineStrip = function(e, t) {
                this.draw(this.gl.LINE_STRIP, e, t)
            }, e.drawLineLoop = function(e, t) {
                this.draw(this.gl.LINE_LOOP, e, t)
            }, e.drawLines = function(e, t) {
                this.draw(this.gl.LINES, e, t)
            }, e.drawTriangleStrip = function(e, t) {
                this.draw(this.gl.TRIANGLE_STRIP, e, t)
            }, e.drawTriangleFan = function(e, t) {
                this.draw(this.gl.TRIANGLE_FAN, e, t)
            }, e.drawTriangles = function(e, t) {
                this.draw(this.gl.TRIANGLES, e, t)
            }
        }
    }
}, function(e, t, n) {
    e.exports = n.p + "experiences/imagine/assets/text.png"
}, function(e, t) {
    function n(e, t) {
        return d[String(t + 1).length] + (t + 1) + ": " + e
    }

    function i(e) {
        e.split("\n").map(n).join("\n")
    }

    function r(e) {
        return e = String(e), "uniform" + f[e]
    }

    function o(e, t, n, i) {
        switch (e) {
            case n.FLOAT_MAT2:
            case n.FLOAT_MAT3:
            case n.FLOAT_MAT4:
                return s(e, t, n, i);
            case n.SAMPLER_2D:
            case n.SAMPLER_CUBE:
                return u(e, t, n, i);
            default:
                return a(e, t, n, i)
        }
    }

    function a(e, t, n, i) {
        var o = r(e);
        return function() {
            return 1 === arguments.length && void 0 !== arguments[0].length ? n[o + "v"](t, arguments[0]) : arguments.length > 0 && n[o].apply(n, Array.prototype.concat.apply(t, arguments)), t
        }
    }

    function s(e, t, n, i) {
        var o = r(e);
        return function() {
            return arguments.length > 0 && void 0 !== arguments[0].length && n[o + "v"](t, !!arguments[1], arguments[0]), t
        }
    }

    function u(e, t, n, i) {
        var r = i.texIndex++;
        return function() {
            return 1 === arguments.length && (void 0 !== arguments[0].bind ? (arguments[0].bind(r), n.uniform1i(t, r)) : n.uniform1i(t, arguments[0])), t
        }
    }

    function l(e) {
        return function() {
            return e
        }
    }

    function c(e, t, n) {
        return e.shaderSource(t, n), e.compileShader(t), e.getShaderParameter(t, e.COMPILE_STATUS) ? !0 : (h.warn(e.getShaderInfoLog(t)), h.warn(i(n)), !1)
    }

    function h(e) {
        this.gl = e, this.program = e.createProgram(), this.vShader = e.createShader(e.VERTEX_SHADER), this.fShader = e.createShader(e.FRAGMENT_SHADER), e.attachShader(this.program, this.vShader), e.attachShader(this.program, this.fShader)
    }
    var d = ["", "   ", "  ", " ", ""],
        f = {};
    f[String(5126)] = "1f", f[String(35664)] = "2f", f[String(35665)] = "3f", f[String(35666)] = "4f", f[String(35667)] = "2i", f[String(35668)] = "3i", f[String(35669)] = "4i", f[String(35670)] = "1i", f[String(35671)] = "2i", f[String(35672)] = "3i", f[String(35673)] = "4i", f[String(35674)] = "Matrix2f", f[String(35675)] = "Matrix3f", f[String(35676)] = "Matrix4f", f[String(5124)] = "1i", f[String(35678)] = "1i", f[String(35680)] = "1i", h.verbose = !0, h.prototype = {
        use: function() {
            this.gl.useProgram(this.program)
        },
        compile: function(e, t, n) {
            n = (n || "") + "\n";
            var i = this.gl;
            return c(i, this.fShader, n + t) && c(i, this.vShader, n + e) ? (i.linkProgram(this.program), i.getProgramParameter(this.program, i.LINK_STATUS) ? (this._grabParameters(), !0) : (h.warn(i.getProgramInfoLog(this.program)), !1)) : !1
        },
        dispose: function() {
            this.gl.deleteProgram(this.program), this.gl.deleteShader(this.Shader), this.gl.deleteShader(this.Shader)
        },
        _grabParameters: function() {
            for (var e = this.gl, t = this.program, n = e.getProgramParameter(t, e.ACTIVE_UNIFORMS), i = {
                    texIndex: 0
                }, r = 0; n > r; ++r) {
                var a = e.getActiveUniform(t, r);
                if (null !== a) {
                    var s = a.name,
                        u = s.indexOf("["),
                        c = 1;
                    u >= 0 && (c = parseInt(s.substring(u + 1, s.indexOf("]"))), s = s.substring(0, u));
                    var h = e.getUniformLocation(t, a.name);
                    this[s] = o(a.type, h, e, i)
                } else e.getError()
            }
            for (var d = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES), f = 0; d > f; ++f) {
                var p = e.getActiveAttrib(t, f).name,
                    m = e.getAttribLocation(t, p);
                this[p] = l(m)
            }
        }
    }, h.prototype.bind = h.prototype.use, h.warn = function(e) {
        h.verbose && console.warn(e)
    }, e.exports = h
}, function(e, t) {
    function n(e, t, n) {
        return 9728 | +e | +t << 8 | +(t && n) << 1
    }

    function i(e, t) {
        this._uid = r++, this.gl = e, this.id = this.gl.createTexture(), this.width = 0, this.height = 0, this.format = t || e.RGB, this.type = e.UNSIGNED_BYTE, e.bindTexture(e.TEXTURE_2D, this.id), this.setFilter(!0), this.clamp(), e.bindTexture(e.TEXTURE_2D, null)
    }
    var r = 0;
    i.prototype = {
        fromImage: function(e) {
            var t = this.gl;
            this.width = e.width, this.height = e.height, t.bindTexture(t.TEXTURE_2D, this.id), t.texImage2D(t.TEXTURE_2D, 0, this.format, this.format, this.type, e), t.bindTexture(t.TEXTURE_2D, null)
        },
        fromData: function(e, t, n, i) {
            var r = this.gl;
            this.width = e, this.height = t, n = n || null, this.type = i || r.UNSIGNED_BYTE, r.bindTexture(r.TEXTURE_2D, this.id), r.texImage2D(r.TEXTURE_2D, 0, this.format, e, t, 0, this.format, this.type, n), r.bindTexture(r.TEXTURE_2D, null)
        },
        bind: function(e) {
            var t = this.gl;
            void 0 !== e && t.activeTexture(t.TEXTURE0 + (0 | e)), t.bindTexture(t.TEXTURE_2D, this.id)
        },
        dispose: function() {
            this.gl.deleteTexture(this.id), this.id = null, this.gl = null
        },
        setFilter: function(e, t, i) {
            var r = this.gl;
            e = !!e, t = !!t, i = !!i;
            var o = n(e, t, i);
            r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MAG_FILTER, n(e, !1, !1)), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MIN_FILTER, o)
        },
        repeat: function() {
            this.wrap(this.gl.REPEAT)
        },
        clamp: function() {
            this.wrap(this.gl.CLAMP_TO_EDGE)
        },
        mirror: function() {
            this.wrap(this.gl.MIRRORED_REPEAT)
        },
        wrap: function(e) {
            var t = this.gl;
            t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, e), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, e)
        }
    }, e.exports = i
}, function(e, t, n) {
    function i() {
        if ("undefined" != typeof a && a.defer) return a.defer();
        var e = {
            resolve: null,
            reject: null
        };
        return e.promise = new a(function(t, n) {
            e.resolve = t, e.reject = n
        }.bind(e)), Object.freeze(e), e
    }

    function r(e) {
        var t = s[e._uid];
        t && (t.img.onload = t.img.onerror = null, t.img.src = "", t.defer.reject(e)), delete s[e._uid]
    }

    function o(e) {
        return e.fromImage(s[e._uid].img), r(e), e
    }
    var a = n(176),
        s = {},
        u = {};
    u.load = function(e, t) {
        r(e);
        var n = i(),
            a = new Image;
        return a.onload = function() {
            n.resolve(e)
        }, a.onerror = function() {
            n.reject(e), r(e)
        }, a.crossorigin = "anonymous", a.src = t, s[e._uid] = {
            texture: e,
            img: a,
            defer: n
        }, n.promise.then(o), n.promise
    }, e.exports = u
}, function(e, t, n) {
    (function(t) { /** @license MIT License (c) copyright 2010-2014 original author or authors */
        var i = n(79),
            r = i(n(81));
        e.exports = "undefined" != typeof t ? t.Promise = r : "undefined" != typeof self ? self.Promise = r : r
    }).call(t, function() {
        return this
    }())
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nattribute vec2 aPosition;\n\nuniform mat4 uMvp;\nuniform vec2 uVPScale;\n\nvarying vec2 vTexCoord;\n\nvoid main( void ){\n  gl_Position = vec4( uVPScale * aPosition.xy, .5, 1.0 );\n\n  vTexCoord = aPosition * .5 + .5;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tTex;\nvarying vec2 vTexCoord;\n\nvoid main( void ){\n  float alpha = texture2D( tTex, vTexCoord ).r;\n  gl_FragColor = vec4( 1.0, 1.0, 1.0, alpha );\n}\n"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(180),
        s = i(a),
        u = n(181),
        l = i(u),
        c = n(173),
        h = i(c),
        d = n(31),
        f = i(d),
        p = f["default"].vec2,
        m = f["default"].mat2,
        v = p.create(),
        g = p.create(),
        y = (p.create(), p.create(), m.create()),
        _ = (new Float32Array(8), function() {
            function e(t) {
                r(this, e), this.gl = t, this.lastPos = p.create(), this.currPos = p.create(), this.lastDir = p.create(), this.currDir = p.create(), this.setupGL(), this.time = 0, this.ltime = 0, this.started = !1
            }
            return o(e, [{
                key: "setupGL",
                value: function() {
                    var e = this.gl;
                    this.geom = new l["default"](e), this.prgCut = new h["default"](e), this.prgCut.compile(n(183), n(184)), this.prgDetached = new h["default"](e), this.prgDetached.compile(n(185), n(186), "#define DEPTH 0.0"), this.prgShadow = new h["default"](e), this.prgShadow.compile(n(185), n(187), "#define SHADOW_OFFSET vec2(.01,-.01)\n#define DEPTH .99"), this.gradientTex = (0, s["default"])(e)
                }
            }, {
                key: "renderCut",
                value: function(e, t, n, i) {
                    var r = this.prgCut;
                    r.use(), r.uVPScale(n / t, 1), r.uTime(this.time), r.uNormalTex(i), r.uGradTex(this.gradientTex), this.geom.prepare(r);
                    this.gl;
                    this.geom.render()
                }
            }, {
                key: "renderDetached",
                value: function(e, t, n, i) {
                    var r = this.prgDetached;
                    r.use(), r.uVPScale(n / t, 1), r.uTime(this.time), r.uNoiseParam(i.noiseParam), r.uNoiseRand(i.randomOffset), i.noiseTexture.bind(r.tNoise(), 0), this.geom.prepare(r);
                    var o = this.gl;
                    o.enable(o.DEPTH_TEST), o.depthMask(!0), this.geom.render(), o.depthMask(!1), o.disable(o.DEPTH_TEST)
                }
            }, {
                key: "renderShadow",
                value: function(e, t, n) {
                    var i = this.prgShadow;
                    i.use(), i.uVPScale(n / t, 1), i.uTime(this.time), this.geom.prepare(i);
                    var r = this.gl;
                    r.enable(r.BLEND), r.enable(r.DEPTH_TEST), r.blendFunc(r.ZERO, r.SRC_COLOR), r.depthMask(!0), this.geom.render(), r.depthMask(!1), r.disable(r.BLEND), r.disable(r.DEPTH_TEST)
                }
            }, {
                key: "preRender",
                value: function(e, t, n, i, r) {
                    this.time += e, this.ltime += e, r = -r, i *= t / n, p.set(this.currPos, i, r), this.started || (p.copy(this.lastPos, this.currPos), this.started = !0);
                    var o = v,
                        a = g;
                    p.subtract(o, this.currPos, this.lastPos);
                    var s = p.length(o),
                        u = s / this.ltime;
                    if (s > .03) {
                        var l = Math.PI / 2 + 1.3 * (Math.random() - .5);
                        m.fromRotation(y, l), p.transformMat2(a, o, y), p.normalize(a, a);
                        var c = u / 200;
                        c *= 1 + 3 * Math.random(), c += .02 * Math.random(), c = Math.min(.3, c), p.scale(this.currDir, a, c), this.geom.addQuad(this.lastPos, this.lastDir, this.currPos, this.currDir, this.time), p.copy(this.lastDir, this.currDir), p.copy(this.lastPos, this.currPos), this.ltime = 0
                    }
                    this.geom.updateRange(this.time)
                }
            }]), e
        }());
    t["default"] = _, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = n(174),
        o = i(r),
        a = new Uint8Array([160, 33, 232, 153, 21, 230, 150, 21, 230, 148, 21, 230, 146, 21, 230, 143, 21, 230, 140, 21, 230, 138, 21, 230, 135, 21, 229, 132, 21, 229, 129, 21, 229, 126, 21, 229, 123, 21, 229, 119, 21, 229, 116, 21, 228, 113, 21, 228, 110, 21, 228, 106, 21, 228, 103, 21, 228, 99, 21, 227, 96, 21, 227, 94, 21, 227, 93, 21, 227, 91, 21, 227, 89, 21, 227, 88, 21, 227, 86, 21, 226, 84, 21, 226, 83, 21, 226, 81, 21, 226, 79, 21, 226, 78, 21, 226, 76, 21, 226, 75, 21, 226, 73, 21, 226, 71, 21, 226, 70, 21, 226, 68, 21, 225, 67, 21, 225, 65, 21, 225, 64, 21, 225, 62, 21, 225, 61, 21, 225, 59, 21, 225, 58, 21, 225, 57, 21, 225, 55, 21, 225, 54, 21, 225, 53, 21, 224, 51, 21, 224, 50, 21, 224, 49, 21, 224, 48, 21, 224, 46, 21, 224, 45, 21, 224, 44, 21, 224, 43, 21, 224, 42, 21, 224, 41, 21, 224, 39, 21, 224, 38, 21, 224, 38, 21, 223, 37, 21, 223, 36, 21, 223, 35, 21, 223, 34, 21, 223, 33, 21, 223, 33, 21, 223, 32, 21, 223, 31, 21, 223, 31, 23, 223, 31, 24, 223, 31, 26, 223, 31, 27, 223, 31, 29, 223, 31, 31, 223, 31, 32, 223, 31, 34, 223, 31, 36, 223, 31, 38, 223, 31, 40, 223, 31, 42, 222, 31, 45, 222, 31, 47, 222, 31, 49, 222, 31, 52, 222, 31, 54, 222, 31, 56, 222, 31, 59, 222, 31, 61, 222, 31, 64, 222, 31, 67, 222, 31, 70, 222, 31, 73, 222, 31, 75, 222, 31, 78, 222, 31, 81, 222, 31, 84, 222, 31, 87, 222, 31, 90, 222, 31, 93, 222, 31, 96, 222, 31, 99, 222, 31, 102, 222, 31, 105, 222, 31, 108, 222, 31, 111, 222, 31, 114, 222, 31, 118, 222, 31, 120, 222, 31, 123, 222, 31, 128, 222, 31, 132, 222, 31, 137, 222, 31, 142, 222, 31, 146, 222, 31, 151, 222, 31, 156, 222, 31, 160, 222, 31, 164, 222, 32, 169, 222, 33, 174, 222, 33, 178, 222, 34, 182, 222, 34, 186, 222, 35, 190, 222, 35, 194, 222, 47, 201, 224]);
    t["default"] = function(e) {
        var t = new o["default"](e);
        return t.fromData(128, 1, a), t.bind(), t.mirror(), t
    }, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(170),
        s = i(a),
        u = n(182),
        l = i(u),
        c = 8192,
        h = 4,
        d = c / h,
        f = 8,
        p = 4 * f,
        m = new Float32Array(f * h),
        v = 3.5,
        g = function() {
            function e(t) {
                r(this, e), this.vbuffer = new s["default"](t), this.ibuffer = new l["default"](t);
                var n = c * p;
                t.bindBuffer(t.ARRAY_BUFFER, this.vbuffer.buffer), t.bufferData(t.ARRAY_BUFFER, n, this.vbuffer.usage), t.bindBuffer(t.ARRAY_BUFFER, null), this.vbuffer.byteLength = n, this.vbuffer.attrib("aCenter", 2, t.FLOAT), this.vbuffer.attrib("aDeltas", 4, t.FLOAT), this.vbuffer.attrib("aParams", 2, t.FLOAT);
                for (var i = new Uint16Array(6 * d), o = 0, a = 0; d > o; o++) {
                    var u = 4 * o;
                    i[a++] = u, i[a++] = u + 2, i[a++] = u + 1, i[a++] = u + 1, i[a++] = u + 2, i[a++] = u + 3
                }
                this.ibuffer.data(i), this.currLen = 0, this.startQuad = 0, this.endQuad = 0, this.times = []
            }
            return o(e, [{
                key: "addQuad",
                value: function(e, t, n, i, r) {
                    r += .1 * Math.random() - .05;
                    var o = this.endQuad;
                    this.endQuad++, this.endQuad > d - 1 && (this.endQuad = 0), this.times.push(r);
                    var a = .5 * (e[0] + n[0]),
                        s = .5 * (e[1] + n[1]),
                        u = n[0] - a,
                        l = n[1] - s,
                        c = 2 * Math.random() - 1;
                    m[0 * f + 0] = a, m[0 * f + 1] = s, m[0 * f + 2] = -u, m[0 * f + 3] = -l, m[0 * f + 4] = -t[0], m[0 * f + 5] = -t[1], m[0 * f + 6] = r, m[0 * f + 7] = c, m[1 * f + 0] = a, m[1 * f + 1] = s, m[1 * f + 2] = -u, m[1 * f + 3] = -l, m[1 * f + 4] = t[0], m[1 * f + 5] = t[1], m[1 * f + 6] = r, m[1 * f + 7] = c, m[2 * f + 0] = a, m[2 * f + 1] = s, m[2 * f + 2] = u, m[2 * f + 3] = l, m[2 * f + 4] = -i[0], m[2 * f + 5] = -i[1], m[2 * f + 6] = r, m[2 * f + 7] = c, m[3 * f + 0] = a, m[3 * f + 1] = s, m[3 * f + 2] = u, m[3 * f + 3] = l, m[3 * f + 4] = i[0], m[3 * f + 5] = i[1], m[3 * f + 6] = r, m[3 * f + 7] = c, this.vbuffer.subData(m, o * h * p)
                }
            }, {
                key: "updateRange",
                value: function(e) {
                    for (var t = this.startQuad, n = this.endQuad, i = this.times, r = d; t !== n && i[0] - e < -v;) i.shift(), t++, t > r && (t = 0);
                    this.startQuad = t
                }
            }, {
                key: "prepare",
                value: function(e) {
                    this.vbuffer.attribPointer(e), this.ibuffer.bind()
                }
            }, {
                key: "render",
                value: function() {
                    var e;
                    this.endQuad < this.startQuad ? (e = 6 * (d - this.startQuad), this.ibuffer.drawTriangles(6 * this.endQuad, 0), this.ibuffer.drawTriangles(e, 12 * this.startQuad)) : (e = 6 * (this.endQuad - this.startQuad), this.ibuffer.drawTriangles(e, 12 * this.startQuad))
                }
            }]), e
        }();
    t["default"] = g, e.exports = t["default"]
}, function(e, t, n) {
    function i(e, t, n, i) {
        this.gl = e, this.buffer = e.createBuffer(), this.length = 0, this.type = t || e.UNSIGNED_SHORT, this.usage = i || e.STATIC_DRAW, this.typeSize = r.getComponentSize(this.type), n && this.data(n)
    }
    var r = n(171),
        o = 34963;
    i.prototype = {
        bind: function() {
            this.gl.bindBuffer(o, this.buffer)
        },
        data: function(e) {
            var t = this.gl;
            t.bindBuffer(o, this.buffer), t.bufferData(o, e, this.usage), t.bindBuffer(o, null), this.length = e.byteLength / this.typeSize
        },
        subData: function(e, t) {
            var n = this.gl;
            n.bindBuffer(o, this.buffer), n.bufferSubData(o, t, e), n.bindBuffer(o, null)
        },
        dispose: function() {
            this.gl.deleteBuffer(this.buffer), this.buffer = null, this.gl = null
        },
        draw: function(e, t, n) {
            t = void 0 === t ? this.length : t, n = void 0 === n ? 0 : n, this.gl.drawElements(e, t, this.type, n)
        }
    }, r.createDrawFunctions(i.prototype), e.exports = i
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec4 aDeltas;\nattribute vec2 aCenter;\nattribute vec2 aParams;\n\nuniform vec2 uVPScale;\nuniform float uTime;\n\nvarying vec2 vTexCoord;\nvarying float vLighting;\n\n#define EXP_SLOPE 8.0\n#define EXP_MIDPT 1.0\n\n\nvoid main( void ){\n\n  float dt = uTime-aParams.x;\n\n  float expand = -abs( dt-EXP_MIDPT) * EXP_SLOPE + (EXP_SLOPE*EXP_MIDPT);\n  expand = clamp( expand, 0.0, 1.0 );\n\n  gl_Position.xy = uVPScale * ( aCenter.xy + aDeltas.xy + aDeltas.zw*expand );\n  gl_Position.zw = vec2( 0.0, 1.0 );\n\n  vTexCoord.xy   = 2.0 * (gl_Position.xy * .5 + .5) / uVPScale;\n\n  vLighting = aParams.y*.7 +1.2;\n\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D uNormalTex;\nuniform sampler2D uGradTex;\n\nvarying vec2 vTexCoord;\nvarying float vLighting;\n\nvoid main( void ){\n  vec2 nrm = texture2D( uNormalTex, vTexCoord ).xy;\n\n  gl_FragColor = vLighting * texture2D( uGradTex, vec2( 1.0 - (nrm.x * 5.0 - nrm.y * 5.0), .5 ) );\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\n\nattribute vec4 aDeltas;\nattribute vec2 aCenter;\nattribute vec2 aParams;\n\nuniform vec2 uVPScale;\nuniform float uTime;\n\n// Noise\nuniform vec4 uNoiseParam;\nvarying vec2 vTexCoord;\nvarying float vLighting;\n\n\n#define EXP_SLOPE 8.0\n#define EXP_MIDPT .4\n\n#ifndef DEPTH\n  #define DEPTH 0.0\n#endif\n\n\nvoid main( void ){\n\n  float dt = uTime-aParams.x;\n\n  float expand = -abs( dt-EXP_MIDPT) * EXP_SLOPE + (EXP_SLOPE*EXP_MIDPT);\n  expand = clamp( expand, 0.0, 1.0 );\n\n\n  // rotation\n  float r = dt * aParams.y * 3.0;\n  float sinR = sin(r);\n  float cosR = cos(r);\n  mat2 rm = mat2( cosR, -sinR, sinR, cosR );\n\n  // detach\n  vec2 cpos = aCenter.xy;\n  cpos += .5*(dt)*vec2(cos(aParams.y*10.0), sin(aParams.y*10.0));\n\n  #ifdef SHADOW_OFFSET\n    cpos += SHADOW_OFFSET;\n  #endif\n\n  vec2 deltaLon = rm*aDeltas.xy;\n  vec2 deltaTrv = (rm*aDeltas.zw)*expand;\n\n  gl_Position.xy = uVPScale * ( cpos + deltaLon + deltaTrv );\n  gl_Position.zw = vec2( DEPTH, 1.0 );\n\n  vTexCoord.xy   = gl_Position.xy * .5 + .5;\n  vTexCoord.y = vTexCoord.y * uNoiseParam.z;\n\n  vLighting = aParams.y+1.0;\n\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\n\nvarying vec2 vTexCoord;\nvarying float vLighting;\n\nuniform vec4 uNoiseParam;\nuniform vec2 uNoiseRand;\n\nuniform sampler2D tNoise;\n\nvoid main( void ){\n\n\n  float dist     = 0.5 - distance( vTexCoord.xy, uNoiseParam.xy );\n  float texColor = texture2D(tNoise, ( vTexCoord.xy + uNoiseRand ) * uNoiseParam.w ).r * 0.4;\n  float color     = dist * texColor + vLighting*.05;\n  gl_FragColor   = vec4( color, color, color, 1.0 );\n\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\n#define SHADOW .8\n\nvoid main( void ){\n  gl_FragColor   = vec4( SHADOW, SHADOW, SHADOW, 1.0 );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(174),
        s = i(a),
        u = n(175),
        l = i(u),
        c = n(189),
        h = i(c),
        d = n(173),
        f = i(d),
        p = n(63),
        m = i(p),
        v = n(169),
        g = i(v),
        y = n(190),
        _ = i(y),
        x = i(y),
        b = 512,
        w = function() {
            function e(t) {
                r(this, e), this.gl = t, this.time = 0, this.nrm1 = new s["default"](t), this.nrm1.bind(), this.nrm1.repeat(), this.nrm2 = new s["default"](t), this.nrm2.bind(), this.nrm2.repeat(), this.fbo = new h["default"](t, b, b), this.fbo.color.bind(), this.fbo.color.repeat(), this.geom = new g["default"](t), this.prg = new f["default"](t), this.prg.compile(n(191), n(192)), this.weights = new Float32Array(4)
            }
            return o(e, [{
                key: "preRender",
                value: function(e) {
                    this.time += e, this._computeLayerWeights(this.time), this.fbo.bind(), this.gl.clear(this.gl.COLOR_BUFFER_BIT), this.prg.use(), this.prg.tNrm1(this.nrm1), this.prg.tNrm2(this.nrm2), this.prg.uTime(this.time), this.prg.uWeights(this.weights), this.geom.attribPointer(this.prg), this.geom.draw()
                }
            }, {
                key: "_computeLayerWeights",
                value: function(e) {
                    var t = this.weights,
                        n = .5;
                    t[0] = .5 * Math.sin(1 * e) + .5 + n, t[1] = .5 * Math.sin(1.2 * e) + .5 + n, t[2] = .5 * Math.sin(.8 * e) + .5 + n, t[3] = .5 * Math.cos(.8 * e) + .5 + n;
                    var i = t[0] + t[1] + t[2] + t[3];
                    t[0] /= i, t[1] /= i, t[2] /= i, t[3] /= i
                }
            }, {
                key: "load",
                value: function() {
                    return m["default"].all([l["default"].load(this.nrm1, _["default"]), l["default"].load(this.nrm2, x["default"])])
                }
            }]), e
        }();
    t["default"] = w, e.exports = t["default"]
}, function(e, t, n) {
    function i(e, t) {
        switch (t) {
            case 1:
                return e.DEPTH_COMPONENT16;
            case 2:
                return e.STENCIL_INDEX8;
            case 3:
                return e.DEPTH_STENCIL;
            default:
                throw new Error("unknown attachment type " + t)
        }
    }

    function r(e, t) {
        switch (t) {
            case 1:
                return e.DEPTH_ATTACHMENT;
            case 2:
                return e.STENCIL_ATTACHMENT;
            case 3:
                return e.DEPTH_STENCIL_ATTACHMENT;
            default:
                throw new Error("unknown attachment type " + t)
        }
    }

    function o(e) {
        Array.isArray(e) || (e = [e]), this.formats = e, this.current = 0
    }

    function a(e, t, n, i) {
        this.gl = e, this.width = 0, this.height = 0, this.fbo = null, i = i || u, this.flags = i.depth | 2 * i.stencil, this.types = new o(i.type || e.UNSIGNED_BYTE), this.color = new s(e, i.format), this._init(), this.resize(t, n)
    }
    var s = n(174),
        u = {};
    o.prototype = {
        next: function() {
            return this.current >= this.formats.length ? 0 : this.formats[this.current++]
        },
        reset: function() {
            this.current = 0
        }
    }, a.prototype = {
        resize: function(e, t) {
            (this.width !== e || this.height !== t) && (this.width = 0 | e, this.height = 0 | t, this._allocate())
        },
        bindColor: function(e, t) {
            var n = this.gl;
            n.activeTexture(n.TEXTURE0 + t), n.bindTexture(n.TEXTURE_2D, this.color.id), n.uniform1i(e, t)
        },
        bind: function() {
            var e = this.gl;
            e.bindFramebuffer(e.FRAMEBUFFER, this.fbo), e.viewport(0, 0, this.width, this.height)
        },
        clear: function() {
            var e = this.gl,
                t = e.COLOR_BUFFER_BIT;
            t |= 1 & this.flags ? e.DEPTH_BUFFER_BIT : 0, t |= 2 & this.flags ? e.STENCIL_BUFFER_BIT : 0, e.clear(t)
        },
        isValid: function() {
            var e = this.gl;
            return e.checkFramebufferStatus(e.FRAMEBUFFER) === e.FRAMEBUFFER_COMPLETE
        },
        getActualType: function() {
            return this.color.type
        },
        dispose: function() {
            var e = this.gl;
            this.attachmentBuffer && e.deleteRenderbuffer(this.attachmentBuffer), e.deleteFramebuffer(this.fbo), this.color.dispose(), this.valid = !1, this.gl = null
        },
        _init: function() {
            var e = this.gl;
            this.fbo = e.createFramebuffer(), e.bindFramebuffer(e.FRAMEBUFFER, this.fbo), e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, this.color.id, 0);
            var t = 3 & this.flags;
            if (t) {
                var n = r(e, t);
                this.attachmentBuffer = e.createRenderbuffer(), e.bindRenderbuffer(e.RENDERBUFFER, this.attachmentBuffer), e.framebufferRenderbuffer(e.FRAMEBUFFER, n, e.RENDERBUFFER, this.attachmentBuffer)
            }
        },
        _allocate: function() {
            var e = this.gl,
                t = 3 & this.flags;
            if (t) {
                var n = i(e, t);
                e.bindRenderbuffer(e.RENDERBUFFER, this.attachmentBuffer), e.renderbufferStorage(e.RENDERBUFFER, n, this.width, this.height), e.bindRenderbuffer(e.RENDERBUFFER, null)
            }
            e.bindFramebuffer(e.FRAMEBUFFER, this.fbo);
            var r = this.types.next();
            do this.color.fromData(this.width, this.height, null, r), e.getError(); while (!(this.valid = this.isValid()) && (r = this.types.next()));
            e.bindFramebuffer(e.FRAMEBUFFER, null)
        }
    }, e.exports = a
}, function(e, t, n) {
    e.exports = n.p + "experiences/imagine/assets/nrm.png"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec2 aPosition;\n\nuniform float uTime;\n\nvarying vec2 vWaterUvs1;\nvarying vec2 vWaterUvs2;\nvarying vec2 vWaterUvs3;\nvarying vec2 vWaterUvs4;\n\n\n#define TIME_SCALE 0.3\n\n\nvoid main( void ){\n\n  gl_Position = vec4( aPosition.xy, 0.0, 1.0 );\n\n  vec2 uvs = aPosition.xy * .5 + .5;\n\n  float time = uTime * TIME_SCALE;\n  vWaterUvs1 = uvs + fract( vec2(.10, -.15) * time );\n  vWaterUvs2 = uvs + fract( vec2(.13, .22)  * time );\n  vWaterUvs3 = uvs + fract( vec2(.12, .1)  * time );\n  vWaterUvs4 = uvs + fract( vec2(.11, .20)  * time );\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\n\nvarying vec2 vWaterUvs1;\nvarying vec2 vWaterUvs2;\nvarying vec2 vWaterUvs3;\nvarying vec2 vWaterUvs4;\n\n\nuniform sampler2D tNrm1;\nuniform sampler2D tNrm2;\nuniform vec4 uWeights;\n\n\nvoid main(void) {\n\n  vec3 nrm = (\n    texture2D( tNrm2, vWaterUvs1 ).rgb * uWeights.x +\n    texture2D( tNrm1, vWaterUvs2 ).rgb * uWeights.y +\n    texture2D( tNrm1, vWaterUvs3 ).rgb * uWeights.z +\n    texture2D( tNrm1, vWaterUvs4 ).rgb * uWeights.w\n  );\n\n  gl_FragColor.rgb = nrm;\n  gl_FragColor.a = 1.0;\n\n}"
}, function(e, t, n) {
    var i = n(194),
        r = n(196),
        o = function() {};
    e.exports = function(e) {
        var t = function(e) {
                var t = this.getContextOptions();
                this.gl = e.getContext("webgl", t) || e.getContext("experimental-webgl", t) || e.getContext("webgl"), this.canvas = e, this.width = 0, this.height = 0, this.frame = this._frame.bind(this), this.previousTime = r(), this._rafId = 0, this._playing = !1, this.init()
            },
            n = t.prototype;
        return n.getContextOptions = e.getContextOptions || function() {}, n.render = e.render || o, n.resize = e.resize || o, n.init = e.init || o, n.dispose = function() {
            this.stop()
        }, n.play = function() {
            this._playing || (this._playing = !0, this.frame(), this.previousTime = r(), this._requestFrame())
        }, n.stop = function() {
            i.cancel(this._rafId), this._playing = !1, this._rafId = 0
        }, n._checkSize = function() {
            var e = getComputedStyle(this.canvas),
                t = parseInt(e.getPropertyValue("width")),
                n = parseInt(e.getPropertyValue("height"));
            return isNaN(t) || isNaN(n) || 0 === t || 0 === n ? !1 : ((t !== this.width || n !== this.height) && (this.width = t, this.height = n, this.resize(t, n)), !0)
        }, n._requestFrame = function() {
            i.cancel(this._rafId), this._rafId = i(this.frame)
        }, n._frame = function() {
            if (this._playing) {
                var e = r(),
                    t = (e - this.previousTime) / 1e3;
                this.previousTime = e, (t > .2 || 1 / 180 > t) && (t = 1 / 60), this._checkSize() && this.render(t), this._playing && this._requestFrame()
            }
        }, t
    }
}, function(e, t, n) {
    for (var i = n(195), r = "undefined" == typeof window ? {} : window, o = ["moz", "webkit"], a = "AnimationFrame", s = r["request" + a], u = r["cancel" + a] || r["cancelRequest" + a], l = 0; l < o.length && !s; l++) s = r[o[l] + "Request" + a], u = r[o[l] + "Cancel" + a] || r[o[l] + "CancelRequest" + a];
    if (!s || !u) {
        var c = 0,
            h = 0,
            d = [],
            f = 1e3 / 60;
        s = function(e) {
            if (0 === d.length) {
                var t = i(),
                    n = Math.max(0, f - (t - c));
                c = n + t, setTimeout(function() {
                    var e = d.slice(0);
                    d.length = 0;
                    for (var t = 0; t < e.length; t++)
                        if (!e[t].cancelled) try {
                            e[t].callback(c)
                        } catch (n) {
                            setTimeout(function() {
                                throw n
                            }, 0)
                        }
                }, Math.round(n))
            }
            return d.push({
                handle: ++h,
                callback: e,
                cancelled: !1
            }), h
        }, u = function(e) {
            for (var t = 0; t < d.length; t++) d[t].handle === e && (d[t].cancelled = !0)
        }
    }
    e.exports = function(e) {
        return s.call(r, e)
    }, e.exports.cancel = function() {
        u.apply(r, arguments)
    }
}, function(e, t, n) {
    (function(t) {
        (function() {
            var n, i, r;
            "undefined" != typeof performance && null !== performance && performance.now ? e.exports = function() {
                return performance.now()
            } : "undefined" != typeof t && null !== t && t.hrtime ? (e.exports = function() {
                return (n() - r) / 1e6
            }, i = t.hrtime, n = function() {
                var e;
                return e = i(), 1e9 * e[0] + e[1]
            }, r = n()) : Date.now ? (e.exports = function() {
                return Date.now() - r
            }, r = Date.now()) : (e.exports = function() {
                return (new Date).getTime() - r
            }, r = (new Date).getTime())
        }).call(this)
    }).call(t, n(66))
}, function(e, t) {
    (function(t) {
        e.exports = t.performance && t.performance.now ? function() {
            return performance.now()
        } : Date.now || function() {
            return +new Date
        }
    }).call(t, function() {
        return this
    }())
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = n(26),
        l = i(u),
        c = n(198),
        h = i(c),
        d = n(199),
        f = i(d),
        p = n(200),
        m = i(p),
        v = n(63),
        g = (i(v), function(e) {
            function t() {
                r(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, "work-hard", null), this.dom = document.getElementById(this.domId)
            }
            return o(t, e), a(t, [{
                key: "register",
                value: function() {
                    return this.expe = new h["default"](this.dom), [f["default"], m["default"]]
                }
            }, {
                key: "load",
                value: function(e) {
                    var t = this;
                    this.expe.load().then(function() {
                        e(t)
                    })
                }
            }, {
                key: "active",
                value: function() {
                    this.expe.previewStoped = !0, this.expe.play()
                }
            }, {
                key: "inactive",
                value: function(e) {
                    this.expe.stop(), this.expe.previewStoped = !0, e && e()
                }
            }, {
                key: "reset",
                value: function() {}
            }, {
                key: "show",
                value: function() {
                    this.dom.classList.remove("hide"), this.expe.previewStoped = !1, this.expe.previewRender()
                }
            }, {
                key: "hide",
                value: function() {
                    this.dom.classList.add("hide"), this.expe.previewStoped = !0
                }
            }, {
                key: "updateGyro",
                value: function(e) {
                    this.expe.updateGyro(e)
                }
            }]), t
        }(l["default"]));
    t["default"] = g, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(199),
        s = i(a),
        u = n(200),
        l = i(u),
        c = n(201),
        h = i(c),
        d = n(112),
        f = i(d),
        p = n(63),
        m = i(p),
        v = null,
        g = null,
        y = 50,
        _ = 12,
        x = 10,
        b = 20,
        w = 100,
        T = 25,
        E = 1500,
        S = 100;
    BrowserDetect.isMobile && (y = 28, _ = 5, x = 24, b = 0, w = 100, T = 35, E = 1500, S = 150);
    var M = {
            width: 685,
            height: 84
        },
        P = new THREE.Vector3,
        A = 200,
        C = 2500,
        R = 2e3,
        L = 800,
        O = 1500,
        k = new THREE.Vector3(-5e3, -5e3, -5e3);
    Number.prototype.clamp = function(e, t) {
        return Math.min(Math.max(this, e), t)
    };
    var D = {
            linear: function(e) {
                return e
            },
            easeInQuad: function(e) {
                return e * e
            },
            easeOutQuad: function(e) {
                return e * (2 - e)
            },
            easeInOutQuad: function(e) {
                return .5 > e ? 2 * e * e : -1 + (4 - 2 * e) * e
            },
            easeInCubic: function(e) {
                return e * e * e
            },
            easeOutCubic: function(e) {
                return --e * e * e + 1
            },
            easeInOutCubic: function(e) {
                return .5 > e ? 4 * e * e * e : (e - 1) * (2 * e - 2) * (2 * e - 2) + 1
            },
            easeInQuart: function(e) {
                return e * e * e * e
            },
            easeOutQuart: function(e) {
                return 1 - --e * e * e * e
            },
            easeInOutQuart: function(e) {
                return .5 > e ? 8 * e * e * e * e : 1 - 8 * --e * e * e * e
            },
            easeInQuint: function(e) {
                return e * e * e * e * e
            },
            easeOutQuint: function(e) {
                return 1 + --e * e * e * e * e
            },
            easeInOutQuint: function(e) {
                return .5 > e ? 16 * e * e * e * e * e : 1 + 16 * --e * e * e * e * e
            }
        },
        F = function() {
            function e(t) {
                r(this, e), this.eventBinded = !1, this.bRender = this.render.bind(this), this.previewRender = this._previewRender.bind(this), this.previewStoped = !0, this.width = window.innerWidth, this.height = window.innerHeight, this.camera = new THREE.PerspectiveCamera(40, this.width / this.height, 1, 3e3), this.camera.position.z = 1e3, this.camera.lookAt(P), this.scene = new THREE.Scene, this.renderer = new THREE.WebGLRenderer, this.renderer.shadowMap.enabled = !0, this.renderer.setSize(this.width * window.devicePixelRatio, this.height * window.devicePixelRatio), this.renderer.domElement.style.width = this.width + "px", this.renderer.domElement.style.height = this.height + "px", t.appendChild(this.renderer.domElement), this.renderer.autoClear = !1, this.noiseBackground = new f["default"](this.renderer.getContext()), this.composer = new THREE.EffectComposer(this.renderer);
                var n = this.noiseBackground.getComposerPass();
                this.composer.addPass(n);
                var i = new THREE.RenderPass(this.scene, this.camera);
                i.clear = !1, this.composer.addPass(i), this.glitchSetted = null, this.glitchPass = new THREE.GlitchPass, this.composer.addPass(this.glitchPass), this.effect = new THREE.ShaderPass(THREE.RGBShiftShader), this.effect.uniforms.amount.value = .005, this.effect.renderToScreen = !0, this.effect.material.transparent = !0, this.composer.addPass(this.effect), this.initRgbShiftTimeline(), this.playing = !1, window.addEventListener("resize", this.resize.bind(this))
            }
            return o(e, [{
                key: "load",
                value: function() {
                    var e = this,
                        t = m["default"].promise(function(t, n) {
                            var i = new THREE.ImageLoader;
                            i.load(s["default"], function(n) {
                                e.texture = new THREE.Texture(n), e.texture.needsUpdate = !0, e.cubes = [], e.initCubes(), e.initLight(), e.startTime = Date.now(), e.onMouseMove = e._onMouseMove.bind(e), e.initBackground(function() {
                                    g = window.requestAnimationFrame(e.previewRender), t()
                                })
                            })
                        });
                    return t
                }
            }, {
                key: "resize",
                value: function() {
                    this.width = window.innerWidth, this.height = window.innerHeight, this.camera.aspect = this.width / this.height, this.camera.updateProjectionMatrix(), this.renderer.setSize(this.width * window.devicePixelRatio, this.height * window.devicePixelRatio), this.renderer.domElement.style.width = this.width + "px", this.renderer.domElement.style.height = this.height + "px"
                }
            }, {
                key: "play",
                value: function() {
                    this.bindEvents(), this.playing = !0, this.startTime = Date.now(), this.glitchDelay = 0, window.cancelAnimationFrame(g), v = window.requestAnimationFrame(this.bRender)
                }
            }, {
                key: "stop",
                value: function() {
                    this.unbindEvents(), this.resetCubes(), this.playing = !1
                }
            }, {
                key: "bindEvents",
                value: function() {
                    this.eventBinded = !0, BrowserDetect.isDesktop ? document.addEventListener("mousemove", this.onMouseMove) : window.addEventListener("touchmove", this.onMouseMove)
                }
            }, {
                key: "unbindEvents",
                value: function() {
                    this.eventBinded = !1, BrowserDetect.isDesktop ? document.removeEventListener("mousemove", this.onMouseMove) : window.addEventListener("touchmove", this.onMouseMove)
                }
            }, {
                key: "_onMouseMove",
                value: function(e) {
                    if (!(Date.now() - this.startTime < O)) {
                        var t = {
                            x: 0,
                            y: 0
                        };
                        t.x = e.clientX, t.y = e.clientY, BrowserDetect.isMobile && (t.x = e.targetTouches[0].clientX, t.y = e.targetTouches[0].clientY);
                        var n = new THREE.Vector3;
                        n.set(t.x / window.innerWidth * 2 - 1, 2 * -(t.y / window.innerHeight) + 1, .5), n.unproject(this.camera);
                        var i = n.sub(this.camera.position).normalize(),
                            r = -this.camera.position.z / i.z;
                        k = this.camera.position.clone().add(i.multiplyScalar(r))
                    }
                }
            }, {
                key: "initRgbShiftTimeline",
                value: function() {
                    this.simplex = new h["default"](Math.random)
                }
            }, {
                key: "initBackground",
                value: function() {
                    var e = this,
                        t = arguments.length <= 0 || void 0 === arguments[0] ? null : arguments[0],
                        n = -y / 2 * x,
                        i = -_ / 2 * x,
                        r = new THREE.ImageLoader;
                    r.load(l["default"], function(r) {
                        var o = new THREE.Texture(r);
                        o.needsUpdate = !0;
                        var a = new THREE.MeshBasicMaterial({
                            color: 16777215,
                            map: o
                        });
                        a.transparent = !0;
                        var s = new THREE.PlaneGeometry(M.width, M.height, 1);
                        e.addPlane(n, i, a, s), t && t()
                    })
                }
            }, {
                key: "addPlane",
                value: function(e, t, n, i) {
                    var r = new THREE.Mesh(i, n);
                    r.position.x = 0, r.position.y = 0, r.position.z = -10, this.scene.add(r)
                }
            }, {
                key: "initCubes",
                value: function() {
                    var e = 2;
                    BrowserDetect.isMobile && (e = 1);
                    for (var t = -y / 2 * (x / e + b / 2), n = -_ / 2 * x, i = y / 2 * (x / e + b / 2), r = _ / 2 * x, o = t; i > o; o += x + b)
                        for (var a = n; r > a; a += x) {
                            var s = new THREE.MeshLambertMaterial({
                                color: 16777215,
                                map: this.texture,
                                transparent: !0
                            });
                            s.depthTest = !0, s.opacity = 0;
                            var u = this.getCubeGeometry(o, a);
                            this.addCube(o, a, s, u)
                        }
                    for (var l = 0; 30 > l; l++)
                        for (var c = !1; !c;) {
                            var h = Math.random() * this.width - this.width / 2,
                                d = Math.random() * this.height - this.height / 2;
                            if (t > h && h > t - 300 || h > i && i + 300 > h || n > d && d > n - 200 || d > r && n + 200 > d) {
                                var s = new THREE.MeshLambertMaterial({
                                        color: 16777215,
                                        map: this.texture,
                                        transparent: !0
                                    }),
                                    u = this.getCubeGeometry(h, d);
                                s.depthTest = !0, s.opacity = 0, this.addCube(h, d, s, u), c = !0
                            }
                        }
                }
            }, {
                key: "getCubeGeometry",
                value: function(e, t) {
                    function n(t) {
                        return (t + e + x * y / 2 - (x * y / 2 - M.width / 2)) / M.width
                    }

                    function i(e) {
                        return (e + t + x * _ / 2 - (x * _ / 2 - M.height / 2)) / M.height
                    }
                    for (var r = Math.random() * w + x + b, o = Math.random() * T, a = Math.random() * T / 2, s = new THREE.BoxGeometry(r, o, a), u = [], l = 0, c = s.faces.length; c > l; l++) {
                        u = [s.vertices[s.faces[l].a], s.vertices[s.faces[l].b], s.vertices[s.faces[l].c]];
                        for (var h = 0; 3 > h; h++) s.faceVertexUvs[0][l][h].x = n(u[h].x), s.faceVertexUvs[0][l][h].y = i(u[h].y)
                    }
                    return s
                }
            }, {
                key: "addCube",
                value: function(e, t, n, i) {
                    var r = new THREE.Mesh(i, n);
                    r.position.x = 2e3 * Math.random() + 1e3, r.position.y = 3e3 * Math.random() - 1e3, r.position.z = 1500 * Math.random() - 750, r.castShadow = !0, r.receiveShadow = !0, r.__target = {
                        x: e,
                        y: t,
                        z: 0
                    }, r.__origin = {
                        x: e,
                        y: t,
                        z: 0,
                        rx: 0,
                        ry: 0,
                        rz: 0
                    }, r.__hideTime = null, r.rotation.x = Math.random() * (2 * Math.PI) * 10 - 6 * Math.PI / 2, r.__shown = {
                        x: r.position.x,
                        y: r.position.y,
                        z: 1e3 * -Math.random() - 500,
                        rx: r.rotation.x,
                        ry: r.rotation.y,
                        rz: r.rotation.z
                    }, r.__hidden = {
                        x: -r.__shown.x / 2,
                        y: r.__shown.y / 4,
                        z: r.__shown.z / 2,
                        rx: r.rotation.x,
                        ry: r.rotation.y,
                        rz: r.rotation.z
                    }, r.__from = r.__shown, r.__randDelay = 500 * Math.random(), r.position.x = r.__hidden.x, r.position.y = r.__hidden.y, r.position.z = r.__hidden.z, r.__rand = Math.random() + 1, r.__activeTime = null, this.scene.add(r), this.cubes.push(r)
                }
            }, {
                key: "resetCubes",
                value: function() {
                    for (var e = 0, t = this.cubes.length; t > e; e++) this.cubes[e].position.x = this.cubes[e].__hidden.x, this.cubes[e].position.y = this.cubes[e].__hidden.y, this.cubes[e].position.z = this.cubes[e].__hidden.z, this.cubes[e].material.opacity = 0, this.cubes[e].__activeTime = null
                }
            }, {
                key: "initLight",
                value: function() {
                    var e = new THREE.AmbientLight(6710886),
                        t = new THREE.SpotLight(16777215);
                    t.castShadow = !0, t.shadowMapWidth = 2048, t.shadowMapHeight = 2048, t.shadowCameraNear = 1e3, t.shadowCameraFar = 1800, t.position.set(950, x * y, 800), this.scene.add(t), this.scene.add(e)
                }
            }, {
                key: "render",
                value: function() {
                    if (!this.playing) return void this.renderer.render(this.scene, this.camera);
                    var e = Date.now() - this.startTime;
                    this.effect.uniforms.amount.value = .0025 * (this.simplex.noise2D(e / 1e3, 0) - .5).clamp(-1, 1), this.effect.uniforms.angle.value = this.simplex.noise2D(e / 500, 0);
                    for (var t = this.cubes.length, n = 0; t > n; n++) {
                        var i = Math.sqrt(Math.pow(k.x - this.cubes[n].__origin.x, 2) + Math.pow(k.y - this.cubes[n].__origin.y, 2)),
                            r = this.cubes[n].__target.x - this.cubes[n].position.x,
                            o = (S - i).clamp(0, 1);
                        o > 0 && (null == this.cubes[n].__activeTime && (this.cubes[n].position.x = this.cubes[n].__shown.x, this.cubes[n].position.y = this.cubes[n].__shown.y, this.cubes[n].position.z = this.cubes[n].__shown.z, this.cubes[n].__from.x = this.cubes[n].position.x, this.cubes[n].__from.y = this.cubes[n].position.y, this.cubes[n].__from.z = this.cubes[n].position.z, this.cubes[n].__activeTime = e), this.cubes[n].__placed && (this.cubes[n].__activeTime = e));
                        var a = null,
                            s = 0;
                        null != this.cubes[n].__activeTime && (this.cubes[n].__hideTime = null, a = e - this.cubes[n].__activeTime, s = D.easeOutCubic(a / L).clamp(0, 1));
                        var u = null,
                            l = !1,
                            c = 0;
                        null != this.cubes[n].__hideTime && (this.cubes[n].__activeTime = null, u = e - this.cubes[n].__hideTime, c = D.easeOutCubic(u / R).clamp(0, 1), l = c >= 1 ? !0 : !1, 0 == c && (this.cubes[n].__hideTime = null, this.cubes[n].__from = this.cubes[n].__shown)), null != this.cubes[n].__activeTime && null == this.cubes[n].__hideTime ? (this.cubes[n].__placed || (this.cubes[n].position.x = this.cubes[n].__from.x + (this.cubes[n].__target.x - this.cubes[n].__from.x) * s, this.cubes[n].position.y = this.cubes[n].__from.y + (this.cubes[n].__target.y - this.cubes[n].__from.y) * s, this.cubes[n].position.z = this.cubes[n].__from.z + (this.cubes[n].__target.z - this.cubes[n].__from.z) * s), this.cubes[n].rotation.x += (this.cubes[n].__origin.rx - this.cubes[n].rotation.x) / 8, this.cubes[n].rotation.y += (this.cubes[n].__origin.ry - this.cubes[n].rotation.y) / 8, this.cubes[n].__placed = !1, Math.abs(r) <= 1 && (this.cubes[n].__placed = !0, this.cubes[n].__target.z = Math.max(100 - i, 0) * (Math.sin(this.cubes[n].position.x - e / 500) * Math.cos(this.cubes[n].position.y - e / 250) + 1) * 10, this.cubes[n].position.z = Math.max((this.cubes[n].__target.z - this.cubes[n].position.z) / 40, 1) * (Math.abs(this.cubes[n].position.x) / 500 + 1), this.cubes[n].position.z += 5 * Math.sin(this.cubes[n].__rand + e / 1e3)), e - this.cubes[n].__activeTime > E + 2 * this.cubes[n].__randDelay && (this.cubes[n].__placed = !1, this.cubes[n].__activeTime = null, this.cubes[n].__hideTime = e)) : null != this.cubes[n].__hideTime && (this.cubes[n].__placed = !1, this.cubes[n].position.x = this.cubes[n].__target.x + (this.cubes[n].__hidden.x - this.cubes[n].__target.x) * c, this.cubes[n].position.y = this.cubes[n].__target.y + (this.cubes[n].__hidden.y - this.cubes[n].__target.y) * c,
                            this.cubes[n].position.z = this.cubes[n].__target.z + (this.cubes[n].__hidden.z - this.cubes[n].__target.z) * c, this.cubes[n].__from.x = this.cubes[n].position.x, this.cubes[n].__from.y = this.cubes[n].position.y, this.cubes[n].__from.z = this.cubes[n].position.z, this.cubes[n].rotation.x += (this.cubes[n].__hidden.rx - this.cubes[n].rotation.x) / 100, this.cubes[n].rotation.y += (this.cubes[n].__hidden.ry - this.cubes[n].rotation.y) / 100, this.cubes[n].rotation.z += (this.cubes[n].__hidden.rz - this.cubes[n].rotation.z) / 100), this.cubes[n].material.opacity = 1 + this.cubes[n].position.z / 200
                    }
                    for (var h = 0, d = 0; t > d; d++) this.cubes[d].__placed && null == this.glitchSetted && h++;
                    h > t - 50 && null == this.glitchSetted && e - this.glitchDelay > C && (this.glitchSetted = e, this.glitchPass.uniforms.byp.value = 0), e - this.glitchSetted > A && null != this.glitchSetted && (this.glitchPass.uniforms.byp.value = 1, this.glitchSetted = null, this.glitchDelay = e), this.composer.render(), v = window.requestAnimationFrame(this.bRender)
                }
            }, {
                key: "_previewRender",
                value: function() {
                    return this.effect.uniforms.amount.value = 0, this.effect.uniforms.angle.value = 0, this.composer.render(), this.previewStoped ? void window.cancelAnimationFrame(g) : void(BrowserDetect.isDesktop && (this.previewStoped || (g = window.requestAnimationFrame(this.previewRender))))
                }
            }, {
                key: "updateGyro",
                value: function(e) {}
            }]), e
        }();
    t["default"] = F, e.exports = t["default"]
}, function(e, t, n) {
    e.exports = n.p + "experiences/work-hard/cube-expe/hard.jpg"
}, function(e, t, n) {
    e.exports = n.p + "experiences/work-hard/cube-expe/work.png"
}, function(e, t, n) {
    var i;
    ! function() {
        "use strict";

        function r(e) {
            e || (e = Math.random), this.p = new Uint8Array(256), this.perm = new Uint8Array(512), this.permMod12 = new Uint8Array(512);
            for (var t = 0; 256 > t; t++) this.p[t] = 256 * e();
            for (t = 0; 512 > t; t++) this.perm[t] = this.p[255 & t], this.permMod12[t] = this.perm[t] % 12
        }
        var o = .5 * (Math.sqrt(3) - 1),
            a = (3 - Math.sqrt(3)) / 6,
            s = 1 / 3,
            u = 1 / 6,
            l = (Math.sqrt(5) - 1) / 4,
            c = (5 - Math.sqrt(5)) / 20;
        r.prototype = {
            grad3: new Float32Array([1, 1, 0, -1, 1, 0, 1, -1, 0, -1, -1, 0, 1, 0, 1, -1, 0, 1, 1, 0, -1, -1, 0, -1, 0, 1, 1, 0, -1, 1, 0, 1, -1, 0, -1, -1]),
            grad4: new Float32Array([0, 1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1, 0, -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1, 1, 0, 1, 1, 1, 0, 1, -1, 1, 0, -1, 1, 1, 0, -1, -1, -1, 0, 1, 1, -1, 0, 1, -1, -1, 0, -1, 1, -1, 0, -1, -1, 1, 1, 0, 1, 1, 1, 0, -1, 1, -1, 0, 1, 1, -1, 0, -1, -1, 1, 0, 1, -1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, -1, 1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1, 0, -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1, 0]),
            noise2D: function(e, t) {
                var n, i, r = this.permMod12,
                    s = this.perm,
                    u = this.grad3,
                    l = 0,
                    c = 0,
                    h = 0,
                    d = (e + t) * o,
                    f = Math.floor(e + d),
                    p = Math.floor(t + d),
                    m = (f + p) * a,
                    v = f - m,
                    g = p - m,
                    y = e - v,
                    _ = t - g;
                y > _ ? (n = 1, i = 0) : (n = 0, i = 1);
                var x = y - n + a,
                    b = _ - i + a,
                    w = y - 1 + 2 * a,
                    T = _ - 1 + 2 * a,
                    E = 255 & f,
                    S = 255 & p,
                    M = .5 - y * y - _ * _;
                if (M >= 0) {
                    var P = 3 * r[E + s[S]];
                    M *= M, l = M * M * (u[P] * y + u[P + 1] * _)
                }
                var A = .5 - x * x - b * b;
                if (A >= 0) {
                    var C = 3 * r[E + n + s[S + i]];
                    A *= A, c = A * A * (u[C] * x + u[C + 1] * b)
                }
                var R = .5 - w * w - T * T;
                if (R >= 0) {
                    var L = 3 * r[E + 1 + s[S + 1]];
                    R *= R, h = R * R * (u[L] * w + u[L + 1] * T)
                }
                return 70 * (l + c + h)
            },
            noise3D: function(e, t, n) {
                var i, r, o, a, l, c, h, d, f, p, m = this.permMod12,
                    v = this.perm,
                    g = this.grad3,
                    y = (e + t + n) * s,
                    _ = Math.floor(e + y),
                    x = Math.floor(t + y),
                    b = Math.floor(n + y),
                    w = (_ + x + b) * u,
                    T = _ - w,
                    E = x - w,
                    S = b - w,
                    M = e - T,
                    P = t - E,
                    A = n - S;
                M >= P ? P >= A ? (l = 1, c = 0, h = 0, d = 1, f = 1, p = 0) : M >= A ? (l = 1, c = 0, h = 0, d = 1, f = 0, p = 1) : (l = 0, c = 0, h = 1, d = 1, f = 0, p = 1) : A > P ? (l = 0, c = 0, h = 1, d = 0, f = 1, p = 1) : A > M ? (l = 0, c = 1, h = 0, d = 0, f = 1, p = 1) : (l = 0, c = 1, h = 0, d = 1, f = 1, p = 0);
                var C = M - l + u,
                    R = P - c + u,
                    L = A - h + u,
                    O = M - d + 2 * u,
                    k = P - f + 2 * u,
                    D = A - p + 2 * u,
                    F = M - 1 + 3 * u,
                    B = P - 1 + 3 * u,
                    I = A - 1 + 3 * u,
                    U = 255 & _,
                    N = 255 & x,
                    z = 255 & b,
                    V = .6 - M * M - P * P - A * A;
                if (0 > V) i = 0;
                else {
                    var j = 3 * m[U + v[N + v[z]]];
                    V *= V, i = V * V * (g[j] * M + g[j + 1] * P + g[j + 2] * A)
                }
                var G = .6 - C * C - R * R - L * L;
                if (0 > G) r = 0;
                else {
                    var H = 3 * m[U + l + v[N + c + v[z + h]]];
                    G *= G, r = G * G * (g[H] * C + g[H + 1] * R + g[H + 2] * L)
                }
                var W = .6 - O * O - k * k - D * D;
                if (0 > W) o = 0;
                else {
                    var X = 3 * m[U + d + v[N + f + v[z + p]]];
                    W *= W, o = W * W * (g[X] * O + g[X + 1] * k + g[X + 2] * D)
                }
                var Y = .6 - F * F - B * B - I * I;
                if (0 > Y) a = 0;
                else {
                    var q = 3 * m[U + 1 + v[N + 1 + v[z + 1]]];
                    Y *= Y, a = Y * Y * (g[q] * F + g[q + 1] * B + g[q + 2] * I)
                }
                return 32 * (i + r + o + a)
            },
            noise4D: function(e, t, n, i) {
                var r, o, a, s, u, h = (this.permMod12, this.perm),
                    d = this.grad4,
                    f = (e + t + n + i) * l,
                    p = Math.floor(e + f),
                    m = Math.floor(t + f),
                    v = Math.floor(n + f),
                    g = Math.floor(i + f),
                    y = (p + m + v + g) * c,
                    _ = p - y,
                    x = m - y,
                    b = v - y,
                    w = g - y,
                    T = e - _,
                    E = t - x,
                    S = n - b,
                    M = i - w,
                    P = 0,
                    A = 0,
                    C = 0,
                    R = 0;
                T > E ? P++ : A++, T > S ? P++ : C++, T > M ? P++ : R++, E > S ? A++ : C++, E > M ? A++ : R++, S > M ? C++ : R++;
                var L, O, k, D, F, B, I, U, N, z, V, j;
                L = P >= 3 ? 1 : 0, O = A >= 3 ? 1 : 0, k = C >= 3 ? 1 : 0, D = R >= 3 ? 1 : 0, F = P >= 2 ? 1 : 0, B = A >= 2 ? 1 : 0, I = C >= 2 ? 1 : 0, U = R >= 2 ? 1 : 0, N = P >= 1 ? 1 : 0, z = A >= 1 ? 1 : 0, V = C >= 1 ? 1 : 0, j = R >= 1 ? 1 : 0;
                var G = T - L + c,
                    H = E - O + c,
                    W = S - k + c,
                    X = M - D + c,
                    Y = T - F + 2 * c,
                    q = E - B + 2 * c,
                    K = S - I + 2 * c,
                    Z = M - U + 2 * c,
                    Q = T - N + 3 * c,
                    J = E - z + 3 * c,
                    $ = S - V + 3 * c,
                    ee = M - j + 3 * c,
                    te = T - 1 + 4 * c,
                    ne = E - 1 + 4 * c,
                    ie = S - 1 + 4 * c,
                    re = M - 1 + 4 * c,
                    oe = 255 & p,
                    ae = 255 & m,
                    se = 255 & v,
                    ue = 255 & g,
                    le = .6 - T * T - E * E - S * S - M * M;
                if (0 > le) r = 0;
                else {
                    var ce = h[oe + h[ae + h[se + h[ue]]]] % 32 * 4;
                    le *= le, r = le * le * (d[ce] * T + d[ce + 1] * E + d[ce + 2] * S + d[ce + 3] * M)
                }
                var he = .6 - G * G - H * H - W * W - X * X;
                if (0 > he) o = 0;
                else {
                    var de = h[oe + L + h[ae + O + h[se + k + h[ue + D]]]] % 32 * 4;
                    he *= he, o = he * he * (d[de] * G + d[de + 1] * H + d[de + 2] * W + d[de + 3] * X)
                }
                var fe = .6 - Y * Y - q * q - K * K - Z * Z;
                if (0 > fe) a = 0;
                else {
                    var pe = h[oe + F + h[ae + B + h[se + I + h[ue + U]]]] % 32 * 4;
                    fe *= fe, a = fe * fe * (d[pe] * Y + d[pe + 1] * q + d[pe + 2] * K + d[pe + 3] * Z)
                }
                var me = .6 - Q * Q - J * J - $ * $ - ee * ee;
                if (0 > me) s = 0;
                else {
                    var ve = h[oe + N + h[ae + z + h[se + V + h[ue + j]]]] % 32 * 4;
                    me *= me, s = me * me * (d[ve] * Q + d[ve + 1] * J + d[ve + 2] * $ + d[ve + 3] * ee)
                }
                var ge = .6 - te * te - ne * ne - ie * ie - re * re;
                if (0 > ge) u = 0;
                else {
                    var ye = h[oe + 1 + h[ae + 1 + h[se + 1 + h[ue + 1]]]] % 32 * 4;
                    ge *= ge, u = ge * ge * (d[ye] * te + d[ye + 1] * ne + d[ye + 2] * ie + d[ye + 3] * re)
                }
                return 27 * (r + o + a + s + u)
            }
        }, i = function() {
            return r
        }.call(t, n, t, e), !(void 0 !== i && (e.exports = i)), t.SimplexNoise = r, e.exports = r
    }()
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = n(26),
        l = i(u),
        c = n(203),
        h = i(c),
        d = function(e) {
            function t() {
                r(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, "strive", null), this.dom = document.getElementById(this.domId)
            }
            return o(t, e), a(t, [{
                key: "register",
                value: function() {
                    return {}
                }
            }, {
                key: "load",
                value: function(e) {
                    e && e(this)
                }
            }, {
                key: "active",
                value: function() {
                    h["default"].activate()
                }
            }, {
                key: "inactive",
                value: function(e) {
                    h["default"].desactivate(), e && e()
                }
            }, {
                key: "reset",
                value: function() {
                    h["default"].reset()
                }
            }, {
                key: "show",
                value: function() {
                    h["default"].renderBackground(), this.dom.classList.remove("hide")
                }
            }, {
                key: "hide",
                value: function() {
                    this.dom.classList.add("hide")
                }
            }]), t
        }(l["default"]);
    t["default"] = d, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(204),
        s = i(a),
        u = n(206),
        l = i(u),
        c = n(112),
        h = i(c),
        d = function() {
            function e() {
                r(this, e), this.bindEvents(), this.$el = document.querySelector("#strive"), this.shell = n(228)({
                    element: this.$el.querySelector(".strive__sketch"),
                    glOptions: {
                        preserveDrawingBuffer: !0
                    },
                    clearFlags: !1
                }), this.shell.on("gl-init", this._onInit), this.programs = {
                    sphere: l["default"].sphere,
                    title: l["default"].title,
                    waves: l["default"].waves,
                    noise: l["default"].noise
                }, this.drawOrder = ["waves", "sphere", "title"], this.isReady = !1, this._isActivated = !1
            }
            return o(e, [{
                key: "bindEvents",
                value: function() {
                    this._onInit = this._onInit.bind(this), this._onError = this._onError.bind(this), this._onUpdate = this._onUpdate.bind(this), this._onResize = this._onResize.bind(this)
                }
            }, {
                key: "activate",
                value: function() {
                    this.$el.classList.add("activated"), this.shell.on("gl-render", this._onUpdate), this.shell.on("gl-resize", this._onResize), this.shell.on("gl-error", this._onError), window.dispatchEvent(new Event("resize")), s["default"].activate(), this.shell.paused = !1, this.isActivated = !0, setTimeout(this._onResize, 10);
                    for (var e in this.programs) this.programs[e].activate && this.programs[e].activate()
                }
            }, {
                key: "desactivate",
                value: function() {
                    this.$el.classList.remove("activated"), this.isActivated = !1, this.shell.paused = !0, s["default"].desactivate(), this.shell.removeListener("gl-render", this._onUpdate), this.shell.removeListener("gl-resize", this._onResize), this.shell.removeListener("gl-error", this._onError);
                    for (var e in this.programs) this.programs[e].desactivate && this.programs[e].desactivate()
                }
            }, {
                key: "_onInit",
                value: function() {
                    this.isReady = !0, this.shell.scale = 1, this.noiseBackground = new h["default"](this.shell.gl);
                    for (var e in this.programs) this.programs[e].create(this.shell);
                    this.programs.waves.setNoise(this.programs.noise), s["default"].ready(this.shell), this._onResize(), this.shell.canvas.width = window.innerWidth, this.shell.canvas.height = window.innerHeight, this.shell.canvas.style.width = window.innerWidth + "px", this.shell.canvas.style.height = window.innerHeight + "px", this.shell.removeListener("gl-init", this._onInit)
                }
            }, {
                key: "_onUpdate",
                value: function() {
                    var e = this;
                    this.isReady && this.isActivated && (s["default"]._onUpdate(), this.drawOrder.forEach(function(t) {
                        e.programs[t].draw()
                    }))
                }
            }, {
                key: "_onResize",
                value: function() {
                    if (this.isReady && this.isActivated) {
                        s["default"]._onResize();
                        for (var e in this.programs) this.programs[e].resize && this.programs[e].resize()
                    }
                }
            }, {
                key: "reset",
                value: function() {
                    s["default"].reset();
                    for (var e in this.programs) this.programs[e].reset && this.programs[e].reset()
                }
            }, {
                key: "_onError",
                value: function() {
                    throw new Error("WebGL not supported :(")
                }
            }, {
                key: "renderBackground",
                value: function() {
                    0 === this.shell.width && window.dispatchEvent(new Event("resize")), this.shell.canvas.width = window.innerWidth, this.shell.canvas.height = window.innerHeight, this.shell.canvas.style.width = window.innerWidth + "px", this.shell.canvas.style.height = window.innerHeight + "px", this.shell.gl.bindFramebuffer(this.shell.gl.FRAMEBUFFER, null), this.shell.gl.viewport(0, 0, window.innerWidth, window.innerHeight), this.shell.gl.clear(this.shell.gl.COLOR_BUFFER_BIT | this.shell.gl.DEPTH_BUFFER_BIT), this.noiseBackground.render()
                }
            }, {
                key: "isActivated",
                set: function(e) {
                    this._isActivated !== e && (this._isActivated = e, this._isActivated && setTimeout(this._onResize, 10))
                },
                get: function() {
                    return this._isActivated
                }
            }]), e
        }(),
        f = new d;
    e.exports = f
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = n(22),
        l = i(u),
        c = n(31),
        h = n(205),
        d = i(h),
        f = function(e) {
            function t() {
                r(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this), this.bindEvents(), this.$el = document.querySelector(".strive__cursor"), this.$debug = document.querySelector(".strive__debug"), this.$middle = document.querySelector(".strive__middle"), this.$circle = document.querySelector(".strive__circle"), this.$circle_target = document.querySelector(".strive__circle_target"), this.isPlaying = !1, this.isMoving = !1, this.isOpened = !1, this._isInside = null, this.distance = 0, this.nervous = 0, this.pos = [0, 0], this.center = [0, 0], this.radius = 0, this.radiusDetection = 0, this.targetRadius = 250, this.targetRadiusDetection = 90, this.targetWidth = 768, this.acc = c.vec2.fromValues(0, 0), this.velocity = c.vec2.fromValues(0, 0), this.friction = .2, this.oppositeFriction = .2, this.angle = 0, this._debug = null, this.mouse = [0, 0], this.touch = [0, 0]
            }
            return o(t, e), a(t, [{
                key: "bindEvents",
                value: function() {
                    this._onUpdate = this._onUpdate.bind(this), this._onResize = this._onResize.bind(this), this._onTouchMove = this._onTouchMove.bind(this)
                }
            }, {
                key: "ready",
                value: function(e) {
                    this.shell = e, this.debug = d["default"].DEBUG_CURSOR, this.pos = c.vec2.clone(this.shell.mouse), this.center = c.vec2.fromValues(.5 * this.shell.element.offsetWidth, .5 * this.shell.element.offsetHeight)
                }
            }, {
                key: "activate",
                value: function() {
                    window.addEventListener("touchmove", this._onTouchMove)
                }
            }, {
                key: "desactivate",
                value: function() {
                    window.removeEventListener("touchmove", this._onTouchMove)
                }
            }, {
                key: "_onResize",
                value: function() {
                    var e = Math.min(this.shell.element.offsetWidth, this.shell.element.offsetHeight) / 768;
                    this.radius = this.targetRadius * e, this.radiusDetection = this.targetRadiusDetection * e, this.center[0] = .5 * this.shell.element.offsetWidth, this.center[1] = .5 * this.shell.element.offsetHeight, this.debug && (this.$middle.style.transform = "translate3d(" + this.center[0] + "px, " + this.center[1] + "px, 0)", this.$circle.style.left = this.$circle.style.top = "-" + this.radius + "px", this.$circle.style.width = this.$circle.style.height = 2 * this.radius + "px", this.$circle.style.transform = "translate3d(" + this.center[0] + "px, " + this.center[1] + "px, 0)", this.$circle_target.style.left = this.$circle_target.style.top = "-" + this.radiusDetection + "px", this.$circle_target.style.width = this.$circle_target.style.height = 2 * this.radiusDetection + "px", this.$circle_target.style.transform = "translate3d(" + this.center[0] + "px, " + this.center[1] + "px, 0)")
                }
            }, {
                key: "_onUpdate",
                value: function() {
                    var e = this;
                    this.debug = d["default"].DEBUG_CURSOR, BrowserDetect.isDesktop ? (this.mouse[0] = this.shell.mouseX, this.mouse[1] = this.shell.mouseY) : (this.mouse[0] = this.touch[0], this.mouse[1] = this.touch[1], (0 === parseInt(this.mouse[0]) || isNaN(this.mouse[0])) && (this.pos[0] = -100, this.pos[1] = -100)), this.isInside = c.vec2.distance(this.pos, this.center) < this.radius - 100, this.isMoving = 0 !== parseFloat(c.vec2.distance(this.mouse, this.pos).toFixed(2));
                    var t = c.vec2.clone(this.pos);
                    this.acc = [this.mouse[0] - this.pos[0], this.mouse[1] - this.pos[1]], this.acc = c.vec2.scale(this.acc, this.acc, this.friction), this.pos = c.vec2.add(this.pos, this.pos, this.acc), this.distance = c.vec2.distance(this.pos, this.center);
                    var n = Math.abs(Math.max(0, Math.min(1, (this.radius - this.distance) / this.radius))),
                        i = c.vec2.normalize([], c.vec2.sub([], this.center, this.pos)),
                        r = c.vec2.scale([], i, this.radius * -n);
                    c.vec2.scale(r, r, this.oppositeFriction), c.vec2.add(this.pos, this.pos, r), (isNaN(this.pos[0]) || isNaN(this.pos[1])) && (this.pos[0] = -100, this.pos[1] = -100), this.angle = this.angleBetweenPoints(this.pos, t) / Math.PI * -180, this.isMoving && (this.$el.style.webkitTransform = "translate3d(" + this.pos[0] + "px, " + this.pos[1] + "px, 0) rotate(" + this.angle + "deg)", this.$el.style.transform = "translate3d(" + this.pos[0] + "px, " + this.pos[1] + "px, 0) rotate(" + this.angle + "deg)"), c.vec2.distance(this.pos, this.center) <= this.radiusDetection && !this.isPlaying && (this.isPlaying = !0, this.emit("start"), setTimeout(function() {
                        e.isPlaying = !1
                    }, 3e3))
                }
            }, {
                key: "_onTouchMove",
                value: function(e) {
                    this.touch[0] = e.targetTouches[0].clientX, this.touch[1] = e.targetTouches[0].clientY
                }
            }, {
                key: "angleBetweenPoints",
                value: function(e, t) {
                    return Math.atan2(t[0] - e[0], t[1] - e[1])
                }
            }, {
                key: "reset",
                value: function() {
                    this.mouse[0] = -100, this.mouse[1] = -100
                }
            }, {
                key: "debug",
                set: function(e) {
                    this._debug !== e && (this._debug = e, this.$debug.style.display = d["default"].DEBUG_CURSOR ? "" : "none", this._onResize())
                },
                get: function() {
                    return this._debug
                }
            }, {
                key: "isInside",
                set: function(e) {
                    this._isInside !== e && (this._isInside = e)
                },
                get: function() {
                    return this._isInside
                }
            }]), t
        }(l["default"]),
        p = new f;
    e.exports = p
}, function(e, t, n) {
    "use strict";
    var i = {
        DEBUG: !1,
        DEBUG_CURSOR: !1,
        progress: 0
    };
    if (i.DEBUG) {
        var r = new(n(18).GUI);
        r.add(i, "DEBUG_CURSOR")
    }
    e.exports = i
}, function(e, t, n) {
    "use strict";
    e.exports = {
        raymarching: n(207),
        sphere: n(221),
        title: n(224),
        waves: n(225),
        noise: n(226),
        ship: n(227)
    }
}, function(e, t, n) {
    "use strict";
    var i = n(208).getShader,
        r = void 0,
        o = void 0,
        a = void 0,
        s = {},
        u = {},
        l = {},
        c = function(e) {
            return r = e, o = r.gl, a = o.createProgram(), o.attachShader(a, i(o, "waves.vert")), o.attachShader(a, i(o, "raymarching.frag")), o.linkProgram(a), o.getProgramParameter(a, o.LINK_STATUS) ? (s.vertexPositionBuffer = o.createBuffer(), s.vertexPositionBuffer.itemSize = 3, s.vertexPositionBuffer.numItems = 4, o.bindBuffer(o.ARRAY_BUFFER, s.vertexPositionBuffer), o.bufferData(o.ARRAY_BUFFER, new Float32Array([-1, -1, 0, -1, 1, 0, 1, 1, 0, 1, -1, 0]), o.STATIC_DRAW), s.indicesBuffer = o.createBuffer(), s.indicesBuffer.itemSize = 1, s.indicesBuffer.numItems = 6, o.bindBuffer(o.ELEMENT_ARRAY_BUFFER, s.indicesBuffer), o.bufferData(o.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 2, 0, 3]), o.STATIC_DRAW), u.vPosition = o.getAttribLocation(a, "vPosition"), l.uTime = o.getUniformLocation(a, "uTime"), l.uResolution = o.getUniformLocation(a, "uResolution"), void(l.uAspectRatio = o.getUniformLocation(a, "uAspectRatio"))) : void alert("Could not initialise shaders")
        },
        h = function() {
            o.useProgram(a), o.bindBuffer(o.ARRAY_BUFFER, s.vertexPositionBuffer), o.vertexAttribPointer(u.vPosition, s.vertexPositionBuffer.itemSize, o.FLOAT, !1, 0, 0), o.bindBuffer(o.ELEMENT_ARRAY_BUFFER, s.indicesBuffer)
        },
        d = function() {
            o.enableVertexAttribArray(u.vPosition)
        },
        f = function() {
            o.uniform1f(l.uTime, .001 * performance.now()), o.uniform1f(l.uAspectRatio, r.element.offsetWidth / r.element.offsetHeight), o.uniform2fv(l.uResolution, new Float32Array([r.element.offsetWidth / r.scale, r.element.offsetHeight / r.scale]))
        },
        p = function() {
            h(), d(), f(), o.drawElements(o.TRIANGLES, s.indicesBuffer.numItems, o.UNSIGNED_SHORT, 0)
        };
    e.exports = {
        create: c,
        bind: h,
        enableAttributePointers: d,
        setUniforms: f,
        draw: p
    }
}, function(e, t, n) {
    "use strict";
    var i = (n(209), {});
    i["waves.frag"] = n(210), i["waves.vert"] = n(211), i["title.frag"] = n(212), i["title.vert"] = n(213), i["sphere.frag"] = n(214), i["sphere.vert"] = n(215), i["noise.frag"] = n(216), i["noise.vert"] = n(217), i["ship.frag"] = n(218), i["ship.vert"] = n(219), i["raymarching.frag"] = n(220);
    var r = function(e, t) {
        var n = i[t];
        if (!n) return console.warn('"' + t + "\" doesn't exist"), null;
        var r = null;
        if (t.match(/\.vert$/) ? r = e.createShader(e.VERTEX_SHADER) : t.match(/\.frag$/) && (r = e.createShader(e.FRAGMENT_SHADER)), e.shaderSource(r, n), e.compileShader(r), !e.getShaderParameter(r, e.COMPILE_STATUS)) {
            var o = e.getShaderInfoLog(r);
            throw "Could not compile WebGL program. \n\n" + o
        }
        return r
    };
    e.exports = {
        shaders: i,
        getShader: r
    }
}, function(e, t) {
    e.exports = function() {
        throw new Error("It appears that you're using glslify in browserify without its transform applied. Make sure that you've set up glslify as a source transform: https://github.com/substack/node-browserify#browserifytransform")
    }
}, function(e, t) {
    e.exports = '#define GLSLIFY 1\nprecision highp float;\n\n#define M_PI 3.1415926535897932384626433832795\n\nuniform float uTime;\nuniform vec2 uResolution;\nuniform float uAspectRatio;\nuniform float uProgress;\nuniform float uWaveProgress;\nuniform float uNervous;\nuniform bool uProgressEnded;\n\nuniform sampler2D uNoise;\nuniform sampler2D uBg;\n\nuniform vec4 uNoiseParam;\nuniform vec2 rNoise;\n\nvarying vec2 aTexCoord;\nvarying vec2 aBgTexCoord;\n\nvec3 color1 = vec3(vec3(0.2823529411764706,0.16470588235294117,0.611764705882353));\nvec3 color2 = vec3(vec3(0.1803921568627451,0.7098039215686275,0.6941176470588235));\n\nvec3 draw_circle(vec2 uv, vec2 center, float radius, float lineWidth, float rand) {\n  vec2 diff = center-uv;\n  float len = length(diff);\n\n  // len += noise(vec3(diff * 4.5 + rand, uTime * 0.5)) * 0.05;\n  vec4 c = texture2D(uNoise, aTexCoord + rand);\n  len += ((c.r+c.g+c.b+c.a)/4.0 - 0.5) * 0.3;\n\n  float circle = smoothstep(radius-lineWidth, radius, len) - smoothstep(radius, radius+lineWidth, len);\n  return vec3(circle);\n}\n\nvec3 circle(vec3 color, vec2 uv, vec2 center, float radius, float lineWidth, float rand) {\n  color += draw_circle(uv, center, radius, lineWidth * 10.0, rand);\n  color *= mix(color1, color2, uv.y) * 0.5;\n  color += draw_circle(uv, center, radius, lineWidth, rand);\n  color *= mix(color1, color2, uv.y) + 0.2;\n  return color;\n}\n\nvoid main(void) {\n\n  vec2 uv = gl_FragCoord.xy / uResolution.xy;\n  uv.x *= uAspectRatio;\n\n  vec2 center  = vec2(0.5);\n  center.x *= uAspectRatio;\n\n  float dist     = 0.5 - distance( aBgTexCoord.xy, uNoiseParam.xy );\n  float texColor = texture2D(uBg, ( aBgTexCoord.xy + rNoise ) * uNoiseParam.w ).r * 0.4;\n  float bcolor   = dist * texColor;\n  vec3 color     = vec3( bcolor, bcolor, bcolor );\n  color += mix(vec3(1.0), vec3(vec3(0.2823529411764706,0.16470588235294117,0.611764705882353)), uNervous) * (0.1 * (uNervous));\n  color *= mix(vec3(1.0), vec3(vec3(0.5137254901960784,0.7019607843137254,0.6431372549019608)), uProgress);\n\n  if (!uProgressEnded) {\n    gl_FragColor = vec4(color, 1.0);\n    return;\n  }\n\n  float radiusMax = 1.5;\n  float radius    = 0.0;\n  float gap_size  = radiusMax / float(4);\n\n  vec3 c;\n  for (int i = 0; i < 4; i++) {\n    radius = mod(uTime * 0.15 + gap_size * float(i), radiusMax);\n    c  = circle(color, uv, center, radius, 0.005 + 0.01 * (radius/1.5), 1.7) * 0.2 * uProgress;\n    c *= (1.2 - length(center-uv));\n    color += c;\n  }\n\n  float waveProgress = uWaveProgress;\n\n  color += (\n    circle(color, uv, center, 1.5 * min(waveProgress / 0.70, 1.0), 0.005, 0.1) +\n    circle(color, uv, center, 1.5 * min(waveProgress / 0.85, 1.0), 0.005, 0.2) +\n    circle(color, uv, center, 1.5 * min(waveProgress, 1.0), 0.005, 0.3)\n  ) * 0.4 * uProgress;\n\n  // Main "electric" circle\n  color += circle(color, uv, center, 1.5 * min(waveProgress / 0.60, 1.0), 0.0075, 0.35) * uProgress;\n  color += draw_circle(uv, center, 1.5 * min(waveProgress / 0.60, 1.0), 0.005 * 0.25, 0.35) * uProgress;\n\n  gl_FragColor = vec4(color, 1.0);\n}\n'
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec3 vPosition;\nattribute vec2 vTexCoord;\nattribute vec2 vBgTexCoord;\n\nvarying vec2 aTexCoord;\nvarying vec2 aBgTexCoord;\n\nuniform vec4 uNoiseParam;\n\nvoid main(void) {\n  aBgTexCoord = vBgTexCoord;\n  aBgTexCoord.y = aBgTexCoord.y * uNoiseParam.z;\n  aTexCoord = vTexCoord;\n  gl_Position = vec4(vPosition, 1.0);\n}\n"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D uTexture;\nuniform float uTime;\nuniform float uProgress;\nuniform vec2 uResolution;\n\nvarying vec2 aTexCoord;\n\n#define M_PI 3.1415926535897932384626433832795\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_1_0(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_1_0(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_1_1(vec4 x) {\n     return mod289_1_0(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_1_2(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise_1_3(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D_1_4 = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g_1_5 = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g_1_5;\n  vec3 i1 = min( g_1_5.xyz, l.zxy );\n  vec3 i2 = max( g_1_5.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D_1_4.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289_1_0(i);\n  vec4 p = permute_1_1( permute_1_1( permute_1_1(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D_1_4.wyz - D_1_4.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1_1_6 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0_1_7 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1_1_6.xy,h.z);\n  vec3 p3 = vec3(a1_1_6.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt_1_2(vec4(dot(p0_1_7,p0_1_7), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_1_7 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0_1_7,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\n\n\n\nvoid main() {\n  vec2 uv = aTexCoord;\n  float t = uProgress;\n\n  uv.x += snoise_1_3(vec3(uv.x, uv.x-uv.y, uTime)) * 0.05;\n  uv.x += sin(uv.y * 0.5) * 0.15;\n  uv.y += cos(uv.x * 10.0) * 0.295;\n\n  uv.x = mix(aTexCoord.x, uv.x, t);\n  uv.y = mix(aTexCoord.y, uv.y, t);\n\n  uv = clamp(uv, vec2(0.0), aTexCoord);\n\n  gl_FragColor = texture2D(uTexture, uv);\n}\n"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec3 vPosition;\nattribute vec2 vTexCoord;\n\nvarying vec2 aTexCoord;\n\nvoid main(void) {\n  aTexCoord   = vTexCoord;\n  gl_Position = vec4(vPosition, 1.0);\n}\n"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nstruct DirectionalLight\n{\n  vec3 Color;\n  float AmbientIntensity;\n  float DiffuseIntensity;\n  vec3 Direction;\n};\n\nvarying vec3 aNormal;\nvarying float aZAxis;\n\nuniform float uTime;\nuniform float uCursorDistance;\nuniform float uProgress;\nuniform vec2 uResolution;\n\n// Global directional light\nuniform DirectionalLight gDirectionalLight;\nuniform vec3 gEyeWorldPos;\nuniform float gMatSpecularIntensity;\nuniform float gSpecularPower;\n\n#define M_PI 3.1415926535897932384626433832795\n\n/*\n  Circle\n\n  @params {vec2} uv\n  @params {vec2} center\n  @params {float} radius\n  @params {float} lineWidth\n*/\nvec3 circle(vec2 uv, vec2 center, float radius, float lineWidth) {\n  vec2 diff    = center-uv;\n  float len    = length(diff);\n  float circle = smoothstep(radius-lineWidth, radius, len) - smoothstep(radius, radius+lineWidth, len);\n  return vec3(circle);\n}\n\n/*\n  Directional light\n\n  @params {vec3} color\n*/\nvec3 directional_light(vec3 color, vec3 direction, float diffuse_intensity, float ambient_intensity) {\n  // Ambient color\n  vec3 AmbientColor = color * ambient_intensity;\n\n  // Diffuse color\n  vec3 nNormal        = aNormal;\n  vec3 LightDirection = direction;\n  vec3 SpecularColor  = vec3(0.0);\n  vec3 DiffuseColor   = vec3(0.0);\n  float DiffuseFactor = max(dot(nNormal, -LightDirection), 0.0);\n\n  DiffuseColor = vec3(color * diffuse_intensity * DiffuseFactor);\n\n  // // Specular color\n  vec3 VertexToEye     = normalize(gEyeWorldPos - gl_FragCoord.xyz);\n  vec3 LightReflect    = normalize(reflect(direction, nNormal));\n  float SpecularFactor = max(dot(VertexToEye, LightReflect), 0.0);\n\n  SpecularFactor = pow(SpecularFactor, gSpecularPower);\n  SpecularColor  = vec3(color * gMatSpecularIntensity * SpecularFactor);\n\n  return (AmbientColor + DiffuseColor + SpecularColor);\n}\n\nvoid main(void) {\n  vec3 color   = vec3(0.0);\n  vec2 center  = vec2(0.0);\n  center.x *= uResolution.x / uResolution.y;\n\n  // White Circles\n  vec3 c = mix(vec3(vec3(1.,1.,1.)), vec3(vec3(0.2823529411764706,0.16470588235294117,0.611764705882353)), (uCursorDistance / 1.0) * 0.75);\n  c      = mix(c, vec3(1.0), uProgress);\n  color += pow(0.5 * sin(-aZAxis * 20.0 + uTime * 10.0) + 0.5, 50.0) * 0.75 * c;\n\n  // Apply directional light\n  color += directional_light(\n    vec3(vec3(0.43137254901960786,0.43137254901960786,0.43137254901960786)),\n    normalize(vec3(0.0, -1.0, -0.4)),\n    0.3,\n    0.05\n  );\n\n  color *= directional_light(\n    vec3(1.0, 1.0, 1.0),\n    normalize(vec3(-0.3, -0.1, 1.0)),\n    1.0,\n    0.5\n  );\n\n  // Main circle\n  c      = mix(vec3(vec3(1.,1.,1.)), vec3(vec3(0.2823529411764706,0.16470588235294117,0.611764705882353)), (uCursorDistance / 1.0) * 0.85);\n  c      = mix(c, vec3(1.0), uProgress);\n  color += pow(-aZAxis + 0.075*(1.0-uProgress), 50.0) * c;\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nattribute vec3 vPosition;\n// attribute vec3 vNormal;\n\nuniform vec2 uResolution;\nuniform float uTime;\nuniform float uCursorDistance;\nuniform float uProgress;\nuniform float uScale;\nuniform mat4 uPMatrix;\nuniform mat4 uMVMatrix;\n\nvarying vec3 aNormal;\nvarying float aZAxis;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289_1_0(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289_1_0(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute_1_1(vec4 x) {\n     return mod289_1_0(((x*34.0)+1.0)*x);\n}\n\nfloat permute_1_1(float x) {\n     return mod289_1_0(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_1_2(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt_1_2(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4_1_3(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n  }\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise_1_4(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289_1_0(i);\n  float j0 = permute_1_1( permute_1_1( permute_1_1( permute_1_1(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute_1_1( permute_1_1( permute_1_1( permute_1_1 (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0_1_5 = grad4_1_3(j0,   ip);\n  vec4 p1 = grad4_1_3(j1.x, ip);\n  vec4 p2 = grad4_1_3(j1.y, ip);\n  vec4 p3 = grad4_1_3(j1.z, ip);\n  vec4 p4 = grad4_1_3(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt_1_2(vec4(dot(p0_1_5,p0_1_5), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_1_5 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt_1_2(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0_1_5, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n\n\n\n\n#define M_EPSILON 0.001\n\nvoid main(void) {\n  vec3 position = vPosition;\n  float cursorDistance = 2.0 + uCursorDistance * (1.0 - uProgress);\n\n  vec3 up   = vec3(0.0, 1.0, 0.0);\n  vec3 left = normalize(cross(position, up));\n  vec3 top  = cross(position, left);\n  top       = position + top  * M_EPSILON;\n  left      = position + left * M_EPSILON;\n\n  position *= 1.0 + snoise_1_4(vec4(position * cursorDistance, uTime)) * 0.125;\n  position *= 1.35;\n\n  top *= 1.0 + snoise_1_4(vec4(top * cursorDistance, uTime)) * 0.125;\n  top *= 1.35;\n\n  left *= 1.0 + snoise_1_4(vec4(left * cursorDistance, uTime)) * 0.125;\n  left *= 1.35;\n\n  aNormal = normalize(cross(top - position, left - position));\n  aNormal *= -1.0;\n\n  aZAxis = vPosition.z;\n  position *= uScale;\n\n  gl_Position = uPMatrix * uMVMatrix * vec4(position, 1.0);\n}";
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D uTexture;\nuniform float uTime;\nuniform vec2 uResolution;\n\nvarying vec2 aTexCoord;\n\n#define M_PI 3.1415926535897932384626433832795\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_1_0(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_1_0(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_1_1(vec4 x) {\n     return mod289_1_0(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_1_2(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise_1_3(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D_1_4 = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g_1_5 = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g_1_5;\n  vec3 i1 = min( g_1_5.xyz, l.zxy );\n  vec3 i2 = max( g_1_5.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D_1_4.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289_1_0(i);\n  vec4 p = permute_1_1( permute_1_1( permute_1_1(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D_1_4.wyz - D_1_4.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1_1_6 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0_1_7 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1_1_6.xy,h.z);\n  vec3 p3 = vec3(a1_1_6.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt_1_2(vec4(dot(p0_1_7,p0_1_7), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_1_7 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0_1_7,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\n\n\n\nvoid main() {\n  vec2 uv    = aTexCoord;\n  float time = uTime * 0.2;\n  gl_FragColor = vec4(\n    texture2D(uTexture, uv+vec2(time, 0.2)).r,\n    texture2D(uTexture, uv+vec2(0.4, time*0.9)).g,\n    texture2D(uTexture, uv+vec2(0.51, -time*0.9)).b,\n    texture2D(uTexture, uv+vec2(-time*0.8765, 0.67)).a\n  );\n}\n"
}, 213, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform float uTime;\nuniform vec2 uResolution;\nuniform vec2 uMouse;\n\n#define M_PI 3.1415926535897932384626433832795\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / uResolution;\n  uv.x *= uResolution.x / uResolution.y;\n\n  float radius = 0.05;\n  float len    = length(uMouse.xy-uv.xy);\n  vec4 color   = vec4(vec3(0.,0.,0.), 0.0);\n\n  if (len < radius) {\n    color = vec4(vec3(1.,0.,0.), 1.0) * (1.0 - len / radius);\n  }\n\n  gl_FragColor = color;\n}\n"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nattribute vec3 vPosition;\n\nvoid main(void) {\n  gl_Position = vec4(vPosition, 1.0);\n}\n"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\n#define M_EPSILON 0.001\n#define RAYMARCH_STEPS 40\n\nuniform float uTime;\nuniform float uAspectRatio;\nuniform vec2 uResolution;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289_1_0(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289_1_0(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute_1_1(vec4 x) {\n     return mod289_1_0(((x*34.0)+1.0)*x);\n}\n\nfloat permute_1_1(float x) {\n     return mod289_1_0(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_1_2(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt_1_2(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4_1_3(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n  }\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise_1_4(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289_1_0(i);\n  float j0 = permute_1_1( permute_1_1( permute_1_1( permute_1_1(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute_1_1( permute_1_1( permute_1_1( permute_1_1 (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0_1_5 = grad4_1_3(j0,   ip);\n  vec4 p1 = grad4_1_3(j1.x, ip);\n  vec4 p2 = grad4_1_3(j1.y, ip);\n  vec4 p3 = grad4_1_3(j1.z, ip);\n  vec4 p4 = grad4_1_3(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt_1_2(vec4(dot(p0_1_5,p0_1_5), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_1_5 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt_1_2(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0_1_5, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n\n\n\n\nfloat sphere(vec3 p) {\n  float radius = 1.0 + snoise_1_4(vec4(p * 2.0, uTime)) * 0.125;\n  return length(p) - radius;\n}\n\nvec2 map(vec3 p) {\n  vec2 res;\n  res = vec2(sphere(p), 46.8);\n  return res;\n}\n\nvec3 calcNormal( in vec3 pos )\n{\n  vec3 eps = vec3( M_EPSILON, 0.0, 0.0 );\n  vec3 nor = vec3(\n      map(pos+eps.xyy).x - map(pos-eps.xyy).x,\n      map(pos+eps.yxy).x - map(pos-eps.yxy).x,\n      map(pos+eps.yyx).x - map(pos-eps.yyx).x );\n  return normalize(nor);\n}\n\nfloat calcAO( in vec3 pos, in vec3 nor ) {\n  float occ = 0.0;\n  float sca = 1.0;\n  for( int i=0; i<5; i++ )\n  {\n      float hr = 0.01 + 0.12*float(i)/4.0;\n      vec3 aopos =  nor * hr + pos;\n      float dd = map( aopos ).x;\n      occ += -(dd-hr)*sca;\n      sca *= 0.95;\n  }\n  return clamp( 1.0 - 3.0*occ, 0.0, 1.0 );\n}\n\nvec2 raymarch(vec3 rayOrigin, vec3 rayDirection, out vec3 pos) {\n  float tmin = M_EPSILON;\n  float tmax = 15.;\n  float precis = 0.002;\n\n  float t = tmin;\n  float m = -1.0;\n  vec2 res;\n\n  for(int i = 0; i < RAYMARCH_STEPS; ++i) {\n    pos = rayOrigin + rayDirection * t;\n    res = map(pos);\n    if (res.x<precis || t>tmax) break;\n    t += res.x;\n    m = res.y;\n  }\n\n  if( t>tmax ) m = -1.0;\n  return vec2( t, m );\n}\n\nvec4 render(vec3 ro, vec3 rd) {\n\n  vec3 pos;\n  vec3 color  = vec3(0.7, 0.9, 1.0) + rd.y * 0.8;\n  vec2 result = raymarch(ro, rd, pos);\n  float t     = result.x;\n  float m     = result.y;\n\n  if (m > M_EPSILON) {\n    vec3 nor = calcNormal(pos);\n    vec3 ref = reflect(rd, nor);\n\n    // Material\n    color = vec3(vec3(0.10980392156862745,0.10980392156862745,0.10980392156862745));//0.45 + 0.3*sin( vec3(vec3(0.,0.,1.))*(m-1.0) );\n\n    // Lighting\n    float occ = calcAO(pos, nor);\n    // vec3  lig = normalize( vec3(-0.6, 0.7, -0.5) );   // Light direction\n    vec3  lig = normalize( vec3(-0.6, 0.7, -0.5) );   // Light direction\n    float amb = clamp( 0.5+0.5*nor.y, 0.0, 1.0 );     // Ambiant factor\n    float dif = clamp( dot( nor, lig ), 0.0, 1.0 );   // Diffuse factor\n    float bac = clamp( dot( nor, normalize(vec3(-lig.x,0.0,-lig.z))), 0.0, 1.0 )*clamp( 1.0-pos.y,0.0,1.0);\n    float dom = smoothstep( -0.1, 0.1, ref.y );\n    float fre = pow( clamp(1.0+dot(nor,rd),0.0,1.0), 2.0 );\n    float spe = pow(clamp( dot( ref, lig ), 0.0, 1.0 ),16.0);\n\n    vec3 lin = vec3(0.0);\n    lin += 1.20*dif*vec3(vec3(0.4745098039215686,0.4745098039215686,0.4745098039215686));\n    lin += 1.50*spe*vec3(vec3(1.,1.,1.))*dif;\n    lin += 0.20*amb*vec3(vec3(1.,1.,1.))*occ;\n    lin += 0.20*dom*vec3(0.50,0.70,1.00)*occ;\n    lin += 0.30*bac*vec3(0.25,0.25,0.25)*occ;\n    lin += 0.40*fre*vec3(vec3(1.,1.,1.))*occ;\n\n    // lin += 1.20*dif*vec3(1.00,0.85,0.55);\n    // lin += 1.20*spe*vec3(1.00,0.85,0.55)*dif;\n    // lin += 0.20*amb*vec3(0.50,0.70,1.00)*occ;\n    // lin += 0.30*dom*vec3(0.50,0.70,1.00)*occ;\n    // lin += 0.30*bac*vec3(0.25,0.25,0.25)*occ;\n    // lin += 0.40*fre*vec3(1.00,1.00,1.00)*occ;\n\n    color *= lin;\n\n    return vec4(color, 1.0);\n  }\n\n  return vec4(0.0);\n\n}\n\nvoid main() {\n  vec3 eye         = vec3(0.0, 0.0, -1.0);\n  vec3 up          = vec3(0.0, 1.0, 0.0);\n  vec3 right       = vec3(1.0, 0.0, 0.0);\n  float focalLength = 0.0;\n\n  vec2 uv = gl_FragCoord.xy * 2.0 / uResolution.xy - 1.0;\n  uv.x *= uAspectRatio;\n\n  vec3 cam_pos = vec3(0, 0, -3);\n  vec3 cam_dir = normalize(vec3(uv, 1));\n  vec4 color   = render(cam_pos, cam_dir);\n\n  gl_FragColor = color;\n}\n"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }
    var r = n(31),
        o = n(204),
        a = i(o),
        s = void 0,
        u = void 0,
        l = void 0,
        c = null,
        h = n(208).getShader,
        d = {},
        f = {},
        p = {},
        m = {},
        v = [],
        g = {
            progress: 0,
            nervous: 0,
            scale: 0
        },
        y = function() {
            var e = r.mat4.create();
            r.mat4.copy(e, m.modelViewMatrix), v.push(e)
        },
        _ = function() {
            if (0 == v.length) throw "Invalid popMatrix!";
            m.modelViewMatrix = v.pop()
        },
        x = function(e) {
            if (s = e, u = e.gl, l = u.createProgram(), u.attachShader(l, h(u, "sphere.vert")), u.attachShader(l, h(u, "sphere.frag")), u.linkProgram(l), !u.getProgramParameter(l, u.LINK_STATUS)) {
                var t = u.getProgramInfoLog(l);
                return void console.warn("Could not initialise shaders", t)
            }
            var n = P(5);
            d.vertexPositionBuffer = u.createBuffer(), d.vertexPositionBuffer.itemSize = 3, d.vertexPositionBuffer.numItems = n.vertices.length, u.bindBuffer(u.ARRAY_BUFFER, d.vertexPositionBuffer), u.bufferData(u.ARRAY_BUFFER, new Float32Array(n.vertices), u.STATIC_DRAW), d.indicesBuffer = u.createBuffer(), d.indicesBuffer.itemSize = 1, d.indicesBuffer.numItems = n.indices.length, u.bindBuffer(u.ELEMENT_ARRAY_BUFFER, d.indicesBuffer), u.bufferData(u.ELEMENT_ARRAY_BUFFER, new Uint16Array(n.indices), u.STATIC_DRAW), f.vPosition = u.getAttribLocation(l, "vPosition"), p.uTime = u.getUniformLocation(l, "uTime"), p.uResolution = u.getUniformLocation(l, "uResolution"), p.uPMatrix = u.getUniformLocation(l, "uPMatrix"), p.uMVMatrix = u.getUniformLocation(l, "uMVMatrix"), p.gEyeWorldPos = u.getUniformLocation(l, "gEyeWorldPos"), p.gMatSpecularIntensity = u.getUniformLocation(l, "gMatSpecularIntensity"), p.gSpecularPower = u.getUniformLocation(l, "gSpecularPower"), p.uProgress = u.getUniformLocation(l, "uProgress"), p.uCursorDistance = u.getUniformLocation(l, "uCursorDistance"), p.uScale = u.getUniformLocation(l, "uScale"), m.perspectiveMatrix = r.mat4.create(), m.modelViewMatrix = r.mat4.create()
        },
        b = function() {
            u.useProgram(l), u.bindBuffer(u.ARRAY_BUFFER, d.vertexPositionBuffer), u.vertexAttribPointer(f.vPosition, d.vertexPositionBuffer.itemSize, u.FLOAT, !1, 0, 0), u.bindBuffer(u.ELEMENT_ARRAY_BUFFER, d.indicesBuffer)
        },
        w = function() {
            u.enableVertexAttribArray(f.vPosition), u.enableVertexAttribArray(f.vNormal)
        },
        T = function() {
            u.uniform1f(p.uTime, .001 * performance.now()), u.uniform2fv(p.uResolution, new Float32Array([s.element.offsetWidth, s.element.offsetHeight])), u.uniformMatrix4fv(p.uPMatrix, !1, m.perspectiveMatrix), u.uniformMatrix4fv(p.uMVMatrix, !1, m.modelViewMatrix), u.uniform3fv(p.gEyeWorldPos, new Float32Array([0, 0, 0])), u.uniform1f(p.gMatSpecularIntensity, .25), u.uniform1f(p.gSpecularPower, 2), u.uniform1f(p.uProgress, g.progress), u.uniform1f(p.uCursorDistance, g.nervous), u.uniform1f(p.uScale, BrowserDetect.isDesktop ? g.scale : 1.5 * g.scale)
        },
        E = function() {
            S(), b(), w(), r.mat4.perspective(m.perspectiveMatrix, 45, s.element.offsetWidth / s.element.offsetHeight, .1, 100), r.mat4.identity(m.modelViewMatrix), y(), r.mat4.translate(m.modelViewMatrix, m.modelViewMatrix, [0, 0, -7]), T(), _(), u.frontFace(u.CW), u.cullFace(u.BACK), u.enable(u.CULL_FACE), u.drawElements(u.TRIANGLES, d.indicesBuffer.numItems, u.UNSIGNED_SHORT, 0), u.disable(u.CULL_FACE)
        },
        S = function() {
            L(a["default"].isInside)
        },
        M = function() {
            u.useProgram(null);
            for (var e in d) u.deleteBuffer(d[e]);
            u.deleteProgram(l)
        },
        P = function(e) {
            var t = n(222)(e),
                i = [].concat.apply([], t.positions),
                r = [].concat.apply([], t.cells);
            return t.vertices = i, t.indices = r, t
        },
        A = function() {
            TweenLite.to(g, 1, {
                scale: 1,
                delay: 1,
                onComplete: function() {
                    a["default"].on("start", R)
                }
            })
        },
        C = function() {
            TweenLite.to(g, 1, {
                scale: 0
            }), a["default"].off("start", R)
        },
        R = function() {
            TweenLite.to(g, 1, {
                progress: 1
            }), TweenLite.to(g, 1, {
                progress: 0,
                delay: 2
            })
        },
        L = function(e) {
            c !== e && (c = e, e ? TweenLite.to(g, 1, {
                nervous: 1
            }) : TweenLite.to(g, 1, {
                nervous: 0
            }))
        },
        O = function() {
            g.nervous = 0, g.progress = 0, g.scale = 0
        };
    e.exports = {
        create: x,
        draw: E,
        cleanup: M,
        activate: A,
        desactivate: C,
        reset: O
    }
}, function(e, t, n) {
    function i(e) {
        e = 0 | +e;
        var t = [],
            n = [],
            i = .5 + Math.sqrt(5) / 2;
        t.push([-1, +i, 0]), t.push([1, +i, 0]), t.push([-1, -i, 0]), t.push([1, -i, 0]), t.push([0, -1, +i]), t.push([0, 1, +i]), t.push([0, -1, -i]), t.push([0, 1, -i]), t.push([+i, 0, -1]), t.push([+i, 0, 1]), t.push([-i, 0, -1]), t.push([-i, 0, 1]), n.push([0, 11, 5]), n.push([0, 5, 1]), n.push([0, 1, 7]), n.push([0, 7, 10]), n.push([0, 10, 11]), n.push([1, 5, 9]), n.push([5, 11, 4]), n.push([11, 10, 2]), n.push([10, 7, 6]), n.push([7, 1, 8]), n.push([3, 9, 4]), n.push([3, 4, 2]), n.push([3, 2, 6]), n.push([3, 6, 8]), n.push([3, 8, 9]), n.push([4, 9, 5]), n.push([2, 4, 11]), n.push([6, 2, 10]), n.push([8, 6, 7]), n.push([9, 8, 1]);
        for (var a = {
                cells: n,
                positions: t
            }; e-- > 0;) a = r(a);
        t = a.positions;
        for (var s = 0; s < t.length; s++) o(t[s]);
        return a
    }

    function r(e) {
        function t(e, t) {
            var r = i(e, t),
                o = n(r),
                a = u[o];
            return a ? a : u[o] = r
        }

        function n(e) {
            return e[0].toPrecision(6) + "," + e[1].toPrecision(6) + "," + e[2].toPrecision(6)
        }

        function i(e, t) {
            return [(e[0] + t[0]) / 2, (e[1] + t[1]) / 2, (e[2] + t[2]) / 2]
        }
        for (var r = e.positions, o = e.cells, a = [], s = [], u = {}, l = 0, c = 0; c < o.length; c++) {
            var h = o[c],
                d = h[0],
                f = h[1],
                p = h[2],
                m = r[d],
                v = r[f],
                g = r[p],
                y = t(m, v),
                _ = t(v, g),
                x = t(g, m),
                b = s.indexOf(y); - 1 === b && (b = l++, s.push(y));
            var w = s.indexOf(_); - 1 === w && (w = l++, s.push(_));
            var T = s.indexOf(x); - 1 === T && (T = l++, s.push(x));
            var E = s.indexOf(m); - 1 === E && (E = l++, s.push(m));
            var S = s.indexOf(v); - 1 === S && (S = l++, s.push(v));
            var M = s.indexOf(g); - 1 === M && (M = l++, s.push(g)), a.push([E, b, T]), a.push([S, w, b]), a.push([M, T, w]), a.push([b, w, T])
        }
        return {
            cells: a,
            positions: s
        }
    }
    var o = n(223);
    e.exports = i
}, function(e, t) {
    function n(e) {
        for (var t = 0, n = 0; n < e.length; n++) t += e[n] * e[n];
        if (t = Math.sqrt(t), 0 === t) return Array.apply(null, new Array(e.length)).map(Number.prototype.valueOf, 0);
        for (var n = 0; n < e.length; n++) e[n] /= t;
        return e
    }
    e.exports = n
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }
    var r = n(204),
        o = i(r),
        a = void 0,
        s = void 0,
        u = void 0,
        l = !1,
        c = n(208).getShader,
        h = {},
        d = {},
        f = {},
        p = {},
        m = {
            progress: 0
        },
        v = function(e) {
            a = e, s = a.gl, y()
        },
        g = function() {
            if (u = s.createProgram(), s.attachShader(u, c(s, "title.vert")), s.attachShader(u, c(s, "title.frag")), s.linkProgram(u), !s.getProgramParameter(u, s.LINK_STATUS)) return void alert("Could not initialise shaders");
            h.vertexPositionBuffer = s.createBuffer(), h.vertexPositionBuffer.itemSize = 3, h.vertexPositionBuffer.numItems = 4, s.bindBuffer(s.ARRAY_BUFFER, h.vertexPositionBuffer), s.bufferData(s.ARRAY_BUFFER, new Float32Array([-1, -1, 0, -1, 1, 0, 1, 1, 0, 1, -1, 0]), s.STATIC_DRAW), h.vertexTexCoordBuffer = s.createBuffer(), h.vertexTexCoordBuffer.itemSize = 2, h.vertexTexCoordBuffer.numItems = 4, s.bindBuffer(s.ARRAY_BUFFER, h.vertexTexCoordBuffer);
            var e = {
                x: (a.element.offsetWidth * -.5 - p.strive_title.image.naturalWidth * -.5) / p.strive_title.image.naturalWidth,
                y: (a.element.offsetHeight * -.5 - p.strive_title.image.naturalHeight * -.5) / p.strive_title.image.naturalHeight,
                width: a.element.offsetWidth / p.strive_title.image.naturalWidth,
                height: a.element.offsetHeight / p.strive_title.image.naturalHeight
            };
            s.bufferData(s.ARRAY_BUFFER, new Float32Array([e.x, e.y, e.x, e.y + e.height, e.x + e.width, e.y + e.height, e.x + e.width, e.y]), s.STATIC_DRAW), h.indicesBuffer = s.createBuffer(), h.indicesBuffer.itemSize = 1, h.indicesBuffer.numItems = 6, s.bindBuffer(s.ELEMENT_ARRAY_BUFFER, h.indicesBuffer), s.bufferData(s.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 2, 0, 3]), s.STATIC_DRAW), s.bindTexture(s.TEXTURE_2D, p.strive_title), s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL, !0), s.texImage2D(s.TEXTURE_2D, 0, s.RGBA, s.RGBA, s.UNSIGNED_BYTE, p.strive_title.image), s.texParameteri(s.TEXTURE_2D, s.TEXTURE_MAG_FILTER, s.LINEAR), s.texParameteri(s.TEXTURE_2D, s.TEXTURE_MIN_FILTER, s.LINEAR), s.texParameteri(s.TEXTURE_2D, s.TEXTURE_WRAP_S, s.CLAMP_TO_EDGE), s.texParameteri(s.TEXTURE_2D, s.TEXTURE_WRAP_T, s.CLAMP_TO_EDGE), s.bindTexture(s.TEXTURE_2D, null), d.vPosition = s.getAttribLocation(u, "vPosition"), d.vTexCoord = s.getAttribLocation(u, "vTexCoord"), f.uTime = s.getUniformLocation(u, "uTime"), f.uResolution = s.getUniformLocation(u, "uResolution"), f.uTexture = s.getUniformLocation(u, "uTexture"), f.uProgress = s.getUniformLocation(u, "uProgress")
        },
        y = function() {
            p.strive_title = s.createTexture();
            var e = new Image;
            e.onload = function() {
                p.strive_title.image = e, p.strive_title.imageWidth = this.naturalWidth, p.strive_title.imageHeight = this.naturalHeight, g(), l = !0, E()
            }, e.src = "images/strive/strive_title.png"
        },
        _ = function() {
            s.useProgram(u), s.bindBuffer(s.ARRAY_BUFFER, h.vertexPositionBuffer), s.vertexAttribPointer(d.vPosition, h.vertexPositionBuffer.itemSize, s.FLOAT, !1, 0, 0), s.bindBuffer(s.ARRAY_BUFFER, h.vertexTexCoordBuffer), s.vertexAttribPointer(d.vTexCoord, h.vertexTexCoordBuffer.itemSize, s.FLOAT, !1, 0, 0), s.activeTexture(s.TEXTURE0), s.bindTexture(s.TEXTURE_2D, p.strive_title), s.bindBuffer(s.ELEMENT_ARRAY_BUFFER, h.indicesBuffer)
        },
        x = function() {
            s.enableVertexAttribArray(d.vPosition), s.enableVertexAttribArray(d.vTexCoord)
        },
        b = function() {
            s.uniform1f(f.uTime, .001 * performance.now()), s.uniform2fv(f.uResolution, new Float32Array([a.element.offsetWidth, a.element.offsetHeight])), s.uniform1i(f.uTexture, 0), s.uniform1f(f.uProgress, m.progress)
        },
        w = function() {
            l && (s.blendFunc(s.SRC_ALPHA, s.ONE_MINUS_SRC_ALPHA), s.enable(s.BLEND), _(), x(), b(), s.drawElements(s.TRIANGLES, h.indicesBuffer.numItems, s.UNSIGNED_SHORT, 0))
        },
        T = function() {
            s.useProgram(null);
            for (var e in h) s.deleteBuffer(h[e]);
            s.deleteProgram(u)
        },
        E = function() {
            if (l) {
                s.bindBuffer(s.ARRAY_BUFFER, h.vertexTexCoordBuffer);
                var e = p.strive_title.image.naturalWidth,
                    t = p.strive_title.image.naturalHeight;
                BrowserDetect.isDesktop ? (e = Math.min(e, a.element.offsetWidth - 100), t *= Math.min((a.element.offsetWidth - 100) / p.strive_title.image.naturalWidth, 1)) : (e = Math.min(e, a.element.offsetWidth - 200), t *= Math.min((a.element.offsetWidth - 200) / p.strive_title.image.naturalWidth, 1));
                var n = {
                    x: (a.element.offsetWidth * -.5 - e * -.5) / e,
                    y: (a.element.offsetHeight * -.5 - t * -.5) / t,
                    width: a.element.offsetWidth / e,
                    height: a.element.offsetHeight / t
                };
                s.bufferData(s.ARRAY_BUFFER, new Float32Array([n.x, n.y, n.x, n.y + n.height, n.x + n.width, n.y + n.height, n.x + n.width, n.y]), s.STATIC_DRAW)
            }
        },
        S = function() {
            o["default"].on("start", P)
        },
        M = function() {
            o["default"].off("start", P)
        },
        P = function() {
            TweenLite.to(m, 1, {
                progress: 1
            }), TweenLite.to(m, 1, {
                progress: 0,
                delay: 2
            })
        },
        A = function() {
            m.progress = 0
        };
    e.exports = {
        create: v,
        draw: w,
        cleanup: T,
        resize: E,
        activate: S,
        desactivate: M,
        reset: A
    }
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }
    var r = n(204),
        o = i(r),
        a = (n(205), n(112)),
        s = i(a),
        u = void 0,
        l = void 0,
        c = void 0,
        h = void 0,
        d = null,
        f = !1,
        p = null,
        m = n(208).getShader,
        v = {},
        g = {},
        y = {},
        _ = {
            progress: 0,
            waveProgress: 0,
            nervous: 0
        },
        x = function(e) {
            return u = e, l = u.gl, h = new s["default"](l), c = l.createProgram(), l.attachShader(c, m(l, "waves.vert")), l.attachShader(c, m(l, "waves.frag")), l.linkProgram(c), l.getProgramParameter(c, l.LINK_STATUS) ? (v.vertexPositionBuffer = l.createBuffer(), v.vertexPositionBuffer.itemSize = 3, v.vertexPositionBuffer.numItems = 4, l.bindBuffer(l.ARRAY_BUFFER, v.vertexPositionBuffer), l.bufferData(l.ARRAY_BUFFER, new Float32Array([-1, -1, 0, -1, 1, 0, 1, 1, 0, 1, -1, 0]), l.STATIC_DRAW), v.vertexTexCoordBuffer = l.createBuffer(), v.vertexTexCoordBuffer.itemSize = 2, v.vertexTexCoordBuffer.numItems = 4, l.bindBuffer(l.ARRAY_BUFFER, v.vertexTexCoordBuffer), l.bufferData(l.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 1, 1, 0]), l.STATIC_DRAW), v.indicesBuffer = l.createBuffer(), v.indicesBuffer.itemSize = 1, v.indicesBuffer.numItems = 6, l.bindBuffer(l.ELEMENT_ARRAY_BUFFER, v.indicesBuffer), l.bufferData(l.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 2, 0, 3]), l.STATIC_DRAW), g.vPosition = l.getAttribLocation(c, "vPosition"), g.vTexCoord = l.getAttribLocation(c, "vTexCoord"), g.vBgTexCoord = l.getAttribLocation(c, "vBgTexCoord"), y.uTime = l.getUniformLocation(c, "uTime"), y.uResolution = l.getUniformLocation(c, "uResolution"), y.uAspectRatio = l.getUniformLocation(c, "uAspectRatio"), y.uNoise = l.getUniformLocation(c, "uNoise"), y.uProgress = l.getUniformLocation(c, "uProgress"), y.uProgressEnded = l.getUniformLocation(c, "uProgressEnded"), y.uBg = l.getUniformLocation(c, "uBg"), y.uNoiseParam = l.getUniformLocation(c, "uNoiseParam"), y.rNoise = l.getUniformLocation(c, "rNoise"), y.uWaveProgress = l.getUniformLocation(c, "uWaveProgress"), y.uNervous = l.getUniformLocation(c, "uNervous"), void b()) : void alert("Could not initialise shaders")
        },
        b = function() {
            v.bgTexCoordBuffer = l.createBuffer(), v.bgTexCoordBuffer.itemSize = 2, v.bgTexCoordBuffer.numItems = 4, l.bindBuffer(l.ARRAY_BUFFER, v.bgTexCoordBuffer), l.bufferData(l.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 1, 1, 0]), l.STATIC_DRAW), f = !0
        },
        w = function() {
            l.useProgram(c), l.bindBuffer(l.ARRAY_BUFFER, v.vertexPositionBuffer), l.vertexAttribPointer(g.vPosition, v.vertexPositionBuffer.itemSize, l.FLOAT, !1, 0, 0), l.bindBuffer(l.ARRAY_BUFFER, v.vertexTexCoordBuffer), l.vertexAttribPointer(g.vTexCoord, v.vertexTexCoordBuffer.itemSize, l.FLOAT, !1, 0, 0), l.bindBuffer(l.ARRAY_BUFFER, v.bgTexCoordBuffer), l.vertexAttribPointer(g.vBgTexCoord, v.bgTexCoordBuffer.itemSize, l.FLOAT, !1, 0, 0), l.activeTexture(l.TEXTURE0), l.bindTexture(l.TEXTURE_2D, d.textures.rttTexture), l.activeTexture(l.TEXTURE1), l.bindTexture(l.TEXTURE_2D, h.noiseTexture.id), l.bindBuffer(l.ELEMENT_ARRAY_BUFFER, v.indicesBuffer)
        },
        T = function() {
            l.enableVertexAttribArray(g.vPosition), l.enableVertexAttribArray(g.vTexCoord), l.enableVertexAttribArray(g.vBgTexCoord)
        },
        E = function() {
            l.uniform1f(y.uTime, .001 * performance.now()), l.uniform1f(y.uAspectRatio, u.element.offsetWidth / u.element.offsetHeight), l.uniform2fv(y.uResolution, new Float32Array([u.element.offsetWidth / u.scale, u.element.offsetHeight / u.scale])), l.uniform1i(y.uNoise, 0), l.uniform1i(y.uBg, 1), l.uniform1f(y.uProgress, _.progress), l.uniform1f(y.uWaveProgress, _.waveProgress), l.uniform1i(y.uProgressEnded, !0), l.uniform1f(y.uNervous, _.nervous), l.uniform4fv(y.uNoiseParam, h.noiseParam), l.uniform2fv(y.rNoise, h.randomOffset)
        },
        S = function() {
            d && d.textures.rttTexture && f && (M(), l.bindFramebuffer(l.FRAMEBUFFER, d.buffers.rttFrameBuffer), d.draw(), l.bindFramebuffer(l.FRAMEBUFFER, null), l.viewport(0, 0, u.width, u.height), l.clear(l.COLOR_BUFFER_BIT | l.DEPTH_BUFFER_BIT), h.prepare(), w(), T(), E(), l.drawElements(l.TRIANGLES, v.indicesBuffer.numItems, l.UNSIGNED_SHORT, 0))
        },
        M = function() {
            L(o["default"].isInside)
        },
        P = function(e) {
            d = e
        },
        A = function() {
            o["default"].on("start", R)
        },
        C = function() {
            o["default"].off("start", R)
        },
        R = function() {
            var e = (TweenLite.to(_, 1, {
                progress: 1
            }), TweenLite.to(_, 5, {
                waveProgress: 1
            }));
            TweenLite.to(_, 1, {
                progress: 0,
                delay: 2,
                onComplete: function() {
                    e.kill(), _.waveProgress = 0, _.progress = 0
                }
            })
        },
        L = function(e) {
            p !== e && (p = e, e ? TweenLite.to(_, 1, {
                nervous: 1
            }) : TweenLite.to(_, 1, {
                nervous: 0
            }))
        },
        O = function() {
            _.waveProgress = 0, _.progress = 0
        };
    e.exports = {
        create: x,
        draw: S,
        setNoise: P,
        activate: A,
        desactivate: C,
        reset: O
    }
}, function(e, t, n) {
    "use strict";
    var i = n(208).getShader,
        r = void 0,
        o = void 0,
        a = void 0,
        s = {},
        u = {},
        l = {},
        c = {},
        h = !1,
        d = function(e) {
            r = e, o = r.gl, p()
        },
        f = function() {
            return a = o.createProgram(), o.attachShader(a, i(o, "noise.vert")), o.attachShader(a, i(o, "noise.frag")), o.linkProgram(a), o.getProgramParameter(a, o.LINK_STATUS) ? (s.vertexPositionBuffer = o.createBuffer(), s.vertexPositionBuffer.itemSize = 3, s.vertexPositionBuffer.numItems = 4, o.bindBuffer(o.ARRAY_BUFFER, s.vertexPositionBuffer), o.bufferData(o.ARRAY_BUFFER, new Float32Array([-1, -1, 0, -1, 1, 0, 1, 1, 0, 1, -1, 0]), o.STATIC_DRAW), s.vertexTexCoordBuffer = o.createBuffer(), s.vertexTexCoordBuffer.itemSize = 2, s.vertexTexCoordBuffer.numItems = 4, o.bindBuffer(o.ARRAY_BUFFER, s.vertexTexCoordBuffer), o.bufferData(o.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 1, 1, 0]), o.STATIC_DRAW), s.indicesBuffer = o.createBuffer(), s.indicesBuffer.itemSize = 1, s.indicesBuffer.numItems = 6, o.bindBuffer(o.ELEMENT_ARRAY_BUFFER, s.indicesBuffer), o.bufferData(o.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 2, 0, 3]), o.STATIC_DRAW), o.bindTexture(o.TEXTURE_2D, c.noise), o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL, !0), o.texImage2D(o.TEXTURE_2D, 0, o.RGBA, o.RGBA, o.UNSIGNED_BYTE, c.noise.image), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MAG_FILTER, o.LINEAR), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MIN_FILTER, o.LINEAR), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_S, o.REPEAT), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_T, o.REPEAT), o.bindTexture(o.TEXTURE_2D, null), u.vPosition = o.getAttribLocation(a, "vPosition"), u.vTexCoord = o.getAttribLocation(a, "vTexCoord"), l.uTime = o.getUniformLocation(a, "uTime"), l.uResolution = o.getUniformLocation(a, "uResolution"), l.uTexture = o.getUniformLocation(a, "uTexture"), void m()) : void alert("Could not initialise shaders")
        },
        p = function() {
            c.noise = o.createTexture();
            var e = new Image;
            e.onload = function() {
                c.noise.image = e, c.noise.imageWidth = this.naturalWidth, c.noise.imageHeight = this.naturalHeight, f(), h = !0
            }, e.src = "images/strive/perlin.jpg"
        },
        m = function() {
            c.rttTexture = o.createTexture(), c.rttTexture.width = 512, c.rttTexture.height = 512, o.bindTexture(o.TEXTURE_2D, c.rttTexture), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MAG_FILTER, o.LINEAR), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MIN_FILTER, o.LINEAR), o.texImage2D(o.TEXTURE_2D, 0, o.RGBA, c.rttTexture.width, c.rttTexture.height, 0, o.RGBA, o.UNSIGNED_BYTE, null), s.rttFrameBuffer = o.createFramebuffer(), o.bindFramebuffer(o.FRAMEBUFFER, s.rttFrameBuffer), o.framebufferTexture2D(o.FRAMEBUFFER, o.COLOR_ATTACHMENT0, o.TEXTURE_2D, c.rttTexture, 0), o.bindTexture(o.TEXTURE_2D, null), o.bindRenderbuffer(o.RENDERBUFFER, null), o.bindFramebuffer(o.FRAMEBUFFER, null)
        },
        v = function() {
            o.useProgram(a), o.bindBuffer(o.ARRAY_BUFFER, s.vertexPositionBuffer), o.vertexAttribPointer(u.vPosition, s.vertexPositionBuffer.itemSize, o.FLOAT, !1, 0, 0), o.bindBuffer(o.ARRAY_BUFFER, s.vertexTexCoordBuffer), o.vertexAttribPointer(u.vTexCoord, s.vertexTexCoordBuffer.itemSize, o.FLOAT, !1, 0, 0), o.activeTexture(o.TEXTURE0), o.bindTexture(o.TEXTURE_2D, c.noise), o.bindBuffer(o.ELEMENT_ARRAY_BUFFER, s.indicesBuffer)
        },
        g = function() {
            o.enableVertexAttribArray(u.vPosition), o.enableVertexAttribArray(u.vTexCoord)
        },
        y = function() {
            o.uniform1f(l.uTime, .001 * performance.now()), o.uniform2fv(l.uResolution, new Float32Array([r.element.offsetWidth, r.element.offsetHeight])), o.uniform1i(l.uTexture, 0)
        },
        _ = function() {
            h && (o.viewport(0, 0, c.rttTexture.width, c.rttTexture.height), o.clear(o.COLOR_BUFFER_BIT | o.DEPTH_BUFFER_BIT), v(), g(), y(), o.drawElements(o.TRIANGLES, s.indicesBuffer.numItems, o.UNSIGNED_SHORT, 0), o.bindTexture(o.TEXTURE_2D, c.rttTexture), o.bindTexture(o.TEXTURE_2D, null))
        },
        x = function() {
            o.useProgram(null);
            for (var e in s) o.deleteBuffer(s[e]);
            o.deleteProgram(a)
        };
    e.exports = {
        create: d,
        bind: v,
        enableAttributePointers: g,
        setUniforms: y,
        draw: _,
        cleanup: x,
        textures: c,
        buffers: s
    }
}, function(e, t, n) {
    "use strict";
    var i = n(208).getShader,
        r = void 0,
        o = void 0,
        a = void 0,
        s = {},
        u = {},
        l = {},
        c = {},
        h = function(e) {
            return r = e, o = r.gl, a = o.createProgram(), o.attachShader(a, i(o, "ship.vert")), o.attachShader(a, i(o, "ship.frag")), o.linkProgram(a), o.getProgramParameter(a, o.LINK_STATUS) ? (s.vertexPositionBuffer = o.createBuffer(), s.vertexPositionBuffer.itemSize = 3, s.vertexPositionBuffer.numItems = 4, o.bindBuffer(o.ARRAY_BUFFER, s.vertexPositionBuffer), o.bufferData(o.ARRAY_BUFFER, new Float32Array([-1, -1, 0, -1, 1, 0, 1, 1, 0, 1, -1, 0]), o.STATIC_DRAW), s.indicesBuffer = o.createBuffer(), s.indicesBuffer.itemSize = 1, s.indicesBuffer.numItems = 6, o.bindBuffer(o.ELEMENT_ARRAY_BUFFER, s.indicesBuffer), o.bufferData(o.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 2, 0, 3]), o.STATIC_DRAW), u.vPosition = o.getAttribLocation(a, "vPosition"), l.uTime = o.getUniformLocation(a, "uTime"), l.uResolution = o.getUniformLocation(a, "uResolution"), void(l.uMouse = o.getUniformLocation(a, "uMouse"))) : void alert("Could not initialise shaders")
        },
        d = function() {
            o.useProgram(a), o.bindBuffer(o.ARRAY_BUFFER, s.vertexPositionBuffer), o.vertexAttribPointer(u.vPosition, s.vertexPositionBuffer.itemSize, o.FLOAT, !1, 0, 0), o.bindBuffer(o.ELEMENT_ARRAY_BUFFER, s.indicesBuffer)
        },
        f = function() {
            o.enableVertexAttribArray(u.vPosition)
        },
        p = function() {
            o.uniform1f(l.uTime, .001 * performance.now()), o.uniform2fv(l.uResolution, new Float32Array([r.element.offsetWidth, r.element.offsetHeight])), o.uniform2fv(l.uMouse, new Float32Array([r.mouseX / r.width * (r.width / r.height), 1 - r.mouseY / r.height]))
        },
        m = function() {
            o.viewport(0, 0, r.width, r.height), d(), f(), p(), o.drawElements(o.TRIANGLES, s.indicesBuffer.numItems, o.UNSIGNED_SHORT, 0)
        },
        v = function() {
            o.useProgram(null);
            for (var e in s) o.deleteBuffer(s[e]);
            o.deleteProgram(a)
        };
    e.exports = {
        create: h,
        bind: d,
        enableAttributePointers: f,
        setUniforms: p,
        draw: m,
        cleanup: v,
        textures: c,
        buffers: s
    }
}, function(e, t, n) {
    "use strict";

    function i(e) {
        function t() {
            var e = i._width / a | 0,
                t = i._height / a | 0;
            i.canvas.width = e, i.canvas.height = t, i.canvas.style.width = i._width + "px", i.canvas.style.height = i._height + "px", i.emit("gl-resize", e, t)
        }
        e = e || {};
        var n = e.extensions || [],
            i = r(e),
            a = i.scale || 1,
            s = e.glOptions;
        return i.on("init", function() {
            var r = document.createElement("canvas"),
                u = r.getContext("webgl", s) || r.getContext("experimental-webgl", s);
            if (!u) return void i.emit("gl-error", new Error("Unable to initialize WebGL"));
            for (var l = o(u), c = 0; c < n.length; ++c)
                if (!(n[c] in l)) return void i.emit("gl-error", new Error("Missing extension: " + n[c]));
            r.style.position = "absolute", r.style.left = "0px", r.style.top = "0px", i.element.appendChild(r), i.canvas = r, i.gl = u, t(), i.clearFlags = void 0 === e.clearFlags ? u.COLOR_BUFFER_BIT | u.DEPTH_BUFFER_BIT : e.clearFlags, i.clearColor = e.clearColor || [0, 0, 0, 0], i.clearDepth = e.clearDepth || 1, i.clearStencil = e.clearStencil || 0, i.on("resize", t), i.on("render", function(e) {
                u.bindFramebuffer(u.FRAMEBUFFER, null), u.viewport(0, 0, i._width / a | 0, i._height / a | 0), i.clearFlags & u.STENCIL_BUFFER_BIT && u.clearStencil(i.clearStencil), i.clearFlags & u.COLOR_BUFFER_BIT && u.clearColor(i.clearColor[0], i.clearColor[1], i.clearColor[2], i.clearColor[3]), i.clearFlags & u.DEPTH_BUFFER_BIT && u.clearDepth(i.clearDepth), i.clearFlags && u.clear(u.COLOR_BUFFER_BIT | u.DEPTH_BUFFER_BIT | u.STENCIL_BUFFER_BIT), i.emit("gl-render", e)
            }), i.emit("gl-init")
        }), Object.defineProperty(i, "scale", {
            get: function() {
                return a
            },
            set: function(e) {
                return e = +e, 0 >= e || isNaN(e) || a === e ? a : (a = e, t(), a)
            }
        }), Object.defineProperty(i, "width", {
            get: function() {
                return i._width / a | 0
            }
        }), Object.defineProperty(i, "height", {
            get: function() {
                return i._height / a | 0
            }
        }), Object.defineProperty(i, "mouse", {
            get: function() {
                return [i.mouseX / a, i.mouseY / a]
            }
        }), Object.defineProperty(i, "prevMouse", {
            get: function() {
                return [i.prevMouseX / a, i.prevMouseY / a]
            }
        }), i
    }
    var r = n(229),
        o = n(243);
    e.exports = i
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return B.eq(j, e)
    }

    function r(e) {
        return i(V[e])
    }

    function o() {
        R.call(this), this._curKeyState = new Array(j.length), this._pressCount = new Array(j.length), this._releaseCount = new Array(j.length), this._tickInterval = null, this._rafHandle = null, this._tickRate = 0, this._lastTick = z(), this._frameTime = 0, this._paused = !0, this._width = 0, this._height = 0, this._wantFullscreen = !1, this._wantPointerLock = !1, this._fullscreenActive = !1, this._pointerLockActive = !1, this._render = f.bind(void 0, this), this.preventDefaults = !0, this.stopPropagation = !1;
        for (var e = 0; e < j.length; ++e) this._curKeyState[e] = !1, this._pressCount[e] = this._releaseCount[e] = 0;
        this.element = null, this.bindings = {}, this.frameSkip = 100, this.tickCount = 0, this.frameCount = 0, this.startTime = z(), this.tickTime = this._tickRate, this.frameTime = 10, this.stickyFullscreen = !1, this.stickyPointerLock = !1, this.scroll = [0, 0, 0], this.mouseX = 0, this.mouseY = 0, this.prevMouseX = 0, this.prevMouseY = 0
    }

    function a(e, t, n) {
        if (n in t) {
            for (var r = t[n], o = 0, a = r.length; a > o; ++o)
                if (e[i(r[o])]) return !0;
            return !1
        }
        var s = i(n);
        return s >= 0 ? e[s] : !1
    }

    function s(e, t, n) {
        if (n in t) {
            for (var r = t[n], o = 0, a = 0, s = r.length; s > a; ++a) o += e[i(r[a])];
            return o
        }
        var u = i(n);
        return u >= 0 ? e[u] : 0
    }

    function u(e) {
        var t = e.element;
        if (e._wantFullscreen && !e._fullscreenActive) {
            var n = t.requestFullscreen || t.requestFullScreen || t.webkitRequestFullscreen || t.webkitRequestFullScreen || t.mozRequestFullscreen || t.mozRequestFullScreen || function() {};
            n.call(t)
        }
        if (e._wantPointerLock && !e._pointerLockActive) {
            var i = t.requestPointerLock || t.webkitRequestPointerLock || t.mozRequestPointerLock || t.msRequestPointerLock || t.oRequestPointerLock || function() {};
            i.call(t)
        }
    }

    function l(e) {
        e._fullscreenActive = document.fullscreen || document.mozFullScreen || document.webkitIsFullScreen || !1, !e.stickyFullscreen && e._fullscreenActive && (e._wantFullscreen = !1)
    }

    function c(e, t) {
        e._pointerLockActive = e.element === (document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement || null), !e.stickyPointerLock && e._pointerLockActive && (e._wantPointerLock = !1)
    }

    function h(e, t, n) {
        var i = e._curKeyState[t];
        i !== n && (n ? e._pressCount[t]++ : e._releaseCount[t]++, e._curKeyState[t] = n)
    }

    function d(e) {
        for (var t, n, i, r = z() + e.frameSkip, o = e._pressCount, a = e._releaseCount, s = e._tickRate, u = j.length; !e._paused && z() >= e._lastTick + s;) {
            if (z() > r) return void(e._lastTick = z() + s);
            for (n = z(), e.emit("tick"), i = z(), e.tickTime = i - n, ++e.tickCount, e._lastTick += s, t = 0; u > t; ++t) o[t] = a[t] = 0;
            e._pointerLockActive ? (e.prevMouseX = e.mouseX = e.width >> 1, e.prevMouseY = e.mouseY = e.height >> 1) : (e.prevMouseX = e.mouseX, e.prevMouseY = e.mouseY), e.scroll[0] = e.scroll[1] = e.scroll[2] = 0
        }
    }

    function f(e) {
        e._rafHandle = requestAnimationFrame(e._render), d(e);
        var t;
        t = e._paused ? e._frameTime : U(1, (z() - e._lastTick) / e._tickRate), ++e.frameCount;
        var n = z();
        e.emit("render", t);
        var i = z();
        e.frameTime = i - n
    }

    function p(e) {
        return document.activeElement === document.body || document.activeElement === e.element
    }

    function m(e, t) {
        e.preventDefaults && t.preventDefault(), e.stopPropagation && t.stopPropagation()
    }

    function v(e, t) {
        m(e, t);
        var n = r(t.keyCode || t["char"] || t.which || t.charCode);
        n >= 0 && h(e, n, !1)
    }

    function g(e, t) {
        if (p(e))
            if (m(e, t), t.metaKey) M(e, t);
            else {
                var n = r(t.keyCode || t["char"] || t.which || t.charCode);
                n >= 0 && h(e, n, !0)
            }
    }

    function y(e, t) {
        for (var n = 0; 32 > n; ++n) h(e, X[n], !!(t & 1 << n))
    }

    function _(e, t) {
        if (m(e, t), e._pointerLockActive) {
            var n = t.movementX || t.mozMovementX || t.webkitMovementX || 0,
                i = t.movementY || t.mozMovementY || t.webkitMovementY || 0;
            e.mouseX += n, e.mouseY += i
        } else e.mouseX = t.clientX - e.element.offsetLeft, e.mouseY = t.clientY - e.element.offsetTop;
        return !1
    }

    function x(e, t) {
        return m(e, t), h(e, X[t.button], !0), !1
    }

    function b(e, t) {
        return m(e, t), h(e, X[t.button], !1), !1
    }

    function w(e, t) {
        return m(e, t), e._pointerLockActive ? (e.prevMouseX = e.mouseX = e.width >> 1, e.prevMouseY = e.mouseY = e.height >> 1) : (e.prevMouseX = e.mouseX = t.clientX - e.element.offsetLeft, e.prevMouseY = e.mouseY = t.clientY - e.element.offsetTop), !1
    }

    function T(e, t) {
        return m(e, t), y(e, 0), !1
    }

    function E(e, t) {
        m(e, t);
        var n = 1;
        switch (t.deltaMode) {
            case 0:
                n = 1;
                break;
            case 1:
                n = 12;
                break;
            case 2:
                n = e.height
        }
        return e.scroll[0] += t.deltaX * n, e.scroll[1] += t.deltaY * n, e.scroll[2] += t.deltaZ * n || 0, !1
    }

    function S(e, t) {
        return m(e, t), !1
    }

    function M(e, t) {
        var n, i = j.length,
            r = e._curKeyState,
            o = e._releaseCount;
        for (n = 0; i > n; ++n) r[n] && ++o[n], r[n] = !1;
        return !1
    }

    function P(e, t) {
        var n = 0 | e.element.clientWidth,
            i = 0 | e.element.clientHeight;
        (n !== e._width || i !== e._height) && (e._width = n, e._height = i, e.emit("resize", n, i))
    }

    function A() {
        var e = document.createElement("div");
        return e.tabindex = 1, e.style.position = "absolute", e.style.left = "0px", e.style.right = "0px", e.style.top = "0px", e.style.bottom = "0px", e.style.height = "100%", e.style.overflow = "hidden", document.body.appendChild(e), document.body.style.overflow = "hidden", document.body.style.height = "100%", e
    }

    function C(e) {
        e = e || {};
        var t = !!e.fullscreen,
            n = t;
        void 0 !== typeof e.pointerLock && (n = !!e.pointerLock);
        var i = new o;
        return i._tickRate = e.tickRate || 30, i.frameSkip = e.frameSkip || 5 * (i._tickRate + 5), i.stickyFullscreen = !!e.stickyFullscreen || !!e.sticky, i.stickyPointerLock = !!e.stickyPointerLock || !!e.sticky, e.bindings && (i.bindings = e.bindings), setTimeout(function() {
            O(function() {
                var r = e.element;
                if ("string" == typeof r) {
                    var o = document.querySelector(r);
                    o || (o = document.getElementById(r)), o || (o = document.getElementByClass(r)[0]), o || (o = A()), i.element = o
                } else "object" == typeof r && r ? i.element = r : "function" == typeof r ? i.element = r() : i.element = A();
                i.element.style && (i.element.style["-webkit-touch-callout"] = "none", i.element.style["-webkit-user-select"] = "none", i.element.style["-khtml-user-select"] = "none", i.element.style["-moz-user-select"] = "none", i.element.style["-ms-user-select"] = "none", i.element.style["user-select"] = "none"), i._width = i.element.clientWidth, i._height = i.element.clientHeight;
                var a = P.bind(void 0, i);
                if ("undefined" != typeof MutationObserver) {
                    var s = new MutationObserver(a);
                    s.observe(i.element, {
                        attributes: !0,
                        subtree: !0
                    })
                } else i.element.addEventListener("DOMSubtreeModified", a, !1);
                window.addEventListener("resize", a, !1), window.addEventListener("keydown", g.bind(void 0, i), !1), window.addEventListener("keyup", v.bind(void 0, i), !1), i.element.oncontextmenu = S.bind(void 0, i), i.element.addEventListener("mousedown", x.bind(void 0, i), !1), i.element.addEventListener("mouseup", b.bind(void 0, i), !1), i.element.addEventListener("mousemove", _.bind(void 0, i), !1), i.element.addEventListener("mouseenter", w.bind(void 0, i), !1);
                var h = T.bind(void 0, i);
                i.element.addEventListener("mouseleave", h, !1), i.element.addEventListener("mouseout", h, !1), window.addEventListener("mouseleave", h, !1), window.addEventListener("mouseout", h, !1);
                var d = M.bind(void 0, i);
                i.element.addEventListener("blur", d, !1), i.element.addEventListener("focusout", d, !1), i.element.addEventListener("focus", d, !1), window.addEventListener("blur", d, !1), window.addEventListener("focusout", d, !1), window.addEventListener("focus", d, !1), N(i.element, E.bind(void 0, i), !1);
                var f = l.bind(void 0, i);
                document.addEventListener("fullscreenchange", f, !1), document.addEventListener("mozfullscreenchange", f, !1), document.addEventListener("webkitfullscreenchange", f, !1), i.element.addEventListener("click", u.bind(void 0, i), !1);
                var p = c.bind(void 0, i);
                document.addEventListener("pointerlockchange", p, !1), document.addEventListener("mozpointerlockchange", p, !1), document.addEventListener("webkitpointerlockchange", p, !1), document.addEventListener("pointerlocklost", p, !1), document.addEventListener("webkitpointerlocklost", p, !1), document.addEventListener("mozpointerlocklost", p, !1), i.fullscreen = t, i.pointerLock = n, i.bind("mouse-left", "mouse-1"), i.bind("mouse-right", "mouse-3"), i.bind("mouse-middle", "mouse-2"), i._lastTick = z(), i.startTime = z(), i.paused = !1, i.emit("init")
            })
        }, 0), i
    }
    var R = n(230).EventEmitter,
        L = n(231),
        O = n(234),
        k = n(235),
        D = n(236),
        F = n(237),
        B = n(238),
        I = n(239),
        U = Math.min;
    n(240);
    var N = n(241),
        z = n(242),
        V = function() {
            var e, t, n = new Array(256);
            for (e = 0; 256 > e; ++e) n[e] = "UNK";
            for (e in k) t = k[e], "<" === t.charAt(0) && ">" === t.charAt(t.length - 1) && (t = t.substring(1, t.length - 1)), t = t.replace(/\s/g, "-"), n[parseInt(e)] = t;
            return n
        }(),
        j = F(Object.keys(D(V)));
    L.inherits(o, R);
    var G = o.prototype;
    G.keyNames = j, G.bind = function(e) {
        var t;
        t = e in this.bindings ? this.bindings[e] : [];
        for (var n, r = 1, o = arguments.length; o > r; ++r)
            if (n = arguments[r], i(n) >= 0) t.push(n);
            else if (n in this.bindings)
            for (var a = this.bindings[n], s = 0; s < a.length; ++s) t.push(a[s]);
        t = F(t), t.length > 0 && (this.bindings[e] = t), this.emit("bind", e, t)
    }, G.unbind = function(e) {
        e in this.bindings && delete this.bindings[e], this.emit("unbind", e)
    }, G.down = function(e) {
        return a(this._curKeyState, this.bindings, e)
    }, G.wasDown = function(e) {
        return this.down(e) || !!this.press(e)
    }, G.up = function(e) {
        return !this.down(e)
    }, G.wasUp = function(e) {
        return this.up(e) || !!this.release(e)
    }, G.press = function(e) {
        return s(this._pressCount, this.bindings, e)
    }, G.release = function(e) {
        return s(this._releaseCount, this.bindings, e)
    }, Object.defineProperty(G, "paused", {
        get: function() {
            return this._paused
        },
        set: function(e) {
            var t = !!e;
            t !== this._paused && (this._paused ? (this._paused = !1, this._lastTick = z() - Math.floor(this._frameTime * this._tickRate), this._tickInterval = setInterval(d, this._tickRate, this), this._rafHandle = requestAnimationFrame(this._render)) : (this._paused = !0, this._frameTime = U(1, (z() - this._lastTick) / this._tickRate), clearInterval(this._tickInterval)))
        }
    });
    var H = document.exitFullscreen || document.cancelFullscreen || document.cancelFullScreen || document.webkitCancelFullscreen || document.webkitCancelFullScreen || document.mozCancelFullscreen || document.mozCancelFullScreen || function() {};
    Object.defineProperty(G, "fullscreen", {
        get: function() {
            return this._fullscreenActive
        },
        set: function(e) {
            var t = !!e;
            return t ? (this._wantFullscreen = !0, u(this)) : (this._wantFullscreen = !1, H.call(document)), this._fullscreenActive
        }
    });
    var W = document.exitPointerLock || document.webkitExitPointerLock || document.mozExitPointerLock || function() {};
    Object.defineProperty(G, "pointerLock", {
        get: function() {
            return this._pointerLockActive
        },
        set: function(e) {
            var t = !!e;
            return t ? (this._wantPointerLock = !0, u(this)) : (this._wantPointerLock = !1, W.call(document)), this._pointerLockActive
        }
    }), Object.defineProperty(G, "width", {
        get: function() {
            return this.element.clientWidth
        }
    }), Object.defineProperty(G, "height", {
        get: function() {
            return this.element.clientHeight
        }
    });
    var X = I(32).map(function(e) {
        return i("mouse-" + (e + 1))
    });
    e.exports = C
}, function(e, t) {
    function n() {
        this._events = this._events || {}, this._maxListeners = this._maxListeners || void 0
    }

    function i(e) {
        return "function" == typeof e
    }

    function r(e) {
        return "number" == typeof e
    }

    function o(e) {
        return "object" == typeof e && null !== e
    }

    function a(e) {
        return void 0 === e
    }
    e.exports = n, n.EventEmitter = n, n.prototype._events = void 0, n.prototype._maxListeners = void 0, n.defaultMaxListeners = 10, n.prototype.setMaxListeners = function(e) {
        if (!r(e) || 0 > e || isNaN(e)) throw TypeError("n must be a positive number");
        return this._maxListeners = e, this
    }, n.prototype.emit = function(e) {
        var t, n, r, s, u, l;
        if (this._events || (this._events = {}), "error" === e && (!this._events.error || o(this._events.error) && !this._events.error.length)) {
            if (t = arguments[1], t instanceof Error) throw t;
            throw TypeError('Uncaught, unspecified "error" event.')
        }
        if (n = this._events[e], a(n)) return !1;
        if (i(n)) switch (arguments.length) {
            case 1:
                n.call(this);
                break;
            case 2:
                n.call(this, arguments[1]);
                break;
            case 3:
                n.call(this, arguments[1], arguments[2]);
                break;
            default:
                s = Array.prototype.slice.call(arguments, 1), n.apply(this, s)
        } else if (o(n))
            for (s = Array.prototype.slice.call(arguments, 1), l = n.slice(), r = l.length, u = 0; r > u; u++) l[u].apply(this, s);
        return !0
    }, n.prototype.addListener = function(e, t) {
        var r;
        if (!i(t)) throw TypeError("listener must be a function");
        return this._events || (this._events = {}), this._events.newListener && this.emit("newListener", e, i(t.listener) ? t.listener : t), this._events[e] ? o(this._events[e]) ? this._events[e].push(t) : this._events[e] = [this._events[e], t] : this._events[e] = t, o(this._events[e]) && !this._events[e].warned && (r = a(this._maxListeners) ? n.defaultMaxListeners : this._maxListeners, r && r > 0 && this._events[e].length > r && (this._events[e].warned = !0, console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.", this._events[e].length), "function" == typeof console.trace && console.trace())), this
    }, n.prototype.on = n.prototype.addListener, n.prototype.once = function(e, t) {
        function n() {
            this.removeListener(e, n), r || (r = !0, t.apply(this, arguments))
        }
        if (!i(t)) throw TypeError("listener must be a function");
        var r = !1;
        return n.listener = t, this.on(e, n), this
    }, n.prototype.removeListener = function(e, t) {
        var n, r, a, s;
        if (!i(t)) throw TypeError("listener must be a function");
        if (!this._events || !this._events[e]) return this;
        if (n = this._events[e], a = n.length, r = -1, n === t || i(n.listener) && n.listener === t) delete this._events[e], this._events.removeListener && this.emit("removeListener", e, t);
        else if (o(n)) {
            for (s = a; s-- > 0;)
                if (n[s] === t || n[s].listener && n[s].listener === t) {
                    r = s;
                    break
                }
            if (0 > r) return this;
            1 === n.length ? (n.length = 0, delete this._events[e]) : n.splice(r, 1), this._events.removeListener && this.emit("removeListener", e, t)
        }
        return this
    }, n.prototype.removeAllListeners = function(e) {
        var t, n;
        if (!this._events) return this;
        if (!this._events.removeListener) return 0 === arguments.length ? this._events = {} : this._events[e] && delete this._events[e], this;
        if (0 === arguments.length) {
            for (t in this._events) "removeListener" !== t && this.removeAllListeners(t);
            return this.removeAllListeners("removeListener"), this._events = {}, this
        }
        if (n = this._events[e], i(n)) this.removeListener(e, n);
        else if (n)
            for (; n.length;) this.removeListener(e, n[n.length - 1]);
        return delete this._events[e], this
    }, n.prototype.listeners = function(e) {
        var t;
        return t = this._events && this._events[e] ? i(this._events[e]) ? [this._events[e]] : this._events[e].slice() : []
    }, n.prototype.listenerCount = function(e) {
        if (this._events) {
            var t = this._events[e];
            if (i(t)) return 1;
            if (t) return t.length
        }
        return 0
    }, n.listenerCount = function(e, t) {
        return e.listenerCount(t)
    }
}, function(e, t, n) {
    (function(e, i) {
        function r(e, n) {
            var i = {
                seen: [],
                stylize: a
            };
            return arguments.length >= 3 && (i.depth = arguments[2]), arguments.length >= 4 && (i.colors = arguments[3]), m(n) ? i.showHidden = n : n && t._extend(i, n), b(i.showHidden) && (i.showHidden = !1), b(i.depth) && (i.depth = 2), b(i.colors) && (i.colors = !1), b(i.customInspect) && (i.customInspect = !0), i.colors && (i.stylize = o), u(i, e, i.depth)
        }

        function o(e, t) {
            var n = r.styles[t];
            return n ? "[" + r.colors[n][0] + "m" + e + "[" + r.colors[n][1] + "m" : e
        }

        function a(e, t) {
            return e
        }

        function s(e) {
            var t = {};
            return e.forEach(function(e, n) {
                t[e] = !0
            }), t
        }

        function u(e, n, i) {
            if (e.customInspect && n && M(n.inspect) && n.inspect !== t.inspect && (!n.constructor || n.constructor.prototype !== n)) {
                var r = n.inspect(i, e);
                return _(r) || (r = u(e, r, i)), r
            }
            var o = l(e, n);
            if (o) return o;
            var a = Object.keys(n),
                m = s(a);
            if (e.showHidden && (a = Object.getOwnPropertyNames(n)), S(n) && (a.indexOf("message") >= 0 || a.indexOf("description") >= 0)) return c(n);
            if (0 === a.length) {
                if (M(n)) {
                    var v = n.name ? ": " + n.name : "";
                    return e.stylize("[Function" + v + "]", "special")
                }
                if (w(n)) return e.stylize(RegExp.prototype.toString.call(n), "regexp");
                if (E(n)) return e.stylize(Date.prototype.toString.call(n), "date");
                if (S(n)) return c(n)
            }
            var g = "",
                y = !1,
                x = ["{", "}"];
            if (p(n) && (y = !0, x = ["[", "]"]), M(n)) {
                var b = n.name ? ": " + n.name : "";
                g = " [Function" + b + "]"
            }
            if (w(n) && (g = " " + RegExp.prototype.toString.call(n)), E(n) && (g = " " + Date.prototype.toUTCString.call(n)), S(n) && (g = " " + c(n)), 0 === a.length && (!y || 0 == n.length)) return x[0] + g + x[1];
            if (0 > i) return w(n) ? e.stylize(RegExp.prototype.toString.call(n), "regexp") : e.stylize("[Object]", "special");
            e.seen.push(n);
            var T;
            return T = y ? h(e, n, i, m, a) : a.map(function(t) {
                return d(e, n, i, m, t, y)
            }), e.seen.pop(), f(T, g, x)
        }

        function l(e, t) {
            if (b(t)) return e.stylize("undefined", "undefined");
            if (_(t)) {
                var n = "'" + JSON.stringify(t).replace(/^"|"$/g, "").replace(/'/g, "\\'").replace(/\\"/g, '"') + "'";
                return e.stylize(n, "string")
            }
            return y(t) ? e.stylize("" + t, "number") : m(t) ? e.stylize("" + t, "boolean") : v(t) ? e.stylize("null", "null") : void 0
        }

        function c(e) {
            return "[" + Error.prototype.toString.call(e) + "]"
        }

        function h(e, t, n, i, r) {
            for (var o = [], a = 0, s = t.length; s > a; ++a) L(t, String(a)) ? o.push(d(e, t, n, i, String(a), !0)) : o.push("");
            return r.forEach(function(r) {
                r.match(/^\d+$/) || o.push(d(e, t, n, i, r, !0))
            }), o
        }

        function d(e, t, n, i, r, o) {
            var a, s, l;
            if (l = Object.getOwnPropertyDescriptor(t, r) || {
                    value: t[r]
                }, l.get ? s = l.set ? e.stylize("[Getter/Setter]", "special") : e.stylize("[Getter]", "special") : l.set && (s = e.stylize("[Setter]", "special")), L(i, r) || (a = "[" + r + "]"), s || (e.seen.indexOf(l.value) < 0 ? (s = v(n) ? u(e, l.value, null) : u(e, l.value, n - 1), s.indexOf("\n") > -1 && (s = o ? s.split("\n").map(function(e) {
                    return "  " + e
                }).join("\n").substr(2) : "\n" + s.split("\n").map(function(e) {
                    return "   " + e
                }).join("\n"))) : s = e.stylize("[Circular]", "special")), b(a)) {
                if (o && r.match(/^\d+$/)) return s;
                a = JSON.stringify("" + r), a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/) ? (a = a.substr(1, a.length - 2), a = e.stylize(a, "name")) : (a = a.replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'"), a = e.stylize(a, "string"))
            }
            return a + ": " + s
        }

        function f(e, t, n) {
            var i = 0,
                r = e.reduce(function(e, t) {
                    return i++, t.indexOf("\n") >= 0 && i++, e + t.replace(/\u001b\[\d\d?m/g, "").length + 1
                }, 0);
            return r > 60 ? n[0] + ("" === t ? "" : t + "\n ") + " " + e.join(",\n  ") + " " + n[1] : n[0] + t + " " + e.join(", ") + " " + n[1]
        }

        function p(e) {
            return Array.isArray(e)
        }

        function m(e) {
            return "boolean" == typeof e
        }

        function v(e) {
            return null === e
        }

        function g(e) {
            return null == e
        }

        function y(e) {
            return "number" == typeof e
        }

        function _(e) {
            return "string" == typeof e
        }

        function x(e) {
            return "symbol" == typeof e
        }

        function b(e) {
            return void 0 === e
        }

        function w(e) {
            return T(e) && "[object RegExp]" === A(e)
        }

        function T(e) {
            return "object" == typeof e && null !== e
        }

        function E(e) {
            return T(e) && "[object Date]" === A(e)
        }

        function S(e) {
            return T(e) && ("[object Error]" === A(e) || e instanceof Error)
        }

        function M(e) {
            return "function" == typeof e
        }

        function P(e) {
            return null === e || "boolean" == typeof e || "number" == typeof e || "string" == typeof e || "symbol" == typeof e || "undefined" == typeof e
        }

        function A(e) {
            return Object.prototype.toString.call(e)
        }

        function C(e) {
            return 10 > e ? "0" + e.toString(10) : e.toString(10)
        }

        function R() {
            var e = new Date,
                t = [C(e.getHours()), C(e.getMinutes()), C(e.getSeconds())].join(":");
            return [e.getDate(), F[e.getMonth()], t].join(" ")
        }

        function L(e, t) {
            return Object.prototype.hasOwnProperty.call(e, t)
        }
        var O = /%[sdj%]/g;
        t.format = function(e) {
            if (!_(e)) {
                for (var t = [], n = 0; n < arguments.length; n++) t.push(r(arguments[n]));
                return t.join(" ")
            }
            for (var n = 1, i = arguments, o = i.length, a = String(e).replace(O, function(e) {
                    if ("%%" === e) return "%";
                    if (n >= o) return e;
                    switch (e) {
                        case "%s":
                            return String(i[n++]);
                        case "%d":
                            return Number(i[n++]);
                        case "%j":
                            try {
                                return JSON.stringify(i[n++])
                            } catch (t) {
                                return "[Circular]"
                            }
                        default:
                            return e
                    }
                }), s = i[n]; o > n; s = i[++n]) a += v(s) || !T(s) ? " " + s : " " + r(s);
            return a
        }, t.deprecate = function(n, r) {
            function o() {
                if (!a) {
                    if (i.throwDeprecation) throw new Error(r);
                    i.traceDeprecation ? console.trace(r) : console.error(r), a = !0
                }
                return n.apply(this, arguments)
            }
            if (b(e.process)) return function() {
                return t.deprecate(n, r).apply(this, arguments)
            };
            if (i.noDeprecation === !0) return n;
            var a = !1;
            return o
        };
        var k, D = {};
        t.debuglog = function(e) {
            if (b(k) && (k = {
                    NODE_ENV: "production"
                }.NODE_DEBUG || ""), e = e.toUpperCase(), !D[e])
                if (new RegExp("\\b" + e + "\\b", "i").test(k)) {
                    var n = i.pid;
                    D[e] = function() {
                        var i = t.format.apply(t, arguments);
                        console.error("%s %d: %s", e, n, i)
                    }
                } else D[e] = function() {};
            return D[e]
        }, t.inspect = r, r.colors = {
            bold: [1, 22],
            italic: [3, 23],
            underline: [4, 24],
            inverse: [7, 27],
            white: [37, 39],
            grey: [90, 39],
            black: [30, 39],
            blue: [34, 39],
            cyan: [36, 39],
            green: [32, 39],
            magenta: [35, 39],
            red: [31, 39],
            yellow: [33, 39]
        }, r.styles = {
            special: "cyan",
            number: "yellow",
            "boolean": "yellow",
            undefined: "grey",
            "null": "bold",
            string: "green",
            date: "magenta",
            regexp: "red"
        }, t.isArray = p, t.isBoolean = m, t.isNull = v, t.isNullOrUndefined = g, t.isNumber = y, t.isString = _, t.isSymbol = x, t.isUndefined = b, t.isRegExp = w, t.isObject = T, t.isDate = E, t.isError = S, t.isFunction = M, t.isPrimitive = P, t.isBuffer = n(232);
        var F = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
        t.log = function() {
            console.log("%s - %s", R(), t.format.apply(t, arguments))
        }, t.inherits = n(233), t._extend = function(e, t) {
            if (!t || !T(t)) return e;
            for (var n = Object.keys(t), i = n.length; i--;) e[n[i]] = t[n[i]];
            return e
        }
    }).call(t, function() {
        return this
    }(), n(66))
}, function(e, t) {
    e.exports = function(e) {
        return e && "object" == typeof e && "function" == typeof e.copy && "function" == typeof e.fill && "function" == typeof e.readUInt8
    }
}, function(e, t) {
    "function" == typeof Object.create ? e.exports = function(e, t) {
        e.super_ = t, e.prototype = Object.create(t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        })
    } : e.exports = function(e, t) {
        e.super_ = t;
        var n = function() {};
        n.prototype = t.prototype, e.prototype = new n, e.prototype.constructor = e
    }
}, function(e, t, n) {
    /*!
     * domready (c) Dustin Diaz 2014 - License MIT
     */
    ! function(t, n) {
        e.exports = n()
    }("domready", function() {
        var e, t = [],
            n = document,
            i = n.documentElement.doScroll,
            r = "DOMContentLoaded",
            o = (i ? /^loaded|^c/ : /^loaded|^i|^c/).test(n.readyState);
        return o || n.addEventListener(r, e = function() {
                for (n.removeEventListener(r, e), o = 1; e = t.shift();) e()
            }),
            function(e) {
                o ? setTimeout(e, 0) : t.push(e)
            }
    })
}, function(e, t) {
    var n, i = "undefined" != typeof window ? window.navigator.userAgent : "",
        r = /OS X/.test(i),
        o = /Opera/.test(i),
        a = !/like Gecko/.test(i) && !o,
        s = e.exports = {
            0: r ? "<menu>" : "<UNK>",
            1: "<mouse 1>",
            2: "<mouse 2>",
            3: "<break>",
            4: "<mouse 3>",
            5: "<mouse 4>",
            6: "<mouse 5>",
            8: "<backspace>",
            9: "<tab>",
            12: "<clear>",
            13: "<enter>",
            16: "<shift>",
            17: "<control>",
            18: "<alt>",
            19: "<pause>",
            20: "<caps-lock>",
            21: "<ime-hangul>",
            23: "<ime-junja>",
            24: "<ime-final>",
            25: "<ime-kanji>",
            27: "<escape>",
            28: "<ime-convert>",
            29: "<ime-nonconvert>",
            30: "<ime-accept>",
            31: "<ime-mode-change>",
            27: "<escape>",
            32: "<space>",
            33: "<page-up>",
            34: "<page-down>",
            35: "<end>",
            36: "<home>",
            37: "<left>",
            38: "<up>",
            39: "<right>",
            40: "<down>",
            41: "<select>",
            42: "<print>",
            43: "<execute>",
            44: "<snapshot>",
            45: "<insert>",
            46: "<delete>",
            47: "<help>",
            91: "<meta>",
            92: "<meta>",
            93: r ? "<meta>" : "<menu>",
            95: "<sleep>",
            106: "<num-*>",
            107: "<num-+>",
            108: "<num-enter>",
            109: "<num-->",
            110: "<num-.>",
            111: "<num-/>",
            144: "<num-lock>",
            145: "<scroll-lock>",
            160: "<shift-left>",
            161: "<shift-right>",
            162: "<control-left>",
            163: "<control-right>",
            164: "<alt-left>",
            165: "<alt-right>",
            166: "<browser-back>",
            167: "<browser-forward>",
            168: "<browser-refresh>",
            169: "<browser-stop>",
            170: "<browser-search>",
            171: "<browser-favorites>",
            172: "<browser-home>",
            173: r && a ? "-" : "<volume-mute>",
            174: "<volume-down>",
            175: "<volume-up>",
            176: "<next-track>",
            177: "<prev-track>",
            178: "<stop>",
            179: "<play-pause>",
            180: "<launch-mail>",
            181: "<launch-media-select>",
            182: "<launch-app 1>",
            183: "<launch-app 2>",
            186: ";",
            187: "=",
            188: ",",
            189: "-",
            190: ".",
            191: "/",
            192: "`",
            219: "[",
            220: "\\",
            221: "]",
            222: "'",
            223: "<meta>",
            224: "<meta>",
            226: "<alt-gr>",
            229: "<ime-process>",
            231: o ? "`" : "<unicode>",
            246: "<attention>",
            247: "<crsel>",
            248: "<exsel>",
            249: "<erase-eof>",
            250: "<play>",
            251: "<zoom>",
            252: "<no-name>",
            253: "<pa-1>",
            254: "<clear>"
        };
    for (n = 58; 65 > n; ++n) s[n] = String.fromCharCode(n);
    for (n = 48; 58 > n; ++n) s[n] = n - 48 + "";
    for (n = 65; 91 > n; ++n) s[n] = String.fromCharCode(n);
    for (n = 96; 106 > n; ++n) s[n] = "<num-" + (n - 96) + ">";
    for (n = 112; 136 > n; ++n) s[n] = "F" + (n - 111)
}, function(e, t) {
    "use strict";

    function n(e) {
        var t = {};
        for (var n in e) e.hasOwnProperty(n) && (t[e[n]] = n);
        return t
    }
    e.exports = n
}, function(e, t) {
    "use strict";

    function n(e, t) {
        for (var n = 1, i = e.length, r = e[0], o = e[0], a = 1; i > a; ++a)
            if (o = r, r = e[a], t(r, o)) {
                if (a === n) {
                    n++;
                    continue
                }
                e[n++] = r
            }
        return e.length = n, e
    }

    function i(e) {
        for (var t = 1, n = e.length, i = e[0], r = e[0], o = 1; n > o; ++o, r = i)
            if (r = i, i = e[o], i !== r) {
                if (o === t) {
                    t++;
                    continue
                }
                e[t++] = i
            }
        return e.length = t, e
    }

    function r(e, t, r) {
        return 0 === e.length ? e : t ? (r || e.sort(t), n(e, t)) : (r || e.sort(), i(e))
    }
    e.exports = r
}, function(e, t) {
    "use strict";

    function n(e, t, n, i, r, o) {
        var a = ["function ", e, "(a,l,h,", i.join(","), "){", o ? "" : "var i=", n ? "l-1" : "h+1", ";while(l<=h){	var m=(l+h)>>>1,x=a", r ? ".get(m)" : "[m]"];
        return o ? t.indexOf("c") < 0 ? a.push(";if(x===y){return m}else if(x<=y){") : a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){") : a.push(";if(", t, "){i=m;"), n ? a.push("l=m+1}else{h=m-1}") : a.push("h=m-1}else{l=m+1}"), a.push("}"), o ? a.push("return -1};") : a.push("return i};"), a.join("")
    }

    function i(e, t, i, r) {
        var o = new Function([n("A", "x" + e + "y", t, ["y"], !1, r), n("B", "x" + e + "y", t, ["y"], !0, r), n("P", "c(x,y)" + e + "0", t, ["y", "c"], !1, r), n("Q", "c(x,y)" + e + "0", t, ["y", "c"], !0, r), "function dispatchBsearch", i, "(a,y,c,l,h){	if(a.shape){	if(typeof(c)==='function'){	return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)	}else{	return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)	}}else{	if(typeof(c)==='function'){	return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)	}else{	return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)	}}}	return dispatchBsearch", i].join(""));
        return o()
    }
    e.exports = {
        ge: i(">=", !1, "GE"),
        gt: i(">", !1, "GT"),
        lt: i("<", !0, "LT"),
        le: i("<=", !0, "LE"),
        eq: i("-", !0, "EQ", !0)
    }
}, function(e, t) {
    "use strict";

    function n(e) {
        for (var t = new Array(e), n = 0; e > n; ++n) t[n] = n;
        return t
    }
    e.exports = n
}, function(e, t) {
    for (var n = 0, i = ["ms", "moz", "webkit", "o"], r = 0; r < i.length && !window.requestAnimationFrame; ++r) window.requestAnimationFrame = window[i[r] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[i[r] + "CancelAnimationFrame"] || window[i[r] + "CancelRequestAnimationFrame"];
    window.requestAnimationFrame || (window.requestAnimationFrame = function(e, t) {
        var i = (new Date).getTime(),
            r = Math.max(0, 16 - (i - n)),
            o = window.setTimeout(function() {
                e(i + r)
            }, r);
        return n = i + r, o
    }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function(e) {
        clearTimeout(e)
    })
}, function(e, t) {
    function n(e, t, n, a) {
        e[i](o + t, "wheel" == r ? n : function(e) {
            !e && (e = window.event);
            var t = {
                originalEvent: e,
                target: e.target || e.srcElement,
                type: "wheel",
                deltaMode: "MozMousePixelScroll" == e.type ? 0 : 1,
                deltaX: 0,
                delatZ: 0,
                preventDefault: function() {
                    e.preventDefault ? e.preventDefault() : e.returnValue = !1
                }
            };
            return "mousewheel" == r ? (t.deltaY = -1 / 40 * e.wheelDelta, e.wheelDeltaX && (t.deltaX = -1 / 40 * e.wheelDeltaX)) : t.deltaY = e.detail, n(t)
        }, a || !1)
    }
    var i, r, o = "";
    window.addEventListener ? i = "addEventListener" : (i = "attachEvent", o = "on"), r = "onwheel" in document.createElement("div") ? "wheel" : void 0 !== document.onmousewheel ? "mousewheel" : "DOMMouseScroll", e.exports = function(e, t, i) {
        n(e, r, t, i), "DOMMouseScroll" == r && n(e, "MozMousePixelScroll", t, i)
    }
}, function(e, t) {
    "object" == typeof window.performance ? window.performance.now ? e.exports = function() {
        return window.performance.now()
    } : window.performance.webkitNow && (e.exports = function() {
        return window.performance.webkitNow()
    }) : Date.now ? e.exports = Date.now : e.exports = function() {
        return (new Date).getTime()
    }
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e.replace(/^[A-Z]+_/, "")
    }

    function r(e) {
        var t = a.get(e);
        if (t) return t;
        for (var n = {}, r = e.getSupportedExtensions(), o = 0; o < r.length; ++o) {
            var s = r[o];
            if (0 !== s.indexOf("MOZ_")) {
                var u = e.getExtension(r[o]);
                if (u)
                    for (;;) {
                        n[s] = u;
                        var l = i(s);
                        if (l === s) break;
                        s = l
                    }
            }
        }
        return a.set(e, n), n
    }
    var o = "undefined" == typeof WeakMap ? n(244) : WeakMap,
        a = new o;
    e.exports = r
}, function(e, t) {
    ! function() {
        "use strict";

        function t(e) {
            e.permitHostObjects___ && e.permitHostObjects___(t)
        }

        function n(e) {
            return !(e.substr(0, f.length) == f && "___" === e.substr(e.length - 3))
        }

        function i(e) {
            if (e !== Object(e)) throw new TypeError("Not an object: " + e);
            var t = e[p];
            if (t && t.key === e) return t;
            if (d(e)) {
                t = {
                    key: e
                };
                try {
                    return h(e, p, {
                        value: t,
                        writable: !1,
                        enumerable: !1,
                        configurable: !1
                    }), t
                } catch (n) {
                    return
                }
            }
        }

        function r(e) {
            return e.prototype = null, Object.freeze(e)
        }

        function o() {
            y || "undefined" == typeof console || (y = !0, console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))
        }
        if ("undefined" == typeof ses || !ses.ok || ses.ok()) {
            "undefined" != typeof ses && (ses.weakMapPermitHostObjects = t);
            var a = !1;
            if ("function" == typeof WeakMap) {
                var s = WeakMap;
                if ("undefined" != typeof navigator && /Firefox/.test(navigator.userAgent));
                else {
                    var u = new s,
                        l = Object.freeze({});
                    if (u.set(l, 1), 1 === u.get(l)) return void(e.exports = WeakMap);
                    a = !0
                }
            }
            var c = (Object.prototype.hasOwnProperty, Object.getOwnPropertyNames),
                h = Object.defineProperty,
                d = Object.isExtensible,
                f = "weakmap:",
                p = f + "ident:" + Math.random() + "___";
            if ("undefined" != typeof crypto && "function" == typeof crypto.getRandomValues && "function" == typeof ArrayBuffer && "function" == typeof Uint8Array) {
                var m = new ArrayBuffer(25),
                    v = new Uint8Array(m);
                crypto.getRandomValues(v), p = f + "rand:" + Array.prototype.map.call(v, function(e) {
                    return (e % 36).toString(36)
                }).join("") + "___"
            }
            if (h(Object, "getOwnPropertyNames", {
                    value: function(e) {
                        return c(e).filter(n)
                    }
                }), "getPropertyNames" in Object) {
                var g = Object.getPropertyNames;
                h(Object, "getPropertyNames", {
                    value: function(e) {
                        return g(e).filter(n)
                    }
                })
            }! function() {
                var e = Object.freeze;
                h(Object, "freeze", {
                    value: function(t) {
                        return i(t), e(t)
                    }
                });
                var t = Object.seal;
                h(Object, "seal", {
                    value: function(e) {
                        return i(e), t(e)
                    }
                });
                var n = Object.preventExtensions;
                h(Object, "preventExtensions", {
                    value: function(e) {
                        return i(e), n(e)
                    }
                })
            }();
            var y = !1,
                _ = 0,
                x = function() {
                    function e(e, t) {
                        var n, r = i(e);
                        return r ? l in r ? r[l] : t : (n = s.indexOf(e), n >= 0 ? u[n] : t)
                    }

                    function t(e) {
                        var t = i(e);
                        return t ? l in t : s.indexOf(e) >= 0
                    }

                    function n(e, t) {
                        var n, r = i(e);
                        return r ? r[l] = t : (n = s.indexOf(e), n >= 0 ? u[n] = t : (n = s.length, u[n] = t, s[n] = e)), this
                    }

                    function a(e) {
                        var t, n, r = i(e);
                        return r ? l in r && delete r[l] : (t = s.indexOf(e), 0 > t ? !1 : (n = s.length - 1, s[t] = void 0, u[t] = u[n], s[t] = s[n], s.length = n, u.length = n, !0))
                    }
                    this instanceof x || o();
                    var s = [],
                        u = [],
                        l = _++;
                    return Object.create(x.prototype, {
                        get___: {
                            value: r(e)
                        },
                        has___: {
                            value: r(t)
                        },
                        set___: {
                            value: r(n)
                        },
                        delete___: {
                            value: r(a)
                        }
                    })
                };
            x.prototype = Object.create(Object.prototype, {
                get: {
                    value: function(e, t) {
                        return this.get___(e, t)
                    },
                    writable: !0,
                    configurable: !0
                },
                has: {
                    value: function(e) {
                        return this.has___(e)
                    },
                    writable: !0,
                    configurable: !0
                },
                set: {
                    value: function(e, t) {
                        return this.set___(e, t)
                    },
                    writable: !0,
                    configurable: !0
                },
                "delete": {
                    value: function(e) {
                        return this.delete___(e)
                    },
                    writable: !0,
                    configurable: !0
                }
            }), "function" == typeof s ? ! function() {
                function n() {
                    function e(e, t) {
                        return c ? l.has(e) ? l.get(e) : c.get___(e, t) : l.get(e, t)
                    }

                    function n(e) {
                        return l.has(e) || (c ? c.has___(e) : !1)
                    }

                    function i(e) {
                        var t = !!l["delete"](e);
                        return c ? c.delete___(e) || t : t
                    }
                    this instanceof x || o();
                    var u, l = new s,
                        c = void 0,
                        h = !1;
                    return u = a ? function(e, t) {
                        return l.set(e, t), l.has(e) || (c || (c = new x), c.set(e, t)), this
                    } : function(e, t) {
                        if (h) try {
                            l.set(e, t)
                        } catch (n) {
                            c || (c = new x), c.set___(e, t)
                        } else l.set(e, t);
                        return this
                    }, Object.create(x.prototype, {
                        get___: {
                            value: r(e)
                        },
                        has___: {
                            value: r(n)
                        },
                        set___: {
                            value: r(u)
                        },
                        delete___: {
                            value: r(i)
                        },
                        permitHostObjects___: {
                            value: r(function(e) {
                                if (e !== t) throw new Error("bogus call to permitHostObjects___");
                                h = !0
                            })
                        }
                    })
                }
                a && "undefined" != typeof Proxy && (Proxy = void 0), n.prototype = x.prototype, e.exports = n, Object.defineProperty(WeakMap.prototype, "constructor", {
                    value: WeakMap,
                    enumerable: !1,
                    configurable: !0,
                    writable: !0
                })
            }() : ("undefined" != typeof Proxy && (Proxy = void 0), e.exports = x)
        }
    }()
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = n(26),
        l = i(u),
        c = n(246),
        h = i(c),
        d = void 0,
        f = function(e) {
            function t() {
                r(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, "dream-big", null), this.dom = document.getElementById(this.domId), this.handleVisibilityChange = this._handleVisibilityChange.bind(this), d = new h["default"](this.dom), this.dom.appendChild(d.scene.renderer.domElement), d.scene.renderer.domElement.style.position = "absolute", d.scene.renderer.domElement.style.zIndex = 10, BrowserDetect.isMobile && this.dom.classList.add("mobile")
            }
            return o(t, e), a(t, [{
                key: "addListeners",
                value: function() {
                    document.addEventListener("visibilitychange", this.handleVisibilityChange)
                }
            }, {
                key: "removeListeners",
                value: function() {
                    document.removeEventListener("visibilitychange", this.handleVisibilityChange)
                }
            }, {
                key: "_handleVisibilityChange",
                value: function() {
                    console.log("page visible", document.hidden), document.hidden ? d.stop() : d.play()
                }
            }, {
                key: "register",
                value: function() {
                    return {}
                }
            }, {
                key: "load",
                value: function(e) {
                    e && e(this)
                }
            }, {
                key: "active",
                value: function() {
                    this.addListeners(), d.play()
                }
            }, {
                key: "inactive",
                value: function(e) {
                    this.removeListeners(), d.transitionOut(), d.render(), d.stop(), e && e()
                }
            }, {
                key: "reset",
                value: function() {
                    d.render()
                }
            }, {
                key: "show",
                value: function() {
                    this.dom.classList.remove("hide"), d.composer.render(), d.resize()
                }
            }, {
                key: "hide",
                value: function() {
                    this.dom.classList.add("hide")
                }
            }]), t
        }(l["default"]);
    t["default"] = f, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(18),
        s = i(a),
        u = n(247),
        l = i(u),
        c = n(249),
        h = i(c),
        d = n(254),
        f = i(d),
        p = n(112),
        m = i(p),
        v = n(251),
        g = i(v),
        y = (new THREE.Raycaster, new THREE.Vector2, !1),
        _ = Matter.Engine,
        x = Matter.World,
        b = Matter.Body,
        w = Matter.Bodies,
        T = (Matter.Composites, Matter.Composite, Matter.Constraint, Matter.Mouse, Matter.MouseConstraint, Matter.Vector, Matter.Events, Date.now()),
        E = (T - Date.now(), void 0),
        S = window.innerWidth,
        M = window.innerHeight,
        P = [],
        A = {
            opacity: 0
        },
        C = void 0,
        R = void 0,
        L = {
            x: 0,
            y: 0
        },
        O = void 0,
        k = void 0,
        D = void 0,
        F = {
            currentBalloon: {
                x: 0,
                y: 0,
                scale: 0
            }
        },
        B = void 0,
        I = function() {
            function e(t) {
                var n = this;
                r(this, e), this.domContainer = t, this.scene = new l["default"](S, M), this.resize = this._resize.bind(this), this.update = this._update.bind(this), this.onMouseMove = this._onMouseMove.bind(this), this.onTouchMove = this._onTouchMove.bind(this), this.noiseBackground = new m["default"](this.scene.renderer.getContext());
                var i = new THREE.OBJLoader;
                i.load("balloon.obj", function(e) {
                    y = !0, B = e, n.init()
                })
            }
            return o(e, [{
                key: "init",
                value: function() {
                    this.initPhysicsWorld(), this.addLight(), this.addBalloons(), this.resize(), this.composer = new THREE.EffectComposer(this.scene.renderer);
                    var e = this.noiseBackground.getComposerPass();
                    this.composer.addPass(e);
                    var t = new THREE.RenderPass(this.scene.scene, this.scene.camera);
                    t.clear = !1, this.composer.addPass(t), BrowserDetect.isMobile || (this.effect = new THREE.ShaderPass(THREE.RGBShiftShader), this.effect.uniforms.amount.value = .002, this.effect.renderToScreen = !0, this.effect.material.transparent = !0, this.composer.addPass(this.effect))
                }
            }, {
                key: "initOptions",
                value: function() {
                    D = P[0], D.setDebug(!0), k = new s["default"].GUI;
                    var e = k.addFolder("Current balloon");
                    e.open(), e.add(F.currentBalloon, "x", -S / 2, S / 2).onChange(function() {
                        D.setPosition({
                            x: F.currentBalloon.x,
                            y: F.currentBalloon.y
                        })
                    }), e.add(F.currentBalloon, "y", 0, M).onChange(function() {
                        D.setPosition({
                            x: F.currentBalloon.x,
                            y: F.currentBalloon.y
                        })
                    }), e.add(F.currentBalloon, "scale", 1, 10).onChange(function() {
                        D.setScale(F.currentBalloon.scale)
                    })
                }
            }, {
                key: "setDebugBalloon",
                value: function(e) {
                    return P.forEach(function(t) {
                        t.balloonId === e ? (D = t, D.setDebug(!0)) : t.setDebug(!1)
                    }), D
                }
            }, {
                key: "addLight",
                value: function() {
                    new THREE.AmbientLight(16777215);
                    O = new THREE.PointLight(16777215), O.position.set(0, 0, 700), O.intensity = 1, O.distance = 800, this.scene.add(O)
                }
            }, {
                key: "addDebugGrid",
                value: function() {
                    var e = new THREE.GridHelper(100, 10);
                    this.scene.add(e)
                }
            }, {
                key: "initPhysicsWorld",
                value: function() {
                    var e = {
                        create: function() {
                            return {
                                controller: e
                            }
                        },
                        world: function(e) {}
                    };
                    C = _.create({
                        render: {
                            controller: e
                        },
                        constraintIterations: .1,
                        positionIterations: .5
                    }), C.world.gravity.y = .01, _.run(C), R = w.circle(500, 50, 80, {
                        collisionFilter: {
                            category: g["default"].mouse,
                            mask: g["default"].chainLink
                        },
                        render: {
                            fillStyle: "#00ff00"
                        }
                    }), x.add(C.world, R), Matter.Runner.stop(C)
                }
            }, {
                key: "addBalloons",
                value: function() {
                    var e = this,
                        t = (window.innerWidth, window.innerHeight, 0),
                        n = f["default"];
                    BrowserDetect.isMobile && (n = f["default"].splice(0, 20)), n.forEach(function(n, i) {
                        var r = B.clone(),
                            o = void 0;
                        o = BrowserDetect.isMobile ? [100 * Math.random() - 50, n[1] / 5, n[2] / 1.5] : n;
                        var a = new h["default"]({
                            model: r,
                            position: [o[0], o[1]],
                            scale: o[2],
                            scene: e.scene,
                            id: i
                        });
                        a.pBalloon.ropeEls.forEach(function(e) {
                            x.add(C.world, e)
                        }), a.pBalloon.ropeBodies.forEach(function(e) {
                            t += 1
                        }), x.add(C.world, a.pBalloon.balloonBody), P.push(a), e.scene.add(a)
                    })
                }
            }, {
                key: "transitionIn",
                value: function() {
                    TweenMax.to(A, 2, {
                        opacity: 1,
                        onUpdate: this.onTransitionUpdate.bind(this)
                    })
                }
            }, {
                key: "transitionOut",
                value: function() {
                    Matter.Engine.clear(C), P.forEach(function(e) {
                        e.setOpacity(0)
                    })
                }
            }, {
                key: "onTransitionUpdate",
                value: function() {
                    P.forEach(function(e) {
                        e.setOpacity(A.opacity)
                    })
                }
            }, {
                key: "updateMouseBody",
                value: function() {}
            }, {
                key: "_onMouseMove",
                value: function(e) {
                    L.x = e.pageX, L.y = e.pageY, O.position.x = e.pageX - window.innerWidth / 2, O.position.y = -1 * (e.pageY - window.innerHeight / 2);
                    var t = new THREE.Vector3;
                    t.set(e.pageX / window.innerWidth * 2 - 1, 2 * -(e.pageY / window.innerHeight) + 1, .5), t.unproject(this.scene.camera), t.sub(this.scene.camera.position), t.x *= this.scene.camera.position.z / -t.z, t.y *= this.scene.camera.position.z / -t.z, t.x = t.x + window.innerWidth / 2, t.y = -t.y + window.innerHeight / 2, b.setPosition(R, t);
                    for (var n = 0; n < P.length; n++) P[n].updateMouseUniform(L)
                }
            }, {
                key: "_onTouchMove",
                value: function(e) {
                    L.x = event.targetTouches[0].clientX, L.y = event.targetTouches[0].clientY, O.position.x = event.targetTouches[0].clientX - window.innerWidth / 2, O.position.y = -1 * (event.targetTouches[0].clientY - window.innerHeight / 2);
                    var t = new THREE.Vector3;
                    t.set(e.targetTouches[0].clientX / window.innerWidth * 2 - 1, 2 * -(e.targetTouches[0].clientY / window.innerHeight) + 1, .5), t.unproject(this.scene.camera), t.sub(this.scene.camera.position), t.x *= this.scene.camera.position.z / -t.z, t.y *= this.scene.camera.position.z / -t.z, t.x = t.x + window.innerWidth / 2, t.y = -t.y + window.innerHeight / 2, b.setPosition(R, t);
                    for (var n = 0; n < P.length; n++) P[n].updateMouseUniform(L)
                }
            }, {
                key: "_update",
                value: function() {
                    E = window.requestAnimationFrame(this.update), y && this.updateMouseBody();
                    for (var e = 0; e < P.length; e++) P[e].update();
                    this.render()
                }
            }, {
                key: "render",
                value: function() {
                    this.noiseBackground.render(), this.composer && !BrowserDetect.isMobile ? this.composer.render() : this.scene.render()
                }
            }, {
                key: "_resize",
                value: function() {
                    S = window.innerWidth, M = window.innerHeight, this.scene.resize(S, M), P.forEach(function(e) {
                        e.pBalloon.ropeEls.forEach(function(e) {
                            x.remove(C.world, e)
                        }), x.remove(C.world, e.pBalloon.balloonBody)
                    });
                    for (var e = 0; e < P.length; e++) P[e].setPosition(S, M);
                    P.forEach(function(e) {
                        e.pBalloon.ropeEls.forEach(function(e) {
                            x.add(C.world, e)
                        }), x.add(C.world, e.pBalloon.balloonBody)
                    })
                }
            }, {
                key: "play",
                value: function() {
                    this.addListeners(), this.transitionIn()
                }
            }, {
                key: "stop",
                value: function() {
                    this.removeListeners(), this.dispose()
                }
            }, {
                key: "addListeners",
                value: function() {
                    E = window.requestAnimationFrame(this.update), window.addEventListener("resize", this.resize), BrowserDetect.isMobile ? (window.addEventListener("touchmove", this.onTouchMove), window.addEventListener("touchend", function() {
                        L.x = -1, L.y = -1
                    })) : window.addEventListener("mousemove", this.onMouseMove)
                }
            }, {
                key: "removeListeners",
                value: function() {
                    window.cancelAnimationFrame(E), window.removeEventListener("resize", this.resize), window.removeEventListener("mousemove", this.onMouseMove)
                }
            }, {
                key: "dispose",
                value: function() {}
            }]), e
        }();
    t["default"] = I, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        o = (n(248)(THREE), function() {
            function e(t, n) {
                i(this, e), this.width = t, this.height = n, this.scene = new THREE.Scene, this.renderer = new THREE.WebGLRenderer, this.renderer.setSize(this.width, this.height), this.renderer.setClearColor(1184274), this.renderer.autoClear = !1, this.camera = new THREE.PerspectiveCamera(45, this.width / this.height, 1, 1660), this.camera.lookAt(new THREE.Vector3), this.camera.position.x = 0, BrowserDetect.isMobile ? this.camera.position.z = 400 : this.camera.position.z = 830
            }
            return r(e, [{
                key: "add",
                value: function(e) {
                    this.scene.add(e)
                }
            }, {
                key: "remove",
                value: function(e) {
                    this.scene.remove(e)
                }
            }, {
                key: "render",
                value: function() {
                    this.renderer.render(this.scene, this.camera)
                }
            }, {
                key: "resize",
                value: function(e, t) {
                    this.width = e, this.height = t, this.camera.aspect = this.width / this.height, this.camera.updateProjectionMatrix(), this.renderer.setSize(this.width, this.height), this.renderer.domElement.style.width = this.width + "px", this.renderer.domElement.style.height = this.height + "px"
                }
            }]), e
        }());
    t["default"] = o, e.exports = t["default"]
}, function(e, t) {
    e.exports = function(e) {
        function t(t) {
            this.object = t, this.target = new e.Vector3, this.minDistance = 0, this.maxDistance = 1 / 0, this.minZoom = 0, this.maxZoom = 1 / 0, this.minPolarAngle = 0, this.maxPolarAngle = Math.PI, this.minAzimuthAngle = -(1 / 0), this.maxAzimuthAngle = 1 / 0, this.enableDamping = !1, this.dampingFactor = .25;
            var n, i, r = this,
                o = 1e-6,
                a = 0,
                s = 0,
                u = 1,
                l = new e.Vector3,
                c = !1;
            this.getPolarAngle = function() {
                return i
            }, this.getAzimuthalAngle = function() {
                return n
            }, this.rotateLeft = function(e) {
                s -= e
            }, this.rotateUp = function(e) {
                a -= e
            }, this.panLeft = function() {
                var t = new e.Vector3;
                return function(e) {
                    var n = this.object.matrix.elements;
                    t.set(n[0], n[1], n[2]), t.multiplyScalar(-e), l.add(t)
                }
            }(), this.panUp = function() {
                var t = new e.Vector3;
                return function(e) {
                    var n = this.object.matrix.elements;
                    t.set(n[4], n[5], n[6]), t.multiplyScalar(e), l.add(t)
                }
            }(), this.pan = function(t, n, i, o) {
                if (r.object instanceof e.PerspectiveCamera) {
                    var a = r.object.position,
                        s = a.clone().sub(r.target),
                        u = s.length();
                    u *= Math.tan(r.object.fov / 2 * Math.PI / 180), r.panLeft(2 * t * u / o), r.panUp(2 * n * u / o)
                } else r.object instanceof e.OrthographicCamera ? (r.panLeft(t * (r.object.right - r.object.left) / i), r.panUp(n * (r.object.top - r.object.bottom) / o)) : console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")
            }, this.dollyIn = function(t) {
                r.object instanceof e.PerspectiveCamera ? u /= t : r.object instanceof e.OrthographicCamera ? (r.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * t)), r.object.updateProjectionMatrix(), c = !0) : console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")
            }, this.dollyOut = function(t) {
                r.object instanceof e.PerspectiveCamera ? u *= t : r.object instanceof e.OrthographicCamera ? (r.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / t)), r.object.updateProjectionMatrix(), c = !0) : console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")
            }, this.update = function() {
                var r = new e.Vector3,
                    h = (new e.Quaternion).setFromUnitVectors(t.up, new e.Vector3(0, 1, 0)),
                    d = h.clone().inverse(),
                    f = new e.Vector3,
                    p = new e.Quaternion;
                return function() {
                    var e = this.object.position;
                    r.copy(e).sub(this.target), r.applyQuaternion(h), n = Math.atan2(r.x, r.z), i = Math.atan2(Math.sqrt(r.x * r.x + r.z * r.z), r.y), n += s, i += a, n = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, n)), i = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, i)), i = Math.max(o, Math.min(Math.PI - o, i));
                    var t = r.length() * u;
                    return t = Math.max(this.minDistance, Math.min(this.maxDistance, t)), this.target.add(l), r.x = t * Math.sin(i) * Math.sin(n), r.y = t * Math.cos(i), r.z = t * Math.sin(i) * Math.cos(n), r.applyQuaternion(d), e.copy(this.target).add(r), this.object.lookAt(this.target), this.enableDamping === !0 ? (s *= 1 - this.dampingFactor, a *= 1 - this.dampingFactor) : (s = 0, a = 0), u = 1, l.set(0, 0, 0), c || f.distanceToSquared(this.object.position) > o || 8 * (1 - p.dot(this.object.quaternion)) > o ? (f.copy(this.object.position), p.copy(this.object.quaternion), c = !1, !0) : !1
                }
            }()
        }

        function n(n, i) {
            function r(e, t) {
                var n = g.domElement === document ? g.domElement.body : g.domElement;
                v.pan(e, t, n.clientWidth, n.clientHeight)
            }

            function o() {
                return 2 * Math.PI / 60 / 60 * g.autoRotateSpeed
            }

            function a() {
                return Math.pow(.95, g.zoomSpeed)
            }

            function s(e) {
                if (g.enabled !== !1) {
                    if (e.preventDefault(), e.button === g.mouseButtons.ORBIT) {
                        if (g.enableRotate === !1) return;
                        A = P.ROTATE, y.set(e.clientX, e.clientY)
                    } else if (e.button === g.mouseButtons.ZOOM) {
                        if (g.enableZoom === !1) return;
                        A = P.DOLLY, E.set(e.clientX, e.clientY)
                    } else if (e.button === g.mouseButtons.PAN) {
                        if (g.enablePan === !1) return;
                        A = P.PAN, b.set(e.clientX, e.clientY)
                    }
                    A !== P.NONE && (document.addEventListener("mousemove", u, !1), document.addEventListener("mouseup", l, !1), g.dispatchEvent(R))
                }
            }

            function u(e) {
                if (g.enabled !== !1) {
                    e.preventDefault();
                    var t = g.domElement === document ? g.domElement.body : g.domElement;
                    if (A === P.ROTATE) {
                        if (g.enableRotate === !1) return;
                        _.set(e.clientX, e.clientY), x.subVectors(_, y), v.rotateLeft(2 * Math.PI * x.x / t.clientWidth * g.rotateSpeed), v.rotateUp(2 * Math.PI * x.y / t.clientHeight * g.rotateSpeed), y.copy(_)
                    } else if (A === P.DOLLY) {
                        if (g.enableZoom === !1) return;
                        S.set(e.clientX, e.clientY), M.subVectors(S, E), M.y > 0 ? v.dollyIn(a()) : M.y < 0 && v.dollyOut(a()), E.copy(S)
                    } else if (A === P.PAN) {
                        if (g.enablePan === !1) return;
                        w.set(e.clientX, e.clientY), T.subVectors(w, b), r(T.x, T.y), b.copy(w)
                    }
                    A !== P.NONE && g.update()
                }
            }

            function l() {
                g.enabled !== !1 && (document.removeEventListener("mousemove", u, !1), document.removeEventListener("mouseup", l, !1), g.dispatchEvent(L), A = P.NONE)
            }

            function c(e) {
                if (g.enabled !== !1 && g.enableZoom !== !1 && A === P.NONE) {
                    e.preventDefault(), e.stopPropagation();
                    var t = 0;
                    void 0 !== e.wheelDelta ? t = e.wheelDelta : void 0 !== e.detail && (t = -e.detail), t > 0 ? v.dollyOut(a()) : 0 > t && v.dollyIn(a()), g.update(), g.dispatchEvent(R), g.dispatchEvent(L)
                }
            }

            function h(e) {
                if (g.enabled !== !1 && g.enableKeys !== !1 && g.enablePan !== !1) switch (e.keyCode) {
                    case g.keys.UP:
                        r(0, g.keyPanSpeed), g.update();
                        break;
                    case g.keys.BOTTOM:
                        r(0, -g.keyPanSpeed), g.update();
                        break;
                    case g.keys.LEFT:
                        r(g.keyPanSpeed, 0), g.update();
                        break;
                    case g.keys.RIGHT:
                        r(-g.keyPanSpeed, 0), g.update()
                }
            }

            function d(e) {
                if (g.enabled !== !1) {
                    switch (e.touches.length) {
                        case 1:
                            if (g.enableRotate === !1) return;
                            A = P.TOUCH_ROTATE, y.set(e.touches[0].pageX, e.touches[0].pageY);
                            break;
                        case 2:
                            if (g.enableZoom === !1) return;
                            A = P.TOUCH_DOLLY;
                            var t = e.touches[0].pageX - e.touches[1].pageX,
                                n = e.touches[0].pageY - e.touches[1].pageY,
                                i = Math.sqrt(t * t + n * n);
                            E.set(0, i);
                            break;
                        case 3:
                            if (g.enablePan === !1) return;
                            A = P.TOUCH_PAN, b.set(e.touches[0].pageX, e.touches[0].pageY);
                            break;
                        default:
                            A = P.NONE
                    }
                    A !== P.NONE && g.dispatchEvent(R)
                }
            }

            function f(e) {
                if (g.enabled !== !1) {
                    e.preventDefault(), e.stopPropagation();
                    var t = g.domElement === document ? g.domElement.body : g.domElement;
                    switch (e.touches.length) {
                        case 1:
                            if (g.enableRotate === !1) return;
                            if (A !== P.TOUCH_ROTATE) return;
                            _.set(e.touches[0].pageX, e.touches[0].pageY), x.subVectors(_, y), v.rotateLeft(2 * Math.PI * x.x / t.clientWidth * g.rotateSpeed), v.rotateUp(2 * Math.PI * x.y / t.clientHeight * g.rotateSpeed), y.copy(_), g.update();
                            break;
                        case 2:
                            if (g.enableZoom === !1) return;
                            if (A !== P.TOUCH_DOLLY) return;
                            var n = e.touches[0].pageX - e.touches[1].pageX,
                                i = e.touches[0].pageY - e.touches[1].pageY,
                                o = Math.sqrt(n * n + i * i);
                            S.set(0, o), M.subVectors(S, E), M.y > 0 ? v.dollyOut(a()) : M.y < 0 && v.dollyIn(a()), E.copy(S), g.update();
                            break;
                        case 3:
                            if (g.enablePan === !1) return;
                            if (A !== P.TOUCH_PAN) return;
                            w.set(e.touches[0].pageX, e.touches[0].pageY), T.subVectors(w, b), r(T.x, T.y), b.copy(w), g.update();
                            break;
                        default:
                            A = P.NONE
                    }
                }
            }

            function p() {
                g.enabled !== !1 && (g.dispatchEvent(L), A = P.NONE)
            }

            function m(e) {
                e.preventDefault()
            }
            var v = new t(n);
            this.domElement = void 0 !== i ? i : document, Object.defineProperty(this, "constraint", {
                get: function() {
                    return v
                }
            }), this.getPolarAngle = function() {
                return v.getPolarAngle()
            }, this.getAzimuthalAngle = function() {
                return v.getAzimuthalAngle()
            }, this.enabled = !0, this.center = this.target, this.enableZoom = !0, this.zoomSpeed = 1, this.enableRotate = !0, this.rotateSpeed = 1, this.enablePan = !0, this.keyPanSpeed = 7, this.autoRotate = !1, this.autoRotateSpeed = 2, this.enableKeys = !0, this.keys = {
                LEFT: 37,
                UP: 38,
                RIGHT: 39,
                BOTTOM: 40
            }, this.mouseButtons = {
                ORBIT: e.MOUSE.LEFT,
                ZOOM: e.MOUSE.MIDDLE,
                PAN: e.MOUSE.RIGHT
            };
            var g = this,
                y = new e.Vector2,
                _ = new e.Vector2,
                x = new e.Vector2,
                b = new e.Vector2,
                w = new e.Vector2,
                T = new e.Vector2,
                E = new e.Vector2,
                S = new e.Vector2,
                M = new e.Vector2,
                P = {
                    NONE: -1,
                    ROTATE: 0,
                    DOLLY: 1,
                    PAN: 2,
                    TOUCH_ROTATE: 3,
                    TOUCH_DOLLY: 4,
                    TOUCH_PAN: 5
                },
                A = P.NONE;
            this.target0 = this.target.clone(), this.position0 = this.object.position.clone(), this.zoom0 = this.object.zoom;
            var C = {
                    type: "change"
                },
                R = {
                    type: "start"
                },
                L = {
                    type: "end"
                };
            this.update = function() {
                this.autoRotate && A === P.NONE && v.rotateLeft(o()), v.update() === !0 && this.dispatchEvent(C)
            }, this.reset = function() {
                A = P.NONE, this.target.copy(this.target0), this.object.position.copy(this.position0), this.object.zoom = this.zoom0, this.object.updateProjectionMatrix(), this.dispatchEvent(C), this.update()
            }, this.dispose = function() {
                this.domElement.removeEventListener("contextmenu", m, !1), this.domElement.removeEventListener("mousedown", s, !1), this.domElement.removeEventListener("mousewheel", c, !1), this.domElement.removeEventListener("MozMousePixelScroll", c, !1), this.domElement.removeEventListener("touchstart", d, !1), this.domElement.removeEventListener("touchend", p, !1), this.domElement.removeEventListener("touchmove", f, !1), document.removeEventListener("mousemove", u, !1), document.removeEventListener("mouseup", l, !1), window.removeEventListener("keydown", h, !1)
            }, this.domElement.addEventListener("contextmenu", m, !1), this.domElement.addEventListener("mousedown", s, !1), this.domElement.addEventListener("mousewheel", c, !1), this.domElement.addEventListener("MozMousePixelScroll", c, !1), this.domElement.addEventListener("touchstart", d, !1), this.domElement.addEventListener("touchend", p, !1), this.domElement.addEventListener("touchmove", f, !1), window.addEventListener("keydown", h, !1), this.update()
        }
        var i = e.MOUSE;
        return i || (i = {
            LEFT: 0,
            MIDDLE: 1,
            RIGHT: 2
        }), n.prototype = Object.create(e.EventDispatcher.prototype), n.prototype.constructor = n, Object.defineProperties(n.prototype, {
            object: {
                get: function() {
                    return this.constraint.object
                }
            },
            target: {
                get: function() {
                    return this.constraint.target
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: target is now immutable. Use target.set() instead."), this.constraint.target.copy(e)
                }
            },
            minDistance: {
                get: function() {
                    return this.constraint.minDistance
                },
                set: function(e) {
                    this.constraint.minDistance = e
                }
            },
            maxDistance: {
                get: function() {
                    return this.constraint.maxDistance
                },
                set: function(e) {
                    this.constraint.maxDistance = e
                }
            },
            minZoom: {
                get: function() {
                    return this.constraint.minZoom
                },
                set: function(e) {
                    this.constraint.minZoom = e
                }
            },
            maxZoom: {
                get: function() {
                    return this.constraint.maxZoom
                },
                set: function(e) {
                    this.constraint.maxZoom = e
                }
            },
            minPolarAngle: {
                get: function() {
                    return this.constraint.minPolarAngle
                },
                set: function(e) {
                    this.constraint.minPolarAngle = e
                }
            },
            maxPolarAngle: {
                get: function() {
                    return this.constraint.maxPolarAngle
                },
                set: function(e) {
                    this.constraint.maxPolarAngle = e
                }
            },
            minAzimuthAngle: {
                get: function() {
                    return this.constraint.minAzimuthAngle
                },
                set: function(e) {
                    this.constraint.minAzimuthAngle = e
                }
            },
            maxAzimuthAngle: {
                get: function() {
                    return this.constraint.maxAzimuthAngle
                },
                set: function(e) {
                    this.constraint.maxAzimuthAngle = e
                }
            },
            enableDamping: {
                get: function() {
                    return this.constraint.enableDamping
                },
                set: function(e) {
                    this.constraint.enableDamping = e
                }
            },
            dampingFactor: {
                get: function() {
                    return this.constraint.dampingFactor
                },
                set: function(e) {
                    this.constraint.dampingFactor = e
                }
            },
            noZoom: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."), !this.enableZoom
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."), this.enableZoom = !e
                }
            },
            noRotate: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."), !this.enableRotate
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."), this.enableRotate = !e
                }
            },
            noPan: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."), !this.enablePan
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."), this.enablePan = !e
                }
            },
            noKeys: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."), !this.enableKeys
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."), this.enableKeys = !e
                }
            },
            staticMoving: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."), !this.constraint.enableDamping
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."), this.constraint.enableDamping = !e
                }
            },
            dynamicDampingFactor: {
                get: function() {
                    return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."), this.constraint.dampingFactor
                },
                set: function(e) {
                    console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."), this.constraint.dampingFactor = e
                }
            }
        }), n
    }
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = n(250),
        l = i(u),
        c = (new THREE.Raycaster, new THREE.Vector2(2, 2)),
        h = window.innerWidth,
        d = window.innerHeight,
        f = h / 2,
        p = d / 2,
        m = {
            uMouse: {
                type: "v2",
                value: c
            },
            uResolution: {
                type: "v2",
                value: new THREE.Vector2(window.innerWidth, window.innerHeight)
            },
            uIsDebug: {
                type: "f",
                value: 0
            },
            uGlobalAlpha: {
                type: "f",
                value: 0
            },
            tDiffuse: {
                type: "t",
                value: THREE.ImageUtils.loadTexture("env_map6.jpg")
            },
            mRefractionRatio: {
                type: "f",
                value: 1.02
            },
            mFresnelBias: {
                type: "f",
                value: .1
            },
            mFresnelPower: {
                type: "f",
                value: 2
            },
            mFresnelScale: {
                type: "f",
                value: 1
            },
            tCube: {
                type: "t",
                value: null
            }
        };
    m.tDiffuse.texture = THREE.ImageUtils.loadTexture("pano.jpg"), m.tDiffuse.texture.wrapT = THREE.RepeatWrapping, m.tDiffuse.texture.wrapS = THREE.RepeatWrapping, m.tDiffuse.texture.minFilter = THREE.LinearMipMapLinearFilter;
    var v = new THREE.ShaderMaterial({
            uniforms: m,
            vertexShader: n(252),
            fragmentShader: n(253),
            transparent: !0
        }),
        g = function(e) {
            function t(e) {
                r(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this), this.opts = e, this.balloonId = this.opts.id, this.pballoon, this.initPhysics(), this.init()
            }
            return o(t, e), a(t, [{
                key: "init",
                value: function() {
                    var e = this;
                    this.balloon = this.opts.model, this.balloon.balloonId = this.opts.id, this.balloon.position.x = this.opts.position[0], this.balloon.position.y = this.opts.position[1], this.balloon.scale.x = this.balloon.scale.y = this.balloon.scale.z = this.opts.scale, this.balloon.sortObjects = !1, this.add(this.balloon), this.balloon.traverse(function(e) {
                        e instanceof THREE.Mesh && (e.material = v, e.renderOrder = 1)
                    });
                    var t = new THREE.LineBasicMaterial({
                            color: 0,
                            transparent: !0,
                            opacity: 0
                        }),
                        n = new THREE.Geometry;
                    this.pBalloon.ropeBodies.forEach(function(t) {
                        n.vertices.push(new THREE.Vector3(e.opts.position[0], -t.position.y + window.innerHeight / 2, 0))
                    }), this.line = new THREE.Line(n, t), this.add(this.line)
                }
            }, {
                key: "initPhysics",
                value: function() {
                    this.pBalloon = new l["default"]({
                        nbLinks: 15,
                        position: {
                            rawX: this.opts.position[0],
                            rawY: this.opts.position[1],
                            x: f - -1 * this.opts.position[0],
                            y: p + this.opts.position[1]
                        }
                    }), this.originPosition = {
                        x: f - -1 * this.opts.position[0],
                        y: p + this.opts.position[1]
                    }
                }
            }, {
                key: "getRopeAngle",
                value: function() {
                    var e = this.pBalloon.ropeBodies.length,
                        t = this.pBalloon.ropeBodies[e - 1],
                        n = this.pBalloon.ropeBodies[e - 2],
                        i = Math.atan2(n.position.y - t.position.y, t.position.x - n.position.x);
                    return i += Math.PI / 2, i -= Math.PI
                }
            }, {
                key: "attractToOrigin",
                value: function() {
                    var e = Matter.Vector.sub(this.originPosition, this.pBalloon.balloonBody.position),
                        t = Matter.Vector.normalise(e),
                        n = Matter.Vector.mult(t, 0);
                    n.y -= .03, Matter.Body.applyForce(this.pBalloon.balloonBody, this.pBalloon.balloonBody.position, n)
                }
            }, {
                key: "update",
                value: function() {
                    if (this.pBalloon.balloonBody && !(!this.line.geometry.vertices.length > 0)) {
                        this.attractToOrigin();
                        var e = this.getRopeAngle();
                        this.balloon.position.x = this.pBalloon.balloonBody.position.x - window.innerWidth / 2, this.balloon.position.y = -this.pBalloon.balloonBody.position.y + window.innerHeight / 2, this.balloon.rotation.z = e;
                        for (var t = this.pBalloon.ropeBodies, n = this.pBalloon.ropeBodies.length, i = 0; n > i; i++) {
                            var r = t[i],
                                o = this.line.geometry.vertices[i];
                            r && o && (o.x = r.position.x - window.innerWidth / 2, o.y = -r.position.y + window.innerHeight / 2)
                        }
                        this.line.geometry.verticesNeedUpdate = !0
                    }
                }
            }, {
                key: "setPosition",
                value: function(e) {
                    var t = this;
                    this.remove(this.line);
                    var n = new THREE.LineBasicMaterial({
                            color: 0,
                            transparent: !0,
                            opacity: 0
                        }),
                        i = new THREE.Geometry;
                    this.pBalloon.ropeBodies.forEach(function(e) {
                        i.vertices.push(new THREE.Vector3(t.opts.position[0], -e.position.y + window.innerHeight / 2, 0))
                    }), this.line = new THREE.Line(i, n), this.add(this.line), this.pBalloon.setPosition(e)
                }
            }, {
                key: "updateMouseUniform",
                value: function(e) {
                    var t = e.x / window.innerWidth * 2 - 1,
                        n = 2 * -(e.y / window.innerHeight) + 1;
                    this.balloon.children[0].material.uniforms.uMouse.value = {
                        x: t,
                        y: n,
                        z: 0
                    }
                }
            }, {
                key: "setDebug",
                value: function(e) {
                    e ? this.balloon.children[0].material.uniforms.uIsDebug.value = 1 : this.balloon.children[0].material.uniforms.uIsDebug.value = 0
                }
            }, {
                key: "setOpacity",
                value: function(e) {
                    this.balloon.children[0].material.uniforms.uGlobalAlpha.value = e, this.line.material.opacity = e
                }
            }, {
                key: "setScale",
                value: function(e) {
                    this.balloon.scale.x = this.balloon.scale.y = this.balloon.scale.z = e
                }
            }, {
                key: "setPosition",
                value: function(e) {
                    this.pBalloon.setPosition(e)
                }
            }, {
                key: "dispose",
                value: function() {}
            }]), t
        }(THREE.Object3D);
    t["default"] = g, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(251),
        s = i(a),
        u = Matter.Bodies,
        l = Matter.Constraint,
        c = function() {
            function e(t) {
                r(this, e), this.position = t.position || {
                    x: 0,
                    y: 0
                }, this.ropeHeight = window.innerHeight - this.position.y, this.ropeInterLinkLength = 40, this.nbLinks = Math.floor(this.ropeHeight / this.ropeInterLinkLength), this.ropeEls = [], this.ropeBodies = [], this.balloonBody, this.initRope(), this.initBalloon()
            }
            return o(e, [{
                key: "initRope",
                value: function() {
                    var e = window.innerHeight,
                        t = this.ropeHeight / this.nbLinks;
                    this.ropeBodies = [], this.ropeEls = [];
                    for (var n = 0; n < this.nbLinks; n++) {
                        var i = this.position.x,
                            r = e - n * t,
                            o = .8,
                            a = u.circle(i, r, 5, {
                                mass: o,
                                inverseMass: 1 / o,
                                collisionFilter: {
                                    mask: s["default"].mouse
                                },
                                render: {
                                    strokeStyle: "#ff0000",
                                    fillStyle: "transparent"
                                }
                            }),
                            c = void 0;
                        n > 0 ? (c = l.create({
                            bodyA: a,
                            bodyB: this.ropeBodies[n - 1],
                            stiffness: 0,
                            length: t,
                            render: {
                                strokeStyle: "#00ff00"
                            }
                        }), this.ropeEls.push(c)) : a.isStatic = !0, this.ropeEls.push(a), this.ropeBodies.push(a)
                    }
                }
            }, {
                key: "initBalloon",
                value: function() {
                    this.balloonBody = null;
                    var e = this.position.x,
                        t = this.position.y,
                        n = this.ropeHeight / (this.nbLinks - 1),
                        i = void 0;
                    i = BrowserDetect.isMobile ? s["default"].balloon || s["default"].chainLink || s["default"].mouse : s["default"].balloon | s["default"].chainLink | s["default"].mouse, this.balloonBody = u.rectangle(e, t, 60, 85, {
                        frictionAir: .15,
                        collisionFilter: {
                            mask: i
                        }
                    });
                    var r = l.create({
                        bodyA: this.balloonBody,
                        bodyB: this.ropeBodies[this.nbLinks - 1],
                        stiffness: 1,
                        length: n
                    });
                    this.ropeEls.push(r)
                }
            }, {
                key: "setPosition",
                value: function(e) {
                    this.initRope(), this.initBalloon();
                    var t = this.ropeBodies[0],
                        n = window.innerWidth / 2,
                        i = window.innerHeight / 2,
                        r = n - -1 * this.position.rawX;
                    i + this.position.rawY;
                    Matter.Body.setPosition(t, {
                        x: r,
                        y: window.innerHeight
                    })
                }
            }, {
                key: "dispose",
                value: function() {
                    this.balloonBody = null, this.ropeEls = [], this.ropeBodies = [], this.ropeHeight = window.innerHeight - this.position.y, this.nbLinks = Math.floor(this.ropeHeight / this.ropeInterLinkLength)
                }
            }]), e
        }();
    t["default"] = c, e.exports = t["default"]
}, function(e, t) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t["default"] = {
        chainLink: 1,
        mouse: 2,
        balloon: 4
    }, e.exports = t["default"]
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nuniform vec2 uMouse;\nvarying vec3 vPosition;\n\n\nvarying vec3 vReflect;\nvarying vec2 vUV;\nvarying float intensity;\nvarying float vAlpha;\n\nuniform float mRefractionRatio;\nuniform float mFresnelBias;\nuniform float mFresnelScale;\nuniform float mFresnelPower;\n\nvarying float vReflectionFactor;\n\nvoid main() {\n\n  vUV = uv;\n\n  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\n  vec3 I = worldPosition.xyz - cameraPosition;\n  vReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), mFresnelPower );\n\n\n  vec4 mPosition = modelMatrix * vec4( position, 1.0 );\n  vec3 nWorld = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\n  I = cameraPosition - mPosition.xyz;\n  vReflect = normalize( reflect( I, nWorld ) );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n  worldPosition = modelMatrix * vec4(position, 1.0);\n  float distFromMouse = distance( uMouse, gl_Position.xy / gl_Position.w );\n  vAlpha = ( ( 1.0 - ( distFromMouse * 4.0 ) ) * 0.5 ) + .5;\n  vAlpha = clamp( vAlpha, 0.0, 1.0 );\n\n  vPosition = gl_Position.xyz / gl_Position.w ;\n\n}\n"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nuniform vec2 uResolution;\nuniform float uGlobalAlpha;\nvarying vec3 vPosition;\n// uniform float uIsDebug;\n// varying float vAlpha;\n\n// void main() {\n\n//   vec2 normCoord = gl_FragCoord.xy / uResolution;\n\n//   vec4 color = vec4( vec3( 0.0, 0.0, 0.0 ), vAlpha );\n\n//   if ( uIsDebug == 0.0 ) {\n//     color = vec4( vec3( 0.0, 0.0, 0.0 ), vAlpha );\n//   }\n//   else {\n//     color = vec4( 1.0, 0.0, 0.0, 1.0 );  \n//   }\n\n//   gl_FragColor = color;\n\n\n\n// }\n// \n// \n\nuniform sampler2D tDiffuse;\nvarying vec3 vReflect;\nvarying float intensity;\nvarying float vAlpha;\n\nvarying float vReflectionFactor;\n\nvarying vec2 vUV;\n\nvoid main(void) {\n\n  float PI = 3.14159265358979323846264;\n  float yaw = .5 + atan( vReflect.z, vReflect.x ) / ( 2.0 * PI );\n  float pitch = .5 + atan( vReflect.y, length( vReflect.xz ) ) / ( PI );\n  vec3 color = texture2D( tDiffuse, vec2( yaw, pitch ) ).rgb;\n\n  vec2 normCoord = gl_FragCoord.xy / uResolution;\n  vec4 gradientColor = vec4( vec3( vPosition.xy * 0.5 + 0.5, 1.0 ) , 1.0 );\n  vec4 restColor = vec4( vec3( 0.40 ), 1.0 );\n\n  vec4 mixColor = mix( gradientColor, restColor, 1.0 - vAlpha );\n\n  vec3 reflectionColor = color * ( vReflectionFactor - 0.1 );\n  vec3 metalReflectionColor = (reflectionColor * mixColor.xyz) / 0.2;\n  vec3 flatReflectionColor = (reflectionColor + mixColor.xyz) / 0.2;\n\n  vec3 mixedReflection = mix( metalReflectionColor, flatReflectionColor, 0.3 );\n  vec3 final = mixedReflection;\n\n  gl_FragColor = vec4( vec3( vAlpha * mixedReflection * 1.0 ) + ( metalReflectionColor * 0.3 ) , 0.85 * uGlobalAlpha );\n\n}\n"
}, function(e, t) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t["default"] = [
        [-474, -166, 5.6],
        [-484, 75, 5.5],
        [-219, 117, 5.2],
        [-320, -6, 5.2],
        [-475, 166, 5],
        [-393, -181, 5],
        [-246, 18, 4.9],
        [-378, 180, 4.7],
        [-490, -95, 4.3],
        [-478, -20, 4.3],
        [-280, -107, 4.2],
        [-319, -176, 4.1],
        [-293, 180, 4.1],
        [-404, -9, 3.8],
        [-4, 145, 5.7],
        [-20, -185, 4.6],
        [3, -26, 4.4],
        [-30, 51, 4.3],
        [210, -88, 6.1],
        [265, 149, 5.2],
        [273, -163, 5],
        [435, 6, 5],
        [211, 88, 4.8],
        [499, 113, 4.7],
        [353, 170, 4.7],
        [344, -206, 4.6],
        [466, -153, 4.5],
        [435, 160, 4.4],
        [501, 11, 4.3],
        [177, 8, 4.3],
        [410, -198, 3.6]
    ], e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = n(26),
        l = i(u),
        c = n(256),
        h = i(c),
        d = function(e) {
            function t() {
                r(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, "proud", null), this.dom = document.getElementById(this.domId)
            }
            return o(t, e), a(t, [{
                key: "register",
                value: function() {
                    var e = this.dom.querySelector("canvas");
                    return this.renderer = new h["default"](e), {}
                }
            }, {
                key: "load",
                value: function(e) {
                    var t = this,
                        n = this.renderer;
                    n.load().then(function() {
                        n._checkSize(), n.renderTextOnly()
                    }).then(function() {
                        e(t)
                    })
                }
            }, {
                key: "active",
                value: function() {
                    this.renderer.reset(), this.renderer.play(), this.renderer.showAnim()
                }
            }, {
                key: "inactive",
                value: function(e) {
                    this.renderer.stop(), this.renderer.renderTextOnly(), e()
                }
            }, {
                key: "reset",
                value: function() {
                    this.renderer.reset()
                }
            }, {
                key: "show",
                value: function() {
                    this.dom.classList.remove("hide");
                    var e = this.renderer;
                    e._checkSize(), e.renderTextOnly()
                }
            }, {
                key: "hide",
                value: function() {
                    this.dom.classList.add("hide")
                }
            }]), t
        }(l["default"]);
    t["default"] = d, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = n(112),
        o = i(r),
        a = n(257),
        s = i(a),
        u = n(265),
        l = i(u),
        c = n(280),
        h = i(c),
        d = n(281),
        f = i(d),
        p = n(58),
        m = n(193),
        v = i(m),
        g = n(63),
        y = i(g),
        _ = {
            expo: 1.6,
            gamma: .8,
            env: "studio019.png",
            r: [0, 0, 0]
        },
        x = (0, v["default"])({
            init: function() {
                var e = this.gl;
                this.noiseBg = new o["default"](e), this.totem = new l["default"](e), this.bloom = new s["default"](e), this.text = new f["default"](e), this.camera = new h["default"], this.totem.gold.envName = _.env
            },
            getContextOptions: function() {
                return {
                    depth: !0,
                    stencil: !1,
                    antialias: window.devicePixelRatio <= 1,
                    alpha: !1,
                    premultipliedAlpha: !1,
                    preserveDrawingBuffer: !1
                }
            },
            render: function(e) {
                var t = window.devicePixelRatio,
                    n = this.width * t,
                    i = this.height * t,
                    r = p.mouse.x / this.width * 2 - 1,
                    o = p.mouse.y / this.height * 2 - 1,
                    a = this.gl,
                    s = this.camera;
                s.update(n, i, this.width, this.height), this.totem.updateTime(e), this.bloom.preInput(), this.totem.renderBloomInput(s, this.bloom.stencilPrg), this.bloom.postInput(), this.bloom.preStencil(), this.totem.renderBloomStencil(s, this.bloom.stencilPrg), this.bloom.postStencil(), this.bloom.process(), a.bindFramebuffer(a.FRAMEBUFFER, null), a.viewport(0, 0, n, i), this.noiseBg.render(), this.bloom.renderOutput(r, o), this.totem.render(s), this.text.render(n, i), this.totem.checkMouse(this.width, this.height)
            },
            resize: function(e, t) {
                var n = window.devicePixelRatio;
                this.canvas.width = e * n, this.canvas.height = t * n
            }
        });
    x.prototype.load = function() {
        return y["default"].all([this.totem.load(), this.text.load()])
    }, x.prototype.renderTextOnly = function() {
        var e = window.devicePixelRatio,
            t = this.width * e,
            n = this.height * e,
            i = this.gl;
        i.bindFramebuffer(i.FRAMEBUFFER, null), i.viewport(0, 0, t, n), i.clear(i.COLOR_BUFFER_BIT | i.DEPTH_BUFFER_BIT), this.noiseBg.render(), this.text.opacity = 1, this.text.render(t, n)
    }, x.prototype.reset = function() {
        this.totem.reset()
    }, x.prototype.showAnim = function() {
        var e = .5,
            t = .5;
        this.text.opacity = 1, this.camera.distance = 1e3, this.camera.grY = 400, this.camera.grX = 400, this.camera.grZ = 0, this.bloom.bloomIntensity = 0;
        var n = this.totem.gold;
        n.envExpo = _.expo, n.envGamma = _.gamma, n.envFresnel = .3, n.envName = _.env, n.specOffset = 150, TweenMax.to(n, e, {
            envGamma: _.gamma,
            envFresnel: .3,
            specOffset: 0,
            ease: Quint.easeOut,
            delay: t
        }), TweenMax.to(this.camera, 4 * e, {
            distance: 80,
            delay: t,
            ease: Quint.easeOut
        }), TweenMax.to(this.camera, 2 * e, {
            grX: 250,
            grY: 183,
            grZ: 274,
            delay: t,
            ease: Quad.easeOut
        }), TweenMax.to(this.bloom, e, {
            bloomIntensity: .5,
            delay: t
        }), TweenMax.to(this.text, e, {
            opacity: 0,
            delay: t
        })
    }, t["default"] = x, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(189),
        s = i(a),
        u = n(173),
        l = i(u),
        c = n(258),
        h = i(c),
        d = 128,
        f = 16,
        p = function() {
            function e(t) {
                r(this, e), this.gl = t, this.quad = new h["default"](t), this.compPrg = new l["default"](t), this.compPrg.compile(n(259), n(260)), this.bloomPrg = new l["default"](t), this.bloomPrg.compile(n(261), n(262), "#define BLOOM_SAMPLES " + f), this.stencilPrg = new l["default"](t), this.stencilPrg.compile(n(263), n(264)), this.inputFbo = new s["default"](t, 2 * d, 2 * d, {
                    depth: !0
                }), this.vblurFbo = new s["default"](t, d, d), this.hblurFbo = new s["default"](t, d, d, {
                    stencil: !0
                });
                var i = this.hblurFbo.attachmentBuffer;
                t.bindFramebuffer(t.FRAMEBUFFER, this.vblurFbo.fbo), t.bindRenderbuffer(t.RENDERBUFFER, i), t.framebufferRenderbuffer(t.FRAMEBUFFER, t.STENCIL_ATTACHMENT, t.RENDERBUFFER, i), this.bloomSize = .055, this.bloomIntensity = .5, this.numSamples = f, this.kernel = new Float32Array(3 * this.numSamples)
            }
            return o(e, [{
                key: "bindInput",
                value: function() {
                    this.inputFbo.bind(), this.gl.viewport(0, 0, 2 * d, 2 * d), this.gl.clearColor(1, 1, 1, 1), this.inputFbo.clear()
                }
            }, {
                key: "preInput",
                value: function() {
                    this.bindInput(), this.stencilPrg.use(), this.stencilPrg.uNrmPush(.5)
                }
            }, {
                key: "postInput",
                value: function() {}
            }, {
                key: "preStencil",
                value: function() {
                    var e = this.gl;
                    this.hblurFbo.bind(), this.hblurFbo.clear(), this.stencilPrg.use(), this.stencilPrg.uNrmPush(2), e.colorMask(!1, !1, !1, !1), e.enable(e.STENCIL_TEST), e.stencilFunc(e.ALWAYS, 1, 255), e.stencilOp(e.REPLACE, e.REPLACE, e.REPLACE), e.stencilMask(255)
                }
            }, {
                key: "postStencil",
                value: function() {
                    var e = this.gl;
                    e.disable(e.STENCIL_TEST), e.colorMask(!0, !0, !0, !0), e.stencilMask(0)
                }
            }, {
                key: "process",
                value: function() {
                    var e = this.gl,
                        t = this.bloomSize,
                        n = this.bloomPrg;
                    e.enable(e.STENCIL_TEST), e.disable(e.CULL_FACE), e.stencilFunc(e.EQUAL, 1, 255), n.use(), this.computeKernel(t, !0), n.uKernel(this.kernel), this.hblurFbo.bind(), this.inputFbo.bindColor(n.tInput(), 0), this.quad.attribPointer(n), this.quad.draw(), this.computeKernel(t, !1), n.uKernel(this.kernel), this.vblurFbo.bind(), this.vblurFbo.clear(), this.hblurFbo.bindColor(n.tInput(), 0), this.quad.attribPointer(n), this.quad.draw(), e.disable(e.STENCIL_TEST), e.stencilMask(255), e.enable(e.CULL_FACE)
                }
            }, {
                key: "renderOutput",
                value: function(e, t) {
                    var n = this.gl;
                    this.compPrg.use(), this.compPrg.tTex(this.vblurFbo.color);
                    var i = .02;
                    this.compPrg.uOffset(e * i, -t * i + .03), this.quad.attribPointer(this.compPrg), n.enable(n.BLEND), n.blendFunc(n.ZERO, n.SRC_COLOR), this.quad.draw(), n.disable(n.BLEND)
                }
            }, {
                key: "computeKernel",
                value: function(e, t) {
                    for (var n, i, r, o = Math.sqrt(Math.PI), a = this.kernel, s = t ? 0 : 1, u = t ? 1 : 0, l = 0, c = 0; c < this.numSamples; ++c) r = 3 * c, n = 2 * c / (this.numSamples - 1) - 1, i = 4 * n, i = Math.exp(-i * i / 2) / o, l += i, a[r + s] = n * e, a[r + u] = 0, a[r + 2] = i;
                    for (c = 0; c < this.numSamples; ++c) a[3 * c + 2] /= l
                }
            }]), e
        }();
    t["default"] = p, e.exports = t["default"]
}, 169, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nattribute vec2 aPosition;\n\nvarying vec2 vTexCoord;\n\nuniform vec2 uOffset;\n\nvoid main( void ){\n  gl_Position = vec4( aPosition, 0.0, 1.0 );\n  vTexCoord = aPosition * .5 +.5 + uOffset;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tTex;\n\nvarying vec2 vTexCoord;\n\nvoid main( void ){\n  gl_FragColor = texture2D( tTex, vTexCoord ) *.6 +.4;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision mediump float;\n\n#ifndef BLOOM_SAMPLES\n  #define BLOOM_SAMPLES 32\n#endif\n\nattribute vec2 aPosition;\n\nuniform vec3 uKernel[BLOOM_SAMPLES];\n\nvarying vec2  vTexCoord;\n\n\nvoid main( void ){\n  gl_Position = vec4( aPosition, 0.0, 1.0 );\n  vTexCoord = aPosition*.5+.5;\n\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\n#ifndef BLOOM_SAMPLES\n  #define BLOOM_SAMPLES 32\n#endif\n\nprecision mediump float;\n\n// uniform float uIntensity;\nuniform sampler2D tInput;\nuniform vec3 uKernel[BLOOM_SAMPLES];\n\nvarying vec2  vTexCoord;\n\n\nvoid main( void ){\n  vec3 color = vec3(0.0);\n\n  for(int i=0; i<BLOOM_SAMPLES; ++i)\n  {\n    vec3 kernel = uKernel[i].xyz;\n    color += texture2D( tInput,vTexCoord + kernel.xy ).xyz * kernel.z;\n  }\n\n  gl_FragColor = vec4( color, 1.0 );\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\n\nuniform float uNrmPush;\nuniform mat4  uMvp;\n\n\n\nvoid main( void ){\n  vec4 pos = vec4( aPosition + aNormal * uNrmPush, 1.0 );\n  gl_Position = uMvp * pos;\n}"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision mediump float;\n\nvoid main( void ){\n  gl_FragColor = vec4( 0.0 );\n}"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }

    function o(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function a(e, t, n, i) {
        var r = new Ease;
        return r.getRatio = (0, y["default"])(e, t, n, i).get, r
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        l = n(266),
        c = i(l),
        h = n(268),
        d = i(h),
        f = n(273),
        p = (i(f), n(58)),
        m = n(31),
        v = i(m),
        g = n(274),
        y = i(g),
        _ = n(63),
        x = i(_),
        b = n(275),
        w = i(b),
        T = n(276),
        E = i(T),
        S = n(277),
        M = i(S),
        P = n(278),
        A = i(P),
        C = n(279),
        R = i(C),
        L = v["default"].mat4,
        O = v["default"].mat3,
        k = v["default"].quat,
        D = v["default"].vec3,
        F = k.create(),
        B = D.create(),
        I = O.create(),
        U = L.create(),
        N = (D.fromValues(-3, -3, -3), D.fromValues(3, 3, 3), Math.PI / 180),
        z = 3,
        V = (a(.77, 0, .34, 1), function() {
            function e(t) {
                o(this, e), this.gl = t, this.time = 0, this.gold = new d["default"](t), this.letters = [new H(t, w["default"]), new H(t, E["default"]), new H(t, M["default"]), new H(t, A["default"]), new H(t, R["default"])], this.letters[0].currentState = 4, this.letters[1].currentState = 4, this.letters[2].currentState = 4;
                for (var n = 38.3, i = -15.7, r = .493, a = n / this.letters.length, s = 0; s < this.letters.length; s++) this.letters[s].x = i + s * a, this.letters[s].y = .25, this.letters[s].setState();
                this._mvp = L.create(), this._model = L.create(), this._global = L.create(), L.scale(this._global, this._global, [r, r, r])
            }
            return u(e, [{
                key: "reset",
                value: function() {
                    for (var e = 0; e < this.letters.length; e++) this.letters[e].reset(), this.letters[e].currentState = 0;
                    this.letters[0].currentState = 4, this.letters[1].currentState = 4, this.letters[2].currentState = 4;
                    for (var e = 0; e < this.letters.length; e++) this.letters[e].setState()
                }
            }, {
                key: "load",
                value: function() {
                    for (var e = [], t = 0; t < this.letters.length; t++) e.push(this.letters[t].load());
                    return e.push(this.gold.load()), x["default"].all(e)
                }
            }, {
                key: "updateTime",
                value: function(e) {
                    this.time += e, this.time > z && (this.time -= z)
                }
            }, {
                key: "checkMouse",
                value: function(e, t) {
                    for (var n = (p.mouse.x - e / 2) / (e / 2), i = (p.mouse.y - t / 2) / (t / 2), r = 0; r < this.letters.length; r++) this.letters[r].checkMouse(n, i)
                }
            }, {
                key: "preRender",
                value: function() {
                    var e = this.gl;
                    e.enable(e.DEPTH_TEST)
                }
            }, {
                key: "postRender",
                value: function() {
                    var e = this.gl;
                    e.disable(e.DEPTH_TEST)
                }
            }, {
                key: "render",
                value: function(e) {
                    var t = this.gold.prg;
                    this.gold.prepare(e), this.preRender(), this.renderDiamonds(e, t), this.postRender()
                }
            }, {
                key: "renderBloomPass",
                value: function(e) {
                    var t = this.gold.prg;
                    this.gold.prepareBloom(e), this.preRender(), this.renderDiamonds(e, t), this.postRender()
                }
            }, {
                key: "renderBloomInput",
                value: function(e, t) {
                    this.preRender(), this.renderDiamonds(e, t), this.postRender()
                }
            }, {
                key: "renderBloomStencil",
                value: function(e, t) {
                    this.preRender(), this.renderDiamonds(e, t), this.postRender()
                }
            }, {
                key: "renderDiamonds",
                value: function(e, t) {
                    for (var n = 0; n < this.letters.length; n++) {
                        var i = this.letters[n];
                        i.geom.setup(t), i.updateMatrix(), L.multiply(U, this._global, i.transform), e.applyGlobal(U, U), e.modelViewProjectionMatrix(this._mvp, U), O.fromMat4(I, U), this.updateBounds(i), t.uMvp(this._mvp), t.uWorldMat && t.uWorldMat(U), t.uWorldRot && t.uWorldRot(I), i.geom.render()
                    }
                }
            }, {
                key: "updateBounds",
                value: function(e) {
                    var t = 3,
                        n = e.pTopLeft,
                        i = e.pBotRight;
                    n.set([1, 1, 1]), i.set([-1, -1, -1]);
                    for (var r = 0; 8 > r; r++) B[0] = 1 & r ? t : -t, B[1] = 2 & r ? t : -t, B[2] = 4 & r ? t : -t, D.transformMat4(B, B, this._mvp), n[0] = Math.min(n[0], B[0]), n[1] = Math.min(n[1], B[1]), i[0] = Math.max(i[0], B[0]), i[1] = Math.max(i[1], B[1])
                }
            }]), e
        }());
    t["default"] = V;
    var j = function() {
            function e() {
                o(this, e), this.rotationX = 0, this.rotationY = 0, this.rotationZ = 0, this.x = 0, this.y = 0, this.z = 0, this.transform = L.create()
            }
            return u(e, [{
                key: "updateMatrix",
                value: function() {
                    var e = this.transform;
                    k.identity(F), k.rotateX(F, F, this.rotationX * N), k.rotateY(F, F, this.rotationY * N), k.rotateZ(F, F, this.rotationZ * N), B[0] = this.x, B[1] = this.y, B[2] = this.z, L.fromRotationTranslation(e, F, B)
                }
            }]), e
        }(),
        G = [{
            rotationX: 0,
            rotationY: 0,
            rotationZ: 0
        }, {
            rotationX: 90,
            rotationY: 0,
            rotationZ: 0
        }, {
            rotationX: -90,
            rotationY: -180,
            rotationZ: 180
        }, {
            rotationX: 0,
            rotationY: 0,
            rotationZ: 0
        }, {
            rotationX: 90,
            rotationY: 0,
            rotationZ: 0
        }],
        H = function(e) {
            function t(e, n) {
                o(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this), this.url = n, this.geom = new c["default"](e), this.pTopLeft = D.create(), this.pBotRight = D.create(), this.over = !1, this.currentState = 0, this.rndTimeout = 0, this.brollOver = this.rollOver.bind(this), this.launchRandom()
            }
            return r(t, e), u(t, [{
                key: "reset",
                value: function() {
                    this.rotationX = 0, this.rotationY = 0, this.rotationZ = 0, clearTimeout(this.rndTimeout)
                }
            }, {
                key: "launchRandom",
                value: function() {
                    clearTimeout(this.rndTimeout), this.rndTimeout = setTimeout(this.brollOver, 6e3 * Math.random() + 3e3)
                }
            }, {
                key: "checkMouse",
                value: function(e, t) {
                    var n = e > this.pTopLeft[0] && e < this.pBotRight[0] && t > this.pTopLeft[1] && t < this.pBotRight[1];
                    n !== this.over && (this.over = n, n ? this.rollOver() : this.rollOut())
                }
            }, {
                key: "rollOver",
                value: function() {
                    this.currentState++, this.currentState >= G.length && (this.currentState = 0);
                    var e = G[this.currentState];
                    this.rotationX - e.rotationX > 180 && (this.rotationX -= 360), this.rotationY - e.rotationY > 180 && (this.rotationY -= 360), this.rotationZ - e.rotationZ > 180 && (this.rotationZ -= 360), TweenMax.to(this, .5, {
                        rotationX: e.rotationX,
                        rotationY: e.rotationY,
                        rotationZ: e.rotationZ,
                        ease: Quad.easeInOut
                    }), this.launchRandom()
                }
            }, {
                key: "setState",
                value: function() {
                    var e = G[this.currentState];
                    this.rotationX = e.rotationX, this.rotationY = e.rotationY, this.rotationZ = e.rotationZ
                }
            }, {
                key: "rollOut",
                value: function() {}
            }, {
                key: "load",
                value: function() {
                    return this.geom.load(this.url)
                }
            }]), t
        }(j);
    e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(170),
        s = i(a),
        u = n(182),
        l = i(u),
        c = n(267),
        h = i(c),
        d = function() {
            function e(t) {
                r(this, e), this.gl = t, this.alloc = this._alloc.bind(this), this.ibuffer = new l["default"](t), this.vbuffer = new s["default"](t)
            }
            return o(e, [{
                key: "load",
                value: function(e) {
                    return h["default"].loadBytes(e).then(this.alloc)
                }
            }, {
                key: "_alloc",
                value: function(e) {
                    var t = this.gl,
                        n = new Uint32Array(e, 0, 2),
                        i = n[0],
                        r = n[1],
                        o = new Uint16Array(e, 8, i),
                        a = new Uint8Array(e, 8 + 2 * i, 4 * r);
                    this.vbuffer.data(a), this.ibuffer.data(o), this.vbuffer.attrib("aPosition", 3, t.FLOAT).attrib("aTexCoord", 2, t.FLOAT).attrib("aNormal", 3, t.FLOAT)
                }
            }, {
                key: "setup",
                value: function(e) {
                    this.vbuffer.attribPointer(e), this.ibuffer.bind()
                }
            }, {
                key: "render",
                value: function() {
                    this.ibuffer.drawTriangles()
                }
            }]), e
        }();
    t["default"] = d, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e) {
        return s(e, "").then(function(e) {
            return JSON.parse(e)
        })
    }

    function o(e) {
        return s(e, "arraybuffer")
    }

    function a(e) {
        var t = l["default"].defer(),
            n = new Image;
        return n.onload = function() {
            t.resolve(n)
        }, n.onerror = function() {
            t.reject()
        }, n.crossorigin = "anonymous", n.src = e, t.promise
    }

    function s(e, t) {
        var n, i, r = "GET";
        return n = l["default"].defer(), i = new XMLHttpRequest, i.open(r, e, !0), i.responseType = t, i.onload = function() {
            return n.resolve(i.response)
        }, i.error = function(e) {
            return n.reject(e)
        }, i.send(), n.promise
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.loadJson = r, t.loadBytes = o, t.loadImage = a;
    var u = n(63),
        l = i(u);
    t["default"] = {
        loadJson: r,
        loadBytes: o,
        loadImage: a
    }
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(173),
        s = i(a),
        u = n(174),
        l = i(u),
        c = n(175),
        h = i(c),
        d = n(63),
        f = i(d),
        p = n(267),
        m = (i(p), n(269)),
        v = i(m),
        g = n(270),
        y = i(g),
        _ = .6,
        x = [_, _, _],
        b = function() {
            function e(t) {
                r(this, e), this.gl = t, this.prg = new s["default"](t), this.prg.compile(n(271), n(272)), this.envmap = new l["default"](t, t.RGBA), this.normal = new l["default"](t, t.RGB), this.normal.bind(), this.normal.repeat(), this.envExpo = 1.6, this.envGamma = .8, this.envFresnel = .3, this.specOffset = 0, this.bloomEnvExpo = 40, this.bloomEnvGamma = 18, this.bloomEnvFresnel = .3, this.envBase = v["default"].substring(0, v["default"].lastIndexOf("/") + 1), this.envName = w[0]
            }
            return o(e, [{
                key: "load",
                value: function() {
                    return f["default"].all([h["default"].load(this.envmap, this.envBase + this.envName), h["default"].load(this.normal, y["default"])]).then(this.onTexLoaded)
                }
            }, {
                key: "_onTexLoaded",
                value: function() {
                    return this.normal.bind(), this.gl.generateMipmap(this.normal.id), this.normal.setFilter(!0, !0, !1), !0
                }
            }, {
                key: "prepare",
                value: function(e) {
                    this.prg.use(), this.prg.tEnv(this.envmap), this.prg.tNrm(this.normal), this.prg.uSpecOffset(this.specOffset), this.prg.uCameraPosition(e._position), this.prg.uCameraDir(e._direction), this.prg.uColor(x), this.prg.uEnvParam(this.envExpo, this.envGamma, this.envFresnel)
                }
            }, {
                key: "prepareBloom",
                value: function(e) {
                    this.prg.use(), this.prg.tEnv(this.envmap), this.prg.tNrm(this.normal), this.prg.uCameraPosition(e._position), this.prg.uColor(x), this.prg.uEnvParam(this.bloomEnvExpo, this.bloomEnvGamma, this.bloomEnvFresnel)
                }
            }]), e
        }();
    t["default"] = b;
    var w = ["studio019.png"];
    e.exports = t["default"]
}, function(e, t, n) {
    e.exports = n.p + "experiences/proud/assets/studio019.png"
}, function(e, t, n) {
    e.exports = n.p + "experiences/proud/assets/noise.png"
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uMvp;\nuniform mat4 uWorldMat;\nuniform mat3 uWorldRot;\n\nvarying vec3 vWorldPosition;\nvarying vec3 vWorldNormal;\nvarying vec2 vTexCoord;\n\n\nvoid main( void ){\n  vec4 pos = vec4( aPosition, 1.0 );\n  gl_Position = uMvp * pos;\n\n  vWorldPosition   = (uWorldMat * pos).xyz;\n  vWorldNormal     = normalize( uWorldRot * aNormal );\n  vTexCoord        = aTexCoord * 4.0;\n\n}";
}, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tEnv;\nuniform sampler2D tNrm;\nuniform vec3 uCameraPosition;\nuniform vec3 uColor;\nuniform vec3 uEnvParam;\nuniform vec3 uCameraDir;\nuniform float uSpecOffset;\n\nvarying vec3 vWorldPosition;\nvarying vec3 vWorldNormal;\nvarying vec2 vTexCoord;\n\nconst float gamma = 2.2;\n\nvec2 vec3_to_octahedral(in vec3 v) {\n  v /= dot( vec3(1.0),abs(v) );\n  vec2 N=abs(v.zx)-vec2(1.0,1.0);\n  vec2 O=vec2(v.x<0.0?N.x:-N.x,v.z<0.0?N.y:-N.y);\n  return (v.y<0.0)?O:v.xz;\n}\n\nvec3 SpecularIBL( vec3 skyUV )\n{\n  vec2 uvsOcta = vec2(0.5,0.5) + vec3_to_octahedral( skyUV )*vec2(0.5,0.5) ;\n  vec2 nrmBump = texture2D( tNrm, vTexCoord ).rg - vec2(.5);\n  uvsOcta += nrmBump.xy * .05 ;\n  vec4 hdr = texture2D( tEnv, uvsOcta );\n  return hdr.rgb * pow( 2.0, (hdr.a*256.0) - 128.0 );\n}\n\n\n\nvoid main( void ){\n\n  vec3 wNrm = normalize( vWorldNormal );\n  vec3 viewDir = normalize( uCameraPosition - vWorldPosition );\n  vec3 worldReflect = reflect( viewDir, wNrm );\n\n  vec3 specular = uSpecOffset + SpecularIBL( worldReflect );\n\n\n  float specClamp = dot( uCameraDir, worldReflect ) - .3;\n  specClamp = clamp( -specClamp*5.0, .2, 1.0 );\n  float nrmOccl = step( 0.0, dot( viewDir, wNrm ) );\n  // expo/gamma\n  specular = nrmOccl * specClamp * uEnvParam.x * pow( specular, vec3(uEnvParam.y) );\n  // fresnel\n  float fresnel = pow( 1.0-dot( viewDir, wNrm ), uEnvParam.z );\n  specular *= fresnel;\n\n  vec3 color = uColor * specular;\n\n\n  gl_FragColor = vec4( color, 1.0 );\n}"
}, function(e, t) {
    e.exports = [{
        frame: 1,
        cx: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 90,
            rotationZ: 0,
            offsetX: .8687890227141084,
            offsetZ: 0,
            offsetY: 0
        },
        cy: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 0,
            offsetX: 0,
            offsetZ: 0,
            offsetY: 0
        },
        cz: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 360,
            offsetX: 0,
            offsetZ: 1,
            offsetY: 0
        },
        d: {
            x: 0,
            y: -1.6142085275397653,
            z: -.06939180414147117,
            rotationX: 90,
            rotationY: 90,
            rotationZ: 0
        }
    }, {
        frame: 40,
        cx: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 90,
            rotationZ: 360,
            offsetX: .8687890227141084,
            offsetZ: 0,
            offsetY: 0
        },
        cy: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 0,
            offsetX: 0,
            offsetZ: 0,
            offsetY: 0
        },
        cz: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 0,
            offsetX: 0,
            offsetZ: 1,
            offsetY: 0
        },
        d: {
            x: 0,
            y: -1.6142085275397653,
            z: -.06939180414147117,
            rotationX: 90,
            rotationY: 90,
            rotationZ: 0
        }
    }, {
        frame: 50,
        cx: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 90,
            rotationZ: 269.984416340675,
            offsetX: 1.1761140992964867,
            offsetZ: 0,
            offsetY: 0
        },
        cy: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 0,
            offsetX: 0,
            offsetZ: 0,
            offsetY: 0
        },
        cz: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 0,
            offsetX: 0,
            offsetZ: 1.0658263475233358,
            offsetY: 0
        },
        d: {
            x: 0,
            y: -1.6142085275397653,
            z: -.06939180414147117,
            rotationX: 19.851795319167277,
            rotationY: 67.49610408516875,
            rotationZ: 59.55538595750184
        }
    }, {
        frame: 50,
        cx: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 90,
            rotationZ: 198.5179531916728,
            offsetX: 1.1761140992964867,
            offsetZ: 0,
            offsetY: 0
        },
        cy: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 39.70359063833455,
            rotationZ: 0,
            offsetX: 0,
            offsetZ: 0,
            offsetY: 1.0658263475233358
        },
        cz: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 0,
            offsetX: 0,
            offsetZ: 1.027173527672305,
            offsetY: 0
        },
        d: {
            x: 0,
            y: -1.6142085275397653,
            z: -.06939180414147117,
            rotationX: 19.851795319167277,
            rotationY: 67.49610408516875,
            rotationZ: 59.55538595750184
        }
    }, {
        frame: 60,
        cx: {
            x: 0,
            y: 0,
            z: .353,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 200,
            offsetX: 1,
            offsetZ: 0,
            offsetY: 0
        },
        cy: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 0,
            offsetX: .2498701361722917,
            offsetZ: .2498701361722917,
            offsetY: 1.0880570496482433
        },
        cz: {
            x: 0,
            y: 0,
            z: -.09090909090909083,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 0,
            offsetX: .5145607404278554,
            offsetZ: 1,
            offsetY: 0
        },
        d: {
            x: -.022230702124908408,
            y: 0,
            z: 0,
            rotationX: 107,
            rotationY: 0,
            rotationZ: 0
        }
    }, {
        frame: 60,
        cx: {
            x: 0,
            y: 0,
            z: .353,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 178.6661578725055,
            offsetX: 1,
            offsetZ: 0,
            offsetY: 0
        },
        cy: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 47.64430876600147,
            rotationY: 0,
            rotationZ: 0,
            offsetX: 0,
            offsetZ: 0,
            offsetY: 1
        },
        cz: {
            x: 0,
            y: 0,
            z: -.09090909090909083,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 0,
            offsetX: 0,
            offsetZ: 1,
            offsetY: 0
        },
        d: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 59.55538595750184,
            rotationY: 43.67394970216801,
            rotationZ: 83.37754034050256
        }
    }, {
        frame: 60,
        cx: {
            x: 0,
            y: 0,
            z: .353,
            rotationX: 0,
            rotationY: 0,
            rotationZ: 178.6661578725055,
            offsetX: 1,
            offsetZ: .07323658156497004,
            offsetY: -.5884899290739378
        },
        cy: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 47.64430876600147,
            rotationY: 0,
            rotationZ: 0,
            offsetX: -.03705117020818083,
            offsetZ: .5143875886575779,
            offsetY: 1
        },
        cz: {
            x: 0,
            y: 0,
            z: -.09090909090909083,
            rotationX: 115.14041285117023,
            rotationY: 0,
            rotationZ: 0,
            offsetX: 0,
            offsetZ: .8452508439770323,
            offsetY: -.8090654326202413
        },
        d: {
            x: 0,
            y: 0,
            z: 0,
            rotationX: 127.05149004267058,
            rotationY: 27.792513446834192,
            rotationZ: 147
        }
    }]
}, function(e, t) {
    function n(e, t) {
        return 1 - 3 * t + 3 * e
    }

    function i(e, t) {
        return 3 * t - 6 * e
    }

    function r(e) {
        return 3 * e
    }

    function o(e, t, o) {
        return ((n(t, o) * e + i(t, o)) * e + r(t)) * e
    }

    function a(e, t, o) {
        return 3 * n(t, o) * e * e + 2 * i(t, o) * e + r(t)
    }

    function s(e, t, n, i, r) {
        var a, s, u = 0;
        do s = t + (n - t) / 2, a = o(s, i, r) - e, a > 0 ? n = s : t = s; while (Math.abs(a) > d && ++u < f);
        return s
    }

    function u(e, t, n, i) {
        for (var r = 0; c > r; ++r) {
            var s = a(t, n, i);
            if (0 === s) return t;
            var u = o(t, n, i) - e;
            t -= u / s
        }
        return t
    }

    function l(e, t, n, i) {
        if (4 === arguments.length) return new l([e, t, n, i]);
        if (!(this instanceof l)) return new l(e);
        if (!e || 4 !== e.length) throw new Error("BezierEasing: points must contains 4 values");
        for (var r = 0; 4 > r; ++r)
            if ("number" != typeof e[r] || isNaN(e[r]) || !isFinite(e[r])) throw new Error("BezierEasing: points should be integers.");
        if (e[0] < 0 || e[0] > 1 || e[2] < 0 || e[2] > 1) throw new Error("BezierEasing x values must be in [0, 1] range.");
        this._str = "BezierEasing(" + e + ")", this._css = "cubic-bezier(" + e + ")", this._p = e, this._mSampleValues = v ? new Float32Array(p) : new Array(p), this._precomputed = !1, this.get = this.get.bind(this)
    }
    var c = 4,
        h = .001,
        d = 1e-7,
        f = 10,
        p = 11,
        m = 1 / (p - 1),
        v = "function" == typeof Float32Array;
    l.prototype = {
        get: function(e) {
            var t = this._p[0],
                n = this._p[1],
                i = this._p[2],
                r = this._p[3];
            return this._precomputed || this._precompute(), t === n && i === r ? e : 0 === e ? 0 : 1 === e ? 1 : o(this._getTForX(e), n, r)
        },
        getPoints: function() {
            return this._p
        },
        toString: function() {
            return this._str
        },
        toCSS: function() {
            return this._css
        },
        _precompute: function() {
            var e = this._p[0],
                t = this._p[1],
                n = this._p[2],
                i = this._p[3];
            this._precomputed = !0, (e !== t || n !== i) && this._calcSampleValues()
        },
        _calcSampleValues: function() {
            for (var e = this._p[0], t = this._p[2], n = 0; p > n; ++n) this._mSampleValues[n] = o(n * m, e, t)
        },
        _getTForX: function(e) {
            for (var t = this._p[0], n = this._p[2], i = this._mSampleValues, r = 0, o = 1, l = p - 1; o !== l && i[o] <= e; ++o) r += m;
            --o;
            var c = (e - i[o]) / (i[o + 1] - i[o]),
                d = r + c * m,
                f = a(d, t, n);
            return f >= h ? u(e, d, t, n) : 0 === f ? d : s(e, r, r + m, t, n)
        }
    }, l.css = {
        ease: l.ease = l(.25, .1, .25, 1),
        linear: l.linear = l(0, 0, 1, 1),
        "ease-in": l.easeIn = l(.42, 0, 1, 1),
        "ease-out": l.easeOut = l(0, 0, .58, 1),
        "ease-in-out": l.easeInOut = l(.42, 0, .58, 1)
    }, e.exports = l
}, function(e, t, n) {
    e.exports = n.p + "experiences/proud/assets/p.bin"
}, function(e, t, n) {
    e.exports = n.p + "experiences/proud/assets/r.bin"
}, function(e, t, n) {
    e.exports = n.p + "experiences/proud/assets/o.bin"
}, function(e, t, n) {
    e.exports = n.p + "experiences/proud/assets/u.bin"
}, function(e, t, n) {
    e.exports = n.p + "experiences/proud/assets/d.bin"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(31),
        s = i(a),
        u = n(58),
        l = s["default"].mat4,
        c = s["default"].vec3,
        h = (c.create(), c.fromValues(0, 1, 0), c.create(), l.create()),
        d = Math.PI / 180,
        f = function() {
            function e() {
                r(this, e), this.fov = 60, this.distance = 80, this.yOffset = 0, this.deltaAngle = 0, this._view = new Float32Array(16), this._proj = new Float32Array(16), this._viewProj = new Float32Array(16), this._global = new Float32Array(16), this._mousem = new Float32Array(16), this._position = c.create(), this._direction = c.create(), this.grX = 250, this.grY = 183, this.grZ = 274
            }
            return o(e, [{
                key: "update",
                value: function(e, t, n, i) {
                    var r = (u.mouse.x - n / 2) / n / 2,
                        o = (u.mouse.y - i / 2) / i / 2;
                    l.identity(this._mousem), l.rotateX(this._mousem, this._mousem, 2 * -o), l.rotateY(this._mousem, this._mousem, 2 * -r);
                    var a = 20 * Math.atan(1 / this.distance);
                    l.perspective(this._proj, a, e / t, Math.max(.1, this.distance - 15), this.distance + 15), l.identity(this._view), this._view[14] = this.distance, this._view[12] = 0, this._view[13] = 0, this.updateViewProjectionMatrix()
                }
            }, {
                key: "applyGlobal",
                value: function(e, t) {
                    l.multiply(e, this._global, t)
                }
            }, {
                key: "modelViewProjectionMatrix",
                value: function(e, t) {
                    l.multiply(e, this._viewProj, t)
                }
            }, {
                key: "updateViewProjectionMatrix",
                value: function() {
                    l.identity(this._global), l.rotateX(this._global, this._global, this.grX * d), l.rotateY(this._global, this._global, this.grY * d), l.rotateZ(this._global, this._global, this.grZ * d), l.multiply(this._global, this._global, this._mousem), l.multiply(h, this._global, this._view), this._position[0] = h[12], this._position[1] = h[13], this._position[2] = h[14], this._direction[0] = h[8], this._direction[1] = h[9], this._direction[2] = h[10], l.invert(h, h), l.multiply(this._viewProj, this._proj, h)
                }
            }, {
                key: "modelViewMatrix",
                value: function(e, t) {
                    l.multiply(e, t, this._view)
                }
            }]), e
        }();
    t["default"] = f, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(258),
        s = i(a),
        u = n(282),
        l = i(u),
        c = n(173),
        h = i(c),
        d = n(174),
        f = i(d),
        p = n(175),
        m = i(p),
        v = .9,
        g = function() {
            function e(t) {
                r(this, e), this.gl = t, this.quad = new s["default"](t), this.prg = new h["default"](t), this.prg.compile(n(283), n(284)), this.tex = new f["default"](t, t.LUMINANCE), this.tex.bind(), t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL, !0), this.opacity = 1
            }
            return o(e, [{
                key: "load",
                value: function() {
                    return m["default"].load(this.tex, l["default"])
                }
            }, {
                key: "render",
                value: function(e, t) {
                    if (0 !== this.opacity) {
                        var n = this.gl;
                        this.prg.use(), this.quad.attribPointer(this.prg), this.prg.tTex(this.tex), this.prg.uVPScale(t / e * v, .25 * v), this.prg.uOpacity(this.opacity), n.enable(n.BLEND), n.blendFunc(n.SRC_ALPHA, n.ONE_MINUS_SRC_ALPHA), this.quad.draw(), n.disable(n.BLEND)
                    }
                }
            }]), e
        }();
    t["default"] = g, e.exports = t["default"]
}, function(e, t, n) {
    e.exports = n.p + "experiences/proud/assets/text.png"
}, 177, function(e, t) {
    e.exports = "#define GLSLIFY 1\nprecision highp float;\n\nuniform sampler2D tTex;\nuniform float uOpacity;\n\nvarying vec2 vTexCoord;\n\nvoid main( void ){\n  float alpha = texture2D( tTex, vTexCoord ).r;\n  gl_FragColor = vec4( 1.0, 1.0, 1.0, alpha * uOpacity );\n}\n"
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        s = function(e, t, n) {
            for (var i = !0; i;) {
                var r = e,
                    o = t,
                    a = n;
                i = !1, null === r && (r = Function.prototype);
                var s = Object.getOwnPropertyDescriptor(r, o);
                if (void 0 !== s) {
                    if ("value" in s) return s.value;
                    var u = s.get;
                    if (void 0 === u) return;
                    return u.call(a)
                }
                var l = Object.getPrototypeOf(r);
                if (null === l) return;
                e = l, t = o, n = a, i = !0, s = l = void 0
            }
        },
        u = n(26),
        l = i(u),
        c = n(286),
        h = i(c),
        d = n(21),
        f = i(d),
        p = function(e) {
            function t() {
                r(this, t), s(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, "pulse", null), this.dom = document.getElementById(this.domId)
            }
            return o(t, e), a(t, [{
                key: "register",
                value: function() {
                    return this.expe = new h["default"](this.dom, function() {
                        f["default"].emit("experiences:unselect")
                    }), {}
                }
            }, {
                key: "load",
                value: function(e) {
                    var t = this;
                    this.expe.load().then(function() {
                        e(t)
                    })
                }
            }, {
                key: "active",
                value: function() {
                    this.expe.play()
                }
            }, {
                key: "inactive",
                value: function(e) {
                    this.expe.stop(), e && e()
                }
            }, {
                key: "reset",
                value: function() {}
            }, {
                key: "show",
                value: function() {
                    this.dom.classList.remove("hide")
                }
            }, {
                key: "hide",
                value: function() {
                    this.dom.classList.add("hide")
                }
            }]), t
        }(l["default"]);
    t["default"] = p, e.exports = t["default"]
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        a = n(287),
        s = i(a),
        u = n(201),
        l = (i(u), n(112)),
        c = i(l),
        h = n(63),
        d = i(h),
        f = {
            width: 685,
            height: 84
        },
        p = new THREE.Vector3,
        m = 1e3,
        v = 500,
        g = 2500;
    new THREE.Vector3(-5e3, -5e3, -5e3);
    Number.prototype.clamp = function(e, t) {
        return Math.min(Math.max(this, e), t)
    };
    var y = function() {
        function e(t) {
            var n = arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1];
            r(this, e), this.doneCallback = n, this.callbackDone = !1, this.previewStoped = !1, this.bRender = this.render.bind(this), this.previewRender = this._previewRender.bind(this), this.width = window.innerWidth, this.height = window.innerHeight, this.camera = new THREE.PerspectiveCamera(40, this.width / this.height, 1, 3e3), this.camera.position.z = 1e3, this.camera.lookAt(p), this.scene = new THREE.Scene, this.renderer = new THREE.WebGLRenderer, this.renderer.setSize(this.width * window.devicePixelRatio, this.height * window.devicePixelRatio), this.renderer.domElement.style.width = this.width + "px", this.renderer.domElement.style.height = this.height + "px", this.renderer.domElement.style.position = "absolute", this.renderer.domElement.style.left = "0px", this.renderer.domElement.style.top = "0px", t.appendChild(this.renderer.domElement), this.renderer.autoClear = !1, this.noiseBackground = new c["default"](this.renderer.getContext()), this.composer = new THREE.EffectComposer(this.renderer);
            var i = this.noiseBackground.getComposerPass();
            this.composer.addPass(i);
            var o = new THREE.RenderPass(this.scene, this.camera);
            o.clear = !1, this.composer.addPass(o), this.glitchSetted = null, this.glitchPass = new THREE.GlitchPass, this.composer.addPass(this.glitchPass), this.effect = new THREE.ShaderPass(THREE.RGBShiftShader), this.effect.uniforms.amount.value = .005, this.effect.renderToScreen = !0, this.effect.material.transparent = !0, this.composer.addPass(this.effect), this.playing = !1, window.addEventListener("resize", this.resize.bind(this))
        }
        return o(e, [{
            key: "load",
            value: function() {
                var e = this,
                    t = d["default"].promise(function(t, n) {
                        e.startTime = Date.now(), e.initBackground(function() {
                            window.requestAnimationFrame(e.previewRender), t()
                        })
                    });
                return t
            }
        }, {
            key: "resize",
            value: function() {
                this.width = window.innerWidth, this.height = window.innerHeight, this.camera.aspect = this.width / this.height, this.camera.updateProjectionMatrix(), this.renderer.setSize(this.width * window.devicePixelRatio, this.height * window.devicePixelRatio), this.renderer.domElement.style.width = this.width + "px", this.renderer.domElement.style.height = this.height + "px"
            }
        }, {
            key: "play",
            value: function() {
                this.playing = !0, this.startTime = Date.now(), window.requestAnimationFrame(this.bRender)
            }
        }, {
            key: "stop",
            value: function() {
                this.playing = !1
            }
        }, {
            key: "initBackground",
            value: function() {
                var e = this,
                    t = arguments.length <= 0 || void 0 === arguments[0] ? null : arguments[0],
                    n = 0,
                    i = 0,
                    r = new THREE.ImageLoader;
                r.load(s["default"], function(r) {
                    var o = new THREE.Texture(r);
                    o.needsUpdate = !0;
                    var a = new THREE.MeshBasicMaterial({
                        color: 16777215,
                        map: o
                    });
                    a.transparent = !0;
                    var s = new THREE.PlaneGeometry(f.width, f.height, 1);
                    e.addPlane(n, i, a, s), t && t()
                })
            }
        }, {
            key: "addPlane",
            value: function(e, t, n, i) {
                var r = new THREE.Mesh(i, n);
                r.position.x = 0, r.position.y = 0, r.position.z = -10, this.plane = r, this.scene.add(r)
            }
        }, {
            key: "render",
            value: function() {
                if (!this.playing) return void this.renderer.render(this.scene, this.camera);
                var e = Date.now() - this.startTime;
                e > v && v + m > e ? this.glitchPass.uniforms.byp.value = 0 : this.glitchPass.uniforms.byp.value = 1, e > g && g + m > e && (this.glitchPass.uniforms.byp.value = 0), e > g + m + 500 && (this.plane.material.opacity -= .035), e > g + m && this.callback(), this.composer.render(), window.requestAnimationFrame(this.bRender)
            }
        }, {
            key: "callback",
            value: function() {
                this.doneCallback && !this.callbackDone && (this.callbackDone = !0, this.doneCallback())
            }
        }, {
            key: "_previewRender",
            value: function() {
                arguments.length <= 0 || void 0 === arguments[0] ? !1 : arguments[0];
                this.effect.uniforms.amount.value = 0, this.effect.uniforms.angle.value = 0, this.composer.render(), BrowserDetect.isDesktop
            }
        }]), e
    }();
    t["default"] = y, e.exports = t["default"]
}, function(e, t, n) {
    e.exports = n.p + "experiences/pulse/pulse.png"
}]);